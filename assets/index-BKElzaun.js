(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function hI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $p={exports:{}},yc={},Hp={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1;function fI(){if(M1)return je;M1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _($){return $===null||typeof $!="object"?null:($=v&&$[v]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,I={};function T($,ee,Ce){this.props=$,this.context=ee,this.refs=I,this.updater=Ce||E}T.prototype.isReactComponent={},T.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function M(){}M.prototype=T.prototype;function V($,ee,Ce){this.props=$,this.context=ee,this.refs=I,this.updater=Ce||E}var j=V.prototype=new M;j.constructor=V,b(j,T.prototype),j.isPureReactComponent=!0;var Q=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C($,ee,Ce){var Ae,De={},Ve=null,Ge=null;if(ee!=null)for(Ae in ee.ref!==void 0&&(Ge=ee.ref),ee.key!==void 0&&(Ve=""+ee.key),ee)z.call(ee,Ae)&&!A.hasOwnProperty(Ae)&&(De[Ae]=ee[Ae]);var Ue=arguments.length-2;if(Ue===1)De.children=Ce;else if(1<Ue){for(var Xe=Array(Ue),un=0;un<Ue;un++)Xe[un]=arguments[un+2];De.children=Xe}if($&&$.defaultProps)for(Ae in Ue=$.defaultProps,Ue)De[Ae]===void 0&&(De[Ae]=Ue[Ae]);return{$$typeof:n,type:$,key:Ve,ref:Ge,props:De,_owner:W.current}}function N($,ee){return{$$typeof:n,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function O($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function B($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ce){return ee[Ce]})}var H=/\/+/g;function L($,ee){return typeof $=="object"&&$!==null&&$.key!=null?B(""+$.key):ee.toString(36)}function Ne($,ee,Ce,Ae,De){var Ve=typeof $;(Ve==="undefined"||Ve==="boolean")&&($=null);var Ge=!1;if($===null)Ge=!0;else switch(Ve){case"string":case"number":Ge=!0;break;case"object":switch($.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=$,De=De(Ge),$=Ae===""?"."+L(Ge,0):Ae,Q(De)?(Ce="",$!=null&&(Ce=$.replace(H,"$&/")+"/"),Ne(De,ee,Ce,"",function(un){return un})):De!=null&&(O(De)&&(De=N(De,Ce+(!De.key||Ge&&Ge.key===De.key?"":(""+De.key).replace(H,"$&/")+"/")+$)),ee.push(De)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",Q($))for(var Ue=0;Ue<$.length;Ue++){Ve=$[Ue];var Xe=Ae+L(Ve,Ue);Ge+=Ne(Ve,ee,Ce,Xe,De)}else if(Xe=_($),typeof Xe=="function")for($=Xe.call($),Ue=0;!(Ve=$.next()).done;)Ve=Ve.value,Xe=Ae+L(Ve,Ue++),Ge+=Ne(Ve,ee,Ce,Xe,De);else if(Ve==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ge}function He($,ee,Ce){if($==null)return $;var Ae=[],De=0;return Ne($,Ae,"","",function(Ve){return ee.call(Ce,Ve,De++)}),Ae}function kt($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(Ce){($._status===0||$._status===-1)&&($._status=1,$._result=Ce)},function(Ce){($._status===0||$._status===-1)&&($._status=2,$._result=Ce)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var Se={current:null},ie={transition:null},me={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:W};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:He,forEach:function($,ee,Ce){He($,function(){ee.apply(this,arguments)},Ce)},count:function($){var ee=0;return He($,function(){ee++}),ee},toArray:function($){return He($,function(ee){return ee})||[]},only:function($){if(!O($))throw Error("React.Children.only expected to receive a single React element child.");return $}},je.Component=T,je.Fragment=t,je.Profiler=s,je.PureComponent=V,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,je.act=ae,je.cloneElement=function($,ee,Ce){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Ae=b({},$.props),De=$.key,Ve=$.ref,Ge=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Ve=ee.ref,Ge=W.current),ee.key!==void 0&&(De=""+ee.key),$.type&&$.type.defaultProps)var Ue=$.type.defaultProps;for(Xe in ee)z.call(ee,Xe)&&!A.hasOwnProperty(Xe)&&(Ae[Xe]=ee[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ee[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=Ce;else if(1<Xe){Ue=Array(Xe);for(var un=0;un<Xe;un++)Ue[un]=arguments[un+2];Ae.children=Ue}return{$$typeof:n,type:$.type,key:De,ref:Ve,props:Ae,_owner:Ge}},je.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},je.createElement=C,je.createFactory=function($){var ee=C.bind(null,$);return ee.type=$,ee},je.createRef=function(){return{current:null}},je.forwardRef=function($){return{$$typeof:f,render:$}},je.isValidElement=O,je.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:kt}},je.memo=function($,ee){return{$$typeof:m,type:$,compare:ee===void 0?null:ee}},je.startTransition=function($){var ee=ie.transition;ie.transition={};try{$()}finally{ie.transition=ee}},je.unstable_act=ae,je.useCallback=function($,ee){return Se.current.useCallback($,ee)},je.useContext=function($){return Se.current.useContext($)},je.useDebugValue=function(){},je.useDeferredValue=function($){return Se.current.useDeferredValue($)},je.useEffect=function($,ee){return Se.current.useEffect($,ee)},je.useId=function(){return Se.current.useId()},je.useImperativeHandle=function($,ee,Ce){return Se.current.useImperativeHandle($,ee,Ce)},je.useInsertionEffect=function($,ee){return Se.current.useInsertionEffect($,ee)},je.useLayoutEffect=function($,ee){return Se.current.useLayoutEffect($,ee)},je.useMemo=function($,ee){return Se.current.useMemo($,ee)},je.useReducer=function($,ee,Ce){return Se.current.useReducer($,ee,Ce)},je.useRef=function($){return Se.current.useRef($)},je.useState=function($){return Se.current.useState($)},je.useSyncExternalStore=function($,ee,Ce){return Se.current.useSyncExternalStore($,ee,Ce)},je.useTransition=function(){return Se.current.useTransition()},je.version="18.3.1",je}var D1;function Mg(){return D1||(D1=1,Hp.exports=fI()),Hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1;function pI(){if(V1)return yc;V1=1;var n=Mg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,d,m){var g,v={},_=null,E=null;m!==void 0&&(_=""+m),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:f,key:_,ref:E,props:v,_owner:s.current}}return yc.Fragment=t,yc.jsx=c,yc.jsxs=c,yc}var L1;function mI(){return L1||(L1=1,$p.exports=pI()),$p.exports}var l=mI(),P=Mg();const Nt=hI(P);var Fd={},Kp={exports:{}},wn={},qp={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1;function gI(){return O1||(O1=1,(function(n){function e(ie,me){var ae=ie.length;ie.push(me);e:for(;0<ae;){var $=ae-1>>>1,ee=ie[$];if(0<s(ee,me))ie[$]=me,ie[ae]=ee,ae=$;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],ae=ie.pop();if(ae!==me){ie[0]=ae;e:for(var $=0,ee=ie.length,Ce=ee>>>1;$<Ce;){var Ae=2*($+1)-1,De=ie[Ae],Ve=Ae+1,Ge=ie[Ve];if(0>s(De,ae))Ve<ee&&0>s(Ge,De)?(ie[$]=Ge,ie[Ve]=ae,$=Ve):(ie[$]=De,ie[Ae]=ae,$=Ae);else if(Ve<ee&&0>s(Ge,ae))ie[$]=Ge,ie[Ve]=ae,$=Ve;else break e}}return me}function s(ie,me){var ae=ie.sortIndex-me.sortIndex;return ae!==0?ae:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],m=[],g=1,v=null,_=3,E=!1,b=!1,I=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ie){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function Q(ie){if(I=!1,j(ie),!b)if(t(d)!==null)b=!0,kt(z);else{var me=t(m);me!==null&&Se(Q,me.startTime-ie)}}function z(ie,me){b=!1,I&&(I=!1,M(C),C=-1),E=!0;var ae=_;try{for(j(me),v=t(d);v!==null&&(!(v.expirationTime>me)||ie&&!B());){var $=v.callback;if(typeof $=="function"){v.callback=null,_=v.priorityLevel;var ee=$(v.expirationTime<=me);me=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(d)&&r(d),j(me)}else r(d);v=t(d)}if(v!==null)var Ce=!0;else{var Ae=t(m);Ae!==null&&Se(Q,Ae.startTime-me),Ce=!1}return Ce}finally{v=null,_=ae,E=!1}}var W=!1,A=null,C=-1,N=5,O=-1;function B(){return!(n.unstable_now()-O<N)}function H(){if(A!==null){var ie=n.unstable_now();O=ie;var me=!0;try{me=A(!0,ie)}finally{me?L():(W=!1,A=null)}}else W=!1}var L;if(typeof V=="function")L=function(){V(H)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,He=Ne.port2;Ne.port1.onmessage=H,L=function(){He.postMessage(null)}}else L=function(){T(H,0)};function kt(ie){A=ie,W||(W=!0,L())}function Se(ie,me){C=T(function(){ie(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){b||E||(b=!0,kt(z))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(_){case 1:case 2:case 3:var me=3;break;default:me=_}var ae=_;_=me;try{return ie()}finally{_=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=_;_=ie;try{return me()}finally{_=ae}},n.unstable_scheduleCallback=function(ie,me,ae){var $=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?$+ae:$):ae=$,ie){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ae+ee,ie={id:g++,callback:me,priorityLevel:ie,startTime:ae,expirationTime:ee,sortIndex:-1},ae>$?(ie.sortIndex=ae,e(m,ie),t(d)===null&&ie===t(m)&&(I?(M(C),C=-1):I=!0,Se(Q,ae-$))):(ie.sortIndex=ee,e(d,ie),b||E||(b=!0,kt(z))),ie},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ie){var me=_;return function(){var ae=_;_=me;try{return ie.apply(this,arguments)}finally{_=ae}}}})(Gp)),Gp}var B1;function yI(){return B1||(B1=1,qp.exports=gI()),qp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1;function vI(){if(F1)return wn;F1=1;var n=Mg(),e=yI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function _(i){return d.call(v,i)?!0:d.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function E(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,o,u,p){if(o===null||typeof o>"u"||E(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function I(i,o,u,p,y,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];T[o]=new I(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(M,V);T[o]=new I(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(M,V);T[o]=new I(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(M,V);T[o]=new I(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function j(i,o,u,p){var y=T.hasOwnProperty(o)?T[o]:null;(y!==null?y.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,u,y,p)&&(u=null),p||y===null?_(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):y.mustUseProperty?i[y.propertyName]=u===null?y.type===3?!1:"":u:(o=y.attributeName,p=y.attributeNamespace,u===null?i.removeAttribute(o):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,$;function ee(i){if($===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+i}var Ce=!1;function Ae(i,o){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var y=Y.stack.split(`
`),x=p.stack.split(`
`),S=y.length-1,D=x.length-1;1<=S&&0<=D&&y[S]!==x[D];)D--;for(;1<=S&&0<=D;S--,D--)if(y[S]!==x[D]){if(S!==1||D!==1)do if(S--,D--,0>D||y[S]!==x[D]){var F=`
`+y[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=D);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function De(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case W:return"Portal";case N:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case Ne:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case H:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:Ve(i.type)||"Memo";case kt:o=i._payload,i=i._init;try{return Ve(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(o);case 8:return o===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function un(i){var o=Xe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,x=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,x.call(this,S)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Fo(i){i._valueTracker||(i._valueTracker=un(i))}function bl(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Xe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function zo(i,o){var u=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Su(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Uo(i,o){o=o.checked,o!=null&&j(i,"checked",o,!1)}function Ws(i,o){Uo(i,o);var u=Ue(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?bt(i,o.type,u):o.hasOwnProperty("defaultValue")&&bt(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function El(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function bt(i,o,u){(o!=="number"||Vi(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var yt=Array.isArray;function nr(i,o,u,p){if(i=i.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=o.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function Sl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Tl(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(yt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function Tu(i,o){var u=Ue(o.value),p=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Li(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Il(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Il(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Oi,Iu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,y){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,y)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Oi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function $s(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cu=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(i){Cu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Bi[o]=Bi[i]})});function Fi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Bi.hasOwnProperty(i)&&Bi[i]?(""+o).trim():o+"px"}function $o(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=Fi(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,y):i[u]=y}}var Cl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(i,o){if(o){if(Cl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ho(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zi=null;function Ko(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ei=null,ti=null,ht=null;function Al(i){if(i=nc(i)){if(typeof ei!="function")throw Error(t(280));var o=i.stateNode;o&&(o=td(o),ei(i.stateNode,i.type,o))}}function Ui(i){ti?ht?ht.push(i):ht=[i]:ti=i}function Wi(){if(ti){var i=ti,o=ht;if(ht=ti=null,Al(i),o)for(i=0;i<o.length;i++)Al(o[i])}}function Au(i,o){return i(o)}function Ru(){}var br=!1;function Pu(i,o,u){if(br)return i(o,u);br=!0;try{return Au(i,o,u)}finally{br=!1,(ti!==null||ht!==null)&&(Ru(),Wi())}}function Hs(i,o){var u=i.stateNode;if(u===null)return null;var p=td(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var $i=!1;if(f)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{$i=!1}function ju(i,o,u,p,y,x,S,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(ne){this.onError(ne)}}var ni=!1,Er=null,qo=!1,Fn=null,Nu={onError:function(i){ni=!0,Er=i}};function Mu(i,o,u,p,y,x,S,D,F){ni=!1,Er=null,ju.apply(Nu,arguments)}function Rl(i,o,u,p,y,x,S,D,F){if(Mu.apply(this,arguments),ni){if(ni){var Y=Er;ni=!1,Er=null}else throw Error(t(198));qo||(qo=!0,Fn=Y)}}function ir(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Pl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Du(i){if(ir(i)!==i)throw Error(t(188))}function Vu(i){var o=i.alternate;if(!o){if(o=ir(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return Du(y),i;if(x===p)return Du(y),o;x=x.sibling}throw Error(t(188))}if(u.return!==p.return)u=y,p=x;else{for(var S=!1,D=y.child;D;){if(D===u){S=!0,u=y,p=x;break}if(D===p){S=!0,p=y,u=x;break}D=D.sibling}if(!S){for(D=x.child;D;){if(D===u){S=!0,u=x,p=y;break}if(D===p){S=!0,p=x,u=y;break}D=D.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Lu(i){return i=Vu(i),i!==null?Ks(i):null}function Ks(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ks(i);if(o!==null)return o;i=i.sibling}return null}var jl=e.unstable_scheduleCallback,Go=e.unstable_cancelCallback,qs=e.unstable_shouldYield,ri=e.unstable_requestPaint,tt=e.unstable_now,_f=e.unstable_getCurrentPriorityLevel,Qo=e.unstable_ImmediatePriority,Nl=e.unstable_UserBlockingPriority,Gs=e.unstable_NormalPriority,Ml=e.unstable_LowPriority,Yo=e.unstable_IdlePriority,Qs=null,Sn=null;function Ou(i){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Qs,i,void 0,(i.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:Ys,Sr=Math.log,zn=Math.LN2;function Ys(i){return i>>>=0,i===0?32:31-(Sr(i)/zn|0)|0}var Tr=64,Ki=4194304;function Ke(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ii(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes,S=u&268435455;if(S!==0){var D=S&~y;D!==0?p=Ke(D):(x&=S,x!==0&&(p=Ke(x)))}else S=u&~y,S!==0?p=Ke(S):x!==0&&(p=Ke(x));if(p===0)return 0;if(o!==0&&o!==p&&(o&y)===0&&(y=p&-p,x=o&-o,y>=x||y===16&&(x&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-Tn(o),y=1<<u,p|=i[u],o&=~y;return p}function Xs(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var S=31-Tn(x),D=1<<S,F=y[S];F===-1?((D&u)===0||(D&p)!==0)&&(y[S]=Xs(D,o)):F<=o&&(i.expiredLanes|=D),x&=~D}}function Dl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Vl(){var i=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),i}function Ll(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Zs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Tn(o),i[o]=u}function kf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Tn(u),x=1<<y;o[y]=0,p[y]=-1,i[y]=-1,u&=~x}}function Ol(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-Tn(u),y=1<<p;y&o|i[p]&o&&(i[p]|=o),u&=~y}}var Fe=0;function Ir(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Bl,Xo,Fl,zl,Ul,Cr=!1,Jo=[],Ar=null,Rr=null,Wt=null,eo=new Map,si=new Map,In=[],Bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qi(i,o){switch(i){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":eo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(o.pointerId)}}function sr(i,o,u,p,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},o!==null&&(o=nc(o),o!==null&&Xo(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function Fu(i,o,u,p,y){switch(o){case"focusin":return Ar=sr(Ar,i,o,u,p,y),!0;case"dragenter":return Rr=sr(Rr,i,o,u,p,y),!0;case"mouseover":return Wt=sr(Wt,i,o,u,p,y),!0;case"pointerover":var x=y.pointerId;return eo.set(x,sr(eo.get(x)||null,i,o,u,p,y)),!0;case"gotpointercapture":return x=y.pointerId,si.set(x,sr(si.get(x)||null,i,o,u,p,y)),!0}return!1}function Zo(i){var o=io(i.target);if(o!==null){var u=ir(o);if(u!==null){if(o=u.tag,o===13){if(o=Pl(u),o!==null){i.blockedOn=o,Ul(i.priority,function(){Fl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ea(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);zi=p,u.target.dispatchEvent(p),zi=null}else return o=nc(u),o!==null&&Xo(o),i.blockedOn=u,!1;o.shift()}return!0}function zu(i,o,u){Je(i)&&u.delete(o)}function bf(){Cr=!1,Ar!==null&&Je(Ar)&&(Ar=null),Rr!==null&&Je(Rr)&&(Rr=null),Wt!==null&&Je(Wt)&&(Wt=null),eo.forEach(zu),si.forEach(zu)}function Gi(i,o){i.blockedOn===o&&(i.blockedOn=null,Cr||(Cr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bf)))}function Qi(i){function o(y){return Gi(y,i)}if(0<Jo.length){Gi(Jo[0],i);for(var u=1;u<Jo.length;u++){var p=Jo[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Ar!==null&&Gi(Ar,i),Rr!==null&&Gi(Rr,i),Wt!==null&&Gi(Wt,i),eo.forEach(o),si.forEach(o),u=0;u<In.length;u++)p=In[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<In.length&&(u=In[0],u.blockedOn===null);)Zo(u),u.blockedOn===null&&In.shift()}var oi=Q.ReactCurrentBatchConfig,ai=!0;function Pr(i,o,u,p){var y=Fe,x=oi.transition;oi.transition=null;try{Fe=1,Wl(i,o,u,p)}finally{Fe=y,oi.transition=x}}function Uu(i,o,u,p){var y=Fe,x=oi.transition;oi.transition=null;try{Fe=4,Wl(i,o,u,p)}finally{Fe=y,oi.transition=x}}function Wl(i,o,u,p){if(ai){var y=ea(i,o,u,p);if(y===null)Mf(i,o,p,jr,u),qi(i,p);else if(Fu(y,i,o,u,p))p.stopPropagation();else if(qi(i,p),o&4&&-1<Bu.indexOf(i)){for(;y!==null;){var x=nc(y);if(x!==null&&Bl(x),x=ea(i,o,u,p),x===null&&Mf(i,o,p,jr,u),x===y)break;y=x}y!==null&&p.stopPropagation()}else Mf(i,o,p,null,u)}}var jr=null;function ea(i,o,u,p){if(jr=null,i=Ko(p),i=io(i),i!==null)if(o=ir(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Pl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return jr=i,null}function ta(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_f()){case Qo:return 1;case Nl:return 4;case Gs:case Ml:return 16;case Yo:return 536870912;default:return 16}default:return 16}}var Cn=null,na=null,li=null;function Wu(){if(li)return li;var i,o=na,u=o.length,p,y="value"in Cn?Cn.value:Cn.textContent,x=y.length;for(i=0;i<u&&o[i]===y[i];i++);var S=u-i;for(p=1;p<=S&&o[u-p]===y[x-p];p++);return li=y.slice(i,1<p?1-p:void 0)}function to(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Nr(){return!0}function $l(){return!1}function Jt(i){function o(u,p,y,x,S){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Nr:$l,this.isPropagationStopped=$l,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),o}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Jt(Mr),Yi=ae({},Mr,{view:0,detail:0}),ra=Jt(Yi),ia,sa,An,ro=ae({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==An&&(An&&i.type==="mousemove"?(ia=i.screenX-An.screenX,sa=i.screenY-An.screenY):sa=ia=0,An=i),ia)},movementY:function(i){return"movementY"in i?i.movementY:sa}}),Hl=Jt(ro),$u=ae({},ro,{dataTransfer:0}),Hu=Jt($u),oa=ae({},Yi,{relatedTarget:0}),$t=Jt(oa),Ku=ae({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Jt(Ku),Xi=ae({},Mr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Jt(Xi),w=ae({},Mr,{data:0}),k=Jt(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Re(){return oe}var vt=ae({},Yi,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=to(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(i){return i.type==="keypress"?to(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?to(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Jt(vt),Et=ae({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rn=Jt(Et),ci=ae({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Dr=Jt(ci),Vr=ae({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),aa=Jt(Vr),Kl=ae({},ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),o2=Jt(Kl),a2=[9,13,27,32],Ef=f&&"CompositionEvent"in window,ql=null;f&&"documentMode"in document&&(ql=document.documentMode);var l2=f&&"TextEvent"in window&&!ql,T0=f&&(!Ef||ql&&8<ql&&11>=ql),I0=" ",C0=!1;function A0(i,o){switch(i){case"keyup":return a2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var la=!1;function c2(i,o){switch(i){case"compositionend":return R0(o);case"keypress":return o.which!==32?null:(C0=!0,I0);case"textInput":return i=o.data,i===I0&&C0?null:i;default:return null}}function u2(i,o){if(la)return i==="compositionend"||!Ef&&A0(i,o)?(i=Wu(),li=na=Cn=null,la=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return T0&&o.locale!=="ko"?null:o.data;default:return null}}var d2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!d2[i.type]:o==="textarea"}function j0(i,o,u,p){Ui(p),o=Ju(o,"onChange"),0<o.length&&(u=new no("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Gl=null,Ql=null;function h2(i){Y0(i,0)}function Gu(i){var o=fa(i);if(bl(o))return i}function f2(i,o){if(i==="change")return o}var N0=!1;if(f){var Sf;if(f){var Tf="oninput"in document;if(!Tf){var M0=document.createElement("div");M0.setAttribute("oninput","return;"),Tf=typeof M0.oninput=="function"}Sf=Tf}else Sf=!1;N0=Sf&&(!document.documentMode||9<document.documentMode)}function D0(){Gl&&(Gl.detachEvent("onpropertychange",V0),Ql=Gl=null)}function V0(i){if(i.propertyName==="value"&&Gu(Ql)){var o=[];j0(o,Ql,i,Ko(i)),Pu(h2,o)}}function p2(i,o,u){i==="focusin"?(D0(),Gl=o,Ql=u,Gl.attachEvent("onpropertychange",V0)):i==="focusout"&&D0()}function m2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Gu(Ql)}function g2(i,o){if(i==="click")return Gu(o)}function y2(i,o){if(i==="input"||i==="change")return Gu(o)}function v2(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var or=typeof Object.is=="function"?Object.is:v2;function Yl(i,o){if(or(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!d.call(o,y)||!or(i[y],o[y]))return!1}return!0}function L0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function O0(i,o){var u=L0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=L0(u)}}function B0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?B0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function F0(){for(var i=window,o=Vi();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Vi(i.document)}return o}function If(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function x2(i){var o=F0(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&B0(u.ownerDocument.documentElement,u)){if(p!==null&&If(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var y=u.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!i.extend&&x>p&&(y=p,p=x,x=y),y=O0(u,x);var S=O0(u,p);y&&S&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),i.removeAllRanges(),x>p?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var w2=f&&"documentMode"in document&&11>=document.documentMode,ca=null,Cf=null,Xl=null,Af=!1;function z0(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Af||ca==null||ca!==Vi(p)||(p=ca,"selectionStart"in p&&If(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Xl&&Yl(Xl,p)||(Xl=p,p=Ju(Cf,"onSelect"),0<p.length&&(o=new no("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=ca)))}function Qu(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ua={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionend:Qu("Transition","TransitionEnd")},Rf={},U0={};f&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Yu(i){if(Rf[i])return Rf[i];if(!ua[i])return i;var o=ua[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in U0)return Rf[i]=o[u];return i}var W0=Yu("animationend"),$0=Yu("animationiteration"),H0=Yu("animationstart"),K0=Yu("transitionend"),q0=new Map,G0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(i,o){q0.set(i,o),a(o,[i])}for(var Pf=0;Pf<G0.length;Pf++){var jf=G0[Pf],_2=jf.toLowerCase(),k2=jf[0].toUpperCase()+jf.slice(1);Ji(_2,"on"+k2)}Ji(W0,"onAnimationEnd"),Ji($0,"onAnimationIteration"),Ji(H0,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(K0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function Q0(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Rl(p,o,void 0,i),i.currentTarget=null}function Y0(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var S=p.length-1;0<=S;S--){var D=p[S],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==x&&y.isPropagationStopped())break e;Q0(y,D,Y),x=F}else for(S=0;S<p.length;S++){if(D=p[S],F=D.instance,Y=D.currentTarget,D=D.listener,F!==x&&y.isPropagationStopped())break e;Q0(y,D,Y),x=F}}}if(qo)throw i=Fn,qo=!1,Fn=null,i}function nt(i,o){var u=o[Ff];u===void 0&&(u=o[Ff]=new Set);var p=i+"__bubble";u.has(p)||(X0(o,i,2,!1),u.add(p))}function Nf(i,o,u){var p=0;o&&(p|=4),X0(u,i,p,o)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zl(i){if(!i[Xu]){i[Xu]=!0,r.forEach(function(u){u!=="selectionchange"&&(b2.has(u)||Nf(u,!1,i),Nf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Xu]||(o[Xu]=!0,Nf("selectionchange",!1,o))}}function X0(i,o,u,p){switch(ta(o)){case 1:var y=Pr;break;case 4:y=Uu;break;default:y=Wl}u=y.bind(null,o,u,i),y=void 0,!$i||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(o,u,{capture:!0,passive:y}):i.addEventListener(o,u,!0):y!==void 0?i.addEventListener(o,u,{passive:y}):i.addEventListener(o,u,!1)}function Mf(i,o,u,p,y){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;S=S.return}for(;D!==null;){if(S=io(D),S===null)return;if(F=S.tag,F===5||F===6){p=x=S;continue e}D=D.parentNode}}p=p.return}Pu(function(){var Y=x,ne=Ko(u),re=[];e:{var te=q0.get(i);if(te!==void 0){var de=no,ge=i;switch(i){case"keypress":if(to(u)===0)break e;case"keydown":case"keyup":de=Ye;break;case"focusin":ge="focus",de=$t;break;case"focusout":ge="blur",de=$t;break;case"beforeblur":case"afterblur":de=$t;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Dr;break;case W0:case $0:case H0:de=qu;break;case K0:de=aa;break;case"scroll":de=ra;break;case"wheel":de=o2;break;case"copy":case"cut":case"paste":de=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Rn}var ye=(o&4)!==0,xt=!ye&&i==="scroll",K=ye?te!==null?te+"Capture":null:te;ye=[];for(var U=Y,G;U!==null;){G=U;var se=G.stateNode;if(G.tag===5&&se!==null&&(G=se,K!==null&&(se=Hs(U,K),se!=null&&ye.push(ec(U,se,G)))),xt)break;U=U.return}0<ye.length&&(te=new de(te,ge,null,u,ne),re.push({event:te,listeners:ye}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==zi&&(ge=u.relatedTarget||u.fromElement)&&(io(ge)||ge[ui]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=Y,ge=ge?io(ge):null,ge!==null&&(xt=ir(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=Y),de!==ge)){if(ye=Hl,se="onMouseLeave",K="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ye=Rn,se="onPointerLeave",K="onPointerEnter",U="pointer"),xt=de==null?te:fa(de),G=ge==null?te:fa(ge),te=new ye(se,U+"leave",de,u,ne),te.target=xt,te.relatedTarget=G,se=null,io(ne)===Y&&(ye=new ye(K,U+"enter",ge,u,ne),ye.target=G,ye.relatedTarget=xt,se=ye),xt=se,de&&ge)t:{for(ye=de,K=ge,U=0,G=ye;G;G=da(G))U++;for(G=0,se=K;se;se=da(se))G++;for(;0<U-G;)ye=da(ye),U--;for(;0<G-U;)K=da(K),G--;for(;U--;){if(ye===K||K!==null&&ye===K.alternate)break t;ye=da(ye),K=da(K)}ye=null}else ye=null;de!==null&&J0(re,te,de,ye,!1),ge!==null&&xt!==null&&J0(re,xt,ge,ye,!0)}}e:{if(te=Y?fa(Y):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var ve=f2;else if(P0(te))if(N0)ve=y2;else{ve=m2;var _e=p2}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=g2);if(ve&&(ve=ve(i,Y))){j0(re,ve,u,ne);break e}_e&&_e(i,te,Y),i==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&bt(te,"number",te.value)}switch(_e=Y?fa(Y):window,i){case"focusin":(P0(_e)||_e.contentEditable==="true")&&(ca=_e,Cf=Y,Xl=null);break;case"focusout":Xl=Cf=ca=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,z0(re,u,ne);break;case"selectionchange":if(w2)break;case"keydown":case"keyup":z0(re,u,ne)}var ke;if(Ef)e:{switch(i){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else la?A0(i,u)&&(Te="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(T0&&u.locale!=="ko"&&(la||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&la&&(ke=Wu()):(Cn=ne,na="value"in Cn?Cn.value:Cn.textContent,la=!0)),_e=Ju(Y,Te),0<_e.length&&(Te=new k(Te,i,null,u,ne),re.push({event:Te,listeners:_e}),ke?Te.data=ke:(ke=R0(u),ke!==null&&(Te.data=ke)))),(ke=l2?c2(i,u):u2(i,u))&&(Y=Ju(Y,"onBeforeInput"),0<Y.length&&(ne=new k("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:Y}),ne.data=ke))}Y0(re,o)})}function ec(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Ju(i,o){for(var u=o+"Capture",p=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Hs(i,u),x!=null&&p.unshift(ec(i,x,y)),x=Hs(i,o),x!=null&&p.push(ec(i,x,y))),i=i.return}return p}function da(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function J0(i,o,u,p,y){for(var x=o._reactName,S=[];u!==null&&u!==p;){var D=u,F=D.alternate,Y=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&Y!==null&&(D=Y,y?(F=Hs(u,x),F!=null&&S.unshift(ec(u,F,D))):y||(F=Hs(u,x),F!=null&&S.push(ec(u,F,D)))),u=u.return}S.length!==0&&i.push({event:o,listeners:S})}var E2=/\r\n?/g,S2=/\u0000|\uFFFD/g;function Z0(i){return(typeof i=="string"?i:""+i).replace(E2,`
`).replace(S2,"")}function Zu(i,o,u){if(o=Z0(o),Z0(i)!==o&&u)throw Error(t(425))}function ed(){}var Df=null,Vf=null;function Lf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(i){return ev.resolve(null).then(i).catch(C2)}:Of;function C2(i){setTimeout(function(){throw i})}function Bf(i,o){var u=o,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){i.removeChild(y),Qi(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);Qi(o)}function Zi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function tv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ha=Math.random().toString(36).slice(2),Lr="__reactFiber$"+ha,tc="__reactProps$"+ha,ui="__reactContainer$"+ha,Ff="__reactEvents$"+ha,A2="__reactListeners$"+ha,R2="__reactHandles$"+ha;function io(i){var o=i[Lr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ui]||u[Lr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=tv(i);i!==null;){if(u=i[Lr])return u;i=tv(i)}return o}i=u,u=i.parentNode}return null}function nc(i){return i=i[Lr]||i[ui],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function td(i){return i[tc]||null}var zf=[],pa=-1;function es(i){return{current:i}}function rt(i){0>pa||(i.current=zf[pa],zf[pa]=null,pa--)}function Ze(i,o){pa++,zf[pa]=i.current,i.current=o}var ts={},Zt=es(ts),mn=es(!1),so=ts;function ma(i,o){var u=i.type.contextTypes;if(!u)return ts;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in u)y[x]=o[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=y),y}function gn(i){return i=i.childContextTypes,i!=null}function nd(){rt(mn),rt(Zt)}function nv(i,o,u){if(Zt.current!==ts)throw Error(t(168));Ze(Zt,o),Ze(mn,u)}function rv(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in o))throw Error(t(108,Ge(i)||"Unknown",y));return ae({},u,p)}function rd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ts,so=Zt.current,Ze(Zt,i),Ze(mn,mn.current),!0}function iv(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=rv(i,o,so),p.__reactInternalMemoizedMergedChildContext=i,rt(mn),rt(Zt),Ze(Zt,i)):rt(mn),Ze(mn,u)}var di=null,id=!1,Uf=!1;function sv(i){di===null?di=[i]:di.push(i)}function P2(i){id=!0,sv(i)}function ns(){if(!Uf&&di!==null){Uf=!0;var i=0,o=Fe;try{var u=di;for(Fe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}di=null,id=!1}catch(y){throw di!==null&&(di=di.slice(i+1)),jl(Qo,ns),y}finally{Fe=o,Uf=!1}}return null}var ga=[],ya=0,sd=null,od=0,Un=[],Wn=0,oo=null,hi=1,fi="";function ao(i,o){ga[ya++]=od,ga[ya++]=sd,sd=i,od=o}function ov(i,o,u){Un[Wn++]=hi,Un[Wn++]=fi,Un[Wn++]=oo,oo=i;var p=hi;i=fi;var y=32-Tn(p)-1;p&=~(1<<y),u+=1;var x=32-Tn(o)+y;if(30<x){var S=y-y%5;x=(p&(1<<S)-1).toString(32),p>>=S,y-=S,hi=1<<32-Tn(o)+y|u<<y|p,fi=x+i}else hi=1<<x|u<<y|p,fi=i}function Wf(i){i.return!==null&&(ao(i,1),ov(i,1,0))}function $f(i){for(;i===sd;)sd=ga[--ya],ga[ya]=null,od=ga[--ya],ga[ya]=null;for(;i===oo;)oo=Un[--Wn],Un[Wn]=null,fi=Un[--Wn],Un[Wn]=null,hi=Un[--Wn],Un[Wn]=null}var Pn=null,jn=null,ot=!1,ar=null;function av(i,o){var u=qn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function lv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,jn=Zi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,jn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=oo!==null?{id:hi,overflow:fi}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=qn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pn=i,jn=null,!0):!1;default:return!1}}function Hf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Kf(i){if(ot){var o=jn;if(o){var u=o;if(!lv(i,o)){if(Hf(i))throw Error(t(418));o=Zi(u.nextSibling);var p=Pn;o&&lv(i,o)?av(p,u):(i.flags=i.flags&-4097|2,ot=!1,Pn=i)}}else{if(Hf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,Pn=i}}}function cv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function ad(i){if(i!==Pn)return!1;if(!ot)return cv(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Lf(i.type,i.memoizedProps)),o&&(o=jn)){if(Hf(i))throw uv(),Error(t(418));for(;o;)av(i,o),o=Zi(o.nextSibling)}if(cv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){jn=Zi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}jn=null}}else jn=Pn?Zi(i.stateNode.nextSibling):null;return!0}function uv(){for(var i=jn;i;)i=Zi(i.nextSibling)}function va(){jn=Pn=null,ot=!1}function qf(i){ar===null?ar=[i]:ar.push(i)}var j2=Q.ReactCurrentBatchConfig;function rc(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var y=p,x=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var D=y.refs;S===null?delete D[x]:D[x]=S},o._stringRef=x,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function ld(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function dv(i){var o=i._init;return o(i._payload)}function hv(i){function o(K,U){if(i){var G=K.deletions;G===null?(K.deletions=[U],K.flags|=16):G.push(U)}}function u(K,U){if(!i)return null;for(;U!==null;)o(K,U),U=U.sibling;return null}function p(K,U){for(K=new Map;U!==null;)U.key!==null?K.set(U.key,U):K.set(U.index,U),U=U.sibling;return K}function y(K,U){return K=us(K,U),K.index=0,K.sibling=null,K}function x(K,U,G){return K.index=G,i?(G=K.alternate,G!==null?(G=G.index,G<U?(K.flags|=2,U):G):(K.flags|=2,U)):(K.flags|=1048576,U)}function S(K){return i&&K.alternate===null&&(K.flags|=2),K}function D(K,U,G,se){return U===null||U.tag!==6?(U=Op(G,K.mode,se),U.return=K,U):(U=y(U,G),U.return=K,U)}function F(K,U,G,se){var ve=G.type;return ve===A?ne(K,U,G.props.children,se,G.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===kt&&dv(ve)===U.type)?(se=y(U,G.props),se.ref=rc(K,U,G),se.return=K,se):(se=jd(G.type,G.key,G.props,null,K.mode,se),se.ref=rc(K,U,G),se.return=K,se)}function Y(K,U,G,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Bp(G,K.mode,se),U.return=K,U):(U=y(U,G.children||[]),U.return=K,U)}function ne(K,U,G,se,ve){return U===null||U.tag!==7?(U=go(G,K.mode,se,ve),U.return=K,U):(U=y(U,G),U.return=K,U)}function re(K,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Op(""+U,K.mode,G),U.return=K,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return G=jd(U.type,U.key,U.props,null,K.mode,G),G.ref=rc(K,null,U),G.return=K,G;case W:return U=Bp(U,K.mode,G),U.return=K,U;case kt:var se=U._init;return re(K,se(U._payload),G)}if(yt(U)||me(U))return U=go(U,K.mode,G,null),U.return=K,U;ld(K,U)}return null}function te(K,U,G,se){var ve=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ve!==null?null:D(K,U,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case z:return G.key===ve?F(K,U,G,se):null;case W:return G.key===ve?Y(K,U,G,se):null;case kt:return ve=G._init,te(K,U,ve(G._payload),se)}if(yt(G)||me(G))return ve!==null?null:ne(K,U,G,se,null);ld(K,G)}return null}function de(K,U,G,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(G)||null,D(U,K,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case z:return K=K.get(se.key===null?G:se.key)||null,F(U,K,se,ve);case W:return K=K.get(se.key===null?G:se.key)||null,Y(U,K,se,ve);case kt:var _e=se._init;return de(K,U,G,_e(se._payload),ve)}if(yt(se)||me(se))return K=K.get(G)||null,ne(U,K,se,ve,null);ld(U,se)}return null}function ge(K,U,G,se){for(var ve=null,_e=null,ke=U,Te=U=0,Ft=null;ke!==null&&Te<G.length;Te++){ke.index>Te?(Ft=ke,ke=null):Ft=ke.sibling;var $e=te(K,ke,G[Te],se);if($e===null){ke===null&&(ke=Ft);break}i&&ke&&$e.alternate===null&&o(K,ke),U=x($e,U,Te),_e===null?ve=$e:_e.sibling=$e,_e=$e,ke=Ft}if(Te===G.length)return u(K,ke),ot&&ao(K,Te),ve;if(ke===null){for(;Te<G.length;Te++)ke=re(K,G[Te],se),ke!==null&&(U=x(ke,U,Te),_e===null?ve=ke:_e.sibling=ke,_e=ke);return ot&&ao(K,Te),ve}for(ke=p(K,ke);Te<G.length;Te++)Ft=de(ke,K,Te,G[Te],se),Ft!==null&&(i&&Ft.alternate!==null&&ke.delete(Ft.key===null?Te:Ft.key),U=x(Ft,U,Te),_e===null?ve=Ft:_e.sibling=Ft,_e=Ft);return i&&ke.forEach(function(ds){return o(K,ds)}),ot&&ao(K,Te),ve}function ye(K,U,G,se){var ve=me(G);if(typeof ve!="function")throw Error(t(150));if(G=ve.call(G),G==null)throw Error(t(151));for(var _e=ve=null,ke=U,Te=U=0,Ft=null,$e=G.next();ke!==null&&!$e.done;Te++,$e=G.next()){ke.index>Te?(Ft=ke,ke=null):Ft=ke.sibling;var ds=te(K,ke,$e.value,se);if(ds===null){ke===null&&(ke=Ft);break}i&&ke&&ds.alternate===null&&o(K,ke),U=x(ds,U,Te),_e===null?ve=ds:_e.sibling=ds,_e=ds,ke=Ft}if($e.done)return u(K,ke),ot&&ao(K,Te),ve;if(ke===null){for(;!$e.done;Te++,$e=G.next())$e=re(K,$e.value,se),$e!==null&&(U=x($e,U,Te),_e===null?ve=$e:_e.sibling=$e,_e=$e);return ot&&ao(K,Te),ve}for(ke=p(K,ke);!$e.done;Te++,$e=G.next())$e=de(ke,K,Te,$e.value,se),$e!==null&&(i&&$e.alternate!==null&&ke.delete($e.key===null?Te:$e.key),U=x($e,U,Te),_e===null?ve=$e:_e.sibling=$e,_e=$e);return i&&ke.forEach(function(dI){return o(K,dI)}),ot&&ao(K,Te),ve}function xt(K,U,G,se){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case z:e:{for(var ve=G.key,_e=U;_e!==null;){if(_e.key===ve){if(ve=G.type,ve===A){if(_e.tag===7){u(K,_e.sibling),U=y(_e,G.props.children),U.return=K,K=U;break e}}else if(_e.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===kt&&dv(ve)===_e.type){u(K,_e.sibling),U=y(_e,G.props),U.ref=rc(K,_e,G),U.return=K,K=U;break e}u(K,_e);break}else o(K,_e);_e=_e.sibling}G.type===A?(U=go(G.props.children,K.mode,se,G.key),U.return=K,K=U):(se=jd(G.type,G.key,G.props,null,K.mode,se),se.ref=rc(K,U,G),se.return=K,K=se)}return S(K);case W:e:{for(_e=G.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){u(K,U.sibling),U=y(U,G.children||[]),U.return=K,K=U;break e}else{u(K,U);break}else o(K,U);U=U.sibling}U=Bp(G,K.mode,se),U.return=K,K=U}return S(K);case kt:return _e=G._init,xt(K,U,_e(G._payload),se)}if(yt(G))return ge(K,U,G,se);if(me(G))return ye(K,U,G,se);ld(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(u(K,U.sibling),U=y(U,G),U.return=K,K=U):(u(K,U),U=Op(G,K.mode,se),U.return=K,K=U),S(K)):u(K,U)}return xt}var xa=hv(!0),fv=hv(!1),cd=es(null),ud=null,wa=null,Gf=null;function Qf(){Gf=wa=ud=null}function Yf(i){var o=cd.current;rt(cd),i._currentValue=o}function Xf(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function _a(i,o){ud=i,Gf=wa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(yn=!0),i.firstContext=null)}function $n(i){var o=i._currentValue;if(Gf!==i)if(i={context:i,memoizedValue:o,next:null},wa===null){if(ud===null)throw Error(t(308));wa=i,ud.dependencies={lanes:0,firstContext:i}}else wa=wa.next=i;return o}var lo=null;function Jf(i){lo===null?lo=[i]:lo.push(i)}function pv(i,o,u,p){var y=o.interleaved;return y===null?(u.next=u,Jf(o)):(u.next=y.next,y.next=u),o.interleaved=u,pi(i,p)}function pi(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var rs=!1;function Zf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function is(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(We&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,pi(i,u)}return y=p.interleaved,y===null?(o.next=o,Jf(p)):(o.next=y.next,y.next=o),p.interleaved=o,pi(i,u)}function dd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Ol(i,u)}}function gv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?y=x=S:x=x.next=S,u=u.next}while(u!==null);x===null?y=x=o:x=x.next=o}else y=x=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function hd(i,o,u,p){var y=i.updateQueue;rs=!1;var x=y.firstBaseUpdate,S=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,Y=F.next;F.next=null,S===null?x=Y:S.next=Y,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==S&&(D===null?ne.firstBaseUpdate=Y:D.next=Y,ne.lastBaseUpdate=F))}if(x!==null){var re=y.baseState;S=0,ne=Y=F=null,D=x;do{var te=D.lane,de=D.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ge=i,ye=D;switch(te=o,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=ae({},re,te);break e;case 2:rs=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=y.effects,te===null?y.effects=[D]:te.push(D))}else de={eventTime:de,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(Y=ne=de,F=re):ne=ne.next=de,S|=te;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;te=D,D=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);if(ne===null&&(F=re),y.baseState=F,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,o=y.shared.interleaved,o!==null){y=o;do S|=y.lane,y=y.next;while(y!==o)}else x===null&&(y.shared.lanes=0);ho|=S,i.lanes=S,i.memoizedState=re}}function yv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var ic={},Or=es(ic),sc=es(ic),oc=es(ic);function co(i){if(i===ic)throw Error(t(174));return i}function ep(i,o){switch(Ze(oc,o),Ze(sc,i),Ze(Or,ic),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Wo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Wo(o,i)}rt(Or),Ze(Or,o)}function ka(){rt(Or),rt(sc),rt(oc)}function vv(i){co(oc.current);var o=co(Or.current),u=Wo(o,i.type);o!==u&&(Ze(sc,i),Ze(Or,u))}function tp(i){sc.current===i&&(rt(Or),rt(sc))}var lt=es(0);function fd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var np=[];function rp(){for(var i=0;i<np.length;i++)np[i]._workInProgressVersionPrimary=null;np.length=0}var pd=Q.ReactCurrentDispatcher,ip=Q.ReactCurrentBatchConfig,uo=0,ct=null,Rt=null,Ot=null,md=!1,ac=!1,lc=0,N2=0;function en(){throw Error(t(321))}function sp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!or(i[u],o[u]))return!1;return!0}function op(i,o,u,p,y,x){if(uo=x,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,pd.current=i===null||i.memoizedState===null?L2:O2,i=u(p,y),ac){x=0;do{if(ac=!1,lc=0,25<=x)throw Error(t(301));x+=1,Ot=Rt=null,o.updateQueue=null,pd.current=B2,i=u(p,y)}while(ac)}if(pd.current=vd,o=Rt!==null&&Rt.next!==null,uo=0,Ot=Rt=ct=null,md=!1,o)throw Error(t(300));return i}function ap(){var i=lc!==0;return lc=0,i}function Br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ct.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Hn(){if(Rt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var o=Ot===null?ct.memoizedState:Ot.next;if(o!==null)Ot=o,Rt=i;else{if(i===null)throw Error(t(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ot===null?ct.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function cc(i,o){return typeof o=="function"?o(i):o}function lp(i){var o=Hn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Rt,y=p.baseQueue,x=u.pending;if(x!==null){if(y!==null){var S=y.next;y.next=x.next,x.next=S}p.baseQueue=y=x,u.pending=null}if(y!==null){x=y.next,p=p.baseState;var D=S=null,F=null,Y=x;do{var ne=Y.lane;if((uo&ne)===ne)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var re={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=re,S=p):F=F.next=re,ct.lanes|=ne,ho|=ne}Y=Y.next}while(Y!==null&&Y!==x);F===null?S=p:F.next=D,or(p,o.memoizedState)||(yn=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do x=y.lane,ct.lanes|=x,ho|=x,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function cp(i){var o=Hn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,x=o.memoizedState;if(y!==null){u.pending=null;var S=y=y.next;do x=i(x,S.action),S=S.next;while(S!==y);or(x,o.memoizedState)||(yn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function xv(){}function wv(i,o){var u=ct,p=Hn(),y=o(),x=!or(p.memoizedState,y);if(x&&(p.memoizedState=y,yn=!0),p=p.queue,up(bv.bind(null,u,p,i),[i]),p.getSnapshot!==o||x||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,uc(9,kv.bind(null,u,p,y,o),void 0,null),Bt===null)throw Error(t(349));(uo&30)!==0||_v(u,o,y)}return y}function _v(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function kv(i,o,u,p){o.value=u,o.getSnapshot=p,Ev(o)&&Sv(i)}function bv(i,o,u){return u(function(){Ev(o)&&Sv(i)})}function Ev(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!or(i,u)}catch{return!0}}function Sv(i){var o=pi(i,1);o!==null&&dr(o,i,1,-1)}function Tv(i){var o=Br();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:i},o.queue=i,i=i.dispatch=V2.bind(null,ct,i),[o.memoizedState,i]}function uc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function Iv(){return Hn().memoizedState}function gd(i,o,u,p){var y=Br();ct.flags|=i,y.memoizedState=uc(1|o,u,void 0,p===void 0?null:p)}function yd(i,o,u,p){var y=Hn();p=p===void 0?null:p;var x=void 0;if(Rt!==null){var S=Rt.memoizedState;if(x=S.destroy,p!==null&&sp(p,S.deps)){y.memoizedState=uc(o,u,x,p);return}}ct.flags|=i,y.memoizedState=uc(1|o,u,x,p)}function Cv(i,o){return gd(8390656,8,i,o)}function up(i,o){return yd(2048,8,i,o)}function Av(i,o){return yd(4,2,i,o)}function Rv(i,o){return yd(4,4,i,o)}function Pv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function jv(i,o,u){return u=u!=null?u.concat([i]):null,yd(4,4,Pv.bind(null,o,i),u)}function dp(){}function Nv(i,o){var u=Hn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&sp(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function Mv(i,o){var u=Hn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&sp(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function Dv(i,o,u){return(uo&21)===0?(i.baseState&&(i.baseState=!1,yn=!0),i.memoizedState=u):(or(u,o)||(u=Vl(),ct.lanes|=u,ho|=u,i.baseState=!0),o)}function M2(i,o){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var p=ip.transition;ip.transition={};try{i(!1),o()}finally{Fe=u,ip.transition=p}}function Vv(){return Hn().memoizedState}function D2(i,o,u){var p=ls(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Lv(i))Ov(o,u);else if(u=pv(i,o,u,p),u!==null){var y=hn();dr(u,i,p,y),Bv(u,o,p)}}function V2(i,o,u){var p=ls(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lv(i))Ov(o,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,D=x(S,u);if(y.hasEagerState=!0,y.eagerState=D,or(D,S)){var F=o.interleaved;F===null?(y.next=y,Jf(o)):(y.next=F.next,F.next=y),o.interleaved=y;return}}catch{}finally{}u=pv(i,o,y,p),u!==null&&(y=hn(),dr(u,i,p,y),Bv(u,o,p))}}function Lv(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Ov(i,o){ac=md=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Bv(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Ol(i,u)}}var vd={readContext:$n,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},L2={readContext:$n,useCallback:function(i,o){return Br().memoizedState=[i,o===void 0?null:o],i},useContext:$n,useEffect:Cv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,gd(4194308,4,Pv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return gd(4194308,4,i,o)},useInsertionEffect:function(i,o){return gd(4,2,i,o)},useMemo:function(i,o){var u=Br();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Br();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=D2.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var o=Br();return i={current:i},o.memoizedState=i},useState:Tv,useDebugValue:dp,useDeferredValue:function(i){return Br().memoizedState=i},useTransition:function(){var i=Tv(!1),o=i[0];return i=M2.bind(null,i[1]),Br().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=ct,y=Br();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Bt===null)throw Error(t(349));(uo&30)!==0||_v(p,o,u)}y.memoizedState=u;var x={value:u,getSnapshot:o};return y.queue=x,Cv(bv.bind(null,p,x,i),[i]),p.flags|=2048,uc(9,kv.bind(null,p,x,u,o),void 0,null),u},useId:function(){var i=Br(),o=Bt.identifierPrefix;if(ot){var u=fi,p=hi;u=(p&~(1<<32-Tn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=lc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=N2++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},O2={readContext:$n,useCallback:Nv,useContext:$n,useEffect:up,useImperativeHandle:jv,useInsertionEffect:Av,useLayoutEffect:Rv,useMemo:Mv,useReducer:lp,useRef:Iv,useState:function(){return lp(cc)},useDebugValue:dp,useDeferredValue:function(i){var o=Hn();return Dv(o,Rt.memoizedState,i)},useTransition:function(){var i=lp(cc)[0],o=Hn().memoizedState;return[i,o]},useMutableSource:xv,useSyncExternalStore:wv,useId:Vv,unstable_isNewReconciler:!1},B2={readContext:$n,useCallback:Nv,useContext:$n,useEffect:up,useImperativeHandle:jv,useInsertionEffect:Av,useLayoutEffect:Rv,useMemo:Mv,useReducer:cp,useRef:Iv,useState:function(){return cp(cc)},useDebugValue:dp,useDeferredValue:function(i){var o=Hn();return Rt===null?o.memoizedState=i:Dv(o,Rt.memoizedState,i)},useTransition:function(){var i=cp(cc)[0],o=Hn().memoizedState;return[i,o]},useMutableSource:xv,useSyncExternalStore:wv,useId:Vv,unstable_isNewReconciler:!1};function lr(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function hp(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:ae({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xd={isMounted:function(i){return(i=i._reactInternals)?ir(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=hn(),y=ls(i),x=mi(p,y);x.payload=o,u!=null&&(x.callback=u),o=is(i,x,y),o!==null&&(dr(o,i,y,p),dd(o,i,y))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=hn(),y=ls(i),x=mi(p,y);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=is(i,x,y),o!==null&&(dr(o,i,y,p),dd(o,i,y))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=hn(),p=ls(i),y=mi(u,p);y.tag=2,o!=null&&(y.callback=o),o=is(i,y,p),o!==null&&(dr(o,i,p,u),dd(o,i,p))}};function Fv(i,o,u,p,y,x,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,S):o.prototype&&o.prototype.isPureReactComponent?!Yl(u,p)||!Yl(y,x):!0}function zv(i,o,u){var p=!1,y=ts,x=o.contextType;return typeof x=="object"&&x!==null?x=$n(x):(y=gn(o)?so:Zt.current,p=o.contextTypes,x=(p=p!=null)?ma(i,y):ts),o=new o(u,x),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),o}function Uv(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&xd.enqueueReplaceState(o,o.state,null)}function fp(i,o,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs={},Zf(i);var x=o.contextType;typeof x=="object"&&x!==null?y.context=$n(x):(x=gn(o)?so:Zt.current,y.context=ma(i,x)),y.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(hp(i,o,x,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&xd.enqueueReplaceState(y,y.state,null),hd(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function ba(i,o){try{var u="",p=o;do u+=De(p),p=p.return;while(p);var y=u}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:o,stack:y,digest:null}}function pp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function mp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var F2=typeof WeakMap=="function"?WeakMap:Map;function Wv(i,o,u){u=mi(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Td||(Td=!0,Rp=p),mp(i,o)},u}function $v(i,o,u){u=mi(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=o.value;u.payload=function(){return p(y)},u.callback=function(){mp(i,o)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){mp(i,o),typeof p!="function"&&(os===null?os=new Set([this]):os.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Hv(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new F2;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(y.add(u),i=eI.bind(null,i,o,u),o.then(i,i))}function Kv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function qv(i,o,u,p,y){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=mi(-1,1),o.tag=2,is(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var z2=Q.ReactCurrentOwner,yn=!1;function dn(i,o,u,p){o.child=i===null?fv(o,null,u,p):xa(o,i.child,u,p)}function Gv(i,o,u,p,y){u=u.render;var x=o.ref;return _a(o,y),p=op(i,o,u,p,x,y),u=ap(),i!==null&&!yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,gi(i,o,y)):(ot&&u&&Wf(o),o.flags|=1,dn(i,o,p,y),o.child)}function Qv(i,o,u,p,y){if(i===null){var x=u.type;return typeof x=="function"&&!Lp(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=x,Yv(i,o,x,p,y)):(i=jd(u.type,null,p,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,(i.lanes&y)===0){var S=x.memoizedProps;if(u=u.compare,u=u!==null?u:Yl,u(S,p)&&i.ref===o.ref)return gi(i,o,y)}return o.flags|=1,i=us(x,p),i.ref=o.ref,i.return=o,o.child=i}function Yv(i,o,u,p,y){if(i!==null){var x=i.memoizedProps;if(Yl(x,p)&&i.ref===o.ref)if(yn=!1,o.pendingProps=p=x,(i.lanes&y)!==0)(i.flags&131072)!==0&&(yn=!0);else return o.lanes=i.lanes,gi(i,o,y)}return gp(i,o,u,p,y)}function Xv(i,o,u){var p=o.pendingProps,y=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Sa,Nn),Nn|=u;else{if((u&1073741824)===0)return i=x!==null?x.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(Sa,Nn),Nn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:u,Ze(Sa,Nn),Nn|=p}else x!==null?(p=x.baseLanes|u,o.memoizedState=null):p=u,Ze(Sa,Nn),Nn|=p;return dn(i,o,y,u),o.child}function Jv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function gp(i,o,u,p,y){var x=gn(u)?so:Zt.current;return x=ma(o,x),_a(o,y),u=op(i,o,u,p,x,y),p=ap(),i!==null&&!yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,gi(i,o,y)):(ot&&p&&Wf(o),o.flags|=1,dn(i,o,u,y),o.child)}function Zv(i,o,u,p,y){if(gn(u)){var x=!0;rd(o)}else x=!1;if(_a(o,y),o.stateNode===null)_d(i,o),zv(o,u,p),fp(o,u,p,y),p=!0;else if(i===null){var S=o.stateNode,D=o.memoizedProps;S.props=D;var F=S.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=$n(Y):(Y=gn(u)?so:Zt.current,Y=ma(o,Y));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||F!==Y)&&Uv(o,S,p,Y),rs=!1;var te=o.memoizedState;S.state=te,hd(o,p,S,y),F=o.memoizedState,D!==p||te!==F||mn.current||rs?(typeof ne=="function"&&(hp(o,u,ne,p),F=o.memoizedState),(D=rs||Fv(o,u,D,p,te,F,Y))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),S.props=p,S.state=F,S.context=Y,p=D):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,mv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:lr(o.type,D),S.props=Y,re=o.pendingProps,te=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=$n(F):(F=gn(u)?so:Zt.current,F=ma(o,F));var de=u.getDerivedStateFromProps;(ne=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==re||te!==F)&&Uv(o,S,p,F),rs=!1,te=o.memoizedState,S.state=te,hd(o,p,S,y);var ge=o.memoizedState;D!==re||te!==ge||mn.current||rs?(typeof de=="function"&&(hp(o,u,de,p),ge=o.memoizedState),(Y=rs||Fv(o,u,Y,p,te,ge,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,ge,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,ge,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ge),S.props=p,S.state=ge,S.context=F,p=Y):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),p=!1)}return yp(i,o,u,p,x,y)}function yp(i,o,u,p,y,x){Jv(i,o);var S=(o.flags&128)!==0;if(!p&&!S)return y&&iv(o,u,!1),gi(i,o,x);p=o.stateNode,z2.current=o;var D=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&S?(o.child=xa(o,i.child,null,x),o.child=xa(o,null,D,x)):dn(i,o,D,x),o.memoizedState=p.state,y&&iv(o,u,!0),o.child}function e1(i){var o=i.stateNode;o.pendingContext?nv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&nv(i,o.context,!1),ep(i,o.containerInfo)}function t1(i,o,u,p,y){return va(),qf(y),o.flags|=256,dn(i,o,u,p),o.child}var vp={dehydrated:null,treeContext:null,retryLane:0};function xp(i){return{baseLanes:i,cachePool:null,transitions:null}}function n1(i,o,u){var p=o.pendingProps,y=lt.current,x=!1,S=(o.flags&128)!==0,D;if((D=S)||(D=i!==null&&i.memoizedState===null?!1:(y&2)!==0),D?(x=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Ze(lt,y&1),i===null)return Kf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,i=p.fallback,x?(p=o.mode,x=o.child,S={mode:"hidden",children:S},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=Nd(S,p,0,null),i=go(i,p,u,null),x.return=o,i.return=o,x.sibling=i,o.child=x,o.child.memoizedState=xp(u),o.memoizedState=vp,i):wp(o,S));if(y=i.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return U2(i,o,S,p,D,y,u);if(x){x=p.fallback,S=o.mode,y=i.child,D=y.sibling;var F={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==y?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=us(y,F),p.subtreeFlags=y.subtreeFlags&14680064),D!==null?x=us(D,x):(x=go(x,S,u,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,S=i.child.memoizedState,S=S===null?xp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=i.childLanes&~u,o.memoizedState=vp,p}return x=i.child,i=x.sibling,p=us(x,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function wp(i,o){return o=Nd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function wd(i,o,u,p){return p!==null&&qf(p),xa(o,i.child,null,u),i=wp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function U2(i,o,u,p,y,x,S){if(u)return o.flags&256?(o.flags&=-257,p=pp(Error(t(422))),wd(i,o,S,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(x=p.fallback,y=o.mode,p=Nd({mode:"visible",children:p.children},y,0,null),x=go(x,y,S,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,(o.mode&1)!==0&&xa(o,i.child,null,S),o.child.memoizedState=xp(S),o.memoizedState=vp,x);if((o.mode&1)===0)return wd(i,o,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var D=p.dgst;return p=D,x=Error(t(419)),p=pp(x,p,void 0),wd(i,o,S,p)}if(D=(S&i.childLanes)!==0,yn||D){if(p=Bt,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,pi(i,y),dr(p,i,y,-1))}return Vp(),p=pp(Error(t(421))),wd(i,o,S,p)}return y.data==="$?"?(o.flags|=128,o.child=i.child,o=tI.bind(null,i),y._reactRetry=o,null):(i=x.treeContext,jn=Zi(y.nextSibling),Pn=o,ot=!0,ar=null,i!==null&&(Un[Wn++]=hi,Un[Wn++]=fi,Un[Wn++]=oo,hi=i.id,fi=i.overflow,oo=o),o=wp(o,p.children),o.flags|=4096,o)}function r1(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Xf(i.return,o,u)}function _p(i,o,u,p,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=u,x.tailMode=y)}function i1(i,o,u){var p=o.pendingProps,y=p.revealOrder,x=p.tail;if(dn(i,o,p.children,u),p=lt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&r1(i,u,o);else if(i.tag===19)r1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(lt,p),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(u=o.child,y=null;u!==null;)i=u.alternate,i!==null&&fd(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),_p(o,!1,y,u,x);break;case"backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&fd(i)===null){o.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}_p(o,!0,u,null,x);break;case"together":_p(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _d(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function gi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ho|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=us(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=us(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function W2(i,o,u){switch(o.tag){case 3:e1(o),va();break;case 5:vv(o);break;case 1:gn(o.type)&&rd(o);break;case 4:ep(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,y=o.memoizedProps.value;Ze(cd,p._currentValue),p._currentValue=y;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?n1(i,o,u):(Ze(lt,lt.current&1),i=gi(i,o,u),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return i1(i,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ze(lt,lt.current),p)break;return null;case 22:case 23:return o.lanes=0,Xv(i,o,u)}return gi(i,o,u)}var s1,kp,o1,a1;s1=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},kp=function(){},o1=function(i,o,u,p){var y=i.memoizedProps;if(y!==p){i=o.stateNode,co(Or.current);var x=null;switch(u){case"input":y=zo(i,y),p=zo(i,p),x=[];break;case"select":y=ae({},y,{value:void 0}),p=ae({},p,{value:void 0}),x=[];break;case"textarea":y=Sl(i,y),p=Sl(i,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ed)}rr(u,p);var S;u=null;for(Y in y)if(!p.hasOwnProperty(Y)&&y.hasOwnProperty(Y)&&y[Y]!=null)if(Y==="style"){var D=y[Y];for(S in D)D.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?x||(x=[]):(x=x||[]).push(Y,null));for(Y in p){var F=p[Y];if(D=y!=null?y[Y]:void 0,p.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(S in D)!D.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&D[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(x||(x=[]),x.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(x=x||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&nt("scroll",i),x||D===F||(x=[])):(x=x||[]).push(Y,F))}u&&(x=x||[]).push("style",u);var Y=x;(o.updateQueue=Y)&&(o.flags|=4)}},a1=function(i,o,u,p){u!==p&&(o.flags|=4)};function dc(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function $2(i,o,u){var p=o.pendingProps;switch($f(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return gn(o.type)&&nd(),tn(o),null;case 3:return p=o.stateNode,ka(),rt(mn),rt(Zt),rp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ad(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ar!==null&&(Np(ar),ar=null))),kp(i,o),tn(o),null;case 5:tp(o);var y=co(oc.current);if(u=o.type,i!==null&&o.stateNode!=null)o1(i,o,u,p,y),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return tn(o),null}if(i=co(Or.current),ad(o)){p=o.stateNode,u=o.type;var x=o.memoizedProps;switch(p[Lr]=o,p[tc]=x,i=(o.mode&1)!==0,u){case"dialog":nt("cancel",p),nt("close",p);break;case"iframe":case"object":case"embed":nt("load",p);break;case"video":case"audio":for(y=0;y<Jl.length;y++)nt(Jl[y],p);break;case"source":nt("error",p);break;case"img":case"image":case"link":nt("error",p),nt("load",p);break;case"details":nt("toggle",p);break;case"input":Su(p,x),nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},nt("invalid",p);break;case"textarea":Tl(p,x),nt("invalid",p)}rr(u,x),y=null;for(var S in x)if(x.hasOwnProperty(S)){var D=x[S];S==="children"?typeof D=="string"?p.textContent!==D&&(x.suppressHydrationWarning!==!0&&Zu(p.textContent,D,i),y=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(x.suppressHydrationWarning!==!0&&Zu(p.textContent,D,i),y=["children",""+D]):s.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&nt("scroll",p)}switch(u){case"input":Fo(p),El(p,x,!0);break;case"textarea":Fo(p),Li(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=ed)}p=y,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Il(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(u,{is:p.is}):(i=S.createElement(u),u==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,u),i[Lr]=o,i[tc]=p,s1(i,o,!1,!1),o.stateNode=i;e:{switch(S=Ho(u,p),u){case"dialog":nt("cancel",i),nt("close",i),y=p;break;case"iframe":case"object":case"embed":nt("load",i),y=p;break;case"video":case"audio":for(y=0;y<Jl.length;y++)nt(Jl[y],i);y=p;break;case"source":nt("error",i),y=p;break;case"img":case"image":case"link":nt("error",i),nt("load",i),y=p;break;case"details":nt("toggle",i),y=p;break;case"input":Su(i,p),y=zo(i,p),nt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=ae({},p,{value:void 0}),nt("invalid",i);break;case"textarea":Tl(i,p),y=Sl(i,p),nt("invalid",i);break;default:y=p}rr(u,y),D=y;for(x in D)if(D.hasOwnProperty(x)){var F=D[x];x==="style"?$o(i,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Iu(i,F)):x==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&$s(i,F):typeof F=="number"&&$s(i,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?F!=null&&x==="onScroll"&&nt("scroll",i):F!=null&&j(i,x,F,S))}switch(u){case"input":Fo(i),El(i,p,!1);break;case"textarea":Fo(i),Li(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ue(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?nr(i,!!p.multiple,x,!1):p.defaultValue!=null&&nr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=ed)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)a1(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=co(oc.current),co(Or.current),ad(o)){if(p=o.stateNode,u=o.memoizedProps,p[Lr]=o,(x=p.nodeValue!==u)&&(i=Pn,i!==null))switch(i.tag){case 3:Zu(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Zu(p.nodeValue,u,(i.mode&1)!==0)}x&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Lr]=o,o.stateNode=p}return tn(o),null;case 13:if(rt(lt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&jn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)uv(),va(),o.flags|=98560,x=!1;else if(x=ad(o),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Lr]=o}else va(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),x=!1}else ar!==null&&(Np(ar),ar=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?Pt===0&&(Pt=3):Vp())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return ka(),kp(i,o),i===null&&Zl(o.stateNode.containerInfo),tn(o),null;case 10:return Yf(o.type._context),tn(o),null;case 17:return gn(o.type)&&nd(),tn(o),null;case 19:if(rt(lt),x=o.memoizedState,x===null)return tn(o),null;if(p=(o.flags&128)!==0,S=x.rendering,S===null)if(p)dc(x,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=fd(i),S!==null){for(o.flags|=128,dc(x,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)x=u,i=p,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,i=S.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}x.tail!==null&&tt()>Ta&&(o.flags|=128,p=!0,dc(x,!1),o.lanes=4194304)}else{if(!p)if(i=fd(S),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),dc(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!ot)return tn(o),null}else 2*tt()-x.renderingStartTime>Ta&&u!==1073741824&&(o.flags|=128,p=!0,dc(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(u=x.last,u!==null?u.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=tt(),o.sibling=null,u=lt.current,Ze(lt,p?u&1|2:u&1),o):(tn(o),null);case 22:case 23:return Dp(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Nn&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function H2(i,o){switch($f(o),o.tag){case 1:return gn(o.type)&&nd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ka(),rt(mn),rt(Zt),rp(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return tp(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));va()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return ka(),null;case 10:return Yf(o.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var kd=!1,nn=!1,K2=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ea(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){ft(i,o,p)}else u.current=null}function bp(i,o,u){try{u()}catch(p){ft(i,o,p)}}var l1=!1;function q2(i,o){if(Df=ai,i=F0(),If(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var S=0,D=-1,F=-1,Y=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==u||y!==0&&re.nodeType!==3||(D=S+y),re!==x||p!==0&&re.nodeType!==3||(F=S+p),re.nodeType===3&&(S+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===u&&++Y===y&&(D=S),te===x&&++ne===p&&(F=S),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Vf={focusedElem:i,selectionRange:u},ai=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,xt=ge.memoizedState,K=o.stateNode,U=K.getSnapshotBeforeUpdate(o.elementType===o.type?ye:lr(o.type,ye),xt);K.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=l1,l1=!1,ge}function hc(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&bp(o,u,x)}y=y.next}while(y!==p)}}function bd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Ep(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function c1(i){var o=i.alternate;o!==null&&(i.alternate=null,c1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Lr],delete o[tc],delete o[Ff],delete o[A2],delete o[R2])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function u1(i){return i.tag===5||i.tag===3||i.tag===4}function d1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||u1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Sp(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ed));else if(p!==4&&(i=i.child,i!==null))for(Sp(i,o,u),i=i.sibling;i!==null;)Sp(i,o,u),i=i.sibling}function Tp(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Tp(i,o,u),i=i.sibling;i!==null;)Tp(i,o,u),i=i.sibling}var Ht=null,cr=!1;function ss(i,o,u){for(u=u.child;u!==null;)h1(i,o,u),u=u.sibling}function h1(i,o,u){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Qs,u)}catch{}switch(u.tag){case 5:nn||Ea(u,o);case 6:var p=Ht,y=cr;Ht=null,ss(i,o,u),Ht=p,cr=y,Ht!==null&&(cr?(i=Ht,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Ht.removeChild(u.stateNode));break;case 18:Ht!==null&&(cr?(i=Ht,u=u.stateNode,i.nodeType===8?Bf(i.parentNode,u):i.nodeType===1&&Bf(i,u),Qi(i)):Bf(Ht,u.stateNode));break;case 4:p=Ht,y=cr,Ht=u.stateNode.containerInfo,cr=!0,ss(i,o,u),Ht=p,cr=y;break;case 0:case 11:case 14:case 15:if(!nn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&bp(u,o,S),y=y.next}while(y!==p)}ss(i,o,u);break;case 1:if(!nn&&(Ea(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){ft(u,o,D)}ss(i,o,u);break;case 21:ss(i,o,u);break;case 22:u.mode&1?(nn=(p=nn)||u.memoizedState!==null,ss(i,o,u),nn=p):ss(i,o,u);break;default:ss(i,o,u)}}function f1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new K2),o.forEach(function(p){var y=nI.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function ur(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var x=i,S=o,D=S;e:for(;D!==null;){switch(D.tag){case 5:Ht=D.stateNode,cr=!1;break e;case 3:Ht=D.stateNode.containerInfo,cr=!0;break e;case 4:Ht=D.stateNode.containerInfo,cr=!0;break e}D=D.return}if(Ht===null)throw Error(t(160));h1(x,S,y),Ht=null,cr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Y){ft(y,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)p1(o,i),o=o.sibling}function p1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ur(o,i),Fr(i),p&4){try{hc(3,i,i.return),bd(3,i)}catch(ye){ft(i,i.return,ye)}try{hc(5,i,i.return)}catch(ye){ft(i,i.return,ye)}}break;case 1:ur(o,i),Fr(i),p&512&&u!==null&&Ea(u,u.return);break;case 5:if(ur(o,i),Fr(i),p&512&&u!==null&&Ea(u,u.return),i.flags&32){var y=i.stateNode;try{$s(y,"")}catch(ye){ft(i,i.return,ye)}}if(p&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,S=u!==null?u.memoizedProps:x,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&x.type==="radio"&&x.name!=null&&Uo(y,x),Ho(D,S);var Y=Ho(D,x);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?$o(y,re):ne==="dangerouslySetInnerHTML"?Iu(y,re):ne==="children"?$s(y,re):j(y,ne,re,Y)}switch(D){case"input":Ws(y,x);break;case"textarea":Tu(y,x);break;case"select":var te=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?nr(y,!!x.multiple,de,!1):te!==!!x.multiple&&(x.defaultValue!=null?nr(y,!!x.multiple,x.defaultValue,!0):nr(y,!!x.multiple,x.multiple?[]:"",!1))}y[tc]=x}catch(ye){ft(i,i.return,ye)}}break;case 6:if(ur(o,i),Fr(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(ye){ft(i,i.return,ye)}}break;case 3:if(ur(o,i),Fr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Qi(o.containerInfo)}catch(ye){ft(i,i.return,ye)}break;case 4:ur(o,i),Fr(i);break;case 13:ur(o,i),Fr(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Ap=tt())),p&4&&f1(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(nn=(Y=nn)||ne,ur(o,i),nn=Y):ur(o,i),Fr(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(pe=i,ne=i.child;ne!==null;){for(re=pe=ne;pe!==null;){switch(te=pe,de=te.child,te.tag){case 0:case 11:case 14:case 15:hc(4,te,te.return);break;case 1:Ea(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){p=te,u=te.return;try{o=p,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(ye){ft(p,u,ye)}}break;case 5:Ea(te,te.return);break;case 22:if(te.memoizedState!==null){y1(re);continue}}de!==null?(de.return=te,pe=de):y1(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{y=re.stateNode,Y?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(D=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Fi("display",S))}catch(ye){ft(i,i.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=Y?"":re.memoizedProps}catch(ye){ft(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:ur(o,i),Fr(i),p&4&&f1(i);break;case 21:break;default:ur(o,i),Fr(i)}}function Fr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(u1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&($s(y,""),p.flags&=-33);var x=d1(i);Tp(i,x,y);break;case 3:case 4:var S=p.stateNode.containerInfo,D=d1(i);Sp(i,D,S);break;default:throw Error(t(161))}}catch(F){ft(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function G2(i,o,u){pe=i,m1(i)}function m1(i,o,u){for(var p=(i.mode&1)!==0;pe!==null;){var y=pe,x=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||kd;if(!S){var D=y.alternate,F=D!==null&&D.memoizedState!==null||nn;D=kd;var Y=nn;if(kd=S,(nn=F)&&!Y)for(pe=y;pe!==null;)S=pe,F=S.child,S.tag===22&&S.memoizedState!==null?v1(y):F!==null?(F.return=S,pe=F):v1(y);for(;x!==null;)pe=x,m1(x),x=x.sibling;pe=y,kd=D,nn=Y}g1(i)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,pe=x):g1(i)}}function g1(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:nn||bd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!nn)if(u===null)p.componentDidMount();else{var y=o.elementType===o.type?u.memoizedProps:lr(o.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&yv(o,x,p);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}yv(o,S,u)}break;case 5:var D=o.stateNode;if(u===null&&o.flags&4){u=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Qi(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||o.flags&512&&Ep(o)}catch(te){ft(o,o.return,te)}}if(o===i){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function y1(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function v1(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{bd(4,o)}catch(F){ft(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var y=o.return;try{p.componentDidMount()}catch(F){ft(o,y,F)}}var x=o.return;try{Ep(o)}catch(F){ft(o,x,F)}break;case 5:var S=o.return;try{Ep(o)}catch(F){ft(o,S,F)}}}catch(F){ft(o,o.return,F)}if(o===i){pe=null;break}var D=o.sibling;if(D!==null){D.return=o.return,pe=D;break}pe=o.return}}var Q2=Math.ceil,Ed=Q.ReactCurrentDispatcher,Ip=Q.ReactCurrentOwner,Kn=Q.ReactCurrentBatchConfig,We=0,Bt=null,St=null,Kt=0,Nn=0,Sa=es(0),Pt=0,fc=null,ho=0,Sd=0,Cp=0,pc=null,vn=null,Ap=0,Ta=1/0,yi=null,Td=!1,Rp=null,os=null,Id=!1,as=null,Cd=0,mc=0,Pp=null,Ad=-1,Rd=0;function hn(){return(We&6)!==0?tt():Ad!==-1?Ad:Ad=tt()}function ls(i){return(i.mode&1)===0?1:(We&2)!==0&&Kt!==0?Kt&-Kt:j2.transition!==null?(Rd===0&&(Rd=Vl()),Rd):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:ta(i.type)),i)}function dr(i,o,u,p){if(50<mc)throw mc=0,Pp=null,Error(t(185));Zs(i,u,p),((We&2)===0||i!==Bt)&&(i===Bt&&((We&2)===0&&(Sd|=u),Pt===4&&cs(i,Kt)),xn(i,p),u===1&&We===0&&(o.mode&1)===0&&(Ta=tt()+500,id&&ns()))}function xn(i,o){var u=i.callbackNode;Js(i,o);var p=ii(i,i===Bt?Kt:0);if(p===0)u!==null&&Go(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&Go(u),o===1)i.tag===0?P2(w1.bind(null,i)):sv(w1.bind(null,i)),I2(function(){(We&6)===0&&ns()}),u=null;else{switch(Ir(p)){case 1:u=Qo;break;case 4:u=Nl;break;case 16:u=Gs;break;case 536870912:u=Yo;break;default:u=Gs}u=C1(u,x1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function x1(i,o){if(Ad=-1,Rd=0,(We&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ia()&&i.callbackNode!==u)return null;var p=ii(i,i===Bt?Kt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Pd(i,p);else{o=p;var y=We;We|=2;var x=k1();(Bt!==i||Kt!==o)&&(yi=null,Ta=tt()+500,po(i,o));do try{J2();break}catch(D){_1(i,D)}while(!0);Qf(),Ed.current=x,We=y,St!==null?o=0:(Bt=null,Kt=0,o=Pt)}if(o!==0){if(o===2&&(y=Dl(i),y!==0&&(p=y,o=jp(i,y))),o===1)throw u=fc,po(i,0),cs(i,p),xn(i,tt()),u;if(o===6)cs(i,p);else{if(y=i.current.alternate,(p&30)===0&&!Y2(y)&&(o=Pd(i,p),o===2&&(x=Dl(i),x!==0&&(p=x,o=jp(i,x))),o===1))throw u=fc,po(i,0),cs(i,p),xn(i,tt()),u;switch(i.finishedWork=y,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:mo(i,vn,yi);break;case 3:if(cs(i,p),(p&130023424)===p&&(o=Ap+500-tt(),10<o)){if(ii(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){hn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Of(mo.bind(null,i,vn,yi),o);break}mo(i,vn,yi);break;case 4:if(cs(i,p),(p&4194240)===p)break;for(o=i.eventTimes,y=-1;0<p;){var S=31-Tn(p);x=1<<S,S=o[S],S>y&&(y=S),p&=~x}if(p=y,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Q2(p/1960))-p,10<p){i.timeoutHandle=Of(mo.bind(null,i,vn,yi),p);break}mo(i,vn,yi);break;case 5:mo(i,vn,yi);break;default:throw Error(t(329))}}}return xn(i,tt()),i.callbackNode===u?x1.bind(null,i):null}function jp(i,o){var u=pc;return i.current.memoizedState.isDehydrated&&(po(i,o).flags|=256),i=Pd(i,o),i!==2&&(o=vn,vn=u,o!==null&&Np(o)),i}function Np(i){vn===null?vn=i:vn.push.apply(vn,i)}function Y2(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],x=y.getSnapshot;y=y.value;try{if(!or(x(),y))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function cs(i,o){for(o&=~Cp,o&=~Sd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Tn(o),p=1<<u;i[u]=-1,o&=~p}}function w1(i){if((We&6)!==0)throw Error(t(327));Ia();var o=ii(i,0);if((o&1)===0)return xn(i,tt()),null;var u=Pd(i,o);if(i.tag!==0&&u===2){var p=Dl(i);p!==0&&(o=p,u=jp(i,p))}if(u===1)throw u=fc,po(i,0),cs(i,o),xn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,mo(i,vn,yi),xn(i,tt()),null}function Mp(i,o){var u=We;We|=1;try{return i(o)}finally{We=u,We===0&&(Ta=tt()+500,id&&ns())}}function fo(i){as!==null&&as.tag===0&&(We&6)===0&&Ia();var o=We;We|=1;var u=Kn.transition,p=Fe;try{if(Kn.transition=null,Fe=1,i)return i()}finally{Fe=p,Kn.transition=u,We=o,(We&6)===0&&ns()}}function Dp(){Nn=Sa.current,rt(Sa)}function po(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,T2(u)),St!==null)for(u=St.return;u!==null;){var p=u;switch($f(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&nd();break;case 3:ka(),rt(mn),rt(Zt),rp();break;case 5:tp(p);break;case 4:ka();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Yf(p.type._context);break;case 22:case 23:Dp()}u=u.return}if(Bt=i,St=i=us(i.current,null),Kt=Nn=o,Pt=0,fc=null,Cp=Sd=ho=0,vn=pc=null,lo!==null){for(o=0;o<lo.length;o++)if(u=lo[o],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,x=u.pending;if(x!==null){var S=x.next;x.next=y,p.next=S}u.pending=p}lo=null}return i}function _1(i,o){do{var u=St;try{if(Qf(),pd.current=vd,md){for(var p=ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}md=!1}if(uo=0,Ot=Rt=ct=null,ac=!1,lc=0,Ip.current=null,u===null||u.return===null){Pt=1,fc=o,St=null;break}e:{var x=i,S=u.return,D=u,F=o;if(o=Kt,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ne=D,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=Kv(S);if(de!==null){de.flags&=-257,qv(de,S,D,x,o),de.mode&1&&Hv(x,Y,o),o=de,F=Y;var ge=o.updateQueue;if(ge===null){var ye=new Set;ye.add(F),o.updateQueue=ye}else ge.add(F);break e}else{if((o&1)===0){Hv(x,Y,o),Vp();break e}F=Error(t(426))}}else if(ot&&D.mode&1){var xt=Kv(S);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),qv(xt,S,D,x,o),qf(ba(F,D));break e}}x=F=ba(F,D),Pt!==4&&(Pt=2),pc===null?pc=[x]:pc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var K=Wv(x,F,o);gv(x,K);break e;case 1:D=F;var U=x.type,G=x.stateNode;if((x.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(os===null||!os.has(G)))){x.flags|=65536,o&=-o,x.lanes|=o;var se=$v(x,D,o);gv(x,se);break e}}x=x.return}while(x!==null)}E1(u)}catch(ve){o=ve,St===u&&u!==null&&(St=u=u.return);continue}break}while(!0)}function k1(){var i=Ed.current;return Ed.current=vd,i===null?vd:i}function Vp(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Bt===null||(ho&268435455)===0&&(Sd&268435455)===0||cs(Bt,Kt)}function Pd(i,o){var u=We;We|=2;var p=k1();(Bt!==i||Kt!==o)&&(yi=null,po(i,o));do try{X2();break}catch(y){_1(i,y)}while(!0);if(Qf(),We=u,Ed.current=p,St!==null)throw Error(t(261));return Bt=null,Kt=0,Pt}function X2(){for(;St!==null;)b1(St)}function J2(){for(;St!==null&&!qs();)b1(St)}function b1(i){var o=I1(i.alternate,i,Nn);i.memoizedProps=i.pendingProps,o===null?E1(i):St=o,Ip.current=null}function E1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=$2(u,o,Nn),u!==null){St=u;return}}else{if(u=H2(u,o),u!==null){u.flags&=32767,St=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Pt=6,St=null;return}}if(o=o.sibling,o!==null){St=o;return}St=o=i}while(o!==null);Pt===0&&(Pt=5)}function mo(i,o,u){var p=Fe,y=Kn.transition;try{Kn.transition=null,Fe=1,Z2(i,o,u,p)}finally{Kn.transition=y,Fe=p}return null}function Z2(i,o,u,p){do Ia();while(as!==null);if((We&6)!==0)throw Error(t(327));u=i.finishedWork;var y=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=u.lanes|u.childLanes;if(kf(i,x),i===Bt&&(St=Bt=null,Kt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Id||(Id=!0,C1(Gs,function(){return Ia(),null})),x=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||x){x=Kn.transition,Kn.transition=null;var S=Fe;Fe=1;var D=We;We|=4,Ip.current=null,q2(i,u),p1(u,i),x2(Vf),ai=!!Df,Vf=Df=null,i.current=u,G2(u),ri(),We=D,Fe=S,Kn.transition=x}else i.current=u;if(Id&&(Id=!1,as=i,Cd=y),x=i.pendingLanes,x===0&&(os=null),Ou(u.stateNode),xn(i,tt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)y=o[u],p(y.value,{componentStack:y.stack,digest:y.digest});if(Td)throw Td=!1,i=Rp,Rp=null,i;return(Cd&1)!==0&&i.tag!==0&&Ia(),x=i.pendingLanes,(x&1)!==0?i===Pp?mc++:(mc=0,Pp=i):mc=0,ns(),null}function Ia(){if(as!==null){var i=Ir(Cd),o=Kn.transition,u=Fe;try{if(Kn.transition=null,Fe=16>i?16:i,as===null)var p=!1;else{if(i=as,as=null,Cd=0,(We&6)!==0)throw Error(t(331));var y=We;for(We|=4,pe=i.current;pe!==null;){var x=pe,S=x.child;if((pe.flags&16)!==0){var D=x.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(pe=Y;pe!==null;){var ne=pe;switch(ne.tag){case 0:case 11:case 15:hc(8,ne,x)}var re=ne.child;if(re!==null)re.return=ne,pe=re;else for(;pe!==null;){ne=pe;var te=ne.sibling,de=ne.return;if(c1(ne),ne===Y){pe=null;break}if(te!==null){te.return=de,pe=te;break}pe=de}}}var ge=x.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var xt=ye.sibling;ye.sibling=null,ye=xt}while(ye!==null)}}pe=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,pe=S;else e:for(;pe!==null;){if(x=pe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:hc(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,pe=K;break e}pe=x.return}}var U=i.current;for(pe=U;pe!==null;){S=pe;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,pe=G;else e:for(S=U;pe!==null;){if(D=pe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:bd(9,D)}}catch(ve){ft(D,D.return,ve)}if(D===S){pe=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,pe=se;break e}pe=D.return}}if(We=y,ns(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Qs,i)}catch{}p=!0}return p}finally{Fe=u,Kn.transition=o}}return!1}function S1(i,o,u){o=ba(u,o),o=Wv(i,o,1),i=is(i,o,1),o=hn(),i!==null&&(Zs(i,1,o),xn(i,o))}function ft(i,o,u){if(i.tag===3)S1(i,i,u);else for(;o!==null;){if(o.tag===3){S1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(os===null||!os.has(p))){i=ba(u,i),i=$v(o,i,1),o=is(o,i,1),i=hn(),o!==null&&(Zs(o,1,i),xn(o,i));break}}o=o.return}}function eI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=hn(),i.pingedLanes|=i.suspendedLanes&u,Bt===i&&(Kt&u)===u&&(Pt===4||Pt===3&&(Kt&130023424)===Kt&&500>tt()-Ap?po(i,0):Cp|=u),xn(i,o)}function T1(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ki,Ki<<=1,(Ki&130023424)===0&&(Ki=4194304)));var u=hn();i=pi(i,o),i!==null&&(Zs(i,o,u),xn(i,u))}function tI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),T1(i,u)}function nI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),T1(i,u)}var I1;I1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||mn.current)yn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return yn=!1,W2(i,o,u);yn=(i.flags&131072)!==0}else yn=!1,ot&&(o.flags&1048576)!==0&&ov(o,od,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;_d(i,o),i=o.pendingProps;var y=ma(o,Zt.current);_a(o,u),y=op(null,o,p,i,y,u);var x=ap();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,gn(p)?(x=!0,rd(o)):x=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Zf(o),y.updater=xd,o.stateNode=y,y._reactInternals=o,fp(o,p,i,u),o=yp(null,o,p,!0,x,u)):(o.tag=0,ot&&x&&Wf(o),dn(null,o,y,u),o=o.child),o;case 16:p=o.elementType;e:{switch(_d(i,o),i=o.pendingProps,y=p._init,p=y(p._payload),o.type=p,y=o.tag=iI(p),i=lr(p,i),y){case 0:o=gp(null,o,p,i,u);break e;case 1:o=Zv(null,o,p,i,u);break e;case 11:o=Gv(null,o,p,i,u);break e;case 14:o=Qv(null,o,p,lr(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:lr(p,y),gp(i,o,p,y,u);case 1:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:lr(p,y),Zv(i,o,p,y,u);case 3:e:{if(e1(o),i===null)throw Error(t(387));p=o.pendingProps,x=o.memoizedState,y=x.element,mv(i,o),hd(o,p,null,u);var S=o.memoizedState;if(p=S.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){y=ba(Error(t(423)),o),o=t1(i,o,p,u,y);break e}else if(p!==y){y=ba(Error(t(424)),o),o=t1(i,o,p,u,y);break e}else for(jn=Zi(o.stateNode.containerInfo.firstChild),Pn=o,ot=!0,ar=null,u=fv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(va(),p===y){o=gi(i,o,u);break e}dn(i,o,p,u)}o=o.child}return o;case 5:return vv(o),i===null&&Kf(o),p=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,S=y.children,Lf(p,y)?S=null:x!==null&&Lf(p,x)&&(o.flags|=32),Jv(i,o),dn(i,o,S,u),o.child;case 6:return i===null&&Kf(o),null;case 13:return n1(i,o,u);case 4:return ep(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=xa(o,null,p,u):dn(i,o,p,u),o.child;case 11:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:lr(p,y),Gv(i,o,p,y,u);case 7:return dn(i,o,o.pendingProps,u),o.child;case 8:return dn(i,o,o.pendingProps.children,u),o.child;case 12:return dn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,y=o.pendingProps,x=o.memoizedProps,S=y.value,Ze(cd,p._currentValue),p._currentValue=S,x!==null)if(or(x.value,S)){if(x.children===y.children&&!mn.current){o=gi(i,o,u);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var D=x.dependencies;if(D!==null){S=x.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(x.tag===1){F=mi(-1,u&-u),F.tag=2;var Y=x.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),Y.pending=F}}x.lanes|=u,F=x.alternate,F!==null&&(F.lanes|=u),Xf(x.return,u,o),D.lanes|=u;break}F=F.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=u,D=S.alternate,D!==null&&(D.lanes|=u),Xf(S,u,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}dn(i,o,y.children,u),o=o.child}return o;case 9:return y=o.type,p=o.pendingProps.children,_a(o,u),y=$n(y),p=p(y),o.flags|=1,dn(i,o,p,u),o.child;case 14:return p=o.type,y=lr(p,o.pendingProps),y=lr(p.type,y),Qv(i,o,p,y,u);case 15:return Yv(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:lr(p,y),_d(i,o),o.tag=1,gn(p)?(i=!0,rd(o)):i=!1,_a(o,u),zv(o,p,y),fp(o,p,y,u),yp(null,o,p,!0,i,u);case 19:return i1(i,o,u);case 22:return Xv(i,o,u)}throw Error(t(156,o.tag))};function C1(i,o){return jl(i,o)}function rI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(i,o,u,p){return new rI(i,o,u,p)}function Lp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function iI(i){if(typeof i=="function")return Lp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===H)return 11;if(i===He)return 14}return 2}function us(i,o){var u=i.alternate;return u===null?(u=qn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function jd(i,o,u,p,y,x){var S=2;if(p=i,typeof i=="function")Lp(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return go(u.children,y,x,o);case C:S=8,y|=8;break;case N:return i=qn(12,u,o,y|2),i.elementType=N,i.lanes=x,i;case L:return i=qn(13,u,o,y),i.elementType=L,i.lanes=x,i;case Ne:return i=qn(19,u,o,y),i.elementType=Ne,i.lanes=x,i;case Se:return Nd(u,y,x,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:S=10;break e;case B:S=9;break e;case H:S=11;break e;case He:S=14;break e;case kt:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=qn(S,u,o,y),o.elementType=i,o.type=p,o.lanes=x,o}function go(i,o,u,p){return i=qn(7,i,p,o),i.lanes=u,i}function Nd(i,o,u,p){return i=qn(22,i,p,o),i.elementType=Se,i.lanes=u,i.stateNode={isHidden:!1},i}function Op(i,o,u){return i=qn(6,i,null,o),i.lanes=u,i}function Bp(i,o,u){return o=qn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function sI(i,o,u,p,y){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Fp(i,o,u,p,y,x,S,D,F){return i=new sI(i,o,u,D,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=qn(3,null,null,o),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(x),i}function oI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function A1(i){if(!i)return ts;i=i._reactInternals;e:{if(ir(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(gn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(gn(u))return rv(i,u,o)}return o}function R1(i,o,u,p,y,x,S,D,F){return i=Fp(u,p,!0,i,y,x,S,D,F),i.context=A1(null),u=i.current,p=hn(),y=ls(u),x=mi(p,y),x.callback=o??null,is(u,x,y),i.current.lanes=y,Zs(i,y,p),xn(i,p),i}function Md(i,o,u,p){var y=o.current,x=hn(),S=ls(y);return u=A1(u),o.context===null?o.context=u:o.pendingContext=u,o=mi(x,S),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=is(y,o,S),i!==null&&(dr(i,y,S,x),dd(i,y,S)),S}function Dd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function P1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function zp(i,o){P1(i,o),(i=i.alternate)&&P1(i,o)}function aI(){return null}var j1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Up(i){this._internalRoot=i}Vd.prototype.render=Up.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Md(i,o,null,null)},Vd.prototype.unmount=Up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;fo(function(){Md(null,i,null,null)}),o[ui]=null}};function Vd(i){this._internalRoot=i}Vd.prototype.unstable_scheduleHydration=function(i){if(i){var o=zl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<In.length&&o!==0&&o<In[u].priority;u++);In.splice(u,0,i),u===0&&Zo(i)}};function Wp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ld(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function N1(){}function lI(i,o,u,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var Y=Dd(S);x.call(Y)}}var S=R1(o,p,i,0,null,!1,!1,"",N1);return i._reactRootContainer=S,i[ui]=S.current,Zl(i.nodeType===8?i.parentNode:i),fo(),S}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var D=p;p=function(){var Y=Dd(F);D.call(Y)}}var F=Fp(i,0,!1,null,null,!1,!1,"",N1);return i._reactRootContainer=F,i[ui]=F.current,Zl(i.nodeType===8?i.parentNode:i),fo(function(){Md(o,F,u,p)}),F}function Od(i,o,u,p,y){var x=u._reactRootContainer;if(x){var S=x;if(typeof y=="function"){var D=y;y=function(){var F=Dd(S);D.call(F)}}Md(o,S,i,y)}else S=lI(u,o,i,y,p);return Dd(S)}Bl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ke(o.pendingLanes);u!==0&&(Ol(o,u|1),xn(o,tt()),(We&6)===0&&(Ta=tt()+500,ns()))}break;case 13:fo(function(){var p=pi(i,1);if(p!==null){var y=hn();dr(p,i,1,y)}}),zp(i,1)}},Xo=function(i){if(i.tag===13){var o=pi(i,134217728);if(o!==null){var u=hn();dr(o,i,134217728,u)}zp(i,134217728)}},Fl=function(i){if(i.tag===13){var o=ls(i),u=pi(i,o);if(u!==null){var p=hn();dr(u,i,o,p)}zp(i,o)}},zl=function(){return Fe},Ul=function(i,o){var u=Fe;try{return Fe=i,o()}finally{Fe=u}},ei=function(i,o,u){switch(o){case"input":if(Ws(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var y=td(p);if(!y)throw Error(t(90));bl(p),Ws(p,y)}}}break;case"textarea":Tu(i,u);break;case"select":o=u.value,o!=null&&nr(i,!!u.multiple,o,!1)}},Au=Mp,Ru=fo;var cI={usingClientEntryPoint:!1,Events:[nc,fa,td,Ui,Wi,Mp]},gc={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uI={bundleType:gc.bundleType,version:gc.version,rendererPackageName:gc.rendererPackageName,rendererConfig:gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Lu(i),i===null?null:i.stateNode},findFiberByHostInstance:gc.findFiberByHostInstance||aI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{Qs=Bd.inject(uI),Sn=Bd}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cI,wn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(o))throw Error(t(200));return oI(i,o,null,u)},wn.createRoot=function(i,o){if(!Wp(i))throw Error(t(299));var u=!1,p="",y=j1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=Fp(i,1,!1,null,null,u,!1,p,y),i[ui]=o.current,Zl(i.nodeType===8?i.parentNode:i),new Up(o)},wn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Lu(o),i=i===null?null:i.stateNode,i},wn.flushSync=function(i){return fo(i)},wn.hydrate=function(i,o,u){if(!Ld(o))throw Error(t(200));return Od(null,i,o,!0,u)},wn.hydrateRoot=function(i,o,u){if(!Wp(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,y=!1,x="",S=j1;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=R1(o,null,i,1,u??null,y,!1,x,S),i[ui]=o.current,Zl(i),p)for(i=0;i<p.length;i++)u=p[i],y=u._getVersion,y=y(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,y]:o.mutableSourceEagerHydrationData.push(u,y);return new Vd(o)},wn.render=function(i,o,u){if(!Ld(o))throw Error(t(200));return Od(null,i,o,!1,u)},wn.unmountComponentAtNode=function(i){if(!Ld(i))throw Error(t(40));return i._reactRootContainer?(fo(function(){Od(null,null,i,!1,function(){i._reactRootContainer=null,i[ui]=null})}),!0):!1},wn.unstable_batchedUpdates=Mp,wn.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Ld(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Od(i,o,u,!1,p)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var z1;function xI(){if(z1)return Kp.exports;z1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kp.exports=vI(),Kp.exports}var U1;function wI(){if(U1)return Fd;U1=1;var n=xI();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var _I=wI();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var W1="popstate";function kI(n={}){function e(s,a){let{pathname:c="/",search:f="",hash:d=""}=Vo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),jm("",{pathname:c,search:f,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let c=s.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof a=="string"?a:Fc(a))}function r(s,a){On(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return EI(e,t,r,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function On(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bI(){return Math.random().toString(36).substring(2,10)}function $1(n,e){return{usr:n.state,key:n.key,idx:e}}function jm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||r||bI()}}function Fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function EI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,f="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function v(){f="POP";let T=g(),M=T==null?null:T-m;m=T,d&&d({action:f,location:I.location,delta:M})}function _(T,M){f="PUSH";let V=jm(I.location,T,M);t&&t(V,T),m=g()+1;let j=$1(V,m),Q=I.createHref(V);try{c.pushState(j,"",Q)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(Q)}a&&d&&d({action:f,location:I.location,delta:1})}function E(T,M){f="REPLACE";let V=jm(I.location,T,M);t&&t(V,T),m=g();let j=$1(V,m),Q=I.createHref(V);c.replaceState(j,"",Q),a&&d&&d({action:f,location:I.location,delta:0})}function b(T){return SI(T)}let I={get action(){return f},get location(){return n(s,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(W1,v),d=T,()=>{s.removeEventListener(W1,v),d=null}},createHref(T){return e(s,T)},createURL:b,encodeLocation(T){let M=b(T);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:E,go(T){return c.go(T)}};return I}function SI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Fc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function J_(n,e,t="/"){return TI(n,e,t,!1)}function TI(n,e,t,r){let s=typeof e=="string"?Vo(e):e,a=Ii(s.pathname||"/",t);if(a==null)return null;let c=Z_(n);II(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let m=OI(a);f=VI(c[d],m,r)}return f}function Z_(n,e=[],t=[],r="",s=!1){let a=(c,f,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;at(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let v=bi([r,g.relativePath]),_=t.concat(g);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Z_(c.children,e,_,v,d)),!(c.path==null&&!c.index)&&e.push({path:v,score:MI(v,c.index),routesMeta:_})};return n.forEach((c,f)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))a(c,f);else for(let m of ek(c.path))a(c,f,!0,m)}),e}function ek(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=ek(r.join("/")),f=[];return f.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&f.push(...c),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function II(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CI=/^:[\w-]+$/,AI=3,RI=2,PI=1,jI=10,NI=-2,H1=n=>n==="*";function MI(n,e){let t=n.split("/"),r=t.length;return t.some(H1)&&(r+=NI),e&&(r+=RI),t.filter(s=>!H1(s)).reduce((s,a)=>s+(CI.test(a)?AI:a===""?PI:jI),r)}function DI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function VI(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=ph({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),_=d.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=ph({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:bi([a,v.pathname]),pathnameBase:UI(bi([a,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(a=bi([a,v.pathnameBase]))}return c}function ph(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=LI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},_)=>{if(g==="*"){let b=f[_]||"";c=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const E=f[_];return v&&!E?m[g]=void 0:m[g]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function LI(n,e=!1,t=!0){On(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return On(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BI=n=>tk.test(n);function FI(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Vo(n):n,a;if(t)if(BI(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),On(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=K1(t.substring(1),"/"):a=K1(t,e)}else a=e;return{pathname:a,search:WI(r),hash:$I(s)}}function K1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Qp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dg(n){let e=zI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Vg(n,e,t,r=!1){let s;typeof n=="string"?s=Vo(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),Qp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Qp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Qp("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,f;if(c==null)f=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}f=v>=0?e[v]:"/"}let d=FI(s,f),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var bi=n=>n.join("/").replace(/\/\/+/g,"/"),UI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),WI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$I=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,HI=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function KI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function qI(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rk(n,e){let t=n;if(typeof t!="string"||!tk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(nk)try{let a=new URL(window.location.href),c=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=Ii(c.pathname,e);c.origin===a.origin&&f!=null?t=f+c.search+c.hash:s=!0}catch{On(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ik=["POST","PUT","PATCH","DELETE"];new Set(ik);var GI=["GET",...ik];new Set(GI);var sl=P.createContext(null);sl.displayName="DataRouter";var Kh=P.createContext(null);Kh.displayName="DataRouterState";var QI=P.createContext(!1),sk=P.createContext({isTransitioning:!1});sk.displayName="ViewTransition";var YI=P.createContext(new Map);YI.displayName="Fetchers";var XI=P.createContext(null);XI.displayName="Await";var Bn=P.createContext(null);Bn.displayName="Navigation";var iu=P.createContext(null);iu.displayName="Location";var kr=P.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var Lg=P.createContext(null);Lg.displayName="RouteError";var ok="REACT_ROUTER_ERROR",JI="REDIRECT",ZI="ROUTE_ERROR_RESPONSE";function eC(n){if(n.startsWith(`${ok}:${JI}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function tC(n){if(n.startsWith(`${ok}:${ZI}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new HI(e.status,e.statusText,e.data)}catch{}}function nC(n,{relative:e}={}){at(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Bn),{hash:s,pathname:a,search:c}=su(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:bi([t,a])),r.createHref({pathname:f,search:c,hash:s})}function ol(){return P.useContext(iu)!=null}function tr(){return at(ol(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(iu).location}var ak="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lk(n){P.useContext(Bn).static||P.useLayoutEffect(n)}function al(){let{isDataRoute:n}=P.useContext(kr);return n?mC():rC()}function rC(){at(ol(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(sl),{basename:e,navigator:t}=P.useContext(Bn),{matches:r}=P.useContext(kr),{pathname:s}=tr(),a=JSON.stringify(Dg(r)),c=P.useRef(!1);return lk(()=>{c.current=!0}),P.useCallback((d,m={})=>{if(On(c.current,ak),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=Vg(d,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:bi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,s,n])}P.createContext(null);function Og(){let{matches:n}=P.useContext(kr),e=n[n.length-1];return e?e.params:{}}function su(n,{relative:e}={}){let{matches:t}=P.useContext(kr),{pathname:r}=tr(),s=JSON.stringify(Dg(t));return P.useMemo(()=>Vg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function iC(n,e){return ck(n,e)}function ck(n,e,t,r,s){var V;at(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(Bn),{matches:c}=P.useContext(kr),f=c[c.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",v=f&&f.route;{let j=v&&v.path||"";dk(m,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let _=tr(),E;if(e){let j=typeof e=="string"?Vo(e):e;at(g==="/"||((V=j.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${j.pathname}" was given in the \`location\` prop.`),E=j}else E=_;let b=E.pathname||"/",I=b;if(g!=="/"){let j=g.replace(/^\//,"").split("/");I="/"+b.replace(/^\//,"").split("/").slice(j.length).join("/")}let T=J_(n,{pathname:I});On(v||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),On(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=cC(T&&T.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:bi([g,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:bi([g,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),c,t,r,s);return e&&M?P.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},M):M}function sC(){let n=pC(),e=KI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var oC=P.createElement(sC,null),uk=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=tC(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(kr.Provider,{value:this.props.routeContext},P.createElement(Lg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(aC,{error:n},e):e}};uk.contextType=QI;var Yp=new WeakMap;function aC({children:n,error:e}){let{basename:t}=P.useContext(Bn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=eC(e.digest);if(r){let s=Yp.get(e);if(s)throw s;let a=rk(r.location,t);if(nk&&!Yp.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Yp.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function lC({routeContext:n,match:e,children:t}){let r=P.useContext(sl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(kr.Provider,{value:n},t)}function cC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t==null?void 0:t.errors;if(c!=null){let g=a.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:E}=t,b=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||b){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let m=t&&r?(g,v)=>{var _,E;r(g,{location:t.location,params:((E=(_=t.matches)==null?void 0:_[0])==null?void 0:E.params)??{},unstable_pattern:qI(t.matches),errorInfo:v})}:void 0;return a.reduceRight((g,v,_)=>{let E,b=!1,I=null,T=null;t&&(E=c&&v.route.id?c[v.route.id]:void 0,I=v.route.errorElement||oC,f&&(d<0&&_===0?(dk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,T=null):d===_&&(b=!0,T=v.route.hydrateFallbackElement||null)));let M=e.concat(a.slice(0,_+1)),V=()=>{let j;return E?j=I:b?j=T:v.route.Component?j=P.createElement(v.route.Component,null):v.route.element?j=v.route.element:j=g,P.createElement(lC,{match:v,routeContext:{outlet:g,matches:M,isDataRoute:t!=null},children:j})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?P.createElement(uk,{location:t.location,revalidation:t.revalidation,component:I,error:E,children:V(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:m}):V()},null)}function Bg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uC(n){let e=P.useContext(sl);return at(e,Bg(n)),e}function dC(n){let e=P.useContext(Kh);return at(e,Bg(n)),e}function hC(n){let e=P.useContext(kr);return at(e,Bg(n)),e}function Fg(n){let e=hC(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function fC(){return Fg("useRouteId")}function pC(){var r;let n=P.useContext(Lg),e=dC("useRouteError"),t=Fg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function mC(){let{router:n}=uC("useNavigate"),e=Fg("useNavigate"),t=P.useRef(!1);return lk(()=>{t.current=!0}),P.useCallback(async(s,a={})=>{On(t.current,ak),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var q1={};function dk(n,e,t){!e&&!q1[n]&&(q1[n]=!0,On(!1,t))}P.memo(gC);function gC({routes:n,future:e,state:t,onError:r}){return ck(n,void 0,t,r,e)}function yC({to:n,replace:e,state:t,relative:r}){at(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Bn);On(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(kr),{pathname:c}=tr(),f=al(),d=Vg(n,Dg(a),c,r==="path"),m=JSON.stringify(d);return P.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function pt(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:c}){at(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:c,future:{}}),[f,s,a,c]);typeof t=="string"&&(t=Vo(t));let{pathname:m="/",search:g="",hash:v="",state:_=null,key:E="default"}=t,b=P.useMemo(()=>{let I=Ii(m,f);return I==null?null:{location:{pathname:I,search:g,hash:v,state:_,key:E},navigationType:r}},[f,m,g,v,_,E,r]);return On(b!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(Bn.Provider,{value:d},P.createElement(iu.Provider,{children:e,value:b}))}function xC({children:n,location:e}){return iC(Nm(n),e)}function Nm(n,e=[]){let t=[];return P.Children.forEach(n,(r,s)=>{if(!P.isValidElement(r))return;let a=[...e,s];if(r.type===P.Fragment){t.push.apply(t,Nm(r.props.children,a));return}at(r.type===pt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Nm(r.props.children,a)),t.push(c)}),t}var Jd="get",Zd="application/x-www-form-urlencoded";function qh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function wC(n){return qh(n)&&n.tagName.toLowerCase()==="button"}function _C(n){return qh(n)&&n.tagName.toLowerCase()==="form"}function kC(n){return qh(n)&&n.tagName.toLowerCase()==="input"}function bC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function EC(n,e){return n.button===0&&(!e||e==="_self")&&!bC(n)}var zd=null;function SC(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var TC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xp(n){return n!=null&&!TC.has(n)?(On(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zd}"`),null):n}function IC(n,e){let t,r,s,a,c;if(_C(n)){let f=n.getAttribute("action");r=f?Ii(f,e):null,t=n.getAttribute("method")||Jd,s=Xp(n.getAttribute("enctype"))||Zd,a=new FormData(n)}else if(wC(n)||kC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?Ii(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Jd,s=Xp(n.getAttribute("formenctype"))||Xp(f.getAttribute("enctype"))||Zd,a=new FormData(f,n),!SC()){let{name:m,type:g,value:v}=n;if(g==="image"){let _=m?`${m}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else m&&a.append(m,v)}}else{if(qh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jd,r=null,s=Zd,c=n}return a&&s==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function CC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Ii(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function AC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function PC(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await AC(a,t);return c.links?c.links():[]}return[]}));return DC(r.flat(1).filter(RC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function G1(n,e,t,r,s,a){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,m)=>c(d,m)||f(d,m)):a==="data"?e.filter((d,m)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function jC(n,e,{includeHydrateFallback:t}={}){return NC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function NC(n){return[...new Set(n)]}function MC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function DC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(MC(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function hk(){let n=P.useContext(sl);return zg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function VC(){let n=P.useContext(Kh);return zg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ug=P.createContext(void 0);Ug.displayName="FrameworkContext";function fk(){let n=P.useContext(Ug);return zg(n,"You must render this element inside a <HydratedRouter> element"),n}function LC(n,e){let t=P.useContext(Ug),[r,s]=P.useState(!1),[a,c]=P.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=M=>{M.forEach(V=>{c(V.isIntersecting)})},T=new IntersectionObserver(I,{threshold:.5});return _.current&&T.observe(_.current),()=>{T.disconnect()}}},[n]),P.useEffect(()=>{if(r){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[r]);let E=()=>{s(!0)},b=()=>{s(!1),c(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:vc(f,E),onBlur:vc(d,b),onMouseEnter:vc(m,E),onMouseLeave:vc(g,b),onTouchStart:vc(v,E)}]:[!1,_,{}]}function vc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function OC({page:n,...e}){let{router:t}=hk(),r=P.useMemo(()=>J_(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(FC,{page:n,matches:r,...e}):null}function BC(n){let{manifest:e,routeModules:t}=fk(),[r,s]=P.useState([]);return P.useEffect(()=>{let a=!1;return PC(n,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[n,e,t]),r}function FC({page:n,matches:e,...t}){let r=tr(),{future:s,manifest:a,routeModules:c}=fk(),{basename:f}=hk(),{loaderData:d,matches:m}=VC(),g=P.useMemo(()=>G1(n,e,m,a,r,"data"),[n,e,m,a,r]),v=P.useMemo(()=>G1(n,e,m,a,r,"assets"),[n,e,m,a,r]),_=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,T=!1;if(e.forEach(V=>{var Q;let j=a.routes[V.route.id];!j||!j.hasLoader||(!g.some(z=>z.route.id===V.route.id)&&V.route.id in d&&((Q=c[V.route.id])!=null&&Q.shouldRevalidate)||j.hasClientLoader?T=!0:I.add(V.route.id))}),I.size===0)return[];let M=CC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return T&&I.size>0&&M.searchParams.set("_routes",e.filter(V=>I.has(V.route.id)).map(V=>V.route.id).join(",")),[M.pathname+M.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,a,g,e,n,c]),E=P.useMemo(()=>jC(v,a),[v,a]),b=BC(v);return P.createElement(P.Fragment,null,_.map(I=>P.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),E.map(I=>P.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),b.map(({key:I,link:T})=>P.createElement("link",{key:I,nonce:t.nonce,...T})))}function zC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var UC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UC&&(window.__reactRouterVersion="7.12.0")}catch{}function WC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=P.useRef();s.current==null&&(s.current=kI({window:r,v5Compat:!0}));let a=s.current,[c,f]=P.useState({action:a.action,location:a.location}),d=P.useCallback(m=>{t===!1?f(m):P.startTransition(()=>f(m))},[t]);return P.useLayoutEffect(()=>a.listen(d),[a,d]),P.createElement(vC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t})}var pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,le=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:c,state:f,target:d,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...E},b){let{basename:I,unstable_useTransitions:T}=P.useContext(Bn),M=typeof m=="string"&&pk.test(m),V=rk(m,I);m=V.to;let j=nC(m,{relative:s}),[Q,z,W]=LC(r,E),A=qC(m,{replace:c,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:T});function C(O){e&&e(O),O.defaultPrevented||A(O)}let N=P.createElement("a",{...E,...W,href:V.absoluteURL||j,onClick:V.isExternal||a?e:C,ref:zC(b,z),target:d,"data-discover":!M&&t==="render"?"true":void 0});return Q&&!M?P.createElement(P.Fragment,null,N,P.createElement(OC,{page:j})):N});le.displayName="Link";var $C=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:c,viewTransition:f,children:d,...m},g){let v=su(c,{relative:m.relative}),_=tr(),E=P.useContext(Kh),{navigator:b,basename:I}=P.useContext(Bn),T=E!=null&&JC(v)&&f===!0,M=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,V=_.pathname,j=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(V=V.toLowerCase(),j=j?j.toLowerCase():null,M=M.toLowerCase()),j&&I&&(j=Ii(j,I)||j);const Q=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let z=V===M||!s&&V.startsWith(M)&&V.charAt(Q)==="/",W=j!=null&&(j===M||!s&&j.startsWith(M)&&j.charAt(M.length)==="/"),A={isActive:z,isPending:W,isTransitioning:T},C=z?e:void 0,N;typeof r=="function"?N=r(A):N=[r,z?"active":null,W?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(A):a;return P.createElement(le,{...m,"aria-current":C,className:N,ref:g,style:O,to:c,viewTransition:f},typeof d=="function"?d(A):d)});$C.displayName="NavLink";var HC=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:c=Jd,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...E},b)=>{let{unstable_useTransitions:I}=P.useContext(Bn),T=YC(),M=XC(f,{relative:m}),V=c.toLowerCase()==="get"?"get":"post",j=typeof f=="string"&&pk.test(f),Q=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,A=(W==null?void 0:W.getAttribute("formmethod"))||c,C=()=>T(W||z.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:a,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_});I&&t!==!1?P.startTransition(()=>C()):C()};return P.createElement("form",{ref:b,method:V,action:M,onSubmit:r?d:Q,...E,"data-discover":!j&&n==="render"?"true":void 0})});HC.displayName="Form";function KC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mk(n){let e=P.useContext(sl);return at(e,KC(n)),e}function qC(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=al(),g=tr(),v=su(n,{relative:a});return P.useCallback(_=>{if(EC(_,e)){_.preventDefault();let E=t!==void 0?t:Fc(g)===Fc(v),b=()=>m(n,{replace:E,state:r,preventScrollReset:s,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f});d?P.startTransition(()=>b()):b()}},[g,m,v,t,r,e,n,s,a,c,f,d])}var GC=0,QC=()=>`__${String(++GC)}__`;function YC(){let{router:n}=mk("useSubmit"),{basename:e}=P.useContext(Bn),t=fC(),r=n.fetch,s=n.navigate;return P.useCallback(async(a,c={})=>{let{action:f,method:d,encType:m,formData:g,body:v}=IC(a,e);if(c.navigate===!1){let _=c.fetcherKey||QC();await r(_,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function XC(n,{relative:e}={}){let{basename:t}=P.useContext(Bn),r=P.useContext(kr);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...su(n||".",{relative:e})},c=tr();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(v=>v).forEach(v=>f.append("index",v));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:bi([t,a.pathname])),Fc(a)}function JC(n,{relative:e}={}){let t=P.useContext(sk);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mk("useViewTransitionState"),s=su(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ii(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ii(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ph(s.pathname,c)!=null||ph(s.pathname,a)!=null}const ZC=()=>{};var Q1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],f=n[t++],d=((s&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},yk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,f=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=a>>2,v=(a&3)<<4|f>>4;let _=(f&15)<<2|m>>6,E=m&63;d||(E=64,c||(_=64)),r.push(t[g],t[v],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||m==null||v==null)throw new tA;const _=a<<2|f>>4;if(r.push(_),m!==64){const E=f<<4&240|m>>2;if(r.push(E),v!==64){const b=m<<6&192|v;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(n){const e=gk(n);return yk.encodeByteArray(e,!0)},mh=function(n){return nA(n).replace(/\./g,"")},vk=function(n){try{return yk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=()=>rA().__FIREBASE_DEFAULTS__,sA=()=>{if(typeof process>"u"||typeof Q1>"u")return;const n=Q1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vk(n[1]);return e&&JSON.parse(e)},Gh=()=>{try{return ZC()||iA()||sA()||oA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xk=n=>{var e,t;return(t=(e=Gh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},aA=n=>{const e=xk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wk=()=>{var n;return(n=Gh())==null?void 0:n.config},_k=n=>{var e;return(e=Gh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[mh(JSON.stringify(t)),mh(JSON.stringify(c)),""].join(".")}const Rc={};function uA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?n.emulator.push(e):n.prod.push(e);return n}function dA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Y1=!1;function bk(n,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Rc[n]===e||Rc[n]||Y1)return;Rc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=uA().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function f(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Y1=!0,c()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=dA(r),E=t("text"),b=document.getElementById(E)||document.createElement("span"),I=t("learnmore"),T=document.getElementById(I)||document.createElement("a"),M=t("preprendIcon"),V=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const j=_.element;f(j),g(T,I);const Q=m();d(V,M),j.append(V,b,T,Q),document.body.appendChild(j)}a?(b.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function fA(){var e;const n=(e=Gh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="FirebaseError";class Ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_A,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?kA(a,r):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Ni(s,f,r)}}function kA(n,e){return n.replace(bA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bA=/\{\$([^}]+)}/g;function EA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ss(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(X1(a)&&X1(c)){if(!Ss(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function X1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function bc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SA(n,e){const t=new TA(n,e);return t.subscribe.bind(t)}class TA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");IA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Jp),s.error===void 0&&(s.error=Jp),s.complete===void 0&&(s.complete=Jp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class Io{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RA(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AA(n){return n===vo?void 0:n}function RA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const jA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},NA=Le.INFO,MA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},DA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=MA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wg{constructor(e){this.name=e,this._logLevel=NA,this._logHandler=DA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const VA=(n,e)=>e.some(t=>n instanceof t);let J1,Z1;function LA(){return J1||(J1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OA(){return Z1||(Z1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ek=new WeakMap,Mm=new WeakMap,Sk=new WeakMap,Zp=new WeakMap,$g=new WeakMap;function BA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(ws(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ek.set(t,n)}).catch(()=>{}),$g.set(e,n),e}function FA(n){if(Mm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Mm.set(n,e)}let Dm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zA(n){Dm=n(Dm)}function UA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(em(this),e,...t);return Sk.set(r,e.sort?e.sort():[e]),ws(r)}:OA().includes(n)?function(...e){return n.apply(em(this),e),ws(Ek.get(this))}:function(...e){return ws(n.apply(em(this),e))}}function WA(n){return typeof n=="function"?UA(n):(n instanceof IDBTransaction&&FA(n),VA(n,LA())?new Proxy(n,Dm):n)}function ws(n){if(n instanceof IDBRequest)return BA(n);if(Zp.has(n))return Zp.get(n);const e=WA(n);return e!==n&&(Zp.set(n,e),$g.set(e,n)),e}const em=n=>$g.get(n);function $A(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),f=ws(c);return r&&c.addEventListener("upgradeneeded",d=>{r(ws(c.result),d.oldVersion,d.newVersion,ws(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const HA=["get","getKey","getAll","getAllKeys","count"],KA=["put","add","delete","clear"],tm=new Map;function ex(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=KA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||HA.includes(t)))return;const a=async function(c,...f){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return tm.set(e,a),a}zA(n=>({...n,get:(e,t,r)=>ex(e,t)||n.get(e,t,r),has:(e,t)=>!!ex(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function GA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",tx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Wg("@firebase/app"),QA="@firebase/app-compat",YA="@firebase/analytics-compat",XA="@firebase/analytics",JA="@firebase/app-check-compat",ZA="@firebase/app-check",eR="@firebase/auth",tR="@firebase/auth-compat",nR="@firebase/database",rR="@firebase/data-connect",iR="@firebase/database-compat",sR="@firebase/functions",oR="@firebase/functions-compat",aR="@firebase/installations",lR="@firebase/installations-compat",cR="@firebase/messaging",uR="@firebase/messaging-compat",dR="@firebase/performance",hR="@firebase/performance-compat",fR="@firebase/remote-config",pR="@firebase/remote-config-compat",mR="@firebase/storage",gR="@firebase/storage-compat",yR="@firebase/firestore",vR="@firebase/ai",xR="@firebase/firestore-compat",wR="firebase",_R="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",kR={[Vm]:"fire-core",[QA]:"fire-core-compat",[XA]:"fire-analytics",[YA]:"fire-analytics-compat",[ZA]:"fire-app-check",[JA]:"fire-app-check-compat",[eR]:"fire-auth",[tR]:"fire-auth-compat",[nR]:"fire-rtdb",[rR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[sR]:"fire-fn",[oR]:"fire-fn-compat",[aR]:"fire-iid",[lR]:"fire-iid-compat",[cR]:"fire-fcm",[uR]:"fire-fcm-compat",[dR]:"fire-perf",[hR]:"fire-perf-compat",[fR]:"fire-rc",[pR]:"fire-rc-compat",[mR]:"fire-gcs",[gR]:"fire-gcs-compat",[yR]:"fire-fst",[xR]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[wR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,bR=new Map,Om=new Map;function nx(n,e){try{n.container.addComponent(e)}catch(t){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ka(n){const e=n.name;if(Om.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,n);for(const t of gh.values())nx(t,n);for(const t of bR.values())nx(t,n);return!0}function Hg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new ou("app","Firebase",ER);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=_R;function Tk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Lm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(t||(t=wk()),!t)throw _s.create("no-options");const a=gh.get(s);if(a){if(Ss(t,a.options)&&Ss(r,a.config))return a;throw _s.create("duplicate-app",{appName:s})}const c=new PA(s);for(const d of Om.values())c.addComponent(d);const f=new SR(t,r,c);return gh.set(s,f),f}function Ik(n=Lm){const e=gh.get(n);if(!e&&n===Lm&&wk())return Tk();if(!e)throw _s.create("no-app",{appName:n});return e}function ks(n,e,t){let r=kR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(c.join(" "));return}Ka(new Io(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebase-heartbeat-database",IR=1,zc="firebase-heartbeat-store";let nm=null;function Ck(){return nm||(nm=$A(TR,IR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zc)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),nm}async function CR(n){try{const t=(await Ck()).transaction(zc),r=await t.objectStore(zc).get(Ak(n));return await t.done,r}catch(e){if(e instanceof Ni)Ci.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ci.warn(t.message)}}}async function rx(n,e){try{const r=(await Ck()).transaction(zc,"readwrite");await r.objectStore(zc).put(e,Ak(n)),await r.done}catch(t){if(t instanceof Ni)Ci.warn(t.message);else{const r=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ci.warn(r.message)}}}function Ak(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=1024,RR=30;class PR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ix();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>RR){const c=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ix(),{heartbeatsToSend:r,unsentEntries:s}=jR(this._heartbeatsCache.heartbeats),a=mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ci.warn(t),""}}}function ix(){return new Date().toISOString().substring(0,10)}function jR(n,e=AR){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),sx(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),sx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sx(n){return mh(JSON.stringify({version:2,heartbeats:n})).length}function MR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n){Ka(new Io("platform-logger",e=>new qA(e),"PRIVATE")),Ka(new Io("heartbeat",e=>new PR(e),"PRIVATE")),ks(Vm,tx,n),ks(Vm,tx,"esm2020"),ks("fire-js","")}DR("");function Rk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VR=Rk,Pk=new ou("auth","Firebase",Rk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Wg("@firebase/auth");function LR(n,...e){yh.logLevel<=Le.WARN&&yh.warn(`Auth (${cl}): ${n}`,...e)}function eh(n,...e){yh.logLevel<=Le.ERROR&&yh.error(`Auth (${cl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,...e){throw qg(n,...e)}function mr(n,...e){return qg(n,...e)}function Kg(n,e,t){const r={...VR(),[e]:t};return new ou("auth","Firebase",r).create(e,{appName:n.name})}function Ei(n){return Kg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(n,"argument-error"),Kg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Pk.create(n,...e)}function be(n,e,...t){if(!n)throw qg(e,...t)}function _i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eh(e),new Error(e)}function Ai(n,e){n||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function BR(){return ox()==="http:"||ox()==="https:"}function ox(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BR()||mA()||"connection"in navigator)?navigator.onLine:!0}function zR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return FR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$R=new lu(3e4,6e4);function Ds(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Mi(n,e,t,r,s={}){return Nk(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const f=au({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...a};return pA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ll(n.emulatorConfig.host)&&(m.credentials="include"),jk.fetch()(await Mk(n,n.config.apiHost,t,f),m)})}async function Nk(n,e,t){n._canInitEmulator=!1;const r={...UR,...e};try{const s=new KR(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Ud(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Ud(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Kg(n,g,m);Zn(n,g)}}catch(s){if(s instanceof Ni)throw s;Zn(n,"network-request-failed",{message:String(s)})}}async function cu(n,e,t,r,s={}){const a=await Mi(n,e,t,r,s);return"mfaPendingCredential"in a&&Zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Mk(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?Gg(n.config,s):`${n.config.apiScheme}://${s}`;return WR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function HR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),$R.get())})}}function Ud(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=mr(n,e,r);return s.customData._tokenResponse=t,s}function ax(n){return n!==void 0&&n.enterprise!==void 0}class qR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GR(n,e){return Mi(n,"GET","/v2/recaptchaConfig",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e){return Mi(n,"POST","/v1/accounts:delete",e)}async function vh(n,e){return Mi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YR(n,e=!1){const t=Lt(n),r=await t.getIdToken(e),s=Qg(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Pc(rm(s.auth_time)),issuedAtTime:Pc(rm(s.iat)),expirationTime:Pc(rm(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function rm(n){return Number(n)*1e3}function Qg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=vk(t);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function lx(n){const e=Qg(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ni&&XR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(n){var v;const e=n.auth,t=await n.getIdToken(),r=await qa(n,vh(e,{idToken:t}));be(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(v=s.providerUserInfo)!=null&&v.length?Dk(s.providerUserInfo):[],c=eP(n.providerData,a),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Fm(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function ZR(n){const e=Lt(n);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Dk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e){const t=await Nk(n,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await Mk(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&ll(n.emulatorConfig.host)&&(d.credentials="include"),jk.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nP(n,e){return Mi(n,"POST","/v2/accounts:revokeToken",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=lx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await tP(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new Oa;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(be(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await qa(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await qa(this,QR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:E,providerData:b,stsTokenManager:I}=t;be(v&&I,e,"internal-error");const T=Oa.fromJSON(this.name,I);be(typeof v=="string",e,"internal-error"),hs(r,e.name),hs(s,e.name),be(typeof _=="boolean",e,"internal-error"),be(typeof E=="boolean",e,"internal-error"),hs(a,e.name),hs(c,e.name),hs(f,e.name),hs(d,e.name),hs(m,e.name),hs(g,e.name);const M=new pr({uid:v,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:E,photoURL:c,phoneNumber:a,tenantId:f,stsTokenManager:T,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(M.providerData=b.map(V=>({...V}))),d&&(M._redirectEventId=d),M}static async _fromIdTokenResponse(e,t,r=!1){const s=new Oa;s.updateFromServerResponse(t);const a=new pr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Dk(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new Oa;f.updateFromIdToken(r);const d=new pr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Fm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;function ki(n){Ai(n instanceof Function,"Expected a class definition");let e=cx.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vk.type="NONE";const ux=Vk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n,e,t){return`firebase:${n}:${e}:${t}`}class Ba{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,a),this.fullPersistenceKey=th("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vh(this.auth,{idToken:e}).catch(()=>{});return t?pr._fromGetAccountInfoResponse(this.auth,t,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ba(ki(ux),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ki(ux);const c=th(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const _=await vh(e,{idToken:g}).catch(()=>{});if(!_)break;v=await pr._fromGetAccountInfoResponse(e,_,g)}else v=pr._fromJSON(e,g);m!==a&&(f=v),a=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ba(a,e,r):(a=d[0],f&&await a._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Ba(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uk(e))return"Blackberry";if(Wk(e))return"Webos";if(Ok(e))return"Safari";if((e.includes("chrome/")||Bk(e))&&!e.includes("edge/"))return"Chrome";if(zk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lk(n=cn()){return/firefox\//i.test(n)}function Ok(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bk(n=cn()){return/crios\//i.test(n)}function Fk(n=cn()){return/iemobile/i.test(n)}function zk(n=cn()){return/android/i.test(n)}function Uk(n=cn()){return/blackberry/i.test(n)}function Wk(n=cn()){return/webos/i.test(n)}function Yg(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rP(n=cn()){var e;return Yg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function iP(){return yA()&&document.documentMode===10}function $k(n=cn()){return Yg(n)||zk(n)||Wk(n)||Uk(n)||/windows phone/i.test(n)||Fk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e=[]){let t;switch(n){case"Browser":t=dx(cn());break;case"Worker":t=`${dx(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,f)=>{try{const d=e(a);c(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(n,e={}){return Mi(n,"GET","/v2/passwordPolicy",Ds(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=6;class lP{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??aP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hx(this),this.idTokenSubscription=new hx(this),this.beforeStateQueue=new sP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vh(this,{idToken:e}),r=await pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Mn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Ei(this));const t=e?Lt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oP(this),t=new lP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&LR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vs(n){return Lt(n)}class hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uP(n){Qh=n}function Kk(n){return Qh.loadJS(n)}function dP(){return Qh.recaptchaEnterpriseScript}function hP(){return Qh.gapiScript}function fP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class pP{constructor(){this.enterprise=new mP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gP="recaptcha-enterprise",qk="NO_RECAPTCHA";class yP{constructor(e){this.type=gP,this.auth=Vs(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,f)=>{GR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new qR(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(d=>{f(d)})})}function s(a,c,f){const d=window.grecaptcha;ax(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(qk)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pP().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(f=>{if(!t&&ax(window.grecaptcha))s(f,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=dP();d.length!==0&&(d+=f),Kk(d).then(()=>{s(f,a,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function fx(n,e,t,r=!1,s=!1){const a=new yP(n);let c;if(s)c=qk;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function zm(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await fx(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await fx(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n,e){const t=Hg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ss(a,e??{}))return s;Zn(s,"already-initialized")}return t.initialize({options:e})}function xP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ki);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wP(n,e,t){const r=Vs(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Gk(e),{host:c,port:f}=_P(e),d=f===null?"":`:${f}`,m={url:`${a}//${c}${d}/`},g=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Ss(m,r.config.emulator)&&Ss(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ll(c)?(kk(`${a}//${c}${d}`),bk("Auth",!0)):kP()}function Gk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _P(n){const e=Gk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:px(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:px(c)}}}function px(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function bP(n,e){return Mi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(n,e){return cu(n,"POST","/v1/accounts:signInWithPassword",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",Ds(n,e))}async function TP(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends Xg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Uc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Uc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,t,"signInWithPassword",EP);case"emailLink":return SP(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,r,"signUpPassword",bP);case"emailLink":return TP(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(n,e){return cu(n,"POST","/v1/accounts:signInWithIdp",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="http://localhost";class Co extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const c=new Co(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Fa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Fa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fa(e,t)}buildRequest(){const e={requestUri:IP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AP(n){const e=kc(bc(n)).link,t=e?kc(bc(e)).deep_link_id:null,r=kc(bc(n)).deep_link_id;return(r?kc(bc(r)).link:null)||r||t||e||n}class Jg{constructor(e){const t=kc(bc(e)),r=t.apiKey??null,s=t.oobCode??null,a=CP(t.mode??null);be(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=AP(e);try{return new Jg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.providerId=ul.PROVIDER_ID}static credential(e,t){return Uc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Jg.parseLink(t);return be(r,"argument-error"),Uc._fromEmailAndCode(e,r.code,r.tenantId)}}ul.PROVIDER_ID="password";ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Zg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends uu{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wi.credential(t,r)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends uu{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends uu{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return gs.credential(t,r)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(n,e){return cu(n,"POST","/v1/accounts:signUp",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await pr._fromIdTokenResponse(e,r,s),c=mx(r);return new Ao({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=mx(r);return new Ao({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function mx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Ni{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new wh(e,t,r,s)}}function Qk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(n,a,e,r):a})}async function PP(n,e,t=!1){const r=await qa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ao._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(n,e,t=!1){const{auth:r}=n;if(Mn(r.app))return Promise.reject(Ei(r));const s="reauthenticate";try{const a=await qa(n,Qk(r,s,e,n),t);be(a.idToken,r,"internal-error");const c=Qg(a.idToken);be(c,r,"internal-error");const{sub:f}=c;return be(n.uid===f,r,"user-mismatch"),Ao._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(n,e,t=!1){if(Mn(n.app))return Promise.reject(Ei(n));const r="signIn",s=await Qk(n,r,e),a=await Ao._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function NP(n,e){return Yk(Vs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(n){const e=Vs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MP(n,e,t){if(Mn(n.app))return Promise.reject(Ei(n));const r=Vs(n),c=await zm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RP).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Xk(n),d}),f=await Ao._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(f.user),f}function DP(n,e,t){return Mn(n.app)?Promise.reject(Ei(n)):NP(Lt(n),ul.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xk(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(n,e){return Mi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Lt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await qa(r,VP(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function OP(n,e,t,r){return Lt(n).onIdTokenChanged(e,t,r)}function BP(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function FP(n,e,t,r){return Lt(n).onAuthStateChanged(e,t,r)}function zP(n){return Lt(n).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1e3,WP=10;class Zk extends Jk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$k(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);iP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,WP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},UP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zk.type="LOCAL";const $P=Zk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb extends Jk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eb.type="SESSION";const tb=eb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(c).map(async m=>m(t.origin,a)),d=await HP(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((f,d)=>{const m=ey("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(_.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function qP(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function GP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function YP(){return nb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="firebaseLocalStorageDb",XP=1,kh="firebaseLocalStorage",ib="fbase_key";class du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function JP(){const n=indexedDB.deleteDatabase(rb);return new du(n).toPromise()}function Um(){const n=indexedDB.open(rb,XP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kh,{keyPath:ib})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await JP(),e(await Um()))})})}async function gx(n,e,t){const r=Xh(n,!0).put({[ib]:e,value:t});return new du(r).toPromise()}async function ZP(n,e){const t=Xh(n,!1).get(e),r=await new du(t).toPromise();return r===void 0?null:r.value}function yx(n,e){const t=Xh(n,!0).delete(e);return new du(t).toPromise()}const e5=800,t5=3;class sb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>t5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(YP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await GP(),!this.activeServiceWorker)return;this.sender=new KP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await gx(e,_h,"1"),await yx(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Xh(s,!1).getAll();return new du(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sb.type="LOCAL";const n5=sb;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,e){return e?ki(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function r5(n){return Yk(n.auth,new ty(n),n.bypassAuthState)}function i5(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),jP(t,new ty(n),n.bypassAuthState)}async function s5(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),PP(t,new ty(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r5;case"linkViaPopup":case"linkViaRedirect":return s5;case"reauthViaPopup":case"reauthViaRedirect":return i5;default:Zn(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new lu(2e3,1e4);async function a5(n,e,t){if(Mn(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));const r=Vs(n);OR(n,e,Zg);const s=ob(r,t);return new wo(r,"signInViaPopup",e,s).executeNotNull()}class wo extends ab{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o5.get())};e()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="pendingRedirect",nh=new Map;class c5 extends ab{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const r=await u5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u5(n,e){const t=f5(e),r=h5(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function d5(n,e){nh.set(n._key(),e)}function h5(n){return ki(n._redirectPersistence)}function f5(n){return th(l5,n.config.apiKey,n.name)}async function p5(n,e,t=!1){if(Mn(n.app))return Promise.reject(Ei(n));const r=Vs(n),s=ob(r,e),c=await new c5(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=600*1e3;class g5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vx(e))}saveEventToCache(e){this.cachedEventUids.add(vx(e)),this.lastProcessedEventTime=Date.now()}}function vx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function y5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(n,e={}){return Mi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,w5=/^https?/;async function _5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await v5(n);for(const t of e)try{if(k5(t))return}catch{}Zn(n,"unauthorized-domain")}function k5(n){const e=Bm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!w5.test(t))return!1;if(x5.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new lu(3e4,6e4);function xx(){const n=Ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function E5(n){return new Promise((e,t)=>{var s,a,c;function r(){xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xx(),t(mr(n,"network-request-failed"))},timeout:b5.get()})}if((a=(s=Ur().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Ur().gapi)!=null&&c.load)r();else{const f=fP("iframefcb");return Ur()[f]=()=>{gapi.load?r():t(mr(n,"network-request-failed"))},Kk(`${hP()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw rh=null,e})}let rh=null;function S5(n){return rh=rh||E5(n),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new lu(5e3,15e3),I5="__/auth/iframe",C5="emulator/auth/iframe",A5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P5(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gg(e,C5):`https://${n.config.authDomain}/${I5}`,r={apiKey:e.apiKey,appName:n.name,v:cl},s=R5.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${au(r).slice(1)}`}async function j5(n){const e=await S5(n),t=Ur().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:P5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A5,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=mr(n,"network-request-failed"),f=Ur().setTimeout(()=>{a(c)},T5.get());function d(){Ur().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M5=500,D5=600,V5="_blank",L5="http://localhost";class wx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O5(n,e,t,r=M5,s=D5){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={...N5,width:r.toString(),height:s.toString(),top:a,left:c},m=cn().toLowerCase();t&&(f=Bk(m)?V5:t),Lk(m)&&(e=e||L5,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[E,b])=>`${_}${E}=${b},`,"");if(rP(m)&&f!=="_self")return B5(e||"",f),new wx(null);const v=window.open(e||"",f,g);be(v,n,"popup-blocked");try{v.focus()}catch{}return new wx(v)}function B5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="__/auth/handler",z5="emulator/auth/handler",U5=encodeURIComponent("fac");async function _x(n,e,t,r,s,a){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:cl,eventId:s};if(e instanceof Zg){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",EA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof uu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${U5}=${encodeURIComponent(d)}`:"";return`${W5(n)}?${au(f).slice(1)}${m}`}function W5({config:n}){return n.emulator?Gg(n,z5):`https://${n.authDomain}/${F5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="webStorageSupport";class $5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tb,this._completeRedirectFn=p5,this._overrideRedirectResult=d5}async _openPopup(e,t,r,s){var c;Ai((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await _x(e,t,r,Bm(),s);return O5(e,a,ey())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await _x(e,t,r,Bm(),s);return qP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ai(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await j5(e),r=new g5(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(im,{type:im},s=>{var c;const a=(c=s==null?void 0:s[0])==null?void 0:c[im];a!==void 0&&t(!!a),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $k()||Ok()||Yg()}}const H5=$5;var kx="@firebase/auth",bx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G5(n){Ka(new Io("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hk(n)},m=new cP(r,s,a,d);return xP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ka(new Io("auth-internal",e=>{const t=Vs(e.getProvider("auth").getImmediate());return(r=>new K5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(kx,bx,q5(n)),ks(kx,bx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=300,Y5=_k("authIdTokenMaxAge")||Q5;let Ex=null;const X5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Y5)return;const s=t==null?void 0:t.token;Ex!==s&&(Ex=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function J5(n=Ik()){const e=Hg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vP(n,{popupRedirectResolver:H5,persistence:[n5,$P,tb]}),r=_k("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=X5(a.toString());BP(t,c,()=>c(t.currentUser)),OP(t,f=>c(f))}}const s=xk("auth");return s&&wP(t,`http://${s}`),t}function Z5(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}uP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=mr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Z5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G5("Browser");var Sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,cb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function N(){}N.prototype=C.prototype,A.F=C.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(O,B,H){for(var L=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)L[Ne-2]=arguments[Ne];return C.prototype[B].apply(O,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,N){N||(N=0);const O=Array(16);if(typeof C=="string")for(var B=0;B<16;++B)O[B]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(B=0;B<16;++B)O[B]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=A.g[0],N=A.g[1],B=A.g[2];let H=A.g[3],L;L=C+(H^N&(B^H))+O[0]+3614090360&4294967295,C=N+(L<<7&4294967295|L>>>25),L=H+(B^C&(N^B))+O[1]+3905402710&4294967295,H=C+(L<<12&4294967295|L>>>20),L=B+(N^H&(C^N))+O[2]+606105819&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(C^B&(H^C))+O[3]+3250441966&4294967295,N=B+(L<<22&4294967295|L>>>10),L=C+(H^N&(B^H))+O[4]+4118548399&4294967295,C=N+(L<<7&4294967295|L>>>25),L=H+(B^C&(N^B))+O[5]+1200080426&4294967295,H=C+(L<<12&4294967295|L>>>20),L=B+(N^H&(C^N))+O[6]+2821735955&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(C^B&(H^C))+O[7]+4249261313&4294967295,N=B+(L<<22&4294967295|L>>>10),L=C+(H^N&(B^H))+O[8]+1770035416&4294967295,C=N+(L<<7&4294967295|L>>>25),L=H+(B^C&(N^B))+O[9]+2336552879&4294967295,H=C+(L<<12&4294967295|L>>>20),L=B+(N^H&(C^N))+O[10]+4294925233&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(C^B&(H^C))+O[11]+2304563134&4294967295,N=B+(L<<22&4294967295|L>>>10),L=C+(H^N&(B^H))+O[12]+1804603682&4294967295,C=N+(L<<7&4294967295|L>>>25),L=H+(B^C&(N^B))+O[13]+4254626195&4294967295,H=C+(L<<12&4294967295|L>>>20),L=B+(N^H&(C^N))+O[14]+2792965006&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(C^B&(H^C))+O[15]+1236535329&4294967295,N=B+(L<<22&4294967295|L>>>10),L=C+(B^H&(N^B))+O[1]+4129170786&4294967295,C=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(C^N))+O[6]+3225465664&4294967295,H=C+(L<<9&4294967295|L>>>23),L=B+(C^N&(H^C))+O[11]+643717713&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^C&(B^H))+O[0]+3921069994&4294967295,N=B+(L<<20&4294967295|L>>>12),L=C+(B^H&(N^B))+O[5]+3593408605&4294967295,C=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(C^N))+O[10]+38016083&4294967295,H=C+(L<<9&4294967295|L>>>23),L=B+(C^N&(H^C))+O[15]+3634488961&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^C&(B^H))+O[4]+3889429448&4294967295,N=B+(L<<20&4294967295|L>>>12),L=C+(B^H&(N^B))+O[9]+568446438&4294967295,C=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(C^N))+O[14]+3275163606&4294967295,H=C+(L<<9&4294967295|L>>>23),L=B+(C^N&(H^C))+O[3]+4107603335&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^C&(B^H))+O[8]+1163531501&4294967295,N=B+(L<<20&4294967295|L>>>12),L=C+(B^H&(N^B))+O[13]+2850285829&4294967295,C=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(C^N))+O[2]+4243563512&4294967295,H=C+(L<<9&4294967295|L>>>23),L=B+(C^N&(H^C))+O[7]+1735328473&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^C&(B^H))+O[12]+2368359562&4294967295,N=B+(L<<20&4294967295|L>>>12),L=C+(N^B^H)+O[5]+4294588738&4294967295,C=N+(L<<4&4294967295|L>>>28),L=H+(C^N^B)+O[8]+2272392833&4294967295,H=C+(L<<11&4294967295|L>>>21),L=B+(H^C^N)+O[11]+1839030562&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^C)+O[14]+4259657740&4294967295,N=B+(L<<23&4294967295|L>>>9),L=C+(N^B^H)+O[1]+2763975236&4294967295,C=N+(L<<4&4294967295|L>>>28),L=H+(C^N^B)+O[4]+1272893353&4294967295,H=C+(L<<11&4294967295|L>>>21),L=B+(H^C^N)+O[7]+4139469664&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^C)+O[10]+3200236656&4294967295,N=B+(L<<23&4294967295|L>>>9),L=C+(N^B^H)+O[13]+681279174&4294967295,C=N+(L<<4&4294967295|L>>>28),L=H+(C^N^B)+O[0]+3936430074&4294967295,H=C+(L<<11&4294967295|L>>>21),L=B+(H^C^N)+O[3]+3572445317&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^C)+O[6]+76029189&4294967295,N=B+(L<<23&4294967295|L>>>9),L=C+(N^B^H)+O[9]+3654602809&4294967295,C=N+(L<<4&4294967295|L>>>28),L=H+(C^N^B)+O[12]+3873151461&4294967295,H=C+(L<<11&4294967295|L>>>21),L=B+(H^C^N)+O[15]+530742520&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^C)+O[2]+3299628645&4294967295,N=B+(L<<23&4294967295|L>>>9),L=C+(B^(N|~H))+O[0]+4096336452&4294967295,C=N+(L<<6&4294967295|L>>>26),L=H+(N^(C|~B))+O[7]+1126891415&4294967295,H=C+(L<<10&4294967295|L>>>22),L=B+(C^(H|~N))+O[14]+2878612391&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~C))+O[5]+4237533241&4294967295,N=B+(L<<21&4294967295|L>>>11),L=C+(B^(N|~H))+O[12]+1700485571&4294967295,C=N+(L<<6&4294967295|L>>>26),L=H+(N^(C|~B))+O[3]+2399980690&4294967295,H=C+(L<<10&4294967295|L>>>22),L=B+(C^(H|~N))+O[10]+4293915773&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~C))+O[1]+2240044497&4294967295,N=B+(L<<21&4294967295|L>>>11),L=C+(B^(N|~H))+O[8]+1873313359&4294967295,C=N+(L<<6&4294967295|L>>>26),L=H+(N^(C|~B))+O[15]+4264355552&4294967295,H=C+(L<<10&4294967295|L>>>22),L=B+(C^(H|~N))+O[6]+2734768916&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~C))+O[13]+1309151649&4294967295,N=B+(L<<21&4294967295|L>>>11),L=C+(B^(N|~H))+O[4]+4149444226&4294967295,C=N+(L<<6&4294967295|L>>>26),L=H+(N^(C|~B))+O[11]+3174756917&4294967295,H=C+(L<<10&4294967295|L>>>22),L=B+(C^(H|~N))+O[2]+718787259&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~C))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+H&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const N=C-this.blockSize,O=this.C;let B=this.h,H=0;for(;H<C;){if(B==0)for(;H<=N;)s(this,A,H),H+=this.blockSize;if(typeof A=="string"){for(;H<C;)if(O[B++]=A.charCodeAt(H++),B==this.blockSize){s(this,O),B=0;break}}else for(;H<C;)if(O[B++]=A[H++],B==this.blockSize){s(this,O),B=0;break}}this.h=B,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)A[C++]=this.g[N]>>>O&255;return A};function a(A,C){var N=f;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=C(A)}function c(A,C){this.h=C;const N=[];let O=!0;for(let B=A.length-1;B>=0;B--){const H=A[B]|0;O&&H==C||(N[B]=H,O=!1)}this.g=N}var f={};function d(A){return-128<=A&&A<128?a(A,function(C){return new c([C|0],C<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return T(m(-A));const C=[];let N=1;for(let O=0;A>=N;O++)C[O]=A/N|0,N*=4294967296;return new c(C,0)}function g(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return T(g(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(C,8));let O=v;for(let H=0;H<A.length;H+=8){var B=Math.min(8,A.length-H);const L=parseInt(A.substring(H,H+B),C);B<8?(B=m(Math.pow(C,B)),O=O.j(B).add(m(L))):(O=O.j(N),O=O.add(m(L)))}return O}var v=d(0),_=d(1),E=d(16777216);n=c.prototype,n.m=function(){if(I(this))return-T(this).m();let A=0,C=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);A+=(O>=0?O:4294967296+O)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(I(this))return"-"+T(this).toString(A);const C=m(Math.pow(A,6));var N=this;let O="";for(;;){const B=Q(N,C).g;N=M(N,B.j(C));let H=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=B,b(N))return H+O;for(;H.length<6;)H="0"+H;O=H+O}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function I(A){return A.h==-1}n.l=function(A){return A=M(this,A),I(A)?-1:b(A)?0:1};function T(A){const C=A.g.length,N=[];for(let O=0;O<C;O++)N[O]=~A.g[O];return new c(N,~A.h).add(_)}n.abs=function(){return I(this)?T(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),N=[];let O=0;for(let B=0;B<=C;B++){let H=O+(this.i(B)&65535)+(A.i(B)&65535),L=(H>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);O=L>>>16,H&=65535,L&=65535,N[B]=L<<16|H}return new c(N,N[N.length-1]&-2147483648?-1:0)};function M(A,C){return A.add(T(C))}n.j=function(A){if(b(this)||b(A))return v;if(I(this))return I(A)?T(this).j(T(A)):T(T(this).j(A));if(I(A))return T(this.j(T(A)));if(this.l(E)<0&&A.l(E)<0)return m(this.m()*A.m());const C=this.g.length+A.g.length,N=[];for(var O=0;O<2*C;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let B=0;B<A.g.length;B++){const H=this.i(O)>>>16,L=this.i(O)&65535,Ne=A.i(B)>>>16,He=A.i(B)&65535;N[2*O+2*B]+=L*He,V(N,2*O+2*B),N[2*O+2*B+1]+=H*He,V(N,2*O+2*B+1),N[2*O+2*B+1]+=L*Ne,V(N,2*O+2*B+1),N[2*O+2*B+2]+=H*Ne,V(N,2*O+2*B+2)}for(A=0;A<C;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=C;A<2*C;A++)N[A]=0;return new c(N,0)};function V(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function j(A,C){this.g=A,this.h=C}function Q(A,C){if(b(C))throw Error("division by zero");if(b(A))return new j(v,v);if(I(A))return C=Q(T(A),C),new j(T(C.g),T(C.h));if(I(C))return C=Q(A,T(C)),new j(T(C.g),C.h);if(A.g.length>30){if(I(A)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var N=_,O=C;O.l(A)<=0;)N=z(N),O=z(O);var B=W(N,1),H=W(O,1);for(O=W(O,2),N=W(N,2);!b(O);){var L=H.add(O);L.l(A)<=0&&(B=B.add(N),H=L),O=W(O,1),N=W(N,1)}return C=M(A,B.j(C)),new j(B,C)}for(B=v;A.l(C)>=0;){for(N=Math.max(1,Math.floor(A.m()/C.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),H=m(N),L=H.j(C);I(L)||L.l(A)>0;)N-=O,H=m(N),L=H.j(C);b(H)&&(H=_),B=B.add(H),A=M(A,L)}return new j(B,A)}n.B=function(A){return Q(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)&A.i(O);return new c(N,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)|A.i(O);return new c(N,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)^A.i(O);return new c(N,this.h^A.h)};function z(A){const C=A.g.length+1,N=[];for(let O=0;O<C;O++)N[O]=A.i(O)<<1|A.i(O-1)>>>31;return new c(N,A.h)}function W(A,C){const N=C>>5;C%=32;const O=A.g.length-N,B=[];for(let H=0;H<O;H++)B[H]=C>0?A.i(H+N)>>>C|A.i(H+N+1)<<32-C:A.i(H+N);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,bs=c}).apply(typeof Sx<"u"?Sx:typeof self<"u"?self:typeof window<"u"?window:{});var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ub,Ec,db,ih,Wm,hb,fb,pb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wd=="object"&&Wd];for(var w=0;w<h.length;++w){var k=h[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=t(this);function s(h,w){if(w)e:{var k=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in k))break e;k=k[q]}h=h[h.length-1],R=k[h],w=w(R),w!=R&&w!=null&&e(k,h,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(w){var k=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&k.push([R,w[R]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function f(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function d(h,w,k){return h.call.apply(h.bind,arguments)}function m(h,w,k){return m=d,m.apply(null,arguments)}function g(h,w){var k=Array.prototype.slice.call(arguments,1);return function(){var R=k.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function v(h,w){function k(){}k.prototype=w.prototype,h.Z=w.prototype,h.prototype=new k,h.prototype.constructor=h,h.Ob=function(R,q,X){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return w.prototype[q].apply(R,oe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function E(h){const w=h.length;if(w>0){const k=Array(w);for(let R=0;R<w;R++)k[R]=h[R];return k}return[]}function b(h,w){for(let R=1;R<arguments.length;R++){const q=arguments[R];var k=typeof q;if(k=k!="object"?k:q?Array.isArray(q)?"array":k:"null",k=="array"||k=="object"&&typeof q.length=="number"){k=h.length||0;const X=q.length||0;h.length=k+X;for(let oe=0;oe<X;oe++)h[k+oe]=q[oe]}else h.push(q)}}class I{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function T(h){c.setTimeout(()=>{throw h},0)}function M(){var h=A;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class V{constructor(){this.h=this.g=null}add(w,k){const R=j.get();R.set(w,k),this.h?this.h.next=R:this.g=R,this.h=R}}var j=new I(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,A=new V,C=()=>{const h=Promise.resolve(void 0);z=()=>{h.then(N)}};function N(){for(var h;h=M();){try{h.h.call(h.g)}catch(k){T(k)}var w=j;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}W=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const k=()=>{};c.addEventListener("test",k,w),c.removeEventListener("test",k,w)}catch{}return h})();function L(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,w){B.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}v(Ne,B),Ne.prototype.init=function(h,w){const k=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(k=="mouseover"?w=h.fromElement:k=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),kt=0;function Se(h,w,k,R,q){this.listener=h,this.proxy=null,this.src=w,this.type=k,this.capture=!!R,this.ha=q,this.key=++kt,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function me(h,w,k){for(const R in h)w.call(k,h[R],R,h)}function ae(h,w){for(const k in h)w.call(void 0,h[k],k,h)}function $(h){const w={};for(const k in h)w[k]=h[k];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(h,w){let k,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(k in R)h[k]=R[k];for(let X=0;X<ee.length;X++)k=ee[X],Object.prototype.hasOwnProperty.call(R,k)&&(h[k]=R[k])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,w,k,R,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Ve(h,w,R,q);return oe>-1?(w=h[oe],k||(w.fa=!1)):(w=new Se(w,this.src,X,!!R,q),w.fa=k,h.push(w)),w};function De(h,w){const k=w.type;if(k in h.g){var R=h.g[k],q=Array.prototype.indexOf.call(R,w,void 0),X;(X=q>=0)&&Array.prototype.splice.call(R,q,1),X&&(ie(w),h.g[k].length==0&&(delete h.g[k],h.h--))}}function Ve(h,w,k,R){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==w&&X.capture==!!k&&X.ha==R)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(h,w,k,R,q){if(Array.isArray(w)){for(let X=0;X<w.length;X++)Xe(h,w[X],k,R,q);return null}return k=El(k),h&&h[He]?h.J(w,k,f(R)?!!R.capture:!1,q):un(h,w,k,!1,R,q)}function un(h,w,k,R,q,X){if(!w)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Re=Uo(h);if(Re||(h[Ge]=Re=new Ae(h)),k=Re.add(w,k,R,oe,X),k.proxy)return k;if(R=Fo(),k.proxy=R,R.src=h,R.listener=k,h.addEventListener)H||(q=oe),q===void 0&&(q=!1),h.addEventListener(w.toString(),R,q);else if(h.attachEvent)h.attachEvent(zo(w.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Fo(){function h(k){return w.call(h.src,h.listener,k)}const w=Su;return h}function bl(h,w,k,R,q){if(Array.isArray(w))for(var X=0;X<w.length;X++)bl(h,w[X],k,R,q);else R=f(R)?!!R.capture:!!R,k=El(k),h&&h[He]?(h=h.i,X=String(w).toString(),X in h.g&&(w=h.g[X],k=Ve(w,k,R,q),k>-1&&(ie(w[k]),Array.prototype.splice.call(w,k,1),w.length==0&&(delete h.g[X],h.h--)))):h&&(h=Uo(h))&&(w=h.g[w.toString()],h=-1,w&&(h=Ve(w,k,R,q)),(k=h>-1?w[h]:null)&&Vi(k))}function Vi(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[He])De(w.i,h);else{var k=h.type,R=h.proxy;w.removeEventListener?w.removeEventListener(k,R,h.capture):w.detachEvent?w.detachEvent(zo(k),R):w.addListener&&w.removeListener&&w.removeListener(R),(k=Uo(w))?(De(k,h),k.h==0&&(k.src=null,w[Ge]=null)):ie(h)}}}function zo(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function Su(h,w){if(h.da)h=!0;else{w=new Ne(w,this);const k=h.listener,R=h.ha||h.src;h.fa&&Vi(h),h=k.call(R,w)}return h}function Uo(h){return h=h[Ge],h instanceof Ae?h:null}var Ws="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(h){return typeof h=="function"?h:(h[Ws]||(h[Ws]=function(w){return h.handleEvent(w)}),h[Ws])}function bt(){O.call(this),this.i=new Ae(this),this.M=this,this.G=null}v(bt,O),bt.prototype[He]=!0,bt.prototype.removeEventListener=function(h,w,k,R){bl(this,h,w,k,R)};function yt(h,w){var k,R=h.G;if(R)for(k=[];R;R=R.G)k.push(R);if(h=h.M,R=w.type||w,typeof w=="string")w=new B(w,h);else if(w instanceof B)w.target=w.target||h;else{var q=w;w=new B(R,h),Ce(w,q)}q=!0;let X,oe;if(k)for(oe=k.length-1;oe>=0;oe--)X=w.g=k[oe],q=nr(X,R,!0,w)&&q;if(X=w.g=h,q=nr(X,R,!0,w)&&q,q=nr(X,R,!1,w)&&q,k)for(oe=0;oe<k.length;oe++)X=w.g=k[oe],q=nr(X,R,!1,w)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const k=h.g[w];for(let R=0;R<k.length;R++)ie(k[R]);delete h.g[w],h.h--}}this.G=null},bt.prototype.J=function(h,w,k,R){return this.i.add(String(h),w,!1,k,R)},bt.prototype.K=function(h,w,k,R){return this.i.add(String(h),w,!0,k,R)};function nr(h,w,k,R){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let X=0;X<w.length;++X){const oe=w[X];if(oe&&!oe.da&&oe.capture==k){const Re=oe.listener,vt=oe.ha||oe.src;oe.fa&&De(h.i,oe),q=Re.call(vt,R)!==!1&&q}}return q&&!R.defaultPrevented}function Sl(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(h,w||0)}function Tl(h){h.g=Sl(()=>{h.g=null,h.i&&(h.i=!1,Tl(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Tu extends O{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(h){O.call(this),this.h=h,this.g={}}v(Li,O);var Il=[];function Wo(h){me(h.g,function(w,k){this.g.hasOwnProperty(k)&&Vi(w)},h),h.g={}}Li.prototype.N=function(){Li.Z.N.call(this),Wo(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=c.JSON.stringify,Iu=c.JSON.parse,$s=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Bi(){}function Cu(){}var Fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $o(){B.call(this,"d")}v($o,B);function Cl(){B.call(this,"c")}v(Cl,B);var rr={},Ho=null;function zi(){return Ho=Ho||new bt}rr.Ia="serverreachability";function Ko(h){B.call(this,rr.Ia,h)}v(Ko,B);function ei(h){const w=zi();yt(w,new Ko(w))}rr.STAT_EVENT="statevent";function ti(h,w){B.call(this,rr.STAT_EVENT,h),this.stat=w}v(ti,B);function ht(h){const w=zi();yt(w,new ti(w,h))}rr.Ja="timingevent";function Al(h,w){B.call(this,rr.Ja,h),this.size=w}v(Al,B);function Ui(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},w)}function Wi(){this.g=!0}Wi.prototype.ua=function(){this.g=!1};function Au(h,w,k,R,q,X){h.info(function(){if(h.g)if(X){var oe="",Re=X.split("&");for(let Ye=0;Ye<Re.length;Ye++){var vt=Re[Ye].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const Rn=Et.split("_");oe=Rn.length>=2&&Rn[1]=="type"?oe+(Et+"="+vt+"&"):oe+(Et+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+w+`
`+k+`
`+oe})}function Ru(h,w,k,R,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+w+`
`+k+`
`+X+" "+oe})}function br(h,w,k,R){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+Hs(h,k)+(R?" "+R:"")})}function Pu(h,w){h.info(function(){return"TIMEOUT: "+w})}Wi.prototype.info=function(){};function Hs(h,w){if(!h.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var k=X[h];if(!(k.length<2)){var R=k[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return Oi(X)}catch{return w}}var $i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ju;function ni(){}v(ni,Bi),ni.prototype.g=function(){return new XMLHttpRequest},ju=new ni;function Er(h){return encodeURIComponent(String(h))}function qo(h){var w=1;h=h.split(":");const k=[];for(;w>0&&h.length;)k.push(h.shift()),w--;return h.length&&k.push(h.join(":")),k}function Fn(h,w,k,R){this.j=h,this.i=w,this.l=k,this.S=R||1,this.V=new Li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nu}function Nu(){this.i=null,this.g="",this.h=!1}var Mu={},Rl={};function ir(h,w,k){h.M=1,h.A=ii(zn(w)),h.u=k,h.R=!0,Pl(h,null)}function Pl(h,w){h.F=Date.now(),Ks(h),h.B=zn(h.A);var k=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),zl(k.i,"t",R),h.C=0,k=h.j.L,h.h=new Nu,h.g=$u(h.j,k?w:null,!h.u),h.P>0&&(h.O=new Tu(m(h.Y,h,h.g),h.P)),w=h.V,k=h.g,R=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Il[0]=q.toString()),q=Il);for(let X=0;X<q.length;X++){const oe=Xe(k,q[X],R||w.handleEvent,!1,w.h||w);if(!oe)break;w.g[oe.key]=oe}w=h.J?$(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),ei(),Au(h.i,h.v,h.B,h.l,h.S,h.u)}Fn.prototype.ba=function(h){h=h.target;const w=this.O;w&&Pr(h)==3?w.j():this.Y(h)},Fn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Pr(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Uu(this.g)))){this.K||Re!=4||vt==7||(vt==8||Ye<=0?ei(3):ei(2)),Go(this);var w=this.g.ca();this.X=w;var k=Du(this);if(this.o=w==200,Ru(this.i,this.v,this.B,this.l,this.S,Re,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(R)){var X=R;break t}}X=null}if(h=X)br(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,h);else{this.o=!1,this.m=3,ht(12),ri(this),qs(this);break e}}if(this.R){h=!0;let Et;for(;!this.K&&this.C<k.length;)if(Et=Lu(this,k),Et==Rl){Re==4&&(this.m=4,ht(14),h=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Mu){this.m=4,ht(15),br(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else br(this.i,this.l,Et,null),tt(this,Et);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||k.length!=0||this.h.h||(this.m=1,ht(16),h=!1),this.o=this.o&&h,!h)br(this.i,this.l,k,"[Invalid Chunked Response]"),ri(this),qs(this);else if(k.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),no(oe),oe.P=!0,ht(11))}}else br(this.i,this.l,k,null),tt(this,k);Re==4&&ri(this),this.o&&!this.K&&(Re==4?ia(this.j,this):(this.o=!1,Ks(this)))}else Wl(this.g),w==400&&k.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),ri(this),qs(this)}}}catch{}finally{}};function Du(h){if(!Vu(h))return h.g.la();const w=Uu(h.g);if(w==="")return"";let k="";const R=w.length,q=Pr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ri(h),qs(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<R;X++)h.h.h=!0,k+=h.h.i.decode(w[X],{stream:!(q&&X==R-1)});return w.length=0,h.h.g+=k,h.C=0,h.h.g}function Vu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Lu(h,w){var k=h.C,R=w.indexOf(`
`,k);return R==-1?Rl:(k=Number(w.substring(k,R)),isNaN(k)?Mu:(R+=1,R+k>w.length?Rl:(w=w.slice(R,R+k),h.C=R+k,w)))}Fn.prototype.cancel=function(){this.K=!0,ri(this)};function Ks(h){h.T=Date.now()+h.H,jl(h,h.H)}function jl(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ui(m(h.aa,h),w)}function Go(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Fn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pu(this.i,this.B),this.M!=2&&(ei(),ht(17)),ri(this),this.m=2,qs(this)):jl(this,this.T-h)};function qs(h){h.j.I==0||h.K||ia(h.j,h)}function ri(h){Go(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,Wo(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function tt(h,w){try{var k=h.j;if(k.I!=0&&(k.g==h||Ml(k.h,h))){if(!h.L&&Ml(k.h,h)&&k.I==3){try{var R=k.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<h.F)ra(k),Cn(k);else break e;Mr(k),ht(18)}}else k.xa=q[1],0<k.xa-k.K&&q[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Ui(m(k.Va,k),6e3));Gs(k.h)<=1&&k.ta&&(k.ta=void 0)}else An(k,11)}else if((h.L||k.g==h)&&ra(k),!L(w))for(q=k.Ba.g.parse(w),w=0;w<q.length;w++){let Ye=q[w];const Et=Ye[0];if(!(Et<=k.K))if(k.K=Et,Ye=Ye[1],k.I==2)if(Ye[0]=="c"){k.M=Ye[1],k.ba=Ye[2];const Rn=Ye[3];Rn!=null&&(k.ka=Rn,k.j.info("VER="+k.ka));const ci=Ye[4];ci!=null&&(k.za=ci,k.j.info("SVER="+k.za));const Dr=Ye[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(R=1.5*Dr,k.O=R,k.j.info("backChannelRequestTimeoutMs_="+R)),R=k;const Vr=h.g;if(Vr){const aa=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var X=R.h;X.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Yo(X,X.h),X.h=null))}if(R.G){const Kl=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kl&&(R.wa=Kl,Ke(R.J,R.G,Kl))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-h.F,k.j.info("Handshake RTT: "+k.T+"ms")),R=k;var oe=h;if(R.na=Hl(R,R.L?R.ba:null,R.W),oe.L){Qs(R.h,oe);var Re=oe,vt=R.O;vt&&(Re.H=vt),Re.D&&(Go(Re),Ks(Re)),R.g=oe}else Jt(R);k.i.length>0&&li(k)}else Ye[0]!="stop"&&Ye[0]!="close"||An(k,7);else k.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?An(k,7):ta(k):Ye[0]!="noop"&&k.l&&k.l.qa(Ye),k.A=0)}}ei(4)}catch{}}var _f=class{constructor(h,w){this.g=h,this.map=w}};function Qo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Gs(h){return h.h?1:h.g?h.g.size:0}function Ml(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Yo(h,w){h.g?h.g.add(w):h.h=w}function Qs(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Qo.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const k of h.g.values())w=w.concat(k.G);return w}return E(h.i)}var Ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(h,w){if(h){h=h.split("&");for(let k=0;k<h.length;k++){const R=h[k].indexOf("=");let q,X=null;R>=0?(q=h[k].substring(0,R),X=h[k].substring(R+1)):q=h[k],w(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Sr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof Sr?(this.l=h.l,Ys(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,Ki(this,Ul(h.i)),this.m=h.m):h&&(w=String(h).match(Ou))?(this.l=!1,Ys(this,w[1]||"",!0),this.o=Xs(w[2]||""),this.g=Xs(w[3]||"",!0),Tr(this,w[4]),this.h=Xs(w[5]||"",!0),Ki(this,w[6]||"",!0),this.m=Xs(w[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Sr.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Js(w,Vl,!0),":");var k=this.g;return(k||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Js(w,Vl,!0),"@"),h.push(Er(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&h.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&h.push("/"),h.push(Js(k,k.charAt(0)=="/"?Zs:Ll,!0))),(k=this.i.toString())&&h.push("?",k),(k=this.m)&&h.push("#",Js(k,Ol)),h.join("")},Sr.prototype.resolve=function(h){const w=zn(this);let k=!!h.j;k?Ys(w,h.j):k=!!h.o,k?w.o=h.o:k=!!h.g,k?w.g=h.g:k=h.u!=null;var R=h.h;if(k)Tr(w,h.u);else if(k=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=w.h.lastIndexOf("/");q!=-1&&(R=w.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Re=q[oe++];Re=="."?R&&oe==q.length&&X.push(""):Re==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&oe==q.length&&X.push("")):(X.push(Re),R=!0)}R=X.join("/")}else R=q}return k?w.h=R:k=h.i.toString()!=="",k?Ki(w,Ul(h.i)):k=!!h.m,k&&(w.m=h.m),w};function zn(h){return new Sr(h)}function Ys(h,w,k){h.j=k?Xs(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Ki(h,w,k){w instanceof Fe?(h.i=w,Jo(h.i,h.l)):(k||(w=Js(w,kf)),h.i=new Fe(w,h.l))}function Ke(h,w,k){h.i.set(w,k)}function ii(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Xs(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Js(h,w,k){return typeof h=="string"?(h=encodeURI(h).replace(w,Dl),k&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Dl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vl=/[#\/\?@]/g,Ll=/[#\?:]/g,Zs=/[#\?]/g,kf=/[#\?@]/g,Ol=/#/g;function Fe(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function Ir(h){h.g||(h.g=new Map,h.h=0,h.i&&Tn(h.i,function(w,k){h.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}n=Fe.prototype,n.add=function(h,w){Ir(this),this.i=null,h=Cr(this,h);let k=this.g.get(h);return k||this.g.set(h,k=[]),k.push(w),this.h+=1,this};function Bl(h,w){Ir(h),w=Cr(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Xo(h,w){return Ir(h),w=Cr(h,w),h.g.has(w)}n.forEach=function(h,w){Ir(this),this.g.forEach(function(k,R){k.forEach(function(q){h.call(w,q,R,this)},this)},this)};function Fl(h,w){Ir(h);let k=[];if(typeof w=="string")Xo(h,w)&&(k=k.concat(h.g.get(Cr(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)k=k.concat(h[w]);return k}n.set=function(h,w){return Ir(this),this.i=null,h=Cr(this,h),Xo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=Fl(this,h),h.length>0?String(h[0]):w):w};function zl(h,w,k){Bl(h,w),k.length>0&&(h.i=null,h.g.set(Cr(h,w),E(k)),h.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var k=w[R];const q=Er(k);k=Fl(this,k);for(let X=0;X<k.length;X++){let oe=q;k[X]!==""&&(oe+="="+Er(k[X])),h.push(oe)}}return this.i=h.join("&")};function Ul(h){const w=new Fe;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Cr(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Jo(h,w){w&&!h.j&&(Ir(h),h.i=null,h.g.forEach(function(k,R){const q=R.toLowerCase();R!=q&&(Bl(this,R),zl(this,q,k))},h)),h.j=w}function Ar(h,w){const k=new Wi;if(c.Image){const R=new Image;R.onload=g(Wt,k,"TestLoadImage: loaded",!0,w,R),R.onerror=g(Wt,k,"TestLoadImage: error",!1,w,R),R.onabort=g(Wt,k,"TestLoadImage: abort",!1,w,R),R.ontimeout=g(Wt,k,"TestLoadImage: timeout",!1,w,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else w(!1)}function Rr(h,w){const k=new Wi,R=new AbortController,q=setTimeout(()=>{R.abort(),Wt(k,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(q),X.ok?Wt(k,"TestPingServer: ok",!0,w):Wt(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),Wt(k,"TestPingServer: error",!1,w)})}function Wt(h,w,k,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(k)}catch{}}function eo(){this.g=new $s}function si(h){this.i=h.Sb||null,this.h=h.ab||!1}v(si,Bi),si.prototype.g=function(){return new In(this.i,this.h)};function In(h,w){bt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(In,bt),n=In.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?qi(this):sr(this),this.readyState==3&&Bu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,qi(this))},n.Na=function(h){this.g&&(this.response=h,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,h.push(k[0]+": "+k[1]),k=w.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(In.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fu(h){let w="";return me(h,function(k,R){w+=R,w+=":",w+=k,w+=`\r
`}),w}function Zo(h,w,k){e:{for(R in k){var R=!1;break e}R=!0}R||(k=Fu(k),typeof h=="string"?k!=null&&Er(k):Ke(h,w,k))}function Je(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Je,bt);var zu=/^https?$/i,bf=["POST","PUT"];n=Je.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,k,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ju.g(),this.g.onreadystatechange=_(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(X){Gi(this,X);return}if(h=k||"",k=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)k.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())k.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(k.keys()).find(X=>X.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(bf,w,void 0)>=0)||R||q||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of k)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Gi(this,X)}};function Gi(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,Qi(h),ai(h)}function Qi(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,yt(this,"complete"),yt(this,"abort"),ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?oi(this):this.Xa())},n.Xa=function(){oi(this)};function oi(h){if(h.h&&typeof a<"u"){if(h.v&&Pr(h)==4)setTimeout(h.Ca.bind(h),0);else if(yt(h,"readystatechange"),Pr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var k;if(!(k=w)){var R;if(R=X===0){let oe=String(h.D).match(Ou)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),R=!zu.test(oe?oe.toLowerCase():"")}k=R}if(k)yt(h,"complete"),yt(h,"success");else{h.o=6;try{var q=Pr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Qi(h)}}finally{ai(h)}}}}function ai(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const k=h.g;h.g=null,w||yt(h,"ready");try{k.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Pr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Pr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),Iu(w)}};function Uu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wl(h){const w={};h=(h.g&&Pr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(L(h[R]))continue;var k=qo(h[R]);const q=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const X=w[q]||[];w[q]=X,X.push(k)}ae(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(h,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[h]||w}function ea(h){this.za=0,this.i=[],this.j=new Wi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jr("baseRetryDelayMs",5e3,h),this.Za=jr("retryDelaySeedMs",1e4,h),this.Ta=jr("forwardChannelMaxRetries",2,h),this.va=jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Qo(h&&h.concurrentRequestLimit),this.Ba=new eo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ea.prototype,n.ka=8,n.I=1,n.connect=function(h,w,k,R){ht(0),this.W=h,this.H=w||{},k&&R!==void 0&&(this.H.OSID=k,this.H.OAID=R),this.F=this.X,this.J=Hl(this,null,this.W),li(this)};function ta(h){if(na(h),h.I==3){var w=h.V++,k=zn(h.J);if(Ke(k,"SID",h.M),Ke(k,"RID",w),Ke(k,"TYPE","terminate"),Nr(h,k),w=new Fn(h,h.j,w),w.M=2,w.A=ii(zn(k)),k=!1,c.navigator&&c.navigator.sendBeacon)try{k=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!k&&c.Image&&(new Image().src=w.A,k=!0),k||(w.g=$u(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Ks(w)}ro(h)}function Cn(h){h.g&&(no(h),h.g.cancel(),h.g=null)}function na(h){Cn(h),h.v&&(c.clearTimeout(h.v),h.v=null),ra(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function li(h){if(!Nl(h.h)&&!h.m){h.m=!0;var w=h.Ea;z||C(),W||(z(),W=!0),A.add(w,h),h.D=0}}function Wu(h,w){return Gs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ui(m(h.Ea,h,w),sa(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Fn(this,this.j,h);let X=this.o;if(this.U&&(X?(X=$(X),Ce(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var w=0,k=0;k<this.i.length;k++){t:{var R=this.i[k];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=k;break e}if(w===4096||k===this.i.length-1){w=k+1;break e}}w=1e3}else w=1e3;w=$l(this,q,w),k=zn(this.J),Ke(k,"RID",h),Ke(k,"CVER",22),this.G&&Ke(k,"X-HTTP-Session-Id",this.G),Nr(this,k),X&&(this.R?w="headers="+Er(Fu(X))+"&"+w:this.u&&Zo(k,this.u,X)),Yo(this.h,q),this.Ra&&Ke(k,"TYPE","init"),this.S?(Ke(k,"$req",w),Ke(k,"SID","null"),q.U=!0,ir(q,k,null)):ir(q,k,w),this.I=2}}else this.I==3&&(h?to(this,h):this.i.length==0||Nl(this.h)||to(this))};function to(h,w){var k;w?k=w.l:k=h.V++;const R=zn(h.J);Ke(R,"SID",h.M),Ke(R,"RID",k),Ke(R,"AID",h.K),Nr(h,R),h.u&&h.o&&Zo(R,h.u,h.o),k=new Fn(h,h.j,k,h.D+1),h.u===null&&(k.J=h.o),w&&(h.i=w.G.concat(h.i)),w=$l(h,k,1e3),k.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Yo(h.h,k),ir(k,R,w)}function Nr(h,w){h.H&&me(h.H,function(k,R){Ke(w,R,k)}),h.l&&me({},function(k,R){Ke(w,R,k)})}function $l(h,w,k){k=Math.min(h.i.length,k);const R=h.l?m(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const vt=["count="+k];Re==-1?k>0?(Re=q[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Ye=!0;for(let Et=0;Et<k;Et++){var X=q[Et].g;const Rn=q[Et].map;if(X-=Re,X<0)Re=Math.max(0,q[Et].g-100),Ye=!1;else try{X="req"+X+"_"||"";try{var oe=Rn instanceof Map?Rn:Object.entries(Rn);for(const[ci,Dr]of oe){let Vr=Dr;f(Dr)&&(Vr=Oi(Dr)),vt.push(X+ci+"="+encodeURIComponent(Vr))}}catch(ci){throw vt.push(X+"type="+encodeURIComponent("_badmap")),ci}}catch{R&&R(Rn)}}if(Ye){oe=vt.join("&");break e}}oe=void 0}return h=h.i.splice(0,k),w.G=h,oe}function Jt(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;z||C(),W||(z(),W=!0),A.add(w,h),h.A=0}}function Mr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ui(m(h.Da,h),sa(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Yi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ui(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Cn(this),Yi(this))};function no(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Yi(h){h.g=new Fn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=zn(h.na);Ke(w,"RID","rpc"),Ke(w,"SID",h.M),Ke(w,"AID",h.K),Ke(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(w,"TO",h.ia),Ke(w,"TYPE","xmlhttp"),Nr(h,w),h.u&&h.o&&Zo(w,h.u,h.o),h.O&&(h.g.H=h.O);var k=h.g;h=h.ba,k.M=1,k.A=ii(zn(w)),k.u=null,k.R=!0,Pl(k,h)}n.Va=function(){this.C!=null&&(this.C=null,Cn(this),Mr(this),ht(19))};function ra(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ia(h,w){var k=null;if(h.g==w){ra(h),no(h),h.g=null;var R=2}else if(Ml(h.h,w))k=w.G,Qs(h.h,w),R=1;else return;if(h.I!=0){if(w.o)if(R==1){k=w.u?w.u.length:0,w=Date.now()-w.F;var q=h.D;R=zi(),yt(R,new Al(R,k)),li(h)}else Jt(h);else if(q=w.m,q==3||q==0&&w.X>0||!(R==1&&Wu(h,w)||R==2&&Mr(h)))switch(k&&k.length>0&&(w=h.h,w.i=w.i.concat(k)),q){case 1:An(h,5);break;case 4:An(h,10);break;case 3:An(h,6);break;default:An(h,2)}}}function sa(h,w){let k=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(k*=2),k*w}function An(h,w){if(h.j.info("Error code "+w),w==2){var k=m(h.bb,h),R=h.Ua;const q=!R;R=new Sr(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ys(R,"https"),ii(R),q?Ar(R.toString(),k):Rr(R.toString(),k)}else ht(2);h.I=0,h.l&&h.l.pa(w),ro(h),na(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function ro(h){if(h.I=0,h.ja=[],h.l){const w=Sn(h.h);(w.length!=0||h.i.length!=0)&&(b(h.ja,w),b(h.ja,h.i),h.h.i.length=0,E(h.i),h.i.length=0),h.l.oa()}}function Hl(h,w,k){var R=k instanceof Sr?zn(k):new Sr(k);if(R.g!="")w&&(R.g=w+"."+R.g),Tr(R,R.u);else{var q=c.location;R=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const X=new Sr(null);R&&Ys(X,R),w&&(X.g=w),q&&Tr(X,q),k&&(X.h=k),R=X}return k=h.G,w=h.wa,k&&w&&Ke(R,k,w),Ke(R,"VER",h.ka),Nr(h,R),R}function $u(h,w,k){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new Je(new si({ab:k})):new Je(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function oa(){}oa.prototype.g=function(h,w){return new $t(h,w)};function $t(h,w){bt.call(this),this.g=new ea(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!L(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Xi(this)}v($t,bt),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){ta(this.g)},$t.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var k={};k.__data__=h,h=k}else this.v&&(k={},k.__data__=Oi(h),h=k);w.i.push(new _f(w.Ya++,h)),w.I==3&&li(w)},$t.prototype.N=function(){this.g.l=null,delete this.j,ta(this.g),delete this.g,$t.Z.N.call(this)};function Ku(h){$o.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const k in w){h=k;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}v(Ku,$o);function qu(){Cl.call(this),this.status=1}v(qu,Cl);function Xi(h){this.g=h}v(Xi,Hu),Xi.prototype.ra=function(){yt(this.g,"a")},Xi.prototype.qa=function(h){yt(this.g,new Ku(h))},Xi.prototype.pa=function(h){yt(this.g,new qu)},Xi.prototype.oa=function(){yt(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,pb=function(){return new oa},fb=function(){return zi()},hb=rr,Wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,ih=$i,Hi.COMPLETE="complete",db=Hi,Cu.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Ec=Cu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,ub=Je}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="12.8.0";function ej(n){dl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Wg("@firebase/firestore");function Aa(){return Ro.logLevel}function he(n,...e){if(Ro.logLevel<=Le.DEBUG){const t=e.map(ny);Ro.debug(`Firestore (${dl}): ${n}`,...t)}}function Ri(n,...e){if(Ro.logLevel<=Le.ERROR){const t=e.map(ny);Ro.error(`Firestore (${dl}): ${n}`,...t)}}function Ga(n,...e){if(Ro.logLevel<=Le.WARN){const t=e.map(ny);Ro.warn(`Firestore (${dl}): ${n}`,...t)}}function ny(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mb(n,r,t)}function mb(n,e,t){let r=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ri(r),new Error(r)}function Qe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||mb(e,s,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class nj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rj{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let a=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Si,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Si)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new gb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class ij{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ij(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aj(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function $m(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return sm(s)===sm(a)?Oe(s,a):sm(s)?1:-1}return Oe(n.length,e.length)}const lj=55296,cj=57343;function sm(n){const e=n.charCodeAt(0);return e>=lj&&e<=cj}function Qa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="__name__";class zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=zr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=zr.isNumericId(e),s=zr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?zr.extractNumericId(e).compare(zr.extractNumericId(t)):$m(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class et extends zr{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const uj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends zr{construct(e,t,r){return new Qt(e,t,r)}static isValidIdentifier(e){return uj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ix}static keyField(){return new Qt([Ix])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(r+=f,s++):(a(),s++)}if(a(),c)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(et.fromString(e))}static fromName(e){return new we(et.fromString(e).popFirst(5))}static empty(){return new we(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dj(n,e,t,r){if(e===!0&&r===!0)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cx(n){if(!we.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ax(n){if(we.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Gr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jh(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function hu(n,e){if(!vb(n))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ce(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=-62135596800,Px=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Px);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rx)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new it(0,0))}static max(){return new Ie(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;function hj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Ts(s,we.empty(),e)}function fj(n){return new Ts(n.readTime,n.key,Wc)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(Ie.min(),we.empty(),Wc)}static max(){return new Ts(Ie.max(),we.empty(),Wc)}}function pj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==mj)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let s=0,a=0,c=!1;e.forEach((f=>{++s,f.next((()=>{++a,c&&a===s&&t()}),(d=>r(d)))})),c=!0,a===s&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((s=>s?Z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,s)=>{const a=e.length,c=new Array(a);let f=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++f,f===a&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new Z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function yj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function ef(n){return n==null}function bh(n){return n===0&&1/n==-1/0}function vj(n){return typeof n=="number"&&Number.isInteger(n)&&!bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="";function xj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jx(e)),e=wj(n.get(t),e);return jx(e)}function wj(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case xb:t+="";break;default:t+=a}}return t}function jx(n){return n+xb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=a??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Gt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mx(this.data.getIterator())}getIteratorFrom(e){return new Mx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class Mx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Mt(Qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _b("Invalid base64 string: "+a):a}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const _j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=_j.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="server_timestamp",bb="__type__",Eb="__previous_value__",Sb="__local_write_time__";function sy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[bb])==null?void 0:r.stringValue)===kb}function tf(n){const e=n.mapValue.fields[Eb];return sy(e)?tf(e):e}function $c(n){const e=Is(n.mapValue.fields[Sb].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t,r,s,a,c,f,d,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=v}}const Eh="(default)";class Hc{constructor(e,t){this.projectId=e,this.database=t||Eh}static empty(){return new Hc("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}function bj(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="__type__",Ej="__max__",Hd={mapValue:{}},Ib="__vector__",Sh="value";function As(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sy(n)?4:Tj(n)?9007199254740991:Sj(n)?10:11:Ee(28295,{value:n})}function Qr(n,e){if(n===e)return!0;const t=As(n);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $c(n).isEqual($c(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Is(s.timestampValue),f=Is(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Cs(s.bytesValue).isEqual(Cs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return wt(s.geoPointValue.latitude)===wt(a.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return wt(s.integerValue)===wt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=wt(s.doubleValue),f=wt(a.doubleValue);return c===f?bh(c)===bh(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Nx(c)!==Nx(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!Qr(c[d],f[d])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Kc(n,e){return(n.values||[]).find((t=>Qr(t,e)))!==void 0}function Ya(n,e){if(n===e)return 0;const t=As(n),r=As(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const f=wt(a.integerValue||a.doubleValue),d=wt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return Dx(n.timestampValue,e.timestampValue);case 4:return Dx($c(n),$c(e));case 5:return $m(n.stringValue,e.stringValue);case 6:return(function(a,c){const f=Cs(a),d=Cs(c);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const f=a.split("/"),d=c.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Oe(f[m],d[m]);if(g!==0)return g}return Oe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const f=Oe(wt(a.latitude),wt(c.latitude));return f!==0?f:Oe(wt(a.longitude),wt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Vx(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var _,E,b,I;const f=a.fields||{},d=c.fields||{},m=(_=f[Sh])==null?void 0:_.arrayValue,g=(E=d[Sh])==null?void 0:E.arrayValue,v=Oe(((b=m==null?void 0:m.values)==null?void 0:b.length)||0,((I=g==null?void 0:g.values)==null?void 0:I.length)||0);return v!==0?v:Vx(m,g)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Hd.mapValue&&c===Hd.mapValue)return 0;if(a===Hd.mapValue)return 1;if(c===Hd.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=$m(d[v],g[v]);if(_!==0)return _;const E=Ya(f[d[v]],m[g[v]]);if(E!==0)return E}return Oe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function Dx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Is(n),r=Is(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function Vx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ya(t[s],r[s]);if(a)return a}return Oe(t.length,r.length)}function Xa(n){return Hm(n)}function Hm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Is(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Hm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Hm(t.fields[c])}`;return s+"}"})(n.mapValue):Ee(61005,{value:n})}function sh(n){switch(As(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+sh(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+sh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ls(r.fields,((a,c)=>{s+=a.length+sh(c)})),s})(n.mapValue);default:throw Ee(13486,{value:n})}}function Lx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Km(n){return!!n&&"integerValue"in n}function oy(n){return!!n&&"arrayValue"in n}function Ox(n){return!!n&&"nullValue"in n}function Bx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function Sj(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Tb])==null?void 0:r.stringValue)===Ib}function jc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=jc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jc(n.arrayValue.values[t]);return e}return{...n}}function Tj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ej}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=Qt.emptyPath(),r={},s=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=jc(c):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];oh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ls(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new kn(jc(this.value))}}function Cb(n){const e=[];return Ls(n.fields,((t,r)=>{const s=new Qt([t]);if(oh(r)){const a=Cb(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,s,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),kn.empty(),0)}static newFoundDocument(e,t,r,s){return new on(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.position=e,this.inclusive=t}}function Fx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=we.comparator(we.fromName(c.referenceValue),t.key):r=Ya(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function zx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ij(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{}class Ct extends Ab{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Aj(e,t,r):t==="array-contains"?new jj(e,r):t==="in"?new Nj(e,r):t==="not-in"?new Mj(e,r):t==="array-contains-any"?new Dj(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rj(e,r):new Pj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ya(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Ab{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xr(e,t)}matches(e){return Rb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Rb(n){return n.op==="and"}function Pb(n){return Cj(n)&&Rb(n)}function Cj(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function qm(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+Xa(n.value);if(Pb(n))return n.filters.map((e=>qm(e))).join(",");{const e=n.filters.map((t=>qm(t))).join(",");return`${n.op}(${e})`}}function jb(n,e){return n instanceof Ct?(function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&Qr(r.value,s.value)})(n,e):n instanceof xr?(function(r,s){return s instanceof xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,c,f)=>a&&jb(c,s.filters[f])),!0):!1})(n,e):void Ee(19439)}function Nb(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xa(t.value)}`})(n):n instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Nb).join(" ,")+"}"})(n):"Filter"}class Aj extends Ct{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rj extends Ct{constructor(e,t){super(e,"in",t),this.keys=Mb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Pj extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=Mb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>we.fromName(r.referenceValue)))}class jj extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oy(t)&&Kc(t.arrayValue,this.value)}}class Nj extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kc(this.value.arrayValue,t)}}class Mj extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kc(this.value.arrayValue,t)}}class Dj extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Kc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t=null,r=[],s=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=f,this.Te=null}}function Ux(n,e=null,t=[],r=[],s=null,a=null,c=null){return new Vj(n,e,t,r,s,a,c)}function ay(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>qm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xa(r))).join(",")),e.Te=t}return e.Te}function ly(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ij(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zx(n.startAt,e.startAt)&&zx(n.endAt,e.endAt)}function Gm(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t=null,r=[],s=[],a=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Lj(n,e,t,r,s,a,c,f){return new pl(n,e,t,r,s,a,c,f)}function cy(n){return new pl(n)}function Wx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Oj(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Db(n){return n.collectionGroup!==null}function Nc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Mt(Qt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qc(a,r))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new qc(Qt.keyField(),r))}return e.Ie}function Wr(n){const e=Pe(n);return e.Ee||(e.Ee=Bj(e,Nc(n))),e.Ee}function Bj(n,e){if(n.limitType==="F")return Ux(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new qc(s.field,a)}));const t=n.endAt?new Th(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Th(n.startAt.position,n.startAt.inclusive):null;return Ux(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qm(n,e){const t=n.filters.concat([e]);return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fj(n,e){const t=n.explicitOrderBy.concat([e]);return new pl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Ih(n,e,t){return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nf(n,e){return ly(Wr(n),Wr(e))&&n.limitType===e.limitType}function Vb(n){return`${ay(Wr(n))}|lt:${n.limitType}`}function Ra(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>Nb(s))).join(", ")}]`),ef(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Xa(s))).join(",")),`Target(${r})`})(Wr(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):we.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Nc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,f,d){const m=Fx(c,f,d);return c.inclusive?m<=0:m<0})(r.startAt,Nc(r),s)||r.endAt&&!(function(c,f,d){const m=Fx(c,f,d);return c.inclusive?m>=0:m>0})(r.endAt,Nc(r),s))})(n,e)}function zj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Lb(n){return(e,t)=>{let r=!1;for(const s of Nc(n)){const a=Uj(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Uj(n,e,t){const r=n.field.isKeyField()?we.comparator(e.key,t.key):(function(a,c,f){const d=c.data.field(a),m=f.data.field(a);return d!==null&&m!==null?Ya(d,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return wb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=new dt(we.comparator);function Pi(){return Wj}const Ob=new dt(we.comparator);function Sc(...n){let e=Ob;for(const t of n)e=e.insert(t.key,t);return e}function Bb(n){let e=Ob;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _o(){return Mc()}function Fb(){return Mc()}function Mc(){return new Lo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $j=new dt(we.comparator),Hj=new Mt(we.comparator);function Be(...n){let e=Hj;for(const t of n)e=e.add(t);return e}const Kj=new Mt(Oe);function qj(){return Kj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function zb(n){return{integerValue:""+n}}function Ub(n,e){return vj(e)?zb(e):uy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function Gj(n,e,t){return n instanceof Gc?(function(s,a){const c={fields:{[bb]:{stringValue:kb},[Sb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&sy(a)&&(a=tf(a)),a&&(c.fields[Eb]=a),{mapValue:c}})(t,e):n instanceof Ja?$b(n,e):n instanceof Qc?Hb(n,e):(function(s,a){const c=Wb(s,a),f=$x(c)+$x(s.Ae);return Km(c)&&Km(s.Ae)?zb(f):uy(s.serializer,f)})(n,e)}function Qj(n,e,t){return n instanceof Ja?$b(n,e):n instanceof Qc?Hb(n,e):t}function Wb(n,e){return n instanceof Yc?(function(r){return Km(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Gc extends sf{}class Ja extends sf{constructor(e){super(),this.elements=e}}function $b(n,e){const t=Kb(e);for(const r of n.elements)t.some((s=>Qr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Qc extends sf{constructor(e){super(),this.elements=e}}function Hb(n,e){let t=Kb(e);for(const r of n.elements)t=t.filter((s=>!Qr(s,r)));return{arrayValue:{values:t}}}class Yc extends sf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $x(n){return wt(n.integerValue||n.doubleValue)}function Kb(n){return oy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t){this.field=e,this.transform=t}}function Yj(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ja&&s instanceof Ja||r instanceof Qc&&s instanceof Qc?Qa(r.elements,s.elements,Qr):r instanceof Yc&&s instanceof Yc?Qr(r.Ae,s.Ae):r instanceof Gc&&s instanceof Gc})(n.transform,e.transform)}class Xj{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class of{}function qb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Qb(n.key,gr.none()):new fu(n.key,n.data,gr.none());{const t=n.data,r=kn.empty();let s=new Mt(Qt.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Os(n.key,r,new Dn(s.toArray()),gr.none())}}function Jj(n,e,t){n instanceof fu?(function(s,a,c){const f=s.value.clone(),d=Kx(s.fieldTransforms,a,c.transformResults);f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Os?(function(s,a,c){if(!ah(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Kx(s.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(Gb(s)),d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Dc(n,e,t,r){return n instanceof fu?(function(a,c,f,d){if(!ah(a.precondition,c))return f;const m=a.value.clone(),g=qx(a.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Os?(function(a,c,f,d){if(!ah(a.precondition,c))return f;const m=qx(a.fieldTransforms,d,c),g=c.data;return g.setAll(Gb(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,c,f){return ah(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function Zj(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=Wb(r.transform,s||null);a!=null&&(t===null&&(t=kn.empty()),t.set(r.field,a))}return t||null}function Hx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Qa(r,s,((a,c)=>Yj(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends of{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Os extends of{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Gb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Kx(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,f=e.data.field(a.field);r.set(a.field,Qj(c,f,t[s]))}return r}function qx(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,Gj(a,c,e))}return r}class Qb extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eN extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Jj(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fb();return this.mutations.forEach((s=>{const a=e.get(s.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(s.key)?null:f;const d=qb(c,f);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,((t,r)=>Hx(t,r)))&&Qa(this.baseMutations,e.baseMutations,((t,r)=>Hx(t,r)))}}class hy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return $j})();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new hy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,ze;function iN(n){switch(n){case J.OK:return Ee(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function Yb(n){if(n===void 0)return Ri("GRPC error has no .code"),J.UNKNOWN;switch(n){case Tt.OK:return J.OK;case Tt.CANCELLED:return J.CANCELLED;case Tt.UNKNOWN:return J.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return J.INTERNAL;case Tt.UNAVAILABLE:return J.UNAVAILABLE;case Tt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Tt.NOT_FOUND:return J.NOT_FOUND;case Tt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Tt.ABORTED:return J.ABORTED;case Tt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Tt.DATA_LOSS:return J.DATA_LOSS;default:return Ee(39323,{code:n})}}(ze=Tt||(Tt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new bs([4294967295,4294967295],0);function Gx(n){const e=sN().encode(n),t=new cb;return t.update(e),new Uint8Array(t.digest())}function Qx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new bs([t,r],0),new bs([s,a],0)]}class fy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bs.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(bs.fromNumber(r)));return s.compare(oN)===1&&(s=new bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Gx(e),[r,s]=Qx(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,s,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new fy(a,s,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Gx(e),[r,s]=Qx(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,s,a);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new af(Ie.min(),s,new dt(Oe),Pi(),Be())}}class pu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pu(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Xb{constructor(e,t){this.targetId=e,this.Ce=t}}class Jb{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Yx{constructor(){this.ve=0,this.Fe=Xx(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ee(38017,{changeType:a})}})),new pu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Xx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class aN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.He=Kd(),this.Je=Kd(),this.Ze=new dt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Gm(a))if(r===0){const c=new we(a.path);this.et(t,c,on.newNoDocument(c,Ie.min()))}else Qe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),d=f?this.ct(f,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,f;try{c=Cs(r).toUint8Array()}catch(d){if(d instanceof _b)return Ga("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new fy(c,s,a)}catch(d){return Ga(d instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const f=this.ot(c);if(f){if(a.current&&Gm(f.target)){const d=new we(f.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,on.newNoDocument(d,e))}a.Be&&(t.set(c,a.ke()),a.Ke())}}));let r=Be();this.Je.forEach(((a,c)=>{let f=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const s=new af(e,t,this.Ze,this.je,r);return this.je=Pi(),this.He=Kd(),this.Je=Kd(),this.Ze=new dt(Oe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Yx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Mt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Mt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kd(){return new dt(we.comparator)}function Xx(){return new dt(we.comparator)}const lN={asc:"ASCENDING",desc:"DESCENDING"},cN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uN={and:"AND",or:"OR"};class dN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ym(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Ch(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hN(n,e){return Ch(n,e.toTimestamp())}function $r(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const r=Is(t);return new it(r.seconds,r.nanos)})(n))}function py(n,e){return Xm(n,e).canonicalString()}function Xm(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function eE(n){const e=et.fromString(n);return Qe(sE(e),10190,{key:e.toString()}),e}function Jm(n,e){return py(n.databaseId,e.path)}function om(n,e){const t=eE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(nE(t))}function tE(n,e){return py(n.databaseId,e)}function fN(n){const e=eE(n);return e.length===4?et.emptyPath():nE(e)}function Zm(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nE(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Jx(n,e,t){return{name:Jm(n,e),fields:t.value.mapValue.fields}}function pN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,g){return m.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),Yt.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Yt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const g=m.code===void 0?J.UNKNOWN:Yb(m.code);return new ce(g,m.message||"")})(c);t=new Jb(r,s,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=om(n,r.document.name),a=$r(r.document.updateTime),c=r.document.createTime?$r(r.document.createTime):Ie.min(),f=new kn({mapValue:{fields:r.document.fields}}),d=on.newFoundDocument(s,a,c,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new lh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=om(n,r.document),a=r.readTime?$r(r.readTime):Ie.min(),c=on.newNoDocument(s,a),f=r.removedTargetIds||[];t=new lh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=om(n,r.document),a=r.removedTargetIds||[];t=new lh([],a,s,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new rN(s,a),f=r.targetId;t=new Xb(f,c)}}return t}function mN(n,e){let t;if(e instanceof fu)t={update:Jx(n,e.key,e.value)};else if(e instanceof Qb)t={delete:Jm(n,e.key)};else if(e instanceof Os)t={update:Jx(n,e.key,e.data),updateMask:EN(e.fieldMask)};else{if(!(e instanceof eN))return Ee(16599,{dt:e.type});t={verify:Jm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const f=c.transform;if(f instanceof Gc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ja)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Qc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Yc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ee(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:hN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee(27497)})(n,e.precondition)),t}function gN(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,a){let c=s.updateTime?$r(s.updateTime):$r(a);return c.isEqual(Ie.min())&&(c=$r(a)),new Xj(c,s.transformResults||[])})(t,e)))):[]}function yN(n,e){return{documents:[tE(n,e.path)]}}function vN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tE(n,s);const a=(function(m){if(m.length!==0)return iE(xr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((g=>(function(_){return{field:Pa(_.field),direction:_N(_.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Ym(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function xN(n){let e=fN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(v){const _=rE(v);return _ instanceof xr&&Pb(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((_=>(function(b){return new qc(ja(b.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(_)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let _;return _=typeof v=="object"?v.value:v,ef(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,E=v.values||[];return new Th(E,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const _=!v.before,E=v.values||[];return new Th(E,_)})(t.endAt)),Lj(e,s,c,a,f,"F",d,m)}function wN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ja(t.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ja(t.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ja(t.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ja(t.unaryFilter.field);return Ct.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(ja(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((r=>rE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function _N(n){return lN[n]}function kN(n){return cN[n]}function bN(n){return uN[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function ja(n){return Qt.fromServerFormat(n.fieldPath)}function iE(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(Bx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NAN"}};if(Ox(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NAN"}};if(Ox(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(t.field),op:kN(t.op),value:t.value}}})(n):n instanceof xr?(function(t){const r=t.getFilters().map((s=>iE(s)));return r.length===1?r[0]:{compositeFilter:{op:bN(t.op),filters:r}}})(n):Ee(54877,{filter:n})}function EN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function oE(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,s,a=Ie.min(),c=Ie.min(),f=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.yt=e}}function TN(n){const e=xN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.Sn=new CN}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Ts.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class CN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Mt(et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aE=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(aE,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Za(0)}static ar(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="LruGarbageCollector",AN=1048576;function tw([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class RN{constructor(e){this.Pr=e,this.buffer=new Mt(tw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(ew,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fl(t)?he(ew,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Ar(3e5)}))}}class jN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Zh.ce);const r=new RN(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Zx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,c,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(m=Date.now(),Aa()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v}))))}}function NN(n,e){return new jN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.changes=new Lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Dc(r.mutation,s,Dn.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Be()){const s=_o();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let c=Sc();return a.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=_o();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Be())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,s){let a=Pi();const c=Mc(),f=(function(){return Mc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Os)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Dc(g.mutation,m,g.mutation.getFieldMask(),it.now())):c.set(m.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>f.set(m,new DN(g,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Mc();let s=new dt(((c,f)=>c-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Dn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const v=(s.get(f.batchId)||Be()).add(d);s=s.insert(f.batchId,v)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,v=Fb();g.forEach((_=>{if(!a.has(_)){const E=qb(t.get(_),r.get(_));E!==null&&v.set(_,E),a=a.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return Z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return Oj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Db(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Z.resolve(_o());let f=Wc,d=a;return c.next((m=>Z.forEach(m,((g,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),a.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,d,m,Be()))).next((g=>({batchId:f,changes:Bb(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((r=>{let s=Sc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=Sc();return this.indexManager.getCollectionParents(e,a).next((f=>Z.forEach(f,(d=>{const m=(function(v,_){return new pl(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((v,_)=>{c=c.insert(v,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((c=>{a.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,on.newInvalidDocument(g)))}));let f=Sc();return c.forEach(((d,m)=>{const g=a.get(d);g!==void 0&&Dc(g.mutation,m,Dn.empty(),it.now()),rf(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:$r(s.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:TN(s.bundledQuery),readTime:$r(s.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.overlays=new dt(we.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_o();return Z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const s=_o(),a=t.length+1,c=new we(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new dt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=_o(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=_o(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return Z.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new nN(t,r));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.kr=new Mt(zt.Kr),this.qr=new Mt(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new zt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new we(new et([])),r=new zt(t,e),s=new zt(t,e+1),a=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),a.push(c.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new et([])),r=new zt(t,e),s=new zt(t,e+1);let a=Be();return this.qr.forEachInRange([r,s],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new zt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Mt(zt.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new tN(a,t,r,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new zt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?iy:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zt(t,0),s=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(c=>{const f=this.Zr(c.Hr);a.push(f)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(Oe);return t.forEach((s=>{const a=new zt(s,0),c=new zt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,c],(f=>{r=r.add(f.Hr)}))})),Z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;we.isDocumentKey(a)||(a=a.child(""));const c=new zt(new we(a),0);let f=new Mt(Oe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),c),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Z.forEach(t.mutations,(s=>{const a=new zt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new zt(t,0),s=this.Jr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ti=e,this.docs=(function(){return new dt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():on.newInvalidDocument(s))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Pi();const c=t.path,f=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||pj(fj(g),r)<=0||(s.has(g.key)||rf(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ee(9500)}ni(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new UN(this)}getSize(e){return Z.resolve(this.size)}}class UN extends MN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.persistence=e,this.ri=new Lo((t=>ay(t)),ly),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new my,this.targetCount=0,this.oi=Za._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),Z.waitFor(a).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((c=>{a.push(s.markPotentiallyOrphaned(e,c))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t){this._i={},this.overlays={},this.ai=new Zh(0),this.ui=!1,this.ui=!0,this.ci=new BN,this.referenceDelegate=e(this),this.li=new WN(this),this.indexManager=new IN,this.remoteDocumentCache=(function(s){return new zN(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new SN(t),this.Pi=new LN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ON,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new FN(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new $N(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return Z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class $N extends gj{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Ri=new my,this.Ai=null}static Vi(e){return new gy(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(r=>{const s=we.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ah{constructor(e,t){this.persistence=e,this.fi=new Lo((r=>xj(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=NN(this,t)}static Vi(e,t){return new Ah(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,a.removeEntry(c,Ie.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sh(e.data.value)),t}wr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new yy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return vA()?8:yj(cn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new HN;return this.ys(e,t,c).next((f=>{if(a.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Aa()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Aa()<=Le.DEBUG&&he("QueryEngine","Query:",Ra(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Aa()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):Z.resolve())}gs(e,t){if(Wx(t))return Z.resolve(null);let r=Wr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ih(t,null,"F"),r=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Be(...a);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,c,d.readTime)?this.gs(e,Ih(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return Wx(t)||s.isEqual(Ie.min())?Z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const c=this.bs(t,a);return this.Ss(t,c,r,s)?Z.resolve(null):(Aa()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ra(t)),this.Ds(e,c,t,hj(s,Wc)).next((f=>f)))}))}bs(e,t){let r=new Mt(Lb(e));return t.forEach(((s,a)=>{rf(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return Aa()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.fs.getDocumentsMatchingQuery(e,t,Ts.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LocalStore",qN=3e8;class GN{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new dt(Oe),this.Fs=new Lo((a=>ay(a)),ly),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function QN(n,e,t,r){return new GN(n,e,t,r)}async function cE(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],f=[];let d=Be();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of a){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function YN(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const v=m.batch,_=v.keys();let E=Z.resolve();return _.forEach((b=>{E=E.next((()=>g.getEntry(d,b))).next((I=>{const T=m.docVersions.get(b);Qe(T!==null,48541),I.version.compareTo(T)<0&&(v.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),g.addEntry(I)))}))})),E.next((()=>f.mutationQueue.removeMutationBatch(d,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Be();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function uE(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function XN(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;f.push(t.li.removeMatchingKeys(a,g.removedDocuments,v).next((()=>t.li.addMatchingKeys(a,g.addedDocuments,v))));let E=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(Yt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(v,E),(function(I,T,M){return I.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=qN?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(_,E,g)&&f.push(t.li.updateTargetData(a,E))}));let d=Pi(),m=Be();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),f.push(JN(a,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ie.min())){const g=t.li.getLastRemoteSnapshotVersion(a).next((v=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(g)}return Z.waitFor(f).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,m))).next((()=>d))})).then((a=>(t.vs=s,a)))}function JN(n,e,t){let r=Be(),s=Be();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=Pi();return t.forEach(((f,d)=>{const m=a.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):he(vy,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function ZN(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=iy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eM(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,Z.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new vs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function eg(n,e,t){const r=Pe(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!fl(c))throw c;he(vy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function nw(n,e,t){const r=Pe(n);let s=Ie.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const v=Pe(d),_=v.Fs.get(g);return _!==void 0?Z.resolve(v.vs.get(_)):v.li.getTargetData(m,g)})(r,c,Wr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((d=>{a=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Ie.min(),t?a:Be()))).next((f=>(tM(r,zj(e),f),{documents:f,ks:a})))))}function tM(n,e,t){let r=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class rw{constructor(){this.activeTargetIds=qj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nM{constructor(){this.vo=new rw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new rw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="ConnectivityMonitor";class sw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(iw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd=null;function tg(){return qd===null?qd=(function(){return 268435456+Math.round(2147483648*Math.random())})():qd++,"0x"+qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",iM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class sM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Eh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=tg(),f=this.Qo(e,t.toUriEncodedString());he(am,`Sending RPC '${e}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,a);const{host:m}=new URL(f),g=ll(m);return this.zo(e,f,d,r,g).then((v=>(he(am,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Ga(am,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",r),v}))}jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=iM[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",xc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class za extends sM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!za.c_){const e=fb();xc(e,hb.STAT_EVENT,(t=>{t.stat===Wm.PROXY?he(rn,"STAT_EVENT: detected buffering proxy"):t.stat===Wm.NOPROXY&&he(rn,"STAT_EVENT: detected no buffering proxy")})),za.c_=!0}}zo(e,t,r,s,a){const c=tg();return new Promise(((f,d)=>{const m=new ub;m.setWithCredentials(!0),m.listenOnce(db.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ih.NO_ERROR:const v=m.getResponseJson();he(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case ih.TIMEOUT:he(rn,`RPC '${e}' ${c} timed out`),d(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const _=m.getStatus();if(he(rn,`RPC '${e}' ${c} failed with status:`,_,"response text:",m.getResponseText()),_>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const I=(function(M){const V=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(V)>=0?V:J.UNKNOWN})(b.status);d(new ce(I,b.message))}else d(new ce(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(rn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);he(rn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=tg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=a.join("");he(rn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=c.createWebChannel(m,f);this.I_(g);let v=!1,_=!1;const E=new oM({Ho:b=>{_?he(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(he(rn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),he(rn,`RPC '${e}' stream ${s} sending:`,b),g.send(b))},Jo:()=>g.close()});return xc(g,Ec.EventType.OPEN,(()=>{_||(he(rn,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),xc(g,Ec.EventType.CLOSE,(()=>{_||(_=!0,he(rn,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(g))})),xc(g,Ec.EventType.ERROR,(b=>{_||(_=!0,Ga(rn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),E.o_(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),xc(g,Ec.EventType.MESSAGE,(b=>{var I;if(!_){const T=b.data[0];Qe(!!T,16349);const M=T,V=(M==null?void 0:M.error)||((I=M[0])==null?void 0:I.error);if(V){he(rn,`RPC '${e}' stream ${s} received error:`,V);const j=V.status;let Q=(function(A){const C=Tt[A];if(C!==void 0)return Yb(C)})(j),z=V.message;Q===void 0&&(Q=J.INTERNAL,z="Unknown error status: "+j+" with message "+V.message),_=!0,E.o_(new ce(Q,z)),g.close()}else he(rn,`RPC '${e}' stream ${s} received:`,T),E.__(T)}})),za.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n){return new za(n)}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new dN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */za.c_=!1;class dE{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="PersistentStream";class hE{constructor(e,t,r,s,a,c,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Ri(t.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(ow,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(ow,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lM extends hE{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=pN(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ie.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?$r(c.readTime):Ie.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Zm(this.serializer),t.addTarget=(function(a,c){let f;const d=c.target;if(f=Gm(d)?{documents:yN(a,d)}:{query:vN(a,d).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Zb(a,c.resumeToken);const m=Ym(a,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Ch(a,c.snapshotVersion.toTimestamp());const m=Ym(a,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=wN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Zm(this.serializer),t.removeTarget=e,this.K_(t)}}class cM extends hE{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=gN(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{}class dM extends uM{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Wo(e,Xm(t,r),s,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Xm(t,r),s,c,f,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function hM(n,e,t,r){return new dM(n,e,t,r)}class fM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ri(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="RemoteStore";class pM{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Oo(this)&&(he(Po,"Restarting streams for network reachability change."),await(async function(d){const m=Pe(d);m.Ea.add(4),await mu(m),m.Va.set("Unknown"),m.Ea.delete(4),await cf(m)})(this))}))})),this.Va=new fM(r,s)}}async function cf(n){if(Oo(n))for(const e of n.Ra)await e(!0)}async function mu(n){for(const e of n.Ra)await e(!1)}function fE(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ky(t)?_y(t):ml(t).O_()&&wy(t,e))}function xy(n,e){const t=Pe(n),r=ml(t);t.Ia.delete(e),r.O_()&&pE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Oo(t)&&t.Va.set("Unknown"))}function wy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ml(n).Z_(e)}function pE(n,e){n.da.$e(e),ml(n).X_(e)}function _y(n){n.da=new aN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ml(n).start(),n.Va.ua()}function ky(n){return Oo(n)&&!ml(n).x_()&&n.Ia.size>0}function Oo(n){return Pe(n).Ea.size===0}function mE(n){n.da=void 0}async function mM(n){n.Va.set("Online")}async function gM(n){n.Ia.forEach(((e,t)=>{wy(n,e)}))}async function yM(n,e){mE(n),ky(n)?(n.Va.ha(e),_y(n)):n.Va.set("Unknown")}async function vM(n,e,t){if(n.Va.set("Online"),e instanceof Jb&&e.state===2&&e.cause)try{await(async function(s,a){const c=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){he(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rh(n,r)}else if(e instanceof lh?n.da.Xe(e):e instanceof Xb?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const r=await uE(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const f=a.da.Tt(c);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(m);g&&a.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,m)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Yt.EMPTY_BYTE_STRING,g.snapshotVersion)),pE(a,d);const v=new vs(g.target,d,m,g.sequenceNumber);wy(a,v)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){he(Po,"Failed to raise snapshot:",r),await Rh(n,r)}}async function Rh(n,e,t){if(!fl(e))throw e;n.Ea.add(1),await mu(n),n.Va.set("Offline"),t||(t=()=>uE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(Po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cf(n)}))}function gE(n,e){return e().catch((t=>Rh(n,t,e)))}async function uf(n){const e=Pe(n),t=Rs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iy;for(;xM(e);)try{const s=await ZN(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,wM(e,s)}catch(s){await Rh(e,s)}yE(e)&&vE(e)}function xM(n){return Oo(n)&&n.Ta.length<10}function wM(n,e){n.Ta.push(e);const t=Rs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function yE(n){return Oo(n)&&!Rs(n).x_()&&n.Ta.length>0}function vE(n){Rs(n).start()}async function _M(n){Rs(n).ra()}async function kM(n){const e=Rs(n);for(const t of n.Ta)e.ea(t.mutations)}async function bM(n,e,t){const r=n.Ta.shift(),s=hy.from(r,e,t);await gE(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await uf(n)}async function EM(n,e){e&&Rs(n).Y_&&await(async function(r,s){if((function(c){return iN(c)&&c!==J.ABORTED})(s.code)){const a=r.Ta.shift();Rs(r).B_(),await gE(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await uf(r)}})(n,e),yE(n)&&vE(n)}async function aw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),he(Po,"RemoteStore received new credentials");const r=Oo(t);t.Ea.add(3),await mu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cf(t)}async function SM(n,e){const t=Pe(n);e?(t.Ea.delete(2),await cf(t)):e||(t.Ea.add(2),await mu(t),t.Va.set("Unknown"))}function ml(n){return n.ma||(n.ma=(function(t,r,s){const a=Pe(t);return a.sa(),new lM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:mM.bind(null,n),Yo:gM.bind(null,n),t_:yM.bind(null,n),J_:vM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),ky(n)?_y(n):n.Va.set("Unknown")):(await n.ma.stop(),mE(n))}))),n.ma}function Rs(n){return n.fa||(n.fa=(function(t,r,s){const a=Pe(t);return a.sa(),new cM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_M.bind(null,n),t_:EM.bind(null,n),ta:kM.bind(null,n),na:bM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await uf(n)):(await n.fa.stop(),n.Ta.length>0&&(he(Po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,f=new by(e,t,c,s,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(n,e){if(Ri("AsyncQueue",`${e}: ${n}`),fl(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Sc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.ga=new dt(we.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class el{constructor(e,t,r,s,a,c,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new el(e,t,Ua.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class IM{constructor(){this.queries=cw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=cw(),a.forEach(((c,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function cw(){return new Lo((n=>Vb(n)),nf)}async function xE(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new TM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=Ey(c,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Sy(t)}async function wE(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.ba.indexOf(e);c>=0&&(a.ba.splice(c,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CM(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const f of c.ba)f.Fa(s)&&(r=!0);c.wa=s}}r&&Sy(t)}function AM(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function Sy(n){n.Ca.forEach((e=>{e.next()}))}var ng,uw;(uw=ng||(ng={})).Ma="default",uw.Cache="cache";class _E{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new el(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.key=e}}class bE{constructor(e){this.key=e}}class RM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=Lb(e),this.tu=new Ua(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new lw,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),E=rf(this.query,v)?v:null,b=!!_&&this.mutatedKeys.has(_.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let T=!1;_&&E?_.data.isEqual(E.data)?b!==I&&(r.track({type:3,doc:E}),T=!0):this.su(_,E)||(r.track({type:2,doc:E}),T=!0,(d&&this.eu(E,d)>0||m&&this.eu(E,m)<0)&&(f=!0)):!_&&E?(r.track({type:0,doc:E}),T=!0):_&&!E&&(r.track({type:1,doc:_}),T=!0,(d||m)&&(f=!0)),T&&(E?(c=c.add(E),a=I?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,v)=>(function(E,b){const I=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:T})}};return I(E)-I(b)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new el(this.query,e.tu,a,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new bE(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new kE(r))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ty="SyncEngine";class PM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jM{constructor(e){this.key=e,this.hu=!1}}class NM{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Lo((f=>Vb(f)),nf),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(we.comparator),this.Au=new Map,this.Vu=new my,this.du={},this.mu=new Map,this.fu=Za.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MM(n,e,t=!0){const r=AE(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await EE(r,e,t,!0),s}async function DM(n,e){const t=AE(n);await EE(t,e,!0,!1)}async function EE(n,e,t,r){const s=await eM(n.localStore,Wr(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let f;return r&&(f=await VM(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&fE(n.remoteStore,s),f}async function VM(n,e,t,r,s){n.pu=(v,_,E)=>(async function(I,T,M,V){let j=T.view.ru(M);j.Ss&&(j=await nw(I.localStore,T.query,!1).then((({documents:A})=>T.view.ru(A,j))));const Q=V&&V.targetChanges.get(T.targetId),z=V&&V.targetMismatches.get(T.targetId)!=null,W=T.view.applyChanges(j,I.isPrimaryClient,Q,z);return hw(I,T.targetId,W.au),W.snapshot})(n,v,_,E);const a=await nw(n.localStore,e,!0),c=new RM(e,a.ks),f=c.ru(a.documents),d=pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(f,n.isPrimaryClient,d);hw(n,t,m.au);const g=new PM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function LM(n,e,t){const r=Pe(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((c=>!nf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await eg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&xy(r.remoteStore,s.targetId),rg(r,s.targetId)})).catch(hl)):(rg(r,s.targetId),await eg(r.localStore,s.targetId,!0))}async function OM(n,e){const t=Pe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xy(t.remoteStore,r.targetId))}async function BM(n,e,t){const r=KM(n);try{const s=await(function(c,f){const d=Pe(c),m=it.now(),g=f.reduce(((E,b)=>E.add(b.key)),Be());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=Pi(),I=Be();return d.xs.getEntries(E,g).next((T=>{b=T,b.forEach(((M,V)=>{V.isValidDocument()||(I=I.add(M))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,b))).next((T=>{v=T;const M=[];for(const V of f){const j=Zj(V,v.get(V.key).overlayedDocument);j!=null&&M.push(new Os(V.key,j,Cb(j.value.mapValue),gr.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,M,f)})).next((T=>{_=T;const M=T.applyToLocalDocumentSet(v,I);return d.documentOverlayCache.saveOverlays(E,T.batchId,M)}))})).then((()=>({batchId:_.batchId,changes:Bb(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,f,d){let m=c.du[c.currentUser.toKey()];m||(m=new dt(Oe)),m=m.insert(f,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await gu(r,s.changes),await uf(r.remoteStore)}catch(s){const a=Ey(s,"Failed to persist write");t.reject(a)}}async function SE(n,e){const t=Pe(n);try{const r=await XN(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const c=t.Au.get(a);c&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Qe(c.hu,14607):s.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await gu(t,r,e)}catch(r){await hl(r)}}function dw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,c)=>{const f=c.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const d=Pe(c);d.onlineState=f;let m=!1;d.queries.forEach(((g,v)=>{for(const _ of v.ba)_.va(f)&&(m=!0)})),m&&Sy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FM(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let c=new dt(we.comparator);c=c.insert(a,on.newNoDocument(a,Ie.min()));const f=Be().add(a),d=new af(Ie.min(),new Map,new dt(Oe),c,f);await SE(r,d),r.Ru=r.Ru.remove(a),r.Au.delete(e),Iy(r)}else await eg(r.localStore,e,!1).then((()=>rg(r,e,t))).catch(hl)}async function zM(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await YN(t.localStore,e);IE(t,r,null),TE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gu(t,s)}catch(s){await hl(s)}}async function UM(n,e,t){const r=Pe(n);try{const s=await(function(c,f){const d=Pe(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((v=>(Qe(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(m,v)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);IE(r,e,t),TE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gu(r,s)}catch(s){await hl(s)}}function TE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function IE(n,e,t){const r=Pe(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function rg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||CE(n,r)}))}function CE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(xy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Iy(n))}function hw(n,e,t){for(const r of t)r instanceof kE?(n.Vu.addReference(r.key,e),WM(n,r)):r instanceof bE?(he(Ty,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||CE(n,r.key)):Ee(19791,{wu:r})}function WM(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(he(Ty,"New document in limbo: "+t),n.Eu.add(r),Iy(n))}function Iy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(et.fromString(e)),r=n.fu.next();n.Au.set(r,new jM(t)),n.Ru=n.Ru.insert(t,r),fE(n.remoteStore,new vs(Wr(cy(t.path)),r,"TargetPurposeLimboResolution",Zh.ce))}}async function gu(n,e,t){const r=Pe(n),s=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){s.push(m);const v=yy.Es(d.targetId,m);a.push(v)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=Pe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Z.forEach(m,(_=>Z.forEach(_.Ts,(E=>g.persistence.referenceDelegate.addReference(v,_.targetId,E))).next((()=>Z.forEach(_.Is,(E=>g.persistence.referenceDelegate.removeReference(v,_.targetId,E)))))))))}catch(v){if(!fl(v))throw v;he(vy,"Failed to update sequence numbers: "+v)}for(const v of m){const _=v.targetId;if(!v.fromCache){const E=g.vs.get(_),b=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(b);g.vs=g.vs.insert(_,I)}}})(r.localStore,a))}async function $M(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){he(Ty,"User change. New user:",e.toKey());const r=await cE(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new ce(J.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(t,r.Ns)}}function HM(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const a=t.Iu.get(e);if(!a)return s;for(const c of a){const f=t.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}function AE(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FM.bind(null,e),e.Pu.J_=CM.bind(null,e.eventManager),e.Pu.yu=AM.bind(null,e.eventManager),e}function KM(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UM.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return QN(this.persistence,new KN,e.initialUser,this.serializer)}Cu(e){return new lE(gy.Vi,this.serializer)}Du(e){return new nM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class qM extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Ah,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new lE((r=>Ah.Vi(r,t)),this.serializer)}}class ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$M.bind(null,this.syncEngine),await SM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IM})()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),r=aM(e.databaseInfo);return hM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,c,f){return new pM(r,s,a,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>dw(this.syncEngine,t,0)),(function(){return sw.v()?new sw:new rM})())}createSyncEngine(e,t){return(function(s,a,c,f,d,m,g){const v=new NM(s,a,c,f,d,m);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);he(Po,"RemoteStore shutting down."),a.Ea.add(5),await mu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ig.provider={build:()=>new ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class GM{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{he(Ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ey(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cm(n,e){n.asyncQueue.verifyOperationInProgress(),he(Ps,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await cE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function fw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await QM(n);he(Ps,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>aw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>aw(e.remoteStore,s))),n._onlineComponents=e}async function QM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Ps,"Using user provided OfflineComponentProvider");try{await cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ga("Error using user provided cache. Falling back to memory cache: "+t),await cm(n,new Ph)}}else he(Ps,"Using default OfflineComponentProvider"),await cm(n,new qM(void 0));return n._offlineComponents}async function PE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Ps,"Using user provided OnlineComponentProvider"),await fw(n,n._uninitializedComponentsProvider._online)):(he(Ps,"Using default OnlineComponentProvider"),await fw(n,new ig))),n._onlineComponents}function YM(n){return PE(n).then((e=>e.syncEngine))}async function jE(n){const e=await PE(n),t=e.eventManager;return t.onListen=MM.bind(null,e.syncEngine),t.onUnlisten=LM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OM.bind(null,e.syncEngine),t}function XM(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,f,d,m){const g=new RE({next:_=>{g.Nu(),c.enqueueAndForget((()=>wE(a,v)));const E=_.docs.has(f);!E&&_.fromCache?m.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&d&&d.source==="server"?m.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new _E(cy(f.path),g,{includeMetadataChanges:!0,Ka:!0});return xE(a,v)})(await jE(n),n.asyncQueue,e,t,r))),r.promise}function JM(n,e,t={}){const r=new Si;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,f,d,m){const g=new RE({next:_=>{g.Nu(),c.enqueueAndForget((()=>wE(a,v))),_.fromCache&&d.source==="server"?m.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new _E(f,g,{includeMetadataChanges:!0,Ka:!0});return xE(a,v)})(await jE(n),n.asyncQueue,e,t,r))),r.promise}function ZM(n,e){const t=new Si;return n.asyncQueue.enqueueAndForget((async()=>BM(await YM(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="ComponentProvider",pw=new Map;function tD(n,e,t,r,s){return new kj(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,NE(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firestore.googleapis.com",mw=!0;class gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ME,this.ssl=mw}else this.host=e.host,this.ssl=e.ssl??mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AN)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tj;switch(r.type){case"firstParty":return new sj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=pw.get(t);r&&(he(eD,"Removing Datastore"),pw.delete(t),r.terminate())})(this),Promise.resolve()}}function nD(n,e,t,r={}){var m;n=Gr(n,df);const s=ll(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(kk(`https://${f}`),bk("Firestore",!0)),a.host!==ME&&a.host!==f&&Ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:s,emulatorOptions:r};if(!Ss(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=sn.MOCK_USER;else{g=cA(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new sn(_)}n._authCredentials=new nj(new gb(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hu(t,_t._jsonSchema))return new _t(e,r||null,new we(et.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:At("string",_t._jsonSchemaVersion),referencePath:At("string")};class Es extends Bs{constructor(e,t,r){super(e,t,cy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new we(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function bn(n,e,...t){if(n=Lt(n),yb("collection","path",e),n instanceof df){const r=et.fromString(e,...t);return Ax(r),new Es(n,null,r)}{if(!(n instanceof _t||n instanceof Es))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Ax(r),new Es(n.firestore,null,r)}}function Ut(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=ry.newId()),yb("doc","path",e),n instanceof df){const r=et.fromString(e,...t);return Cx(r),new _t(n,null,new we(r))}{if(!(n instanceof _t||n instanceof Es))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Cx(r),new _t(n.firestore,n instanceof Es?n.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="AsyncQueue";class vw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dE(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&he(yw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fl(e))throw e;he(yw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ri("INTERNAL UNHANDLED ERROR: ",xw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=by.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Ee(47125,{Pc:xw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class gl extends df{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new vw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vw(e),this._firestoreClient=void 0,await e}}}function rD(n,e){const t=typeof n=="object"?n:Ik(),r=typeof n=="string"?n:Eh,s=Hg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=aA("firestore");a&&nD(s,...a)}return s}function Cy(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iD(n),n._firestoreClient}function iD(n){var r,s,a,c;const e=n._freezeSettings(),t=tD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Yt.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:At("string",Qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:At("string",Hr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:At("string",yr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=/^__.*__$/;class oD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class DE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:n})}}class hf{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(VE(this.dataSource)&&sD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class aD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lf(e)}createContext(e,t,r,s=!1){return new hf({dataSource:e,methodName:t,targetDoc:r,path:Qt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ff(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new aD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LE(n,e,t,r,s,a={}){const c=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);Ny("Data must be an object, but it was:",c,r);const f=OE(r,c);let d,m;if(a.merge)d=new Dn(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const _=jo(e,v,t);if(!c.contains(_))throw new ce(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);zE(g,_)||g.push(_)}d=new Dn(g),m=c.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,m=c.fieldTransforms;return new oD(new kn(f),d,m)}class pf extends yl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pf}}function lD(n,e,t){return new hf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ry extends yl{_toFieldTransform(e){return new dy(e.path,new Gc)}isEqual(e){return e instanceof Ry}}class Py extends yl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=lD(this,e,!0),r=this.Ac.map((a=>vl(a,t))),s=new Ja(r);return new dy(e.path,s)}isEqual(e){return e instanceof Py&&Ss(this.Ac,e.Ac)}}class jy extends yl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Yc(e.serializer,Ub(e.serializer,this.Vc));return new dy(e.path,t)}isEqual(e){return e instanceof jy&&this.Vc===e.Vc}}function cD(n,e,t,r){const s=n.createContext(1,e,t);Ny("Data must be an object, but it was:",s,r);const a=[],c=kn.empty();Ls(r,((d,m)=>{const g=FE(e,d,t);m=Lt(m);const v=s.childContextForFieldPath(g);if(m instanceof pf)a.push(g);else{const _=vl(m,v);_!=null&&(a.push(g),c.set(g,_))}}));const f=new Dn(a);return new DE(c,f,s.fieldTransforms)}function uD(n,e,t,r,s,a){const c=n.createContext(1,e,t),f=[jo(e,r,t)],d=[s];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)f.push(jo(e,a[_])),d.push(a[_+1]);const m=[],g=kn.empty();for(let _=f.length-1;_>=0;--_)if(!zE(m,f[_])){const E=f[_];let b=d[_];b=Lt(b);const I=c.childContextForFieldPath(E);if(b instanceof pf)m.push(E);else{const T=vl(b,I);T!=null&&(m.push(E),g.set(E,T))}}const v=new Dn(m);return new DE(g,v,c.fieldTransforms)}function dD(n,e,t,r=!1){return vl(t,n.createContext(r?4:3,e))}function vl(n,e){if(BE(n=Lt(n)))return Ny("Unsupported field value:",e,n),OE(n,e);if(n instanceof yl)return(function(r,s){if(!VE(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let c=0;for(const f of r){let d=vl(f,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ub(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Ch(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ch(s.serializer,a)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:Zb(s.serializer,r._byteString)};if(r instanceof _t){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:py(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yr)return(function(c,f){const d=c instanceof yr?c.toArray():c;return{mapValue:{fields:{[Tb]:{stringValue:Ib},[Sh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return uy(f.serializer,g)}))}}}}}})(r,s);if(oE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Jh(r)}`)})(n,e)}function OE(n,e){const t={};return wb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,((r,s)=>{const a=vl(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function BE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Hr||n instanceof Qn||n instanceof _t||n instanceof yl||n instanceof yr||oE(n))}function Ny(n,e,t){if(!BE(t)||!vb(t)){const r=Jh(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function jo(n,e,t){if((e=Lt(e))instanceof Ay)return e._internalPath;if(typeof e=="string")return FE(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const hD=new RegExp("[~\\*/\\[\\]]");function FE(n,e,t){if(e.search(hD)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ay(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||c)&&(d+=" (found",a&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new ce(J.INVALID_ARGUMENT,f+n+d)}function zE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ls(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[Sh].arrayValue)==null?void 0:s.values)==null?void 0:a.map((c=>wt(c.doubleValue)));return new yr(t)}convertGeoPoint(e){return new Hr(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const t=Is(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Qe(sE(r),9688,{name:e});const s=new Hc(r.get(1),r.get(3)),a=new we(r.popFirst(5));return s.isEqual(t)||Ri(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends fD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Dt(){return new Ry("serverTimestamp")}function pD(...n){return new Py("arrayUnion",n)}function My(n){return new jy("increment",n)}const ww="@firebase/firestore",_w="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(jo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mD extends WE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class Vy extends Dy{}function js(n,e,...t){let r=[];e instanceof Dy&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((d=>d instanceof Ly)).length,f=a.filter((d=>d instanceof mf)).length;if(c>1||c>0&&f>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class mf extends Vy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new mf(e,t,r)}_apply(e){const t=this._parse(e);return $E(e._query,t),new Bs(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=ff(e.firestore);return(function(a,c,f,d,m,g,v){let _;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bw(v,g);const b=[];for(const I of v)b.push(kw(d,a,I));_={arrayValue:{values:b}}}else _=kw(d,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bw(v,g),_=dD(f,c,v,g==="in"||g==="not-in");return Ct.create(m,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xc(n,e,t){const r=e,s=jo("where",n);return mf._create(s,r,t)}class Ly extends Dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ly(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let c=s;const f=a.getFlattenedFilters();for(const d of f)$E(c,d),c=Qm(c,d)})(e._query,t),new Bs(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oy extends Vy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Oy(e,t)}_apply(e){const t=(function(s,a,c){if(s.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qc(a,c)})(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,Fj(e._query,t))}}function tl(n,e="asc"){const t=e,r=jo("orderBy",n);return Oy._create(r,t)}class By extends Vy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new By(e,t,r)}_apply(e){return new Bs(e.firestore,e.converter,Ih(e._query,this._limit,this._limitType))}}function yD(n){return By._create("limit",n,"F")}function kw(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Db(e)&&t.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!we.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lx(n,new we(r))}if(t instanceof _t)return Lx(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jh(t)}.`)}function bw(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $E(n,e){const t=(function(s,a){for(const c of s)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function HE(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends WE{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:At("string",Eo._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class ch extends Eo{data(e={}){return super.data(e)}}class Wa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ic(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ch(this._firestore,this._userDataWriter,r.key,r,new Ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const d=new ch(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ic(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new ch(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ic(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),g=c.indexOf(f.doc.key)),{type:vD(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:At("string",Wa._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){n=Gr(n,_t);const e=Gr(n.firestore,gl),t=Cy(e);return XM(t,n._key).then((r=>xD(e,n,r)))}function vr(n){n=Gr(n,Bs);const e=Gr(n.firestore,gl),t=Cy(e),r=new UE(e);return gD(n._query),JM(t,n._query).then((s=>new Wa(e,r,n,s)))}function yu(n,e,t){n=Gr(n,_t);const r=Gr(n.firestore,gl),s=HE(n.converter,e),a=ff(r);return zy(r,[LE(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,gr.none())])}function Jr(n,e,t,...r){n=Gr(n,_t);const s=Gr(n.firestore,gl),a=ff(s);let c;return c=typeof(e=Lt(e))=="string"||e instanceof Ay?uD(a,"updateDoc",n._key,e,t,r):cD(a,"updateDoc",n._key,e),zy(s,[c.toMutation(n._key,gr.exists(!0))])}function Fy(n,e){const t=Gr(n.firestore,gl),r=Ut(n),s=HE(n.converter,e),a=ff(n.firestore);return zy(t,[LE(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,gr.exists(!1))]).then((()=>r))}function zy(n,e){const t=Cy(n);return ZM(t,e)}function xD(n,e,t){const r=t.docs.get(e._key),s=new UE(n);return new Eo(n,s,e._key,r,new Ic(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){ej(cl),Ka(new Io("firestore",((r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),f=new gl(new rj(r.getProvider("auth-internal")),new oj(c,r.getProvider("app-check-internal")),bj(c,s),c);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),ks(ww,_w,e),ks(ww,_w,"esm2020")})();var wD="firebase",_D="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(wD,_D,"app");const kD={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},KE=Tk(kD),qe=rD(KE),No=J5(KE),Bo="users",So={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function bD(n,e,t){const s=(await MP(No,n,e)).user;return await LP(s,{displayName:t}),await yu(Ut(qe,Bo,s.uid),{uid:s.uid,email:s.email,displayName:t,role:So.MEMBER,createdAt:Dt(),lastLogin:Dt()}),s}async function ED(n,e){const t=await DP(No,n,e);return await Jr(Ut(qe,Bo,t.user.uid),{lastLogin:Dt()}),t.user}async function SD(){var a;const n=new wi,t=(await a5(No,n)).user,r=Ut(qe,Bo,t.uid);return(await xl(r)).exists()?await Jr(r,{lastLogin:Dt(),photoURL:t.photoURL}):await yu(r,{uid:t.uid,email:t.email,displayName:t.displayName||((a=t.email)==null?void 0:a.split("@")[0]),photoURL:t.photoURL,role:So.MEMBER,createdAt:Dt(),lastLogin:Dt(),provider:"google"}),t}async function qE(){return zP(No)}async function Ew(n){const e=Ut(qe,Bo,n),t=await xl(e);return t.exists()?t.data():null}async function TD(n,e){if(!Object.values(So).includes(e))throw new Error("Invalid role");await Jr(Ut(qe,Bo,n),{role:e,updatedAt:Dt()})}async function ID(n,e){await Jr(Ut(qe,Bo,n),{role:So.BUSINESS,businessCode:e,updatedAt:Dt()})}async function CD(){return(await vr(bn(qe,Bo))).docs.map(e=>({id:e.id,...e.data()}))}function AD(n){return FP(No,n)}const GE=P.createContext(null);function RD({children:n}){const[e,t]=P.useState(null),[r,s]=P.useState(null),[a,c]=P.useState(!0);P.useEffect(()=>{const b=AD(async I=>{if(t(I),I){const T=await Ew(I.uid);s(T)}else s(null);c(!1)});return()=>b()},[]);const f=!!e,d=(r==null?void 0:r.role)===So.ADMIN,m=(r==null?void 0:r.role)===So.BUSINESS,g=(r==null?void 0:r.role)===So.MEMBER,E={user:e,profile:r,loading:a,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...b)=>r?b.includes(r.role):!1,refreshProfile:async()=>{if(e){const b=await Ew(e.uid);s(b)}}};return l.jsx(GE.Provider,{value:E,children:n})}function Di(){const n=P.useContext(GE);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Sw=n=>{const e=jD(n);return e.charAt(0).toUpperCase()+e.slice(1)},QE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),ND=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...f},d)=>P.createElement("svg",{ref:d,...MD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:QE("lucide",s),...!a&&!ND(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,g])=>P.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(n,e)=>{const t=P.forwardRef(({className:r,...s},a)=>P.createElement(DD,{ref:a,iconNode:e,className:QE(`lucide-${PD(Sw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Sw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],LD=ue("arrow-left",VD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],gf=ue("arrow-right-left",OD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sg=ue("arrow-right",BD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Zr=ue("award",FD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Uy=ue("banknote",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],YE=ue("briefcase",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yf=ue("calendar",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],XE=ue("chart-column",$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jc=ue("check",HD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qD=ue("chevron-left",KD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wy=ue("circle-alert",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yr=ue("circle-check-big",QD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],XD=ue("circle-x",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wr=ue("clock",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],um=ue("cloud-lightning",ZD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],vi=ue("cloud-rain",e4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Ca=ue("cloud-snow",t4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Gd=ue("cloud",n4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],i4=ue("coins",r4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JE=ue("compass",s4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$y=ue("copy",o4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],og=ue("credit-card",a4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],c4=ue("croissant",l4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],En=ue("crown",u4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Hy=ue("download",d4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],f4=ue("droplets",h4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],m4=ue("ellipsis-vertical",p4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y4=ue("eye",g4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],x4=ue("funnel",v4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ZE=ue("gift",w4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],k4=ue("house",_4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],E4=ue("layout-dashboard",b4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],T4=ue("lightbulb",S4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ky=ue("loader-circle",I4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],A4=ue("lock",C4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],nl=ue("log-in",R4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ag=ue("log-out",P4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eS=ue("mail",j4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Mo=ue("map-pin",N4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],D4=ue("megaphone",M4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],tS=ue("navigation",V4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tw=ue("package",L4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],nS=ue("palette",O4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],F4=ue("phone",B4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Iw=ue("plus",z4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],W4=ue("printer",U4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Kr=ue("qr-code",$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],K4=ue("refresh-cw",H4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],G4=ue("save",q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Y4=ue("search",Q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Nh=ue("send",X4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z4=ue("share-2",J4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rS=ue("shield-check",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Mh=ue("shield",tV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],iS=ue("shopping-bag",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Cw=ue("smartphone",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qy=ue("sparkles",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oV=ue("square-check-big",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lV=ue("square",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],er=ue("star",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Vt=ue("store",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Aw=ue("sun",dV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xt=ue("target",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],pV=ue("toggle-left",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],gV=ue("toggle-right",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fs=ue("trending-up",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],xV=ue("trophy",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Dh=ue("user-plus",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$a=ue("user",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_r=ue("users",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],sS=ue("utensils-crossed",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],SV=ue("wind",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],IV=ue("zap",TV);function xi({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:a}=Di(),c=tr();return s?l.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(Ky,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),l.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),l.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a?e.length>0&&r&&!e.includes(r.role)?l.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[l.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),l.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:l.jsx(yC,{to:"/login",state:{from:c},replace:!0})}const oS=P.createContext({});function CV(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const aS=typeof window<"u",AV=aS?P.useLayoutEffect:P.useEffect,Gy=P.createContext(null);function Qy(n,e){n.indexOf(e)===-1&&n.push(e)}function Yy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Xr=(n,e,t)=>t>e?e:t<n?n:t;let Xy=()=>{};const ji={},lS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function cS(n){return typeof n=="object"&&n!==null}const uS=n=>/^0[^.\s]+$/u.test(n);function Jy(n){let e;return()=>(e===void 0&&(e=n()),e)}const Xn=n=>n,RV=(n,e)=>t=>e(n(t)),vu=(...n)=>n.reduce(RV),Zc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Zy{constructor(){this.subscriptions=[]}add(e){return Qy(this.subscriptions,e),()=>Yy(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ti=n=>n*1e3,Yn=n=>n/1e3;function dS(n,e){return e?n*(1e3/e):0}const hS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,PV=1e-7,jV=12;function NV(n,e,t,r,s){let a,c,f=0;do c=e+(t-e)/2,a=hS(c,r,s)-n,a>0?t=c:e=c;while(Math.abs(a)>PV&&++f<jV);return c}function xu(n,e,t,r){if(n===e&&t===r)return Xn;const s=a=>NV(a,0,1,n,t);return a=>a===0||a===1?a:hS(s(a),e,r)}const fS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,pS=n=>e=>1-n(1-e),mS=xu(.33,1.53,.69,.99),e0=pS(mS),gS=fS(e0),yS=n=>(n*=2)<1?.5*e0(n):.5*(2-Math.pow(2,-10*(n-1))),t0=n=>1-Math.sin(Math.acos(n)),vS=pS(t0),xS=fS(t0),MV=xu(.42,0,1,1),DV=xu(0,0,.58,1),wS=xu(.42,0,.58,1),VV=n=>Array.isArray(n)&&typeof n[0]!="number",_S=n=>Array.isArray(n)&&typeof n[0]=="number",LV={linear:Xn,easeIn:MV,easeInOut:wS,easeOut:DV,circIn:t0,circInOut:xS,circOut:vS,backIn:e0,backInOut:gS,backOut:mS,anticipate:yS},OV=n=>typeof n=="string",Rw=n=>{if(_S(n)){Xy(n.length===4);const[e,t,r,s]=n;return xu(e,t,r,s)}else if(OV(n))return LV[n];return n},Qd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function BV(n,e){let t=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,v=!1,_=!1)=>{const b=_&&s?t:r;return v&&c.add(g),b.has(g)||b.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(f=g,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,m.process(g))}};return m}const FV=40;function kS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,c=Qd.reduce((j,Q)=>(j[Q]=BV(a),j),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:v,preRender:_,render:E,postRender:b}=c,I=()=>{const j=ji.useManualTiming?s.timestamp:performance.now();t=!1,ji.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(j-s.timestamp,FV),1)),s.timestamp=j,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),v.process(s),_.process(s),E.process(s),b.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(I))},T=()=>{t=!0,r=!0,s.isProcessing||n(I)};return{schedule:Qd.reduce((j,Q)=>{const z=c[Q];return j[Q]=(W,A=!1,C=!1)=>(t||T(),z.schedule(W,A,C)),j},{}),cancel:j=>{for(let Q=0;Q<Qd.length;Q++)c[Qd[Q]].cancel(j)},state:s,steps:c}}const{schedule:st,cancel:Ns,state:qt,steps:dm}=kS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xn,!0);let uh;function zV(){uh=void 0}const fn={now:()=>(uh===void 0&&fn.set(qt.isProcessing||ji.useManualTiming?qt.timestamp:performance.now()),uh),set:n=>{uh=n,queueMicrotask(zV)}},bS=n=>e=>typeof e=="string"&&e.startsWith(n),ES=bS("--"),UV=bS("var(--"),n0=n=>UV(n)?WV.test(n.split("/*")[0].trim()):!1,WV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Pw(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const wl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},eu={...wl,transform:n=>Xr(0,1,n)},Yd={...wl,default:1},Vc=n=>Math.round(n*1e5)/1e5,r0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $V(n){return n==null}const HV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,i0=(n,e)=>t=>!!(typeof t=="string"&&HV.test(t)&&t.startsWith(n)||e&&!$V(t)&&Object.prototype.hasOwnProperty.call(t,e)),SS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,c,f]=r.match(r0);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},KV=n=>Xr(0,255,n),hm={...wl,transform:n=>Math.round(KV(n))},ko={test:i0("rgb","red"),parse:SS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+hm.transform(n)+", "+hm.transform(e)+", "+hm.transform(t)+", "+Vc(eu.transform(r))+")"};function qV(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const lg={test:i0("#"),parse:qV,transform:ko.transform},wu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),fs=wu("deg"),qr=wu("%"),fe=wu("px"),GV=wu("vh"),QV=wu("vw"),jw={...qr,parse:n=>qr.parse(n)/100,transform:n=>qr.transform(n*100)},Na={test:i0("hsl","hue"),parse:SS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qr.transform(Vc(e))+", "+qr.transform(Vc(t))+", "+Vc(eu.transform(r))+")"},It={test:n=>ko.test(n)||lg.test(n)||Na.test(n),parse:n=>ko.test(n)?ko.parse(n):Na.test(n)?Na.parse(n):lg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ko.transform(n):Na.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},YV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XV(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(r0))==null?void 0:e.length)||0)+(((t=n.match(YV))==null?void 0:t.length)||0)>0}const TS="number",IS="color",JV="var",ZV="var(",Nw="${}",e3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(e3,d=>(It.test(d)?(r.color.push(a),s.push(IS),t.push(It.parse(d))):d.startsWith(ZV)?(r.var.push(a),s.push(JV),t.push(d)):(r.number.push(a),s.push(TS),t.push(parseFloat(d))),++a,Nw)).split(Nw);return{values:t,split:f,indexes:r,types:s}}function CS(n){return tu(n).values}function AS(n){const{split:e,types:t}=tu(n),r=e.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],s[c]!==void 0){const f=t[c];f===TS?a+=Vc(s[c]):f===IS?a+=It.transform(s[c]):a+=s[c]}return a}}const t3=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function n3(n){const e=CS(n);return AS(n)(e.map(t3))}const Ms={test:XV,parse:CS,createTransformer:AS,getAnimatableNone:n3};function fm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function r3({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,c=0;if(!e)s=a=c=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=fm(d,f,n+1/3),a=fm(d,f,n),c=fm(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Vh(n,e){return t=>t>0?e:n}const ut=(n,e,t)=>n+(e-n)*t,pm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},i3=[lg,ko,Na],s3=n=>i3.find(e=>e.test(n));function Mw(n){const e=s3(n);if(!e)return!1;let t=e.parse(n);return e===Na&&(t=r3(t)),t}const Dw=(n,e)=>{const t=Mw(n),r=Mw(e);if(!t||!r)return Vh(n,e);const s={...t};return a=>(s.red=pm(t.red,r.red,a),s.green=pm(t.green,r.green,a),s.blue=pm(t.blue,r.blue,a),s.alpha=ut(t.alpha,r.alpha,a),ko.transform(s))},cg=new Set(["none","hidden"]);function o3(n,e){return cg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function a3(n,e){return t=>ut(n,e,t)}function s0(n){return typeof n=="number"?a3:typeof n=="string"?n0(n)?Vh:It.test(n)?Dw:u3:Array.isArray(n)?RS:typeof n=="object"?It.test(n)?Dw:l3:Vh}function RS(n,e){const t=[...n],r=t.length,s=n.map((a,c)=>s0(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=s[c](a);return t}}function l3(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=s0(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function c3(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=n.indexes[a][r[a]],f=n.values[c]??0;t[s]=f,r[a]++}return t}const u3=(n,e)=>{const t=Ms.createTransformer(e),r=tu(n),s=tu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?cg.has(n)&&!s.values.length||cg.has(e)&&!r.values.length?o3(n,e):vu(RS(c3(r,s),s.values),t):Vh(n,e)};function PS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ut(n,e,t):s0(n)(n,e)}const d3=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>st.update(e,t),stop:()=>Ns(e),now:()=>qt.isProcessing?qt.timestamp:fn.now()}},jS=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Lh=2e4;function o0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Lh;)e+=t,r=n.next(e);return e>=Lh?1/0:e}function h3(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(o0(r),Lh);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Yn(s)}}const f3=5;function NS(n,e,t){const r=Math.max(e-f3,0);return dS(t-n(r),e-r)}const gt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mm=.001;function p3({duration:n=gt.duration,bounce:e=gt.bounce,velocity:t=gt.velocity,mass:r=gt.mass}){let s,a,c=1-e;c=Xr(gt.minDamping,gt.maxDamping,c),n=Xr(gt.minDuration,gt.maxDuration,Yn(n)),c<1?(s=m=>{const g=m*c,v=g*n,_=g-t,E=ug(m,c),b=Math.exp(-v);return mm-_/E*b},a=m=>{const v=m*c*n,_=v*t+t,E=Math.pow(c,2)*Math.pow(m,2)*n,b=Math.exp(-v),I=ug(Math.pow(m,2),c);return(-s(m)+mm>0?-1:1)*((_-E)*b)/I}):(s=m=>{const g=Math.exp(-m*n),v=(m-t)*n+1;return-mm+g*v},a=m=>{const g=Math.exp(-m*n),v=(t-m)*(n*n);return g*v});const f=5/n,d=g3(s,a,f);if(n=Ti(n),isNaN(d))return{stiffness:gt.stiffness,damping:gt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const m3=12;function g3(n,e,t){let r=t;for(let s=1;s<m3;s++)r=r-n(r)/e(r);return r}function ug(n,e){return n*Math.sqrt(1-e*e)}const y3=["duration","bounce"],v3=["stiffness","damping","mass"];function Vw(n,e){return e.some(t=>n[t]!==void 0)}function x3(n){let e={velocity:gt.velocity,stiffness:gt.stiffness,damping:gt.damping,mass:gt.mass,isResolvedFromDuration:!1,...n};if(!Vw(n,v3)&&Vw(n,y3))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*Xr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:gt.mass,stiffness:s,damping:a}}else{const t=p3(n);e={...e,...t,mass:gt.mass},e.isResolvedFromDuration=!0}return e}function Oh(n=gt.visualDuration,e=gt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:m,mass:g,duration:v,velocity:_,isResolvedFromDuration:E}=x3({...t,velocity:-Yn(t.velocity||0)}),b=_||0,I=m/(2*Math.sqrt(d*g)),T=c-a,M=Yn(Math.sqrt(d/g)),V=Math.abs(T)<5;r||(r=V?gt.restSpeed.granular:gt.restSpeed.default),s||(s=V?gt.restDelta.granular:gt.restDelta.default);let j;if(I<1){const z=ug(M,I);j=W=>{const A=Math.exp(-I*M*W);return c-A*((b+I*M*T)/z*Math.sin(z*W)+T*Math.cos(z*W))}}else if(I===1)j=z=>c-Math.exp(-M*z)*(T+(b+M*T)*z);else{const z=M*Math.sqrt(I*I-1);j=W=>{const A=Math.exp(-I*M*W),C=Math.min(z*W,300);return c-A*((b+I*M*T)*Math.sinh(C)+z*T*Math.cosh(C))/z}}const Q={calculatedDuration:E&&v||null,next:z=>{const W=j(z);if(E)f.done=z>=v;else{let A=z===0?b:0;I<1&&(A=z===0?Ti(b):NS(j,z,W));const C=Math.abs(A)<=r,N=Math.abs(c-W)<=s;f.done=C&&N}return f.value=f.done?c:W,f},toString:()=>{const z=Math.min(o0(Q),Lh),W=jS(A=>Q.next(z*A).value,z,30);return z+"ms "+W},toTransition:()=>{}};return Q}Oh.applyToOptions=n=>{const e=h3(n,100,Oh);return n.ease=e.ease,n.duration=Ti(e.duration),n.type="keyframes",n};function dg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:f,max:d,restDelta:m=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},E=C=>f!==void 0&&C<f||d!==void 0&&C>d,b=C=>f===void 0?d:d===void 0||Math.abs(f-C)<Math.abs(d-C)?f:d;let I=t*e;const T=v+I,M=c===void 0?T:c(T);M!==T&&(I=M-v);const V=C=>-I*Math.exp(-C/r),j=C=>M+V(C),Q=C=>{const N=V(C),O=j(C);_.done=Math.abs(N)<=m,_.value=_.done?M:O};let z,W;const A=C=>{E(_.value)&&(z=C,W=Oh({keyframes:[_.value,b(_.value)],velocity:NS(j,C,_.value),damping:s,stiffness:a,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:C=>{let N=!1;return!W&&z===void 0&&(N=!0,Q(C),A(C)),z!==void 0&&C>=z?W.next(C-z):(!N&&Q(C),_)}}}function w3(n,e,t){const r=[],s=t||ji.mix||PS,a=n.length-1;for(let c=0;c<a;c++){let f=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||Xn:e;f=vu(d,f)}r.push(f)}return r}function _3(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(Xy(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=w3(e,r,s),d=f.length,m=g=>{if(c&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Zc(n[v],n[v+1],g);return f[v](_)};return t?g=>m(Xr(n[0],n[a-1],g)):m}function k3(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Zc(0,e,r);n.push(ut(t,1,s))}}function b3(n){const e=[0];return k3(e,n.length-1),e}function E3(n,e){return n.map(t=>t*e)}function S3(n,e){return n.map(()=>e||wS).splice(0,n.length-1)}function Lc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=VV(r)?r.map(Rw):Rw(r),a={done:!1,value:e[0]},c=E3(t&&t.length===e.length?t:b3(e),n),f=_3(c,e,{ease:Array.isArray(s)?s:S3(e,s)});return{calculatedDuration:n,next:d=>(a.value=f(d),a.done=d>=n,a)}}const T3=n=>n!==null;function a0(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(T3),f=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!f||r===void 0?a[f]:r}const I3={decay:dg,inertia:dg,tween:Lc,keyframes:Lc,spring:Oh};function MS(n){typeof n.type=="string"&&(n.type=I3[n.type])}class l0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const C3=n=>n/100;class c0 extends l0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==fn.now()&&this.tick(fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MS(e);const{type:t=Lc,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=e;let{keyframes:f}=e;const d=t||Lc;d!==Lc&&typeof f[0]!="number"&&(this.mixKeyframes=vu(C3,PS(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=o0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:E,type:b,onUpdate:I,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-m*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let j=this.currentTime,Q=r;if(v){const C=Math.min(this.currentTime,s)/f;let N=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(_==="reverse"?(O=1-O,E&&(O-=E/f)):_==="mirror"&&(Q=c)),j=Xr(0,1,O)*f}const z=V?{done:!1,value:g[0]}:Q.next(j);a&&(z.value=a(z.value));let{done:W}=z;!V&&d!==null&&(W=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return A&&b!==dg&&(z.value=a0(g,this.options,T,this.speed)),I&&I(z.value),A&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return Yn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Yn(e)}get time(){return Yn(this.currentTime)}set time(e){var t;e=Ti(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Yn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=d3,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function A3(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const bo=n=>n*180/Math.PI,hg=n=>{const e=bo(Math.atan2(n[1],n[0]));return fg(e)},R3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:hg,rotateZ:hg,skewX:n=>bo(Math.atan(n[1])),skewY:n=>bo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},fg=n=>(n=n%360,n<0&&(n+=360),n),Lw=hg,Ow=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Bw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),P3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ow,scaleY:Bw,scale:n=>(Ow(n)+Bw(n))/2,rotateX:n=>fg(bo(Math.atan2(n[6],n[5]))),rotateY:n=>fg(bo(Math.atan2(-n[2],n[0]))),rotateZ:Lw,rotate:Lw,skewX:n=>bo(Math.atan(n[4])),skewY:n=>bo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function pg(n){return n.includes("scale")?1:0}function mg(n,e){if(!n||n==="none")return pg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=P3,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=R3,s=f}if(!s)return pg(e);const a=r[e],c=s[1].split(",").map(N3);return typeof a=="function"?a(c):c[a]}const j3=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return mg(t,e)};function N3(n){return parseFloat(n.trim())}const _l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kl=new Set(_l),Fw=n=>n===wl||n===fe,M3=new Set(["x","y","z"]),D3=_l.filter(n=>!M3.has(n));function V3(n){const e=[];return D3.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const xs={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>mg(e,"x"),y:(n,{transform:e})=>mg(e,"y")};xs.translateX=xs.x;xs.translateY=xs.y;const To=new Set;let gg=!1,yg=!1,vg=!1;function DS(){if(yg){const n=Array.from(To).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=V3(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,c])=>{var f;(f=r.getValue(a))==null||f.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}yg=!1,gg=!1,To.forEach(n=>n.complete(vg)),To.clear()}function VS(){To.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(yg=!0)})}function L3(){vg=!0,VS(),DS(),vg=!1}class u0{constructor(e,t,r,s,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(To.add(this),gg||(gg=!0,st.read(VS),st.resolveKeyframes(DS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const f=r.readValue(t,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&a===void 0&&s.set(e[0])}A3(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),To.delete(this)}cancel(){this.state==="scheduled"&&(To.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const O3=n=>n.startsWith("--");function B3(n,e,t){O3(e)?n.style.setProperty(e,t):n.style[e]=t}const F3=Jy(()=>window.ScrollTimeline!==void 0),z3={};function U3(n,e){const t=Jy(n);return()=>z3[e]??t()}const LS=U3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,zw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cc([0,.65,.55,1]),circOut:Cc([.55,0,1,.45]),backIn:Cc([.31,.01,.66,-.59]),backOut:Cc([.33,1.53,.69,.99])};function OS(n,e){if(n)return typeof n=="function"?LS()?jS(n,e):"ease-out":_S(n)?Cc(n):Array.isArray(n)?n.map(t=>OS(t,e)||zw.easeOut):zw[n]}function W3(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const v=OS(f,s);Array.isArray(v)&&(g.easing=v);const _={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return m&&(_.pseudoElement=m),n.animate(g,_)}function BS(n){return typeof n=="function"&&"applyToOptions"in n}function $3({type:n,...e}){return BS(n)&&LS()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class H3 extends l0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,Xy(typeof e.type!="string");const m=$3(e);this.animation=W3(t,r,s,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=a0(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):B3(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Yn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Yn(e)}get time(){return Yn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ti(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&F3()?(this.animation.timeline=e,Xn):t(this)}}const FS={anticipate:yS,backInOut:gS,circInOut:xS};function K3(n){return n in FS}function q3(n){typeof n.ease=="string"&&K3(n.ease)&&(n.ease=FS[n.ease])}const gm=10;class G3 extends H3{constructor(e){q3(e),MS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new c0({...c,autoplay:!1}),d=Math.max(gm,fn.now()-this.startTime),m=Xr(0,gm,d-gm);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const Uw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ms.test(n)||n==="0")&&!n.startsWith("url("));function Q3(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Y3(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],c=Uw(s,e),f=Uw(a,e);return!c||!f?!1:Q3(n)||(t==="spring"||BS(t))&&r}function xg(n){n.duration=0,n.type="keyframes"}const X3=new Set(["opacity","clipPath","filter","transform"]),J3=Jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Z3(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return J3()&&t&&X3.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&a!==0&&c!=="inertia"}const eL=40;class tL extends l0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",keyframes:f,name:d,motionValue:m,element:g,...v}){var b;super(),this.stop=()=>{var I,T;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=fn.now();const _={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:c,name:d,motionValue:m,element:g,...v},E=(g==null?void 0:g.KeyframeResolver)||u0;this.keyframeResolver=new E(f,(I,T,M)=>this.onKeyframesResolved(I,T,_,!M),d,m,g),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,r,s){var T,M;this.keyframeResolver=void 0;const{name:a,type:c,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=fn.now(),Y3(e,a,c,f)||((ji.instantAnimations||!d)&&(g==null||g(a0(e,r,t))),e[0]=e[e.length-1],xg(r),r.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>eL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!m&&Z3(_),b=(M=(T=_.motionValue)==null?void 0:T.owner)==null?void 0:M.current,I=E?new G3({..._,element:b}):new c0(_);I.finished.then(()=>{this.notifyFinished()}).catch(Xn),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),L3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function zS(n,e,t,r=0,s=1){const a=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,f=(c-1)*r;return typeof t=="function"?t(a,c):s===1?a*r:f-a*r}const nL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rL(n){const e=nL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function US(n,e,t=1){const[r,s]=rL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return lS(c)?parseFloat(c):c}return n0(s)?US(s,e,t+1):s}const iL={type:"spring",stiffness:500,damping:25,restSpeed:10},sL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),oL={type:"keyframes",duration:.8},aL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lL=(n,{keyframes:e})=>e.length>2?oL:kl.has(n)?n.startsWith("scale")?sL(e[1]):iL:aL,cL=n=>n!==null;function uL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(cL),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function d0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function dL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const h0=(n,e,t,r={},s,a)=>c=>{const f=d0(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Ti(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:_=>{e.set(_),f.onUpdate&&f.onUpdate(_)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:a?void 0:s};dL(f)||Object.assign(g,lL(n,g)),g.duration&&(g.duration=Ti(g.duration)),g.repeatDelay&&(g.repeatDelay=Ti(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(xg(g),g.delay===0&&(v=!0)),(ji.instantAnimations||ji.skipAnimations)&&(v=!0,xg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,v&&!a&&e.get()!==void 0){const _=uL(g.keyframes,f);if(_!==void 0){st.update(()=>{g.onUpdate(_),g.onComplete()});return}}return f.isSync?new c0(g):new tL(g)};function Ww(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function f0(n,e,t,r){if(typeof e=="function"){const[s,a]=Ww(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=Ww(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function Ha(n,e,t){const r=n.getProps();return f0(r,e,t!==void 0?t:r.custom,n)}const WS=new Set(["width","height","top","left","right","bottom",..._l]),$w=30,hL=n=>!isNaN(parseFloat(n));class fL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Zy);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$w)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,$w);return dS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rl(n,e){return new fL(n,e)}const wg=n=>Array.isArray(n);function pL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,rl(t))}function mL(n){return wg(n)?n[n.length-1]||0:n}function gL(n,e){const t=Ha(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const c in a){const f=mL(a[c]);pL(n,c,f)}}const an=n=>!!(n&&n.getVelocity);function yL(n){return!!(an(n)&&n.add)}function _g(n,e){const t=n.getValue("willChange");if(yL(t))return t.add(e);if(!t&&ji.WillChange){const r=new ji.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function p0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const vL="framerAppearId",$S="data-"+p0(vL);function HS(n){return n.props[$S]}function xL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function KS(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...f}=e;r&&(a=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const v=n.getValue(g,n.latestValues[g]??null),_=f[g];if(_===void 0||m&&xL(m,g))continue;const E={delay:t,...d0(a||{},g)},b=v.get();if(b!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===b&&!E.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const M=HS(n);if(M){const V=window.MotionHandoffAnimation(M,g,st);V!==null&&(E.startTime=V,I=!0)}}_g(n,g),v.start(h0(g,v,_,n.shouldReduceMotion&&WS.has(g)?{type:!1}:E,n,I));const T=v.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{st.update(()=>{c&&gL(n,c)})}),d}function kg(n,e,t={}){var d;const r=Ha(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(KS(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:_}=s;return wL(n,e,m,g,v,_,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[a,c]:[c,a];return m().then(()=>g())}else return Promise.all([a(),c(t.delay)])}function wL(n,e,t=0,r=0,s=0,a=1,c){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(kg(d,e,{...c,delay:t+(typeof r=="function"?0:r)+zS(n.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function _L(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>kg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=kg(n,e,t);else{const s=typeof e=="function"?Ha(n,e,t.custom):e;r=Promise.all(KS(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const kL={test:n=>n==="auto",parse:n=>n},qS=n=>e=>e.test(n),GS=[wl,fe,qr,fs,QV,GV,kL],Hw=n=>GS.find(qS(n));function bL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||uS(n):!0}const EL=new Set(["brightness","contrast","saturate","opacity"]);function SL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(r0)||[];if(!r)return n;const s=t.replace(r,"");let a=EL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const TL=/\b([a-z-]*)\(.*?\)/gu,bg={...Ms,getAnimatableNone:n=>{const e=n.match(TL);return e?e.map(SL).join(" "):n}},Kw={...wl,transform:Math.round},IL={rotate:fs,rotateX:fs,rotateY:fs,rotateZ:fs,scale:Yd,scaleX:Yd,scaleY:Yd,scaleZ:Yd,skew:fs,skewX:fs,skewY:fs,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:eu,originX:jw,originY:jw,originZ:fe},m0={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,top:fe,right:fe,bottom:fe,left:fe,inset:fe,insetBlock:fe,insetBlockStart:fe,insetBlockEnd:fe,insetInline:fe,insetInlineStart:fe,insetInlineEnd:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,paddingBlock:fe,paddingBlockStart:fe,paddingBlockEnd:fe,paddingInline:fe,paddingInlineStart:fe,paddingInlineEnd:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,marginBlock:fe,marginBlockStart:fe,marginBlockEnd:fe,marginInline:fe,marginInlineStart:fe,marginInlineEnd:fe,backgroundPositionX:fe,backgroundPositionY:fe,...IL,zIndex:Kw,fillOpacity:eu,strokeOpacity:eu,numOctaves:Kw},CL={...m0,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:bg,WebkitFilter:bg},QS=n=>CL[n];function YS(n,e){let t=QS(n);return t!==bg&&(t=Ms),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const AL=new Set(["auto","none","0"]);function RL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!AL.has(a)&&tu(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=YS(t,s)}class PL extends u0{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let v=e[g];if(typeof v=="string"&&(v=v.trim(),n0(v))){const _=US(v,t.current);_!==void 0&&(e[g]=_),g===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!WS.has(r)||e.length!==2)return;const[s,a]=e,c=Hw(s),f=Hw(a),d=Pw(s),m=Pw(a);if(d!==m&&xs[r]){this.needsMeasurement=!0;return}if(c!==f)if(Fw(c)&&Fw(f))for(let g=0;g<e.length;g++){const v=e[g];typeof v=="string"&&(e[g]=parseFloat(v))}else xs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||bL(e[s]))&&r.push(s);r.length&&RL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=xs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function jL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const XS=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function NL(n){return cS(n)&&"offsetHeight"in n}const{schedule:g0}=kS(queueMicrotask,!1),fr={x:!1,y:!1};function JS(){return fr.x||fr.y}function ML(n){return n==="x"||n==="y"?fr[n]?null:(fr[n]=!0,()=>{fr[n]=!1}):fr.x||fr.y?null:(fr.x=fr.y=!0,()=>{fr.x=fr.y=!1})}function ZS(n,e){const t=jL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function qw(n){return!(n.pointerType==="touch"||JS())}function DL(n,e,t={}){const[r,s,a]=ZS(n,t),c=f=>{if(!qw(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=v=>{qw(v)&&(m(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",c,s)}),a}const eT=(n,e)=>e?n===e?!0:eT(n,e.parentElement):!1,y0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,VL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tT(n){return VL.has(n.tagName)||n.isContentEditable===!0}const dh=new WeakSet;function Gw(n){return e=>{e.key==="Enter"&&n(e)}}function ym(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const LL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Gw(()=>{if(dh.has(t))return;ym(t,"down");const s=Gw(()=>{ym(t,"up")}),a=()=>ym(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Qw(n){return y0(n)&&!JS()}function OL(n,e,t={}){const[r,s,a]=ZS(n,t),c=f=>{const d=f.currentTarget;if(!Qw(f))return;dh.add(d);const m=e(d,f),g=(E,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),dh.has(d)&&dh.delete(d),Qw(E)&&typeof m=="function"&&m(E,{success:b})},v=E=>{g(E,d===window||d===document||t.useGlobalTarget||eT(d,E.target))},_=E=>{g(E,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",c,s),NL(f)&&(f.addEventListener("focus",m=>LL(m,s)),!tT(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),a}function nT(n){return cS(n)&&"ownerSVGElement"in n}function BL(n){return nT(n)&&n.tagName==="svg"}const FL=[...GS,It,Ms],zL=n=>FL.find(qS(n)),Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ma=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),jt=()=>({x:Xw(),y:Xw()}),Eg={current:null},rT={current:!1},UL=typeof window<"u";function WL(){if(rT.current=!0,!!UL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eg.current=n.matches;n.addEventListener("change",e),e()}else Eg.current=!1}const $L=new WeakMap;function vf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function nu(n){return typeof n=="string"||Array.isArray(n)}const v0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x0=["initial",...v0];function xf(n){return vf(n.animate)||x0.some(e=>nu(n[e]))}function iT(n){return!!(xf(n)||n.variants)}function HL(n,e,t){for(const r in e){const s=e[r],a=t[r];if(an(s))n.addValue(r,s);else if(an(a))n.addValue(r,rl(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,rl(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Jw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Bh={};function sT(n){Bh=n}function KL(){return Bh}class qL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=u0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,st.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=xf(t),this.isVariantNode=iT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const E=v[_];d[_]!==void 0&&an(E)&&E.set(d[_])}}mount(e){var t;this.current=e,$L.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(rT.current||WL(),this.shouldReduceMotion=Eg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bh){const t=Bh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Jw.length;r++){const s=Jw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=e[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=HL(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=rl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(lS(r)||uS(r))?r=parseFloat(r):!zL(r)&&Ms.test(t)&&(r=YS(e,t)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=f0(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!an(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Zy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){g0.render(this.render)}}class oT extends qL{constructor(){super(...arguments),this.KeyframeResolver=PL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class zs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function aT({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function GL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function QL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function vm(n){return n===void 0||n===1}function Sg({scale:n,scaleX:e,scaleY:t}){return!vm(n)||!vm(e)||!vm(t)}function xo(n){return Sg(n)||lT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function lT(n){return Zw(n.x)||Zw(n.y)}function Zw(n){return n&&n!=="0%"}function Fh(n,e,t){const r=n-t,s=e*r;return t+s}function e_(n,e,t,r,s){return s!==void 0&&(n=Fh(n,s,r)),Fh(n,t,r)+e}function Tg(n,e=0,t=1,r,s){n.min=e_(n.min,e,t,r,s),n.max=e_(n.max,e,t,r,s)}function cT(n,{x:e,y:t}){Tg(n.x,e.translate,e.scale,e.originPoint),Tg(n.y,t.translate,t.scale,t.originPoint)}const t_=.999999999999,n_=1.0000000000001;function YL(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,c;for(let f=0;f<s;f++){a=t[f],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Va(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,cT(n,c)),r&&xo(a.latestValues)&&Va(n,a.latestValues))}e.x<n_&&e.x>t_&&(e.x=1),e.y<n_&&e.y>t_&&(e.y=1)}function Da(n,e){n.min=n.min+e,n.max=n.max+e}function r_(n,e,t,r,s=.5){const a=ut(n.min,n.max,s);Tg(n,e,t,a,r)}function Va(n,e){r_(n.x,e.x,e.scaleX,e.scale,e.originX),r_(n.y,e.y,e.scaleY,e.scale,e.originY)}function uT(n,e){return aT(QL(n.getBoundingClientRect(),e))}function XL(n,e,t){const r=uT(n,t),{scroll:s}=e;return s&&(Da(r.x,s.offset.x),Da(r.y,s.offset.y)),r}const JL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZL=_l.length;function e6(n,e,t){let r="",s=!0;for(let a=0;a<ZL;a++){const c=_l[a],f=n[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=XS(f,m0[c]);if(!d){s=!1;const g=JL[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function w0(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let c=!1,f=!1;for(const d in e){const m=e[d];if(kl.has(d)){c=!0;continue}else if(ES(d)){s[d]=m;continue}else{const g=XS(m,m0[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=e6(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${m} ${g}`}}function dT(n,{style:e,vars:t},r,s){const a=n.style;let c;for(c in e)a[c]=e[c];s==null||s.applyProjectionStyles(a,r);for(c in t)a.setProperty(c,t[c])}function i_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const wc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(fe.test(n))n=parseFloat(n);else return n;const t=i_(n,e.target.x),r=i_(n,e.target.y);return`${t}% ${r}%`}},t6={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ms.parse(n);if(s.length>5)return r;const a=Ms.createTransformer(n),c=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=f,s[1+c]/=d;const m=ut(f,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),a(s)}},Ig={borderRadius:{...wc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wc,borderTopRightRadius:wc,borderBottomLeftRadius:wc,borderBottomRightRadius:wc,boxShadow:t6};function hT(n,{layout:e,layoutId:t}){return kl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ig[n]||n==="opacity")}function _0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const f in r)(an(r[f])||s&&an(s[f])||hT(f,n)||((c=t==null?void 0:t.getValue(f))==null?void 0:c.liveStyle)!==void 0)&&(a[f]=r[f]);return a}function n6(n){return window.getComputedStyle(n)}class r6 extends oT{constructor(){super(...arguments),this.type="html",this.renderInstance=dT}readValueFromInstance(e,t){var r;if(kl.has(t))return(r=this.projection)!=null&&r.isProjecting?pg(t):j3(e,t);{const s=n6(e),a=(ES(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return uT(e,t)}build(e,t,r){w0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return _0(e,t,r)}}const i6={offset:"stroke-dashoffset",array:"stroke-dasharray"},s6={offset:"strokeDashoffset",array:"strokeDasharray"};function o6(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?i6:s6;n[a.offset]=fe.transform(-r);const c=fe.transform(e),f=fe.transform(t);n[a.array]=`${c} ${f}`}const a6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function fT(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...f},d,m,g){if(w0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete v.transformBox);for(const E of a6)v[E]!==void 0&&(_[E]=v[E],delete v[E]);e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),s!==void 0&&o6(v,s,a,c,!1)}const pT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),mT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function l6(n,e,t,r){dT(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(pT.has(s)?s:p0(s),e.attrs[s])}function gT(n,e,t){const r=_0(n,e,t);for(const s in n)if(an(n[s])||an(e[s])){const a=_l.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}class c6 extends oT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(kl.has(t)){const r=QS(t);return r&&r.default||0}return t=pT.has(t)?t:p0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return gT(e,t,r)}build(e,t,r){fT(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){l6(e,t,r,s)}mount(e){this.isSVGTag=mT(e.tagName),super.mount(e)}}const u6=x0.length;function yT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?yT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<u6;t++){const r=x0[t],s=n.props[r];(nu(s)||s===!1)&&(e[r]=s)}return e}function vT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const d6=[...v0].reverse(),h6=v0.length;function f6(n){return e=>Promise.all(e.map(({animation:t,options:r})=>_L(n,t,r)))}function p6(n){let e=f6(n),t=s_(),r=!0;const s=d=>(m,g)=>{var _;const v=Ha(n,g,d==="exit"?(_=n.presenceContext)==null?void 0:_.custom:void 0);if(v){const{transition:E,transitionEnd:b,...I}=v;m={...m,...I,...b}}return m};function a(d){e=d(n)}function c(d){const{props:m}=n,g=yT(n.parent)||{},v=[],_=new Set;let E={},b=1/0;for(let T=0;T<h6;T++){const M=d6[T],V=t[M],j=m[M]!==void 0?m[M]:g[M],Q=nu(j),z=M===d?V.isActive:null;z===!1&&(b=T);let W=j===g[M]&&j!==m[M]&&Q;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),V.protectedKeys={...E},!V.isActive&&z===null||!j&&!V.prevProp||vf(j)||typeof j=="boolean")continue;const A=m6(V.prevProp,j);let C=A||M===d&&V.isActive&&!W&&Q||T>b&&Q,N=!1;const O=Array.isArray(j)?j:[j];let B=O.reduce(s(M),{});z===!1&&(B={});const{prevResolvedValues:H={}}=V,L={...H,...B},Ne=Se=>{C=!0,_.has(Se)&&(N=!0,_.delete(Se)),V.needsAnimating[Se]=!0;const ie=n.getValue(Se);ie&&(ie.liveStyle=!1)};for(const Se in L){const ie=B[Se],me=H[Se];if(E.hasOwnProperty(Se))continue;let ae=!1;wg(ie)&&wg(me)?ae=!vT(ie,me):ae=ie!==me,ae?ie!=null?Ne(Se):_.add(Se):ie!==void 0&&_.has(Se)?Ne(Se):V.protectedKeys[Se]=!0}V.prevProp=j,V.prevResolvedValues=B,V.isActive&&(E={...E,...B}),r&&n.blockInitialAnimation&&(C=!1);const He=W&&A;C&&(!He||N)&&v.push(...O.map(Se=>{const ie={type:M};if(typeof Se=="string"&&r&&!He&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,ae=Ha(me,Se);if(me.enteringChildren&&ae){const{delayChildren:$}=ae.transition||{};ie.delay=zS(me.enteringChildren,n,$)}}return{animation:Se,options:ie}}))}if(_.size){const T={};if(typeof m.initial!="boolean"){const M=Ha(n,Array.isArray(m.initial)?m.initial[0]:m.initial);M&&M.transition&&(T.transition=M.transition)}_.forEach(M=>{const V=n.getBaseTarget(M),j=n.getValue(M);j&&(j.liveStyle=!0),T[M]=V??null}),v.push({animation:T})}let I=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(v):Promise.resolve()}function f(d,m){var v;if(t[d].isActive===m)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(_=>{var E;return(E=_.animationState)==null?void 0:E.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const _ in t)t[_].protectedKeys={};return g}return{animateChanges:c,setActive:f,setAnimateFunction:a,getState:()=>t,reset:()=>{t=s_()}}}function m6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!vT(e,n):!1}function yo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s_(){return{animate:yo(!0),whileInView:yo(),whileHover:yo(),whileTap:yo(),whileDrag:yo(),whileFocus:yo(),exit:yo()}}function o_(n,e){n.min=e.min,n.max=e.max}function hr(n,e){o_(n.x,e.x),o_(n.y,e.y)}function a_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const xT=1e-4,g6=1-xT,y6=1+xT,wT=.01,v6=0-wT,x6=0+wT;function pn(n){return n.max-n.min}function w6(n,e,t){return Math.abs(n-e)<=t}function l_(n,e,t,r=.5){n.origin=r,n.originPoint=ut(e.min,e.max,n.origin),n.scale=pn(t)/pn(e),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(n.scale>=g6&&n.scale<=y6||isNaN(n.scale))&&(n.scale=1),(n.translate>=v6&&n.translate<=x6||isNaN(n.translate))&&(n.translate=0)}function Oc(n,e,t,r){l_(n.x,e.x,t.x,r?r.originX:void 0),l_(n.y,e.y,t.y,r?r.originY:void 0)}function c_(n,e,t){n.min=t.min+e.min,n.max=n.min+pn(e)}function _6(n,e,t){c_(n.x,e.x,t.x),c_(n.y,e.y,t.y)}function u_(n,e,t){n.min=e.min-t.min,n.max=n.min+pn(e)}function zh(n,e,t){u_(n.x,e.x,t.x),u_(n.y,e.y,t.y)}function d_(n,e,t,r,s){return n-=e,n=Fh(n,1/t,r),s!==void 0&&(n=Fh(n,1/s,r)),n}function k6(n,e=0,t=1,r=.5,s,a=n,c=n){if(qr.test(e)&&(e=parseFloat(e),e=ut(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=ut(a.min,a.max,r);n===a&&(f-=e),n.min=d_(n.min,e,t,f,s),n.max=d_(n.max,e,t,f,s)}function h_(n,e,[t,r,s],a,c){k6(n,e[t],e[r],e[s],e.scale,a,c)}const b6=["x","scaleX","originX"],E6=["y","scaleY","originY"];function f_(n,e,t,r){h_(n.x,e,b6,t?t.x:void 0,r?r.x:void 0),h_(n.y,e,E6,t?t.y:void 0,r?r.y:void 0)}function p_(n){return n.translate===0&&n.scale===1}function _T(n){return p_(n.x)&&p_(n.y)}function m_(n,e){return n.min===e.min&&n.max===e.max}function S6(n,e){return m_(n.x,e.x)&&m_(n.y,e.y)}function g_(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function kT(n,e){return g_(n.x,e.x)&&g_(n.y,e.y)}function y_(n){return pn(n.x)/pn(n.y)}function v_(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Gn(n){return[n("x"),n("y")]}function T6(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:v,rotateY:_,skewX:E,skewY:b}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),E&&(r+=`skewX(${E}deg) `),b&&(r+=`skewY(${b}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const bT=["TopLeft","TopRight","BottomLeft","BottomRight"],I6=bT.length,x_=n=>typeof n=="string"?parseFloat(n):n,w_=n=>typeof n=="number"||fe.test(n);function C6(n,e,t,r,s,a){s?(n.opacity=ut(0,t.opacity??1,A6(r)),n.opacityExit=ut(e.opacity??1,0,R6(r))):a&&(n.opacity=ut(e.opacity??1,t.opacity??1,r));for(let c=0;c<I6;c++){const f=`border${bT[c]}Radius`;let d=__(e,f),m=__(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||w_(d)===w_(m)?(n[f]=Math.max(ut(x_(d),x_(m),r),0),(qr.test(m)||qr.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,r))}function __(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const A6=ET(0,.5,vS),R6=ET(.5,.95,Xn);function ET(n,e,t){return r=>r<n?0:r>e?1:t(Zc(n,e,r))}function P6(n,e,t){const r=an(n)?n:rl(n);return r.start(h0("",r,e,t)),r.animation}function ru(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const j6=(n,e)=>n.depth-e.depth;class N6{constructor(){this.children=[],this.isDirty=!1}add(e){Qy(this.children,e),this.isDirty=!0}remove(e){Yy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(j6),this.isDirty=!1,this.children.forEach(e)}}function M6(n,e){const t=fn.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(Ns(r),n(a-e))};return st.setup(r,!0),()=>Ns(r)}function hh(n){return an(n)?n.get():n}class D6{constructor(){this.members=[]}add(e){Qy(this.members,e),e.scheduleRender()}remove(e){if(Yy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const fh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},xm=["","X","Y","Z"],V6=1e3;let L6=0;function wm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function ST(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=HS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&ST(r)}function TT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},f=e==null?void 0:e()){this.id=L6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(F6),this.nodes.forEach($6),this.nodes.forEach(H6),this.nodes.forEach(z6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new N6)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Zy),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=nT(c)&&!BL(c),this.instance=c;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;st.read(()=>{v=window.innerWidth}),n(c,()=>{const E=window.innerWidth;E!==v&&(v=E,this.root.updateBlockedByResize=!0,g&&g(),g=M6(_,250),fh.hasAnimatedSinceResize&&(fh.hasAnimatedSinceResize=!1,this.nodes.forEach(E_)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||Y6,{onLayoutAnimationStart:I,onLayoutAnimationComplete:T}=m.getProps(),M=!this.targetLayout||!kT(this.targetLayout,E),V=!v&&_;if(this.options.layoutRoot||this.resumeFrom||V||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...d0(b,"layout"),onPlay:I,onComplete:T};(m.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(g,V)}else v||E_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K6),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ST(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(b_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(W6),this.nodes.forEach(O6),this.nodes.forEach(B6)):this.nodes.forEach(b_),this.clearAllSnapshots();const f=fn.now();qt.delta=Xr(0,1e3/60,f-qt.timestamp),qt.timestamp=f,qt.isProcessing=!0,dm.update.process(qt),dm.preRender.process(qt),dm.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(U6),this.sharedNodes.forEach(q6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!_T(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(f||xo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),X6(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return jt();const f=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(J6))){const{scroll:g}=this.root;g&&(Da(f.x,g.offset.x),Da(f.y,g.offset.y))}return f}removeElementScroll(c){var d;const f=jt();if(hr(f,c),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:_}=g;g!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&hr(f,c),Da(f.x,v.offset.x),Da(f.y,v.offset.y))}return f}applyTransform(c,f=!1){const d=jt();hr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Va(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),xo(g.latestValues)&&Va(d,g.latestValues)}return xo(this.latestValues)&&Va(d,this.latestValues),d}removeTransform(c){const f=jt();hr(f,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!xo(m.latestValues))continue;Sg(m.latestValues)&&m.updateSnapshot();const g=jt(),v=m.measurePageBox();hr(g,v),f_(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return xo(this.latestValues)&&f_(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!this.layout||!(g||v))return;this.resolvedRelativeTargetAt=qt.timestamp;const _=this.getClosestProjectingParent();_&&this.linkedParentVersion!==_.layoutVersion&&!_.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(_&&_.layout?this.createRelativeTarget(_,this.layout.layoutBox,_.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hr(this.target,this.layout.layoutBox),cT(this.target,this.targetDelta)):hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?this.createRelativeTarget(_,this.target,_.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sg(this.parent.latestValues)||lT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,f,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),zh(this.relativeTargetOrigin,f,d),hr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;hr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;YL(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=jt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(a_(this.prevProjectionDelta.x,this.projectionDelta.x),a_(this.prevProjectionDelta.y,this.projectionDelta.y)),Oc(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!v_(this.projectionDelta.x,this.prevProjectionDelta.x)||!v_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ma(),this.projectionDelta=Ma(),this.projectionDeltaWithTransform=Ma()}setAnimationOrigin(c,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},v=Ma();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const _=jt(),E=d?d.source:void 0,b=this.layout?this.layout.source:void 0,I=E!==b,T=this.getStack(),M=!T||T.members.length<=1,V=!!(I&&!M&&this.options.crossfade===!0&&!this.path.some(Q6));this.animationProgress=0;let j;this.mixTargetDelta=Q=>{const z=Q/1e3;S_(v.x,c.x,z),S_(v.y,c.y,z),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),G6(this.relativeTarget,this.relativeTargetOrigin,_,z),j&&S6(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=jt()),hr(j,this.relativeTarget)),I&&(this.animationValues=g,C6(g,m,this.latestValues,z,V,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{fh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rl(0)),this.currentAnimation=P6(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(V6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=c;if(!(!f||!d||!m)){if(this!==c&&this.layout&&m&&IT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||jt();const v=pn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+v;const _=pn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+_}hr(f,d),Va(f,g),Oc(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new D6),this.sharedNodes.get(c).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var f;const{layoutId:c}=this.options;return c?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:c}=this.options;return c?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&wm("z",c,m,this.animationValues);for(let g=0;g<xm.length;g++)wm(`rotate${xm[g]}`,c,m,this.animationValues),wm(`skew${xm[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=hh(f==null?void 0:f.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=hh(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!xo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let v=T6(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),c.transform=v;const{x:_,y:E}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${E.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in Ig){if(g[b]===void 0)continue;const{correct:I,applyTo:T,isCSSVariable:M}=Ig[b],V=v==="none"?g[b]:I(g[b],m);if(T){const j=T.length;for(let Q=0;Q<j;Q++)c[T[Q]]=V}else M?this.options.visualElement.renderState.vars[b]=V:c[b]=V}this.options.layoutId&&(c.pointerEvents=m===this?hh(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(k_),this.root.sharedNodes.clear()}}}function O6(n){n.updateLayout()}function B6(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,c=e.source!==n.layout.source;a==="size"?Gn(v=>{const _=c?e.measuredBox[v]:e.layoutBox[v],E=pn(_);_.min=r[v].min,_.max=_.min+E}):IT(a,e.layoutBox,r)&&Gn(v=>{const _=c?e.measuredBox[v]:e.layoutBox[v],E=pn(r[v]);_.max=_.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+E)});const f=Ma();Oc(f,r,e.layoutBox);const d=Ma();c?Oc(d,n.applyTransform(s,!0),e.measuredBox):Oc(d,r,e.layoutBox);const m=!_T(f);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:E}=v;if(_&&E){const b=jt();zh(b,e.layoutBox,_.layoutBox);const I=jt();zh(I,r,E.layoutBox),kT(b,I)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=I,n.relativeTargetOrigin=b,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function F6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function z6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function U6(n){n.clearSnapshot()}function k_(n){n.clearMeasurements()}function b_(n){n.isLayoutDirty=!1}function W6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function E_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function $6(n){n.resolveTargetDelta()}function H6(n){n.calcProjection()}function K6(n){n.resetSkewAndRotation()}function q6(n){n.removeLeadSnapshot()}function S_(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function T_(n,e,t,r){n.min=ut(e.min,t.min,r),n.max=ut(e.max,t.max,r)}function G6(n,e,t,r){T_(n.x,e.x,t.x,r),T_(n.y,e.y,t.y,r)}function Q6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Y6={duration:.45,ease:[.4,0,.1,1]},I_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),C_=I_("applewebkit/")&&!I_("chrome/")?Math.round:Xn;function A_(n){n.min=C_(n.min),n.max=C_(n.max)}function X6(n){A_(n.x),A_(n.y)}function IT(n,e,t){return n==="position"||n==="preserve-aspect"&&!w6(y_(e),y_(t),.2)}function J6(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Z6=TT({attachResizeListener:(n,e)=>ru(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_m={current:void 0},CT=TT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!_m.current){const n=new Z6({});n.mount(window),n.setOptions({layoutScroll:!0}),_m.current=n}return _m.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),AT=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function eO(n=!0){const e=P.useContext(Gy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=P.useId();P.useEffect(()=>{if(n)return s(a)},[n]);const c=P.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,c]:[!0]}const RT=P.createContext({strict:!1}),R_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let P_=!1;function tO(){if(P_)return;const n={};for(const e in R_)n[e]={isEnabled:t=>R_[e].some(r=>!!t[r])};sT(n),P_=!0}function PT(){return tO(),KL()}function nO(n){const e=PT();for(const t in n)e[t]={...e[t],...n[t]};sT(e)}const rO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||rO.has(n)}let jT=n=>!Uh(n);function iO(n){typeof n=="function"&&(jT=e=>e.startsWith("on")?!Uh(e):n(e))}try{iO(require("@emotion/is-prop-valid").default)}catch{}function sO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(jT(s)||t===!0&&Uh(s)||!e&&!Uh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const wf=P.createContext({});function oO(n,e){if(xf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||nu(t)?t:void 0,animate:nu(r)?r:void 0}}return n.inherit!==!1?e:{}}function aO(n){const{initial:e,animate:t}=oO(n,P.useContext(wf));return P.useMemo(()=>({initial:e,animate:t}),[j_(e),j_(t)])}function j_(n){return Array.isArray(n)?n.join(" "):n}const k0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NT(n,e,t){for(const r in e)!an(e[r])&&!hT(r,t)&&(n[r]=e[r])}function lO({transformTemplate:n},e){return P.useMemo(()=>{const t=k0();return w0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function cO(n,e){const t=n.style||{},r={};return NT(r,t,n),Object.assign(r,lO(n,e)),r}function uO(n,e){const t={},r=cO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const MT=()=>({...k0(),attrs:{}});function dO(n,e,t,r){const s=P.useMemo(()=>{const a=MT();return fT(a,e,mT(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};NT(a,n.style,n),s.style={...a,...s.style}}return s}const hO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function b0(n){return typeof n!="string"||n.includes("-")?!1:!!(hO.indexOf(n)>-1||/[A-Z]/u.test(n))}function fO(n,e,t,{latestValues:r},s,a=!1,c){const d=(c??b0(n)?dO:uO)(e,r,s,n),m=sO(e,typeof n=="string",a),g=n!==P.Fragment?{...m,...d,ref:t}:{},{children:v}=e,_=P.useMemo(()=>an(v)?v.get():v,[v]);return P.createElement(n,{...g,children:_})}function pO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:mO(t,r,s,n),renderState:e()}}function mO(n,e,t,r){const s={},a=r(n,{});for(const _ in a)s[_]=hh(a[_]);let{initial:c,animate:f}=n;const d=xf(n),m=iT(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const v=g?f:c;if(v&&typeof v!="boolean"&&!vf(v)){const _=Array.isArray(v)?v:[v];for(let E=0;E<_.length;E++){const b=f0(n,_[E]);if(b){const{transitionEnd:I,transition:T,...M}=b;for(const V in M){let j=M[V];if(Array.isArray(j)){const Q=g?j.length-1:0;j=j[Q]}j!==null&&(s[V]=j)}for(const V in I)s[V]=I[V]}}}return s}const DT=n=>(e,t)=>{const r=P.useContext(wf),s=P.useContext(Gy),a=()=>pO(n,e,r,s);return t?a():CV(a)},gO=DT({scrapeMotionValuesFromProps:_0,createRenderState:k0}),yO=DT({scrapeMotionValuesFromProps:gT,createRenderState:MT}),vO=Symbol.for("motionComponentSymbol");function xO(n,e,t){const r=P.useRef(t);P.useInsertionEffect(()=>{r.current=t});const s=P.useRef(null);return P.useCallback(a=>{var f;a&&((f=n.onMount)==null||f.call(n,a)),e&&(a?e.mount(a):e.unmount());const c=r.current;if(typeof c=="function")if(a){const d=c(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(a);else c&&(c.current=a)},[e])}const VT=P.createContext({});function Ac(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function wO(n,e,t,r,s,a){var T,M;const{visualElement:c}=P.useContext(wf),f=P.useContext(RT),d=P.useContext(Gy),m=P.useContext(AT).reducedMotion,g=P.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:a}));const v=g.current,_=P.useContext(VT);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&_O(g.current,t,s,_);const E=P.useRef(!1);P.useInsertionEffect(()=>{v&&E.current&&v.update(t,d)});const b=t[$S],I=P.useRef(!!b&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,b))&&((M=window.MotionHasOptimisedAnimation)==null?void 0:M.call(window,b)));return AV(()=>{v&&(E.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),I.current&&v.animationState&&v.animationState.animateChanges())}),P.useEffect(()=>{v&&(!I.current&&v.animationState&&v.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,b)}),I.current=!1),v.enteringChildren=void 0)}),v}function _O(n,e,t,r){const{layoutId:s,layout:a,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:LT(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||f&&Ac(f),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function LT(n){if(n)return n.options.allowProjection!==!1?n.projection:LT(n.parent)}function km(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&nO(r);const a=t?t==="svg":b0(n),c=a?yO:gO;function f(m,g){let v;const _={...P.useContext(AT),...m,layoutId:kO(m)},{isStatic:E}=_,b=aO(m),I=c(m,E);if(!E&&aS){bO();const T=EO(_);v=T.MeasureLayout,b.visualElement=wO(n,I,_,s,T.ProjectionNode,a)}return l.jsxs(wf.Provider,{value:b,children:[v&&b.visualElement?l.jsx(v,{visualElement:b.visualElement,..._}):null,fO(n,m,xO(I,b.visualElement,g),I,E,e,a)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=P.forwardRef(f);return d[vO]=n,d}function kO({layoutId:n}){const e=P.useContext(oS).id;return e&&n!==void 0?e+"-"+n:n}function bO(n,e){P.useContext(RT).strict}function EO(n){const e=PT(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function SO(n,e){if(typeof Proxy>"u")return km;const t=new Map,r=(a,c)=>km(a,c,n,e),s=(a,c)=>r(a,c);return new Proxy(s,{get:(a,c)=>c==="create"?r:(t.has(c)||t.set(c,km(c,void 0,n,e)),t.get(c))})}const TO=(n,e)=>e.isSVG??b0(n)?new c6(e):new r6(e,{allowProjection:n!==P.Fragment});class IO extends zs{constructor(e){super(e),e.animationState||(e.animationState=p6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let CO=0;class AO extends zs{constructor(){super(...arguments),this.id=CO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const RO={animation:{Feature:IO},exit:{Feature:AO}};function _u(n){return{point:{x:n.pageX,y:n.pageY}}}const PO=n=>e=>y0(e)&&n(e,_u(e));function Bc(n,e,t,r){return ru(n,e,PO(t),r)}const OT=({current:n})=>n?n.ownerDocument.defaultView:null,N_=(n,e)=>Math.abs(n-e);function jO(n,e){const t=N_(n.x,e.x),r=N_(n.y,e.y);return Math.sqrt(t**2+r**2)}const M_=new Set(["auto","scroll"]);class BT{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Em(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,I=jO(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!I)return;const{point:T}=E,{timestamp:M}=qt;this.history.push({...T,timestamp:M});const{onStart:V,onMove:j}=this.handlers;b||(V&&V(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,E)},this.handlePointerMove=(E,b)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=bm(b,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(E,b)=>{this.end();const{onEnd:I,onSessionEnd:T,resumeAnimation:M}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Em(E.type==="pointercancel"?this.lastMoveEventInfo:bm(b,this.transformPagePoint),this.history);this.startEvent&&I&&I(E,V),T&&T(E,V)},!y0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=_u(e),m=bm(d,this.transformPagePoint),{point:g}=m,{timestamp:v}=qt;this.history=[{...g,timestamp:v}];const{onSessionStart:_}=t;_&&_(e,Em(m,this.history)),this.removeListeners=vu(Bc(this.contextWindow,"pointermove",this.handlePointerMove),Bc(this.contextWindow,"pointerup",this.handlePointerUp),Bc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(M_.has(r.overflowX)||M_.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),st.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ns(this.updatePoint)}}function bm(n,e){return e?{point:e(n.point)}:n}function D_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Em({point:n},e){return{point:n,delta:D_(n,FT(e)),offset:D_(n,NO(e)),velocity:MO(e,.1)}}function NO(n){return n[0]}function FT(n){return n[n.length-1]}function MO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=FT(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Ti(e)));)t--;if(!r)return{x:0,y:0};const a=Yn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function DO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ut(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ut(t,n,r.max):Math.min(n,t)),n}function V_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function VO(n,{top:e,left:t,bottom:r,right:s}){return{x:V_(n.x,t,s),y:V_(n.y,e,r)}}function L_(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function LO(n,e){return{x:L_(n.x,e.x),y:L_(n.y,e.y)}}function OO(n,e){let t=.5;const r=pn(n),s=pn(e);return s>r?t=Zc(e.min,e.max-r,n.min):r>s&&(t=Zc(n.min,n.max-s,e.min)),Xr(0,1,t)}function BO(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Cg=.35;function FO(n=Cg){return n===!1?n=0:n===!0&&(n=Cg),{x:O_(n,"left","right"),y:O_(n,"top","bottom")}}function O_(n,e,t){return{min:B_(n,e),max:B_(n,t)}}function B_(n,e){return typeof n=="number"?n:n[e]||0}const zO=new WeakMap;class UO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{t?(this.stopAnimation(),this.snapToCursor(_u(v).point)):this.pauseAnimation()},c=(v,_)=>{this.stopAnimation();const{drag:E,dragPropagation:b,onDragStart:I}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ML(E),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gn(M=>{let V=this.getAxisMotionValue(M).get()||0;if(qr.test(V)){const{projection:j}=this.visualElement;if(j&&j.layout){const Q=j.layout.layoutBox[M];Q&&(V=pn(Q)*(parseFloat(V)/100))}}this.originPoint[M]=V}),I&&st.postRender(()=>I(v,_)),_g(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},f=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:I,onDrag:T}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:M}=_;if(b&&this.currentDirection===null){this.currentDirection=WO(M),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",_.point,M),this.updateAxis("y",_.point,M),this.visualElement.render(),T&&T(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Gn(v=>{var _;return this.getAnimationState(v)==="paused"&&((_=this.getAxisMotionValue(v).animation)==null?void 0:_.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new BT(e,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:OT(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&st.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Xd(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=DO(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Ac(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=VO(r.layoutBox,e):this.constraints=!1,this.elastic=FO(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=BO(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ac(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=XL(r,s.root,this.visualElement.getTransformPagePoint());let c=LO(s.layout.layoutBox,a);if(t){const f=t(GL(c));this.hasMutatedConstraints=!!f,f&&(c=aT(f))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Gn(g=>{if(!Xd(g,t,this.currentDirection))return;let v=d&&d[g]||{};c&&(v={min:0,max:0});const _=s?200:1e6,E=s?40:1e7,b={type:"inertia",velocity:r?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,b)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return _g(this.visualElement,e),r.start(h0(e,r,0,t,this.visualElement,!1))}stopAnimation(){Gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Gn(t=>{const{drag:r}=this.getProps();if(!Xd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:f}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-ut(c,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ac(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Gn(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();s[c]=OO({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Gn(c=>{if(!Xd(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];f.set(ut(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;zO.set(this.visualElement,this);const e=this.visualElement.current,t=Bc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!tT(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ac(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const c=ru(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Gn(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=Cg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:f}}}function Xd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function WO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class $O extends zs{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new UO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const F_=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class HO extends zs{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new BT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:F_(e),onStart:F_(t),onMove:r,onEnd:(a,c)=>{delete this.session,s&&st.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=Bc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Sm=!1;class KO extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),Sm&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),fh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,Sm=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||st.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),g0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Sm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zT(n){const[e,t]=eO(),r=P.useContext(oS);return l.jsx(KO,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(VT),isPresent:e,safeToRemove:t})}const qO={pan:{Feature:HO},drag:{Feature:$O,ProjectionNode:CT,MeasureLayout:zT}};function z_(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class GO extends zs{mount(){const{current:e}=this.node;e&&(this.unmount=DL(e,(t,r)=>(z_(this.node,r,"Start"),s=>z_(this.node,s,"End"))))}unmount(){}}class QO extends zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vu(ru(this.node.current,"focus",()=>this.onFocus()),ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function U_(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class YO extends zs{mount(){const{current:e}=this.node;e&&(this.unmount=OL(e,(t,r)=>(U_(this.node,r,"Start"),(s,{success:a})=>U_(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ag=new WeakMap,Tm=new WeakMap,XO=n=>{const e=Ag.get(n.target);e&&e(n)},JO=n=>{n.forEach(XO)};function ZO({root:n,...e}){const t=n||document;Tm.has(t)||Tm.set(t,{});const r=Tm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(JO,{root:n,...e})),r[s]}function e8(n,e,t){const r=ZO(e);return Ag.set(n,t),r.observe(n),()=>{Ag.delete(n),r.unobserve(n)}}const t8={some:0,all:1};class n8 extends zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:t8[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=m?g:v;_&&_(d)};return e8(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(r8(e,t))&&this.startObserver()}unmount(){}}function r8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const i8={inView:{Feature:n8},tap:{Feature:YO},focus:{Feature:QO},hover:{Feature:GO}},s8={layout:{ProjectionNode:CT,MeasureLayout:zT}},o8={...RO,...i8,...qO,...s8},xe=SO(o8,TO);function Vn(){var b;const n=tr(),e=al(),{user:t,profile:r,isAuthenticated:s,isAdmin:a,isBusiness:c}=Di(),[f,d]=P.useState(!1),[m,g]=P.useState(!1),v=[{to:"/",label:"Home"},{to:"/map",label:"Village Map"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],_=async()=>{await qE(),g(!1),e("/")},E=I=>n.pathname===I;return l.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[l.jsxs(le,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),l.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:v.map(I=>l.jsx(le,{to:I.to,style:{color:E(I.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:E(I.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:E(I.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:I.label},I.to))}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?l.jsx(l.Fragment,{children:l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[l.jsx($a,{size:18}),(r==null?void 0:r.displayName)||((b=t.email)==null?void 0:b.split("@")[0])]}),m&&l.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[l.jsxs(le,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[l.jsx(og,{size:16})," My OK Card"]}),l.jsxs(le,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx($a,{size:16})," My Profile"]}),c&&l.jsxs(le,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx(Vt,{size:16})," Business Dashboard"]}),a&&l.jsxs(le,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx(Mh,{size:16})," Admin Portal"]}),l.jsxs("button",{onClick:_,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[l.jsx(ag,{size:16})," Sign Out"]})]})]})}):l.jsx(l.Fragment,{children:l.jsxs(le,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(nl,{size:16})," Sign In"]})}),l.jsx(le,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),l.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?l.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):l.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&l.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[v.map(I=>l.jsx(le,{to:I.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:E(I.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:E(I.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:I.label},I.to)),l.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),l.jsxs(le,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx($a,{size:16})," My Profile"]}),c&&l.jsxs(le,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Vt,{size:16})," Business Dashboard"]}),a&&l.jsxs(le,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Mh,{size:16})," Admin Portal"]}),l.jsxs("button",{onClick:()=>{_(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(ag,{size:16})," Sign Out"]})]}):l.jsxs(le,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(nl,{size:16})," Sign In"]}),l.jsx(le,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),l.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function Ln(){return l.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),l.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx(le,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),l.jsx(le,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),l.jsx(le,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),l.jsx(le,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx(le,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),l.jsx(le,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),l.jsx(le,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),l.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",l.jsx("br",{}),"Columbia County, NY"]})]})]}),l.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),l.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:l.jsx(le,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function a8(){const{isAuthenticated:n,loading:e}=Di(),t=al();return P.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),l.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",l.jsx("br",{}),l.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),l.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx(le,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),l.jsx(le,{to:"/about",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"Learn How It Works"})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:gf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Vt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Kr},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:Fs}].map((r,s)=>l.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[l.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:Xt},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:er},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:Zr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:En,featured:!0}].map((r,s)=>l.jsxs(xe.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&l.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),l.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:l.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),l.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),l.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),l.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(le,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>l.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(le,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[l.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),l.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),l.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:l.jsx(le,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),l.jsx(Ln,{})]})}var l8=Object.defineProperty,Wh=Object.getOwnPropertySymbols,UT=Object.prototype.hasOwnProperty,WT=Object.prototype.propertyIsEnumerable,W_=(n,e,t)=>e in n?l8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rg=(n,e)=>{for(var t in e||(e={}))UT.call(e,t)&&W_(n,t,e[t]);if(Wh)for(var t of Wh(e))WT.call(e,t)&&W_(n,t,e[t]);return n},Pg=(n,e)=>{var t={};for(var r in n)UT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Wh)for(var r of Wh(n))e.indexOf(r)<0&&WT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Do;(n=>{const e=class Me{constructor(d,m,g,v){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Me.MIN_VERSION||d>Me.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let _=[];for(let b=0;b<this.size;b++)_.push(!1);for(let b=0;b<this.size;b++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(g);if(this.drawCodewords(E),v==-1){let b=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const T=this.getPenaltyScore();T<b&&(v=I,b=T),this.applyMask(I)}}s(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return Me.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return Me.encodeSegments([g],m)}static encodeSegments(d,m,g=1,v=40,_=-1,E=!0){if(!(Me.MIN_VERSION<=g&&g<=v&&v<=Me.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let b,I;for(b=g;;b++){const j=Me.getNumDataCodewords(b,m)*8,Q=c.getTotalBits(d,b);if(Q<=j){I=Q;break}if(b>=v)throw new RangeError("Data too long")}for(const j of[Me.Ecc.MEDIUM,Me.Ecc.QUARTILE,Me.Ecc.HIGH])E&&I<=Me.getNumDataCodewords(b,j)*8&&(m=j);let T=[];for(const j of d){t(j.mode.modeBits,4,T),t(j.numChars,j.mode.numCharCountBits(b),T);for(const Q of j.getData())T.push(Q)}s(T.length==I);const M=Me.getNumDataCodewords(b,m)*8;s(T.length<=M),t(0,Math.min(4,M-T.length),T),t(0,(8-T.length%8)%8,T),s(T.length%8==0);for(let j=236;T.length<M;j^=253)t(j,8,T);let V=[];for(;V.length*8<T.length;)V.push(0);return T.forEach((j,Q)=>V[Q>>>3]|=j<<7-(Q&7)),new Me(b,m,V,_)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let v=0;v<m;v++)g==0&&v==0||g==0&&v==m-1||g==m-1&&v==0||this.drawAlignmentPattern(d[g],d[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let _=0;_<10;_++)g=g<<1^(g>>>9)*1335;const v=(m<<10|g)^21522;s(v>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,r(v,_));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,r(v,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,r(v,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,r(v,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const v=r(m,g),_=this.size-11+g%3,E=Math.floor(g/3);this.setFunctionModule(_,E,v),this.setFunctionModule(E,_,v)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let v=-4;v<=4;v++){const _=Math.max(Math.abs(v),Math.abs(g)),E=d+v,b=m+g;0<=E&&E<this.size&&0<=b&&b<this.size&&this.setFunctionModule(E,b,_!=2&&_!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let v=-2;v<=2;v++)this.setFunctionModule(d+v,m+g,Math.max(Math.abs(v),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Me.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const v=Me.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],_=Me.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],E=Math.floor(Me.getNumRawDataModules(m)/8),b=v-E%v,I=Math.floor(E/v);let T=[];const M=Me.reedSolomonComputeDivisor(_);for(let j=0,Q=0;j<v;j++){let z=d.slice(Q,Q+I-_+(j<b?0:1));Q+=z.length;const W=Me.reedSolomonComputeRemainder(z,M);j<b&&z.push(0),T.push(z.concat(W))}let V=[];for(let j=0;j<T[0].length;j++)T.forEach((Q,z)=>{(j!=I-_||z>=b)&&V.push(Q[j])});return s(V.length==E),V}drawCodewords(d){if(d.length!=Math.floor(Me.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let v=0;v<this.size;v++)for(let _=0;_<2;_++){const E=g-_,I=(g+1&2)==0?this.size-1-v:v;!this.isFunction[I][E]&&m<d.length*8&&(this.modules[I][E]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let v;switch(d){case 0:v=(g+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=g%3==0;break;case 3:v=(g+m)%3==0;break;case 4:v=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:v=g*m%2+g*m%3==0;break;case 6:v=(g*m%2+g*m%3)%2==0;break;case 7:v=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&v&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let _=0;_<this.size;_++){let E=!1,b=0,I=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[_][T]==E?(b++,b==5?d+=Me.PENALTY_N1:b>5&&d++):(this.finderPenaltyAddHistory(b,I),E||(d+=this.finderPenaltyCountPatterns(I)*Me.PENALTY_N3),E=this.modules[_][T],b=1);d+=this.finderPenaltyTerminateAndCount(E,b,I)*Me.PENALTY_N3}for(let _=0;_<this.size;_++){let E=!1,b=0,I=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][_]==E?(b++,b==5?d+=Me.PENALTY_N1:b>5&&d++):(this.finderPenaltyAddHistory(b,I),E||(d+=this.finderPenaltyCountPatterns(I)*Me.PENALTY_N3),E=this.modules[T][_],b=1);d+=this.finderPenaltyTerminateAndCount(E,b,I)*Me.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let E=0;E<this.size-1;E++){const b=this.modules[_][E];b==this.modules[_][E+1]&&b==this.modules[_+1][E]&&b==this.modules[_+1][E+1]&&(d+=Me.PENALTY_N2)}let m=0;for(const _ of this.modules)m=_.reduce((E,b)=>E+(b?1:0),m);const g=this.size*this.size,v=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=v&&v<=9),d+=v*Me.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let v=this.size-7;g.length<d;v-=m)g.splice(1,0,v);return g}}static getNumRawDataModules(d){if(d<Me.MIN_VERSION||d>Me.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Me.getNumRawDataModules(d)/8)-Me.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Me.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<d-1;v++)m.push(0);m.push(1);let g=1;for(let v=0;v<d;v++){for(let _=0;_<m.length;_++)m[_]=Me.reedSolomonMultiply(m[_],g),_+1<m.length&&(m[_]^=m[_+1]);g=Me.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(v=>0);for(const v of d){const _=v^g.shift();g.push(0),m.forEach((E,b)=>g[b]^=Me.reedSolomonMultiply(E,_))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let v=7;v>=0;v--)g=g<<1^(g>>>7)*285,g^=(m>>>v&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const a=class mt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new mt(mt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!mt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const v=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+v),10),v*3+1,m),g+=v}return new mt(mt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!mt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let v=mt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;v+=mt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(v,11,m)}return g<d.length&&t(mt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new mt(mt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:mt.isNumeric(d)?[mt.makeNumeric(d)]:mt.isAlphanumeric(d)?[mt.makeAlphanumeric(d)]:[mt.makeBytes(mt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new mt(mt.Mode.ECI,0,m)}static isNumeric(d){return mt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return mt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const v of d){const _=v.mode.numCharCountBits(m);if(v.numChars>=1<<_)return 1/0;g+=4+_+v.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=a;n.QrSegment=a})(Do||(Do={}));(n=>{(e=>{const t=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Do||(Do={}));(n=>{(e=>{const t=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Do||(Do={}));var La=Do;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var c8={L:La.QrCode.Ecc.LOW,M:La.QrCode.Ecc.MEDIUM,Q:La.QrCode.Ecc.QUARTILE,H:La.QrCode.Ecc.HIGH},$T=128,HT="L",KT="#FFFFFF",qT="#000000",GT=!1,QT=1,u8=4,d8=0,h8=.1;function YT(n,e=0){const t=[];return n.forEach(function(r,s){let a=null;r.forEach(function(c,f){if(!c&&a!==null){t.push(`M${a+e} ${s+e}h${f-a}v1H${a+e}z`),a=null;return}if(f===r.length-1){if(!c)return;a===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${a+e},${s+e} h${f+1-a}v1H${a+e}z`);return}c&&a===null&&(a=f)})}),t.join("")}function XT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function f8(n,e,t,r){if(r==null)return null;const s=n.length+t*2,a=Math.floor(e*h8),c=s/e,f=(r.width||a)*c,d=(r.height||a)*c,m=r.x==null?n.length/2-f/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,v=r.opacity==null?1:r.opacity;let _=null;if(r.excavate){let b=Math.floor(m),I=Math.floor(g),T=Math.ceil(f+m-b),M=Math.ceil(d+g-I);_={x:b,y:I,w:T,h:M}}const E=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:_,opacity:v,crossOrigin:E}}function p8(n,e){return e!=null?Math.max(Math.floor(e),0):n?u8:d8}function JT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:a,size:c,boostLevel:f}){let d=Nt.useMemo(()=>{const b=(Array.isArray(n)?n:[n]).reduce((I,T)=>(I.push(...La.QrSegment.makeSegments(T)),I),[]);return La.QrCode.encodeSegments(b,c8[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:v,calculatedImageSettings:_}=Nt.useMemo(()=>{let E=d.getModules();const b=p8(r,s),I=E.length+b*2,T=f8(E,c,b,a);return{cells:E,margin:b,numCells:I,calculatedImageSettings:T}},[d,c,a,r,s]);return{qrcode:d,margin:g,cells:m,numCells:v,calculatedImageSettings:_}}var m8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),g8=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=$T,level:c=HT,bgColor:f=KT,fgColor:d=qT,includeMargin:m=GT,minVersion:g=QT,boostLevel:v,marginSize:_,imageSettings:E}=r,I=Pg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=I,M=Pg(I,["style"]),V=E==null?void 0:E.src,j=Nt.useRef(null),Q=Nt.useRef(null),z=Nt.useCallback(Ne=>{j.current=Ne,typeof t=="function"?t(Ne):t&&(t.current=Ne)},[t]),[W,A]=Nt.useState(!1),{margin:C,cells:N,numCells:O,calculatedImageSettings:B}=JT({value:s,level:c,minVersion:g,boostLevel:v,includeMargin:m,marginSize:_,imageSettings:E,size:a});Nt.useEffect(()=>{if(j.current!=null){const Ne=j.current,He=Ne.getContext("2d");if(!He)return;let kt=N;const Se=Q.current,ie=B!=null&&Se!==null&&Se.complete&&Se.naturalHeight!==0&&Se.naturalWidth!==0;ie&&B.excavation!=null&&(kt=XT(N,B.excavation));const me=window.devicePixelRatio||1;Ne.height=Ne.width=a*me;const ae=a/O*me;He.scale(ae,ae),He.fillStyle=f,He.fillRect(0,0,O,O),He.fillStyle=d,m8?He.fill(new Path2D(YT(kt,C))):N.forEach(function($,ee){$.forEach(function(Ce,Ae){Ce&&He.fillRect(Ae+C,ee+C,1,1)})}),B&&(He.globalAlpha=B.opacity),ie&&He.drawImage(Se,B.x+C,B.y+C,B.w,B.h)}}),Nt.useEffect(()=>{A(!1)},[V]);const H=Rg({height:a,width:a},T);let L=null;return V!=null&&(L=Nt.createElement("img",{src:V,key:V,style:{display:"none"},onLoad:()=>{A(!0)},ref:Q,crossOrigin:B==null?void 0:B.crossOrigin})),Nt.createElement(Nt.Fragment,null,Nt.createElement("canvas",Rg({style:H,height:a,width:a,ref:z,role:"img"},M)),L)});g8.displayName="QRCodeCanvas";var jg=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=$T,level:c=HT,bgColor:f=KT,fgColor:d=qT,includeMargin:m=GT,minVersion:g=QT,boostLevel:v,title:_,marginSize:E,imageSettings:b}=r,I=Pg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:M,numCells:V,calculatedImageSettings:j}=JT({value:s,level:c,minVersion:g,boostLevel:v,includeMargin:m,marginSize:E,imageSettings:b,size:a});let Q=M,z=null;b!=null&&j!=null&&(j.excavation!=null&&(Q=XT(M,j.excavation)),z=Nt.createElement("image",{href:b.src,height:j.h,width:j.w,x:j.x+T,y:j.y+T,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const W=YT(Q,T);return Nt.createElement("svg",Rg({height:a,width:a,viewBox:`0 0 ${V} ${V}`,ref:t,role:"img"},I),!!_&&Nt.createElement("title",null,_),Nt.createElement("path",{fill:f,d:`M0,0 h${V}v${V}H0z`,shapeRendering:"crispEdges"}),Nt.createElement("path",{fill:d,d:W,shapeRendering:"crispEdges"}),z)});jg.displayName="QRCodeSVG";const $_={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function il({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=$_[t]||$_[5],a=e+48,c=16;return r?l.jsx("div",{style:{width:a,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:l.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[l.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),l.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[l.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),l.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),l.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),l.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),l.jsx(jg,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[l.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),l.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),l.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):l.jsx(jg,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const y8="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",v8="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",x8="Broad Street Bagel Co.";function w8(){const[n,e]=P.useState(null),[t,r]=P.useState(0),[s,a]=P.useState(!1);return l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:l.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[l.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[l.jsx(IV,{size:16})," Try It Live"]}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[l.jsxs(xe.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(rS,{size:22,color:"white"})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:l.jsx(xe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:l.jsx(il,{value:y8,size:130,denomination:5,showFrame:!0})})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[l.jsx(Cw,{size:20,color:"#3498db"}),l.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),l.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,f)=>l.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]}),l.jsxs(xe.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Vt,{size:22,color:"white"})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:l.jsx(xe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:l.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),l.jsx(il,{value:v8,size:110,denomination:1,showFrame:!1}),l.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[l.jsx(c4,{size:14,color:"var(--kb-green)"}),l.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:x8})]})]})})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[l.jsx(Cw,{size:20,color:"var(--kb-green)"}),l.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),l.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,f)=>l.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]})]}),l.jsxs(xe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),l.jsxs("div",{style:{position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[l.jsx(qy,{size:20,color:"var(--kb-gold)"}),l.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),l.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[l.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(Vt,{size:24,color:"var(--kb-gold)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center"},children:l.jsx(sg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),l.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(Fs,{size:24,color:"var(--kb-gold)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center"},children:l.jsx(sg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),l.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(er,{size:24,color:"var(--kb-navy)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),l.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,f)=>l.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},f))})]})]}),l.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx(le,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),l.jsx(le,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function _8(){return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),l.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[l.jsxs("p",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),l.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),l.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),l.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>l.jsxs(xe.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),l.jsx(w8,{}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),l.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[l.jsxs("p",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),l.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',l.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),l.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),l.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsx(le,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),l.jsx(le,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),l.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),l.jsx(le,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),l.jsx(Ln,{})]})}const Jn={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function Ng(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function k8(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function ZT(n){const e=Ng(n),t=k8(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=Jn[t],s=e?Jn[e].threshold:0,a=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,a)),remaining:r.threshold-n,nextTier:r}}function b8(){const n=[{Icon:i4,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Vt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:er,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:ZE,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:XE,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:_r,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),l.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{minWidth:"700px"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"25%"},children:"Tier"}),l.jsx("th",{style:{width:"20%"},children:"Requirement"}),l.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),l.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Xt,{size:18,color:"#888"}),l.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),l.jsx("td",{children:"1+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(er,{size:18,color:"#2e7d32"}),l.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),l.jsx("td",{children:"5+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Zr,{size:18,color:"#1565c0"}),l.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),l.jsx("td",{children:"10+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),l.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(En,{size:18,color:"#c9a227"}),l.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),l.jsx("td",{children:"15+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(le,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>l.jsx(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),l.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),l.jsx("div",{className:"card",style:{padding:"2rem"},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>l.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),l.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsx(le,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),l.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),l.jsx(le,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),l.jsx(Ln,{})]})}const ku="businesses";async function E0(n){const e=Ut(qe,ku,n),t=await xl(e);return t.exists()?{code:t.id,...t.data()}:null}async function Us(){const n=js(bn(qe,ku),tl("name"));return(await vr(n)).docs.map(t=>({code:t.id,...t.data()}))}async function H_(n,e,t){await yu(Ut(qe,ku,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Dt()})}async function E8(n){const e=Ut(qe,ku,n);await Jr(e,{checkinCount:My(1)})}async function S8(n,e){const t=Ut(qe,ku,n);await Jr(t,{isActive:e})}const Im={food:{label:"Food & Drink",Icon:sS,color:"#e74c3c"},retail:{label:"Retail",Icon:iS,color:"#9b59b6"},services:{label:"Services",Icon:YE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:nS,color:"#1abc9c"}};function T8(){const[n,e]=P.useState([]),[t,r]=P.useState(!0),[s,a]=P.useState("all");P.useEffect(()=>{async function d(){const m=await Us();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),l.jsx(le,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:_r,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:K4,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:D4,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:xV,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Uy,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:XE,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>l.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[l.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),l.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[l.jsxs("button",{onClick:()=>a("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(Im).map(([d,m])=>l.jsxs("button",{onClick:()=>a(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?l.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?l.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",l.jsx(le,{to:"/admin/businesses",children:"Add some!"})]}):l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Im[d.category]||Im.services;return l.jsxs(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),l.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&l.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),l.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),l.jsx(le,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),l.jsx(Ln,{})]})}const e2="members";function $h(){return No.currentUser?No.currentUser.uid:Hh()}function Hh(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function bu(n){const e=Ut(qe,e2,n),t=await xl(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function I8(n,e){const t=Ut(qe,e2,n),r=await xl(t);if(r.exists()){const s=r.data(),a=s.businessesVisited||[],c=!a.includes(e),f=c?a.length+1:a.length,d=Ng(f),m=d!==s.tier;return await Jr(t,{businessesVisited:pD(e),totalCheckins:My(1),tier:d,lastCheckin:Dt()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...a,e]:a,totalCheckins:(s.totalCheckins||0)+1}}else{const s=Ng(1);return await yu(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Dt(),lastCheckin:Dt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const C8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En};function A8(){const[n,e]=P.useState(null),[t,r]=P.useState(!0),[s,a]=P.useState(20),[c,f]=P.useState(!1),[d,m]=P.useState(!1);P.useEffect(()=>{async function M(){const V=Hh(),j=await bu(V);e(j),r(!1)}M()},[]);const g=(n==null?void 0:n.tier)||"curious",v=Jn[g]||Jn.curious,_=n?v.bonus:.1,E=s*_,b=s+E,I=async()=>{f(!0);try{await Fy(bn(qe,"exchanges"),{visitorId:Hh(),usdAmount:s,bonusRate:_,bonusAmount:E,kinderbucksAmount:b,tier:g,status:"pending",createdAt:Dt()}),m(!0)}catch(M){console.error("Exchange error:",M),alert("Error submitting exchange request")}f(!1)},T=[10,20,50,100];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),l.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),l.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:l.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?l.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[l.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),l.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),l.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",l.jsxs("strong",{children:["$",s," USD"]})," "," ",l.jsxs("strong",{children:["$",b.toFixed(2)," Kinderbucks"]})," has been submitted."]}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[l.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),l.jsx(le,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const M=C8[g]||Xt;return l.jsx(M,{size:28,color:v.color,strokeWidth:1.5})})(),l.jsx("span",{style:{fontWeight:"600",color:v.color,fontSize:"1.2rem"},children:v.name})]})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.color},children:[Math.round(_*100),"%"]})]})]}),!n&&l.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(T4,{size:16,color:"var(--kb-gold)"})," ",l.jsx(le,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{children:"Amount (USD)"}),l.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:T.map(M=>l.jsxs("button",{onClick:()=>a(M),className:s===M?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",M]},M))}),l.jsx("input",{type:"number",value:s,onChange:M=>a(Math.max(1,Number(M.target.value))),min:"1",style:{width:"100%"}})]}),l.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),l.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[v.name," Bonus (",Math.round(_*100),"%)"]}),l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",E.toFixed(2)]})]}),l.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),l.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",b.toFixed(2)]})]}),l.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),l.jsx("button",{onClick:I,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${b.toFixed(2)} Kinderbucks`}),l.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),l.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[l.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mo,{size:16,color:"var(--kb-green)"})," ",l.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),l.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mo,{size:16,color:"var(--kb-green)"})," ",l.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),l.jsx(Ln,{})]})}const K_={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En};function R8(){var M,V;const[n,e]=P.useState(null),[t,r]=P.useState([]),[s,a]=P.useState([]),[c,f]=P.useState(!0),[d,m]=P.useState("overview");if(P.useEffect(()=>{async function j(){const Q=Hh(),z=await bu(Q),W=await Us();try{const A=js(bn(qe,"exchanges"),Xc("visitorId","==",Q),tl("createdAt","desc")),C=await vr(A);a(C.docs.map(N=>({id:N.id,...N.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(z),r(W),f(!1)}j()},[]),c)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("div",{className:"page page-center",style:{flex:1},children:l.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),l.jsx(Ln,{})]});const g=(n==null?void 0:n.tier)||null,v=g?Jn[g]:null,_=((M=n==null?void 0:n.businessesVisited)==null?void 0:M.length)||0,E=ZT(_),b=((V=n==null?void 0:n.businessesVisited)==null?void 0:V.map(j=>{const Q=t.find(z=>z.code===j);return Q?Q.name:j}))||[],I=t.filter(j=>{var Q;return j.isActive&&!((Q=n==null?void 0:n.businessesVisited)!=null&&Q.includes(j.code))}),T=s.reduce((j,Q)=>j+(Q.kinderbucksAmount||0),0);return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:l.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{width:"80px",height:"80px",background:v?v.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const j=g&&K_[g]?K_[g]:Xt;return l.jsx(j,{size:40,color:"white",strokeWidth:1.5})})()}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),l.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:v?v.name:"New Member"}),l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:v?`${Math.round(v.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),l.jsx(le,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),l.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:l.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(j=>l.jsx("button",{onClick:()=>m(j),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===j?"600":"400",color:d===j?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===j?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:j},j))})}),l.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&l.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsx("div",{className:"stat-value",children:_}),l.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),l.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",T.toFixed(0)]}),l.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[l.jsxs(le,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Uy,{size:18})," Exchange"]}),l.jsxs(le,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Vt,{size:18})," Find Businesses"]}),l.jsxs(le,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(qy,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&l.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},children:[v&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),E.nextTier?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginBottom:"0.5rem"},children:[l.jsx("span",{style:{color:v.color,fontWeight:"600"},children:v.name}),l.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),l.jsx("span",{style:{color:E.nextTier.color,fontWeight:"600"},children:E.nextTier.name})]}),l.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${E.progress}%`,background:v.color}})}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[E.remaining," more business",E.remaining!==1?"es":""," to reach ",E.nextTier.name]})]}):l.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(En,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Jc,{size:20,color:"var(--kb-green)"})," Businesses Visited (",b.length,")"]}),b.length>0?l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:b.map((j,Q)=>l.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Jc,{size:14})," ",j]},Q))}):l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),I.length>0&&l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(JE,{size:20,color:"var(--kb-navy)"})," Still to Explore (",I.length,")"]}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[I.slice(0,12).map(j=>l.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:j.name},j.code)),I.length>12&&l.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",I.length-12," more"]})]})]})]}),d==="history"&&l.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},children:l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?l.jsx("div",{children:s.map((j,Q)=>{var z,W,A,C;return l.jsxs("div",{style:{padding:"1rem 0",borderBottom:Q<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",j.usdAmount,"  $",(z=j.kinderbucksAmount)==null?void 0:z.toFixed(2)," KB"]}),l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((C=(A=(W=j.createdAt)==null?void 0:W.toDate)==null?void 0:A.call(W))==null?void 0:C.toLocaleDateString())||"Pending","  ",Math.round(j.bonusRate*100),"% bonus"]})]}),l.jsx("span",{className:"badge",style:{background:j.status==="completed"?"#d4edda":"#fff3cd",color:j.status==="completed"?"var(--kb-green)":"#856404"},children:j.status})]},j.id)})}):l.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[l.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),l.jsx(le,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),l.jsx(Ln,{})]})}const q_={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En},_c={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function P8(){var I,T;const{user:n,profile:e,isAuthenticated:t}=Di(),[r,s]=P.useState(null),[a,c]=P.useState([]),[f,d]=P.useState(!0);P.useEffect(()=>{async function M(){const V=$h(),j=await bu(V),Q=await Us();s(j),c(Q.filter(z=>z.isActive)),d(!1)}M()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=Jn[m],v=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.length)||0,_=ZT(v),E=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.map(M=>{const V=a.find(j=>j.code===M);return V?V.name:M}))||[],b=a.filter(M=>{var V;return!((V=r==null?void 0:r.businessesVisited)!=null&&V.includes(M.code))});return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:l.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:f?l.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx($a,{size:24,color:"var(--kb-gray-500)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),l.jsxs(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${_c[m]} 0%, ${_c[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const M=q_[m]||Xt;return l.jsx(M,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),l.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),l.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),l.jsxs(le,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[l.jsx(og,{size:28}),"SHOW MY OK CARD"]}),l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[v," Business",v!==1?"es":""," Visited"]}),_.nextTier?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:l.jsxs(xe.div,{initial:{width:0},animate:{width:`${_.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${_c[m]}, ${_.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[v,"/",_.nextTier.threshold]})}),l.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[l.jsx("strong",{children:_.remaining})," more to reach"," ",l.jsx("strong",{style:{color:_.nextTier.color},children:_.nextTier.name})]})]}):l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[l.jsx(En,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),E.length>0&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Jc,{size:20,color:"var(--kb-green)"})," Visited"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:E.map((M,V)=>l.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Jc,{size:14})," ",M]},V))})]}),b.length>0&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(JE,{size:20})," Still to Explore (",b.length,")"]}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[b.slice(0,10).map(M=>l.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:M.name},M.code)),b.length>10&&l.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",b.length-10," more"]})]}),l.jsxs(le,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",l.jsx(sg,{size:16})]})]}),l.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&l.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[l.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),l.jsxs(le,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(nl,{size:18})," Sign In"]})]})]}):l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[l.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[l.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:l.jsx(qy,{size:36,color:"var(--kb-gold)"})}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&l.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),l.jsxs(le,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(nl,{size:18})," Sign In or Create Account"]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[l.jsxs(le,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mo,{size:18})," Find Businesses"]}),l.jsxs(le,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(og,{size:18})," View My Card"]})]})]}),l.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Vt},{step:2,text:"Scan their check-in QR code with your phone",icon:Xt},{step:3,text:"Build your tier to unlock better exchange rates",icon:Fs}].map(M=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(M.icon,{size:20,color:"var(--kb-gold)"})}),l.jsx("div",{style:{color:"var(--kb-gray-700)"},children:M.text})]},M.step))})]}),l.jsxs("div",{style:{marginTop:"2rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(Jn).map(([M,V])=>{const j=q_[M];return l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[l.jsx(j,{size:24,color:_c[M],style:{marginBottom:"0.5rem"}}),l.jsx("div",{style:{fontWeight:"600",color:_c[M],marginBottom:"0.25rem"},children:V.name}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(V.bonus*100),"% bonus"]})]},M)})})]})]})})}),l.jsx(Ln,{})]})}function j8(){var j,Q;const[n,e]=P.useState("login"),[t,r]=P.useState(""),[s,a]=P.useState(""),[c,f]=P.useState(""),[d,m]=P.useState(""),[g,v]=P.useState(!1),_=al(),E=tr(),{isAuthenticated:b}=Di(),M=new URLSearchParams(E.search).get("redirect")||((Q=(j=E.state)==null?void 0:j.from)==null?void 0:Q.pathname)||"/card",V=async z=>{z.preventDefault(),m(""),v(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),v(!1);return}await bD(t,s,c)}else await ED(t,s);_(M,{replace:!0})}catch(W){console.error("Auth error:",W),W.code==="auth/email-already-in-use"?m("An account with this email already exists"):W.code==="auth/weak-password"?m("Password should be at least 6 characters"):W.code==="auth/invalid-email"?m("Please enter a valid email address"):W.code==="auth/user-not-found"||W.code==="auth/wrong-password"||W.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}v(!1)};return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[l.jsxs("div",{className:"card",style:{padding:"2rem"},children:[l.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[l.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[l.jsx(nl,{size:18})," Sign In"]}),l.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[l.jsx(Dh,{size:18})," Sign Up"]})]}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&l.jsxs(xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[l.jsx(Wy,{size:18}),d]}),l.jsxs("form",{onSubmit:V,children:[n==="signup"&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx($a,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"text",value:c,onChange:z=>f(z.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(eS,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"email",value:t,onChange:z=>r(z.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(A4,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"password",value:s,onChange:z=>a(z.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&l.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),l.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?l.jsxs(l.Fragment,{children:[l.jsx(Ky,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):l.jsxs(l.Fragment,{children:[n==="login"?l.jsx(nl,{size:20}):l.jsx(Dh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[l.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),l.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),l.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),l.jsxs("button",{type:"button",onClick:async()=>{m(""),v(!0);try{await SD(),_(M,{replace:!0})}catch(z){console.error("Google sign-in error:",z),z.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}v(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsx("div",{style:{marginTop:"1rem"},children:l.jsx(le,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),l.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:l.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),l.jsx(Ln,{}),l.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const N8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En},M8={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function D8(){var I;const{user:n,profile:e,isAuthenticated:t}=Di(),[r,s]=P.useState(null),[a,c]=P.useState(!0);P.useEffect(()=>{async function T(){const M=$h(),V=await bu(M);s(V),c(!1)}T()},[n]);const f=(r==null?void 0:r.tier)||"curious",d=Jn[f],m=M8[f],g=N8[f],v=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.length)||0,_=Math.round(d.bonus*100),E=$h(),b=E?`OK-${E.substring(0,6).toUpperCase()}`:"OK-GUEST";return a?l.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):l.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[l.jsxs(le,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1.1rem",marginBottom:"1rem"},children:[l.jsx(qD,{size:24})," Back"]}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[l.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[l.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),l.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),l.jsxs("div",{style:{padding:"1.5rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),l.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:b}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[l.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),l.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[_,"%"]}),l.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:v}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),l.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[l.jsx(Kr,{size:20}),"How to use"]}),l.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",l.jsx("br",{}),"to check in and get your discount code"]})]})]}),l.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),l.jsxs(le,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[l.jsx(Kr,{size:22}),"Find a Business to Check In"]})]})})]})}const Eu="kinderbucks",V8="scans";async function L8(n){const e=Ut(qe,Eu,n),t=await xl(e);return t.exists()?{serial:t.id,...t.data()}:null}async function t2(){const n=js(bn(qe,Eu),tl("serial"));return(await vr(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function O8(n,e){const t=n.map(r=>yu(Ut(qe,Eu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Dt()}));await Promise.all(t)}async function B8(n,e,t=null){const r=Ut(qe,Eu,n),s={status:e,issuedAt:Dt(),...t&&{issuedTo:t}};await Jr(r,s)}async function F8(n){const e=Ut(qe,Eu,n);await Jr(e,{scanCount:My(1),lastScanned:Dt(),status:"active"}),await Fy(bn(qe,V8),{serial:n,scannedAt:Dt(),userAgent:navigator.userAgent||null})}function n2(){const[n,e]=P.useState([]);return P.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,a)=>({id:a,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>l.jsx(xe.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const G_={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function z8({kinderbuck:n}){const e=G_[n.denomination]||G_[5];return l.jsxs(xe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[l.jsxs(xe.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[l.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),l.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),l.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:l.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),l.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[l.jsxs("p",{children:["Status: ",l.jsx("strong",{children:n.status})]}),n.issuedAt&&l.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),l.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),l.jsx(xe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:l.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function U8(){const{serial:n}=Og(),[e,t]=P.useState(null),[r,s]=P.useState(!0),[a,c]=P.useState(null);return P.useEffect(()=>{async function f(){try{const d=await L8(n);d?(t(d),await F8(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}f()},[n]),r?l.jsxs("div",{className:"page page-center",children:[l.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),l.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):a==="not_found"?l.jsxs("div",{className:"page page-center",children:[l.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),l.jsxs("p",{children:["Serial ",l.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):a?l.jsxs("div",{className:"page page-center",children:[l.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),l.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):l.jsxs("div",{className:"page page-center",children:[l.jsx(n2,{}),l.jsx(z8,{kinderbuck:e})]})}const S0="checkins",W8=3600*1e3;async function $8(n,e){var t;try{const r=new Date(Date.now()-W8),s=js(bn(qe,S0),Xc("visitorId","==",n),Xc("businessCode","==",e)),a=await vr(s);if(a.empty)return!1;for(const c of a.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function H8(n,e,t){await Fy(bn(qe,S0),{visitorId:n,businessCode:e,timestamp:Dt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function r2(n){try{const e=js(bn(qe,S0),Xc("businessCode","==",n));return(await vr(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,a)=>{var d,m,g,v;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((v=(g=a.timestamp)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}const K8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En},q8={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function G8(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function Q8(){const{businessCode:n}=Og(),{isAuthenticated:e}=Di(),[t,r]=P.useState(null),[s,a]=P.useState(!0),[c,f]=P.useState(null),[d,m]=P.useState(null),[g,v]=P.useState(!1),[_,E]=P.useState(!1),[b,I]=P.useState("");if(P.useEffect(()=>{async function z(){try{const W=await E0(n);if(!W){f("not_found"),a(!1);return}if(!W.isActive){f("inactive"),a(!1);return}r(W);const A=$h();if(I(G8(n,A)),await $8(A,n)){v(!0);const O=await bu(A);O&&m({tierChanged:!1,newTier:O.tier,businessesVisited:O.businessesVisited||[],totalCheckins:O.totalCheckins||0,isNewBusiness:!1}),a(!1);return}const N=await I8(A,n);await H8(A,n,N.newTier),await E8(n),m(N),N.tierChanged&&N.newTier&&E(!0),a(!1)}catch(W){console.error("Check-in error:",W),f("error"),a(!1)}}z()},[n]),s)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[l.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Ky,{size:64,color:"var(--kb-gold)"})}),l.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),l.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),l.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),l.jsx(le,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[l.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),l.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),l.jsx(le,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[l.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),l.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),l.jsx(le,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const T=(d==null?void 0:d.newTier)||"curious",M=Jn[T],V=q8[T],j=K8[T],Q=Math.round(M.bonus*100);return l.jsxs("div",{style:{minHeight:"100vh",background:g?"linear-gradient(180deg, #6b7280 0%, #4b5563 100%)":`linear-gradient(180deg, ${V} 0%, ${V}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[_&&l.jsx(n2,{}),l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?l.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[l.jsx(wr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),l.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),l.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),l.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",l.jsx("br",{}),"for another check-in!"]})]}):l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[l.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[l.jsx(xe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:l.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(Jc,{size:48,strokeWidth:2.5})})}),l.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),l.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx(j,{size:28,color:V}),l.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:V,textTransform:"uppercase"},children:M.name})]}),l.jsxs("div",{style:{background:`${V}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:V,lineHeight:1},children:[Q,"%"]}),l.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),l.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx(rS,{size:18,color:"var(--kb-gold)"}),l.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),l.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:b})]}),l.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",l.jsx("br",{}),"to receive your ",l.jsxs("strong",{children:[Q,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&l.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[l.jsx("span",{style:{fontSize:"1.25rem"},children:""}),l.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",M.name,"!"]})]}),!e&&l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},style:{marginTop:"1.5rem",background:"white",borderRadius:"16px",padding:"1.5rem",textAlign:"center"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(Dh,{size:24,color:"var(--kb-navy)"})}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.25rem"},children:"Create Your OK Account"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1rem",lineHeight:1.5},children:"Sign up to save your progress and unlock more rewards!"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1.25rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"8px",padding:"0.75rem 1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"var(--kb-gray-700)"},children:[l.jsx(ZE,{size:16,color:"var(--kb-green)"}),"Keep your check-in history"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"var(--kb-gray-700)"},children:[l.jsx(Fs,{size:16,color:"var(--kb-green)"}),"Track your tier progress"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem",color:"var(--kb-gray-700)"},children:[l.jsx(En,{size:16,color:"var(--kb-gold-dark)"}),"Get your digital OK Member Card"]})]}),l.jsxs(le,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem",fontSize:"1.1rem"},children:[l.jsx(Dh,{size:20}),"Sign Up Free"]}),l.jsxs("p",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",l.jsx(le,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),l.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[l.jsx(le,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),l.jsx(le,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}function Y8(){const{profile:n}=Di(),[e,t]=P.useState(null),[r,s]=P.useState([]),[a,c]=P.useState(!0),[f,d]=P.useState(!1),[m,g]=P.useState(!1);P.useEffect(()=>{async function T(){if(!(n!=null&&n.businessCode)){c(!1);return}const[M,V]=await Promise.all([E0(n.businessCode),r2(n.businessCode)]);t(M),s(V),c(!1)}T()},[n==null?void 0:n.businessCode]);const v=()=>{const T=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(T),g(!0),setTimeout(()=>g(!1),2e3)},_=r.filter(T=>{var j;const M=(j=T.timestamp)!=null&&j.toDate?T.timestamp.toDate():new Date(T.timestamp),V=new Date;return M.toDateString()===V.toDateString()}).length,E=r.filter(T=>{var j;const M=(j=T.timestamp)!=null&&j.toDate?T.timestamp.toDate():new Date(T.timestamp),V=new Date;return V.setDate(V.getDate()-7),M>V}).length,b=new Set(r.map(T=>T.visitorId)).size;if(a)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),l.jsx(Ln,{})]});if(!(n!=null&&n.businessCode))return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[l.jsx(Vt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),l.jsx(le,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),l.jsx(Ln,{})]});const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"2rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Dashboard"}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage your Kinderbucks check-ins"})]}),l.jsxs("button",{onClick:()=>d(!f),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18}),f?"Hide QR Code":"Show QR Code"]})]})}),f&&l.jsx(xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card",style:{marginBottom:"2rem",padding:"2rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{textAlign:"center"},children:l.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",display:"inline-block"},children:l.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"16px"},children:[l.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),l.jsx(il,{value:I,size:150,denomination:1,showFrame:!1}),l.jsx("div",{style:{marginTop:"8px",fontWeight:"600",color:"var(--kb-navy)"},children:e==null?void 0:e.name})]})})}),l.jsxs("div",{style:{flex:1,minWidth:"250px"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Display This QR Code"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Print and display this QR code at your counter. Customers can scan it with their phone to check in and build their Kinderhooker status."}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("input",{type:"text",value:I,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),l.jsxs("button",{onClick:v,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m?l.jsx(Yr,{size:16}):l.jsx($y,{size:16}),m?"Copied!":"Copy"]})]})]}),l.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Hy,{size:18})," Print QR Code"]})]})]})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Fs,{size:24,color:"var(--kb-green)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Total Check-ins"})]})]})}),l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(wr,{size:24,color:"#3498db"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:_}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Today"})]})]})}),l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(yf,{size:24,color:"#9b59b6"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:E}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"This Week"})]})]})}),l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_r,{size:24,color:"var(--kb-gold-dark)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:b}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Unique Visitors"})]})]})})]}),l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(wr,{size:20})," Recent Check-ins"]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No check-ins yet"}),l.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,20).map((T,M)=>{var j;const V=(j=T.timestamp)!=null&&j.toDate?T.timestamp.toDate():new Date(T.timestamp);return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Yr,{size:18,color:"white"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:T.tier&&`${T.tier} member`})]})]}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:V.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},T.id||M)})})]})]})}),l.jsx(Ln,{})]})}function ln({children:n,title:e}){const t=tr(),r=al(),{user:s,profile:a,isAdmin:c}=Di(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:E4},{to:"/admin/exchanges",label:"Exchanges",Icon:gf},{to:"/admin/members",label:"Members",Icon:_r},{to:"/admin/generate",label:"Generate QR",Icon:Kr},{to:"/admin/issue",label:"Issue Currency",Icon:Nh},{to:"/admin/businesses",label:"Businesses",Icon:Vt},{to:"/admin/users",label:"User Management",Icon:Mh}],d=async()=>{await qE(),r("/")},m=g=>t.pathname===g;return l.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[l.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[l.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:l.jsxs(le,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),l.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>l.jsxs(le,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[l.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),l.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&l.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(a==null?void 0:a.displayName)||s.email}),l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(a==null?void 0:a.role)||"member"})]}),l.jsxs(le,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[l.jsx(k4,{size:18}),"Back to Site"]}),s&&l.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[l.jsx(ag,{size:18}),"Sign Out"]})]})]}),l.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[l.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:l.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),l.jsx("div",{style:{padding:"2rem"},children:n})]}),l.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function X8(){const[n,e]=P.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=P.useState([]),[s,a]=P.useState({}),[c,f]=P.useState(!0);P.useEffect(()=>{async function m(){try{const g=await t2(),v=g.filter(A=>A.status==="issued"||A.status==="active"),_={};v.forEach(A=>{const C=A.denomination||0;_[C]=(_[C]||0)+1}),a(_);const E=await Us(),b=E.filter(A=>A.isActive),I=E.reduce((A,C)=>A+(C.checkinCount||0),0),T=js(bn(qe,"exchanges"),Xc("status","==","pending"),tl("createdAt","desc")),V=(await vr(T)).docs.map(A=>({id:A.id,...A.data()})),j=V.reduce((A,C)=>A+(C.kinderbucksAmount||0),0),Q=js(bn(qe,"exchanges"),tl("createdAt","desc"),yD(5)),z=await vr(Q);r(z.docs.map(A=>({id:A.id,...A.data()})));const W=await vr(bn(qe,"members"));e({totalCurrency:g.length,inCirculation:v.length,circulationValue:v.reduce((A,C)=>A+(C.denomination||0),0),pendingExchanges:V.length,pendingValue:j,totalMembers:W.size,activeBusinesses:b.length,totalCheckins:I}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:v,subtext:_,color:E,to:b})=>l.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),l.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:E||"var(--kb-navy)"},children:v}),_&&l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:_})]}),l.jsx("div",{style:{width:"48px",height:"48px",background:`${E||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(m,{size:24,color:E||"var(--kb-navy)"})})]}),b&&l.jsx(le,{to:b,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?l.jsx(ln,{title:"Dashboard",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):l.jsxs(ln,{title:"Dashboard",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsx(d,{icon:Uy,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),l.jsx(d,{icon:wr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),l.jsx(d,{icon:_r,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),l.jsx(d,{icon:Vt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),l.jsx(le,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,v,_,E;return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?l.jsx(Yr,{size:18,color:"var(--kb-green)"}):m.status==="pending"?l.jsx(wr,{size:18,color:"#e67e22"}):l.jsx(Wy,{size:18,color:"var(--kb-gray-400)"}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((E=(_=(v=m.createdAt)==null?void 0:v.toDate)==null?void 0:_.call(v))==null?void 0:E.toLocaleDateString())||"Pending"})]})]}),l.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,v=Math.max(...Object.values(s),1),_=g/v*100,E={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),l.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),l.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${_}%`,height:"100%",background:E[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs(le,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18})," Generate QR Codes"]}),l.jsxs(le,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Nh,{size:18})," Issue Currency"]}),l.jsxs(le,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(gf,{size:18})," Process Exchanges"]})]})]})]})}function J8(){const[n,e]=P.useState({start:1,end:100}),[t,r]=P.useState(5),[s,a]=P.useState([]),[c,f]=P.useState(!1),[d,m]=P.useState(!1),g=()=>{const b=[];for(let I=n.start;I<=n.end;I++)b.push(`KB-${String(I).padStart(4,"0")}`);a(b),m(!1)},v=async()=>{f(!0);try{await O8(s,t),m(!0)}catch(b){console.error("Error saving:",b),alert("Error saving to database")}f(!1)},_="https://harmonicsystems.github.io/kinderbucks/#/scan/",E={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return l.jsxs(ln,{title:"Generate QR Codes",children:[l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:20})," Generation Settings"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),l.jsx("input",{type:"number",value:n.start,onChange:b=>e(I=>({...I,start:Number(b.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),l.jsx("input",{type:"number",value:n.end,onChange:b=>e(I=>({...I,end:Number(b.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),l.jsxs("select",{value:t,onChange:b=>r(Number(b.target.value)),style:{width:"100%"},children:[l.jsx("option",{value:1,children:"$1"}),l.jsx("option",{value:5,children:"$5"}),l.jsx("option",{value:10,children:"$10"}),l.jsx("option",{value:20,children:"$20"})]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18})," Generate ",n.end-n.start+1," Codes"]}),l.jsxs("div",{style:{padding:"0.75rem 1rem",background:E[t].bg,borderRadius:"8px",color:E[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[l.jsx(Yr,{size:18})," Saved!"]}):l.jsxs("button",{className:"btn btn-gold",onClick:v,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(G4,{size:18}),c?"Saving...":"Save to Database"]}),l.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(W4,{size:18})," Print"]})]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(b=>l.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[l.jsx(il,{value:`${_}${b}`,size:140,denomination:t}),l.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:b})]},b))}),s.length>50&&l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&l.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[l.jsx(Kr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),l.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),l.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function Z8(){const[n,e]=P.useState([]),[t,r]=P.useState(!0),[s,a]=P.useState([]),[c,f]=P.useState(""),[d,m]=P.useState(!1),[g,v]=P.useState(0),_=async()=>{const A=await t2();e(A.filter(C=>C.status==="draft"||C.status==="issued")),r(!1)};P.useEffect(()=>{_()},[]);const E=A=>{a(C=>C.includes(A)?C.filter(N=>N!==A):[...C,A])},b=()=>{const A=M.map(C=>C.serial);a(A)},I=()=>{a([])},T=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await B8(A,"issued",c);v(s.length),a([]),f(""),await _(),setTimeout(()=>v(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},M=n.filter(A=>A.status==="draft"),V=n.filter(A=>A.status==="issued"),j=s.reduce((A,C)=>{const N=n.find(O=>O.serial===C);return A+((N==null?void 0:N.denomination)||0)},0),z=(A=>{const C={1:[],5:[],10:[],20:[]};return A.forEach(N=>{const O=N.denomination||5;C[O]&&C[O].push(N)}),C})(M),W={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?l.jsx(ln,{title:"Issue Currency",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"Issue Currency",children:[g>0&&l.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[l.jsx(Yr,{size:20}),l.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Nh,{size:20})," Issue to Circulation"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),l.jsx("input",{type:"text",value:c,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),l.jsxs("button",{className:"btn btn-gold",onClick:T,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[l.jsx(Nh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&l.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",j]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:M.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:V.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Tw,{size:20})," Available to Issue (",M.length,")"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:b,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),l.jsx("button",{className:"btn btn-secondary",onClick:I,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),M.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(Tw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No draft Kinderbucks available."}),l.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):l.jsx("div",{children:[1,5,10,20].map(A=>{const C=z[A];return C.length===0?null:l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[l.jsxs("div",{style:{width:"24px",height:"24px",background:W[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",C.length,")"]}),l.jsx("button",{onClick:()=>{const N=C.map(B=>B.serial),O=N.every(B=>s.includes(B));a(O?B=>B.filter(H=>!N.includes(H)):B=>[...new Set([...B,...N])])},style:{background:"none",border:"none",color:W[A],cursor:"pointer",fontSize:"0.85rem"},children:C.every(N=>s.includes(N.serial))?"Deselect all":"Select all"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:C.map(N=>{const O=s.includes(N.serial);return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:O?`${W[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:O?`2px solid ${W[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[O?l.jsx(oV,{size:18,color:W[A]}):l.jsx(lV,{size:18,color:"var(--kb-gray-400)"}),l.jsx("input",{type:"checkbox",checked:O,onChange:()=>E(N.serial),style:{display:"none"}}),l.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:O?W[A]:"var(--kb-gray-600)",fontWeight:O?"600":"400"},children:N.serial})]},N.serial)})})]},A)})})]})]})}const e9=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"BROOKLYN-PIZZA",name:"The Brooklyn Pizzeria",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"HAMRAHS",name:"Hamrah's Lebanese Foods",category:"food"},{code:"OK-PANTRY",name:"OK Pantry",category:"retail"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"BOOKS",name:"Kinderhook Books",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"SEPTEMBER",name:"September Gallery",category:"arts"},{code:"OLD-DUTCH",name:"Old Dutch Inn",category:"services"},{code:"MUSE",name:"Muse Aesthetics",category:"services"},{code:"PILATES",name:"Julia Jayne Pilates",category:"services"},{code:"HISTORICAL",name:"Columbia County Historical Society",category:"arts"}],Cm={food:{label:"Food & Drink",Icon:sS,color:"#e74c3c"},retail:{label:"Retail",Icon:iS,color:"#9b59b6"},services:{label:"Services",Icon:YE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:nS,color:"#1abc9c"}};function t9(){const[n,e]=P.useState([]),[t,r]=P.useState(!0),[s,a]=P.useState({code:"",name:"",category:"food"}),[c,f]=P.useState(!1),[d,m]=P.useState(null),[g,v]=P.useState(!1),[_,E]=P.useState(null),b=async()=>{const z=await Us();e(z),r(!1)};P.useEffect(()=>{b()},[]);const I=async z=>{if(z.preventDefault(),!(!s.code||!s.name)){f(!0);try{await H_(s.code.toUpperCase(),s.name,s.category),a({code:"",name:"",category:"food"}),await b()}catch(W){console.error("Error creating business:",W),alert("Error creating business")}f(!1)}},T=async(z,W)=>{await S8(z,!W),await b()},M=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){v(!0);try{for(const z of e9)n.find(A=>A.code===z.code)||await H_(z.code,z.name,z.category);await b(),alert("Businesses seeded successfully!")}catch(z){console.error("Error seeding:",z),alert("Error seeding businesses")}v(!1)}},V=z=>{navigator.clipboard.writeText(z),E(z),setTimeout(()=>E(null),2e3)},j="https://harmonicsystems.github.io/kinderbucks/#/checkin/",Q={total:n.length,active:n.filter(z=>z.isActive).length,totalCheckins:n.reduce((z,W)=>z+(W.checkinCount||0),0)};return t?l.jsx(ln,{title:"Business Directory",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"Business Directory",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Q.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:Q.active}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:Q.totalCheckins}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Iw,{size:20})," Add Business"]}),l.jsxs("form",{onSubmit:I,children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),l.jsx("input",{type:"text",value:s.code,onChange:z=>a(W=>({...W,code:z.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),l.jsx("input",{type:"text",value:s.name,onChange:z=>a(W=>({...W,name:z.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),l.jsx("select",{value:s.category,onChange:z=>a(W=>({...W,category:z.target.value})),style:{width:"100%"},children:Object.entries(Cm).map(([z,W])=>l.jsx("option",{value:z,children:W.label},z))})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Iw,{size:18})," ",c?"Adding...":"Add Business"]}),l.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:M,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Hy,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Vt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(Vt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(z=>{const W=Cm[z.category]||Cm.services,A=W.Icon,C=`${j}${z.code}`;return l.jsxs("div",{style:{background:z.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${z.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:z.isActive?1:.7},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:`${W.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(A,{size:24,color:W.color})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",color:z.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:z.name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[l.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:z.code}),l.jsx("span",{style:{fontSize:"0.85rem",color:W.color},children:W.label})]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[l.jsx(Fs,{size:16}),z.checkinCount||0]}),l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsxs(le,{to:`/admin/businesses/${z.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(y4,{size:16})," Details"]}),l.jsx("button",{onClick:()=>m(d===z.code?null:z.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:l.jsx(Kr,{size:16})}),l.jsxs("button",{onClick:()=>T(z.code,z.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:z.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[z.isActive?l.jsx(gV,{size:16}):l.jsx(pV,{size:16}),z.isActive?"Deactivate":"Activate"]})]})]})]}),d===z.code&&l.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{textAlign:"center"},children:l.jsx(il,{value:C,size:150,denomination:5,showFrame:!1})}),l.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("input",{type:"text",value:C,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),l.jsxs("button",{onClick:()=>V(C),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx($y,{size:16}),_===C?"Copied!":"Copy"]})]}),l.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},z.code)})})]})]})}const n9={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En};function r9(){const[n,e]=P.useState([]),[t,r]=P.useState(!0),[s,a]=P.useState("all"),[c,f]=P.useState(null),d=async()=>{try{const b=js(bn(qe,"exchanges"),tl("createdAt","desc")),I=await vr(b);e(I.docs.map(T=>({id:T.id,...T.data()}))),r(!1)}catch(b){console.error("Error loading exchanges:",b),r(!1)}};P.useEffect(()=>{d()},[]);const m=async(b,I)=>{f(b);try{await Jr(Ut(qe,"exchanges",b),{status:I,processedAt:Dt()}),await d()}catch(T){console.error("Error updating exchange:",T),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(b=>b.status===s),v={total:n.length,pending:n.filter(b=>b.status==="pending").length,completed:n.filter(b=>b.status==="completed").length,cancelled:n.filter(b=>b.status==="cancelled").length,totalValue:n.filter(b=>b.status==="completed").reduce((b,I)=>b+(I.kinderbucksAmount||0),0)},_=b=>{switch(b){case"completed":return l.jsx(Yr,{size:18,color:"var(--kb-green)"});case"pending":return l.jsx(wr,{size:18,color:"#e67e22"});case"cancelled":return l.jsx(XD,{size:18,color:"#e74c3c"});default:return l.jsx(Wy,{size:18,color:"var(--kb-gray-400)"})}},E=b=>{switch(b){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?l.jsx(ln,{title:"Exchange Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):l.jsxs(ln,{title:"Exchange Management",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:v.pending}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:v.completed}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",v.totalValue.toFixed(0)]}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),l.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${v.total})`},{value:"pending",label:`Pending (${v.pending})`},{value:"completed",label:`Completed (${v.completed})`},{value:"cancelled",label:`Cancelled (${v.cancelled})`}].map(b=>l.jsx("button",{onClick:()=>a(b.value),className:s===b.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:b.label},b.value))}),l.jsx("div",{className:"card",children:g.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(gf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[l.jsx("div",{children:"Date"}),l.jsx("div",{children:"Amount"}),l.jsx("div",{children:"Tier & Bonus"}),l.jsx("div",{children:"Status"}),l.jsx("div",{children:"Actions"})]}),g.map(b=>{var T,M,V,j,Q,z,W;const I=n9[b.tier]||Xt;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:b.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((V=(M=(T=b.createdAt)==null?void 0:T.toDate)==null?void 0:M.call(T))==null?void 0:V.toLocaleDateString())||"Unknown"}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((z=(Q=(j=b.createdAt)==null?void 0:j.toDate)==null?void 0:Q.call(j))==null?void 0:z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",b.usdAmount," USD"]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(W=b.kinderbucksAmount)==null?void 0:W.toFixed(2)," KB"]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(I,{size:18,color:"var(--kb-gray-500)"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:b.tier||"curious"}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((b.bonusRate||.1)*100),"% bonus"]})]})]}),l.jsx("div",{children:l.jsxs("span",{className:"badge",style:{...E(b.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[_(b.status),b.status]})}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>m(b.id,"completed"),disabled:c===b.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===b.id?"...":"Approve"}),l.jsx("button",{onClick:()=>m(b.id,"cancelled"),disabled:c===b.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),b.status==="completed"&&l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),b.status==="cancelled"&&l.jsx("button",{onClick:()=>m(b.id,"pending"),disabled:c===b.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},b.id)})]})})]})}const Am={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En},Rm={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function i9(){const[n,e]=P.useState([]),[t,r]=P.useState([]),[s,a]=P.useState(!0),[c,f]=P.useState("checkins"),[d,m]=P.useState("all");P.useEffect(()=>{async function b(){try{const T=(await vr(bn(qe,"members"))).docs.map(V=>({id:V.id,...V.data()})),M=await Us();e(T),r(M),a(!1)}catch(I){console.error("Error loading members:",I),a(!1)}}b()},[]);const g=b=>{const I=t.find(T=>T.code===b);return I?I.name:b},v=[...n].sort((b,I)=>{var T,M,V,j,Q,z;switch(c){case"checkins":return(I.totalCheckins||0)-(b.totalCheckins||0);case"businesses":return(((T=I.businessesVisited)==null?void 0:T.length)||0)-(((M=b.businessesVisited)==null?void 0:M.length)||0);case"recent":const W=((j=(V=b.lastCheckin)==null?void 0:V.toDate)==null?void 0:j.call(V))||new Date(0);return(((z=(Q=I.lastCheckin)==null?void 0:Q.toDate)==null?void 0:z.call(Q))||new Date(0))-W;default:return 0}}),_=d==="all"?v:v.filter(b=>b.tier===d),E={total:n.length,curious:n.filter(b=>b.tier==="curious").length,hooked:n.filter(b=>b.tier==="hooked").length,lineAndSinker:n.filter(b=>b.tier==="lineAndSinker").length,patron:n.filter(b=>b.tier==="patron").length,totalCheckins:n.reduce((b,I)=>b+(I.totalCheckins||0),0)};return s?l.jsx(ln,{title:"Member Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):l.jsxs(ln,{title:"Member Management",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:E.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Am).map(([b,I])=>{var T;return l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(I,{size:20,color:Rm[b]}),l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Rm[b]},children:E[b]})]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((T=Jn[b])==null?void 0:T.name)||b})]},b)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Am).map(([b,I])=>l.jsx("button",{onClick:()=>m(b),className:d===b?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:l.jsx(I,{size:16})},b))]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),l.jsxs("select",{value:c,onChange:b=>f(b.target.value),style:{padding:"0.5rem"},children:[l.jsx("option",{value:"checkins",children:"Most Check-ins"}),l.jsx("option",{value:"businesses",children:"Most Businesses"}),l.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),l.jsx("div",{className:"card",children:_.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No members found"})]}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[l.jsx("div",{children:"Member"}),l.jsx("div",{children:"Tier"}),l.jsx("div",{children:"Activity"}),l.jsx("div",{children:"Businesses Visited"})]}),_.map(b=>{var j,Q,z,W,A;const I=Am[b.tier]||Xt,T=Rm[b.tier]||"#888",M=Jn[b.tier]||Jn.curious,V=((j=b.businessesVisited)==null?void 0:j.length)||0;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[b.id.substring(0,16),"..."]}),b.lastCheckin&&l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[l.jsx(yf,{size:12}),"Last: ",((W=(z=(Q=b.lastCheckin)==null?void 0:Q.toDate)==null?void 0:z.call(Q))==null?void 0:W.toLocaleDateString())||"Unknown"]})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:T,fontWeight:"600"},children:[l.jsx(I,{size:20}),M.name]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(M.bonus*100),"% bonus"]})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Fs,{size:16}),b.totalCheckins||0]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[l.jsx(Mo,{size:14}),l.jsx("span",{style:{fontWeight:"500"},children:V}),l.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=b.businessesVisited)==null?void 0:A.length)>0&&l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[b.businessesVisited.slice(0,3).map(C=>l.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(C)},C)),b.businessesVisited.length>3&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",b.businessesVisited.length-3," more"]})]})]})]},b.id)})]})}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",l.jsx("strong",{children:E.totalCheckins})," check-ins across ",l.jsx("strong",{children:E.total})," members"]})]})}const Pm={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Mh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Vt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:$a,description:"Regular member"}};function s9(){const[n,e]=P.useState([]),[t,r]=P.useState([]),[s,a]=P.useState(!0),[c,f]=P.useState(""),[d,m]=P.useState("all"),[g,v]=P.useState(null),[_,E]=P.useState(null),[b,I]=P.useState(""),T=async()=>{const[W,A]=await Promise.all([CD(),Us()]);e(W),r(A),a(!1)};P.useEffect(()=>{T()},[]);const M=async(W,A)=>{try{await TD(W,A),I("Role updated successfully"),setTimeout(()=>I(""),3e3),await T(),v(null)}catch(C){console.error("Error updating role:",C),alert("Error updating role")}},V=async(W,A)=>{try{await ID(W,A),I("Business assigned successfully"),setTimeout(()=>I(""),3e3),await T(),E(null)}catch(C){console.error("Error assigning business:",C),alert("Error assigning business")}},j=n.filter(W=>{var N,O;const A=((N=W.email)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))||((O=W.displayName)==null?void 0:O.toLowerCase().includes(c.toLowerCase())),C=d==="all"||W.role===d;return A&&C}),Q={total:n.length,admins:n.filter(W=>W.role==="admin").length,businesses:n.filter(W=>W.role==="business").length,members:n.filter(W=>W.role==="member").length},z=W=>W?(W.toDate?W.toDate():new Date(W)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?l.jsx(ln,{title:"User Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"User Management",children:[b&&l.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[l.jsx(Yr,{size:20}),l.jsx("span",{children:b})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Q.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:Q.admins}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:Q.businesses}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:Q.members}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),l.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[l.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[l.jsx(Y4,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:W=>f(W.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),l.jsxs("select",{value:d,onChange:W=>m(W.target.value),style:{minWidth:"150px"},children:[l.jsx("option",{value:"all",children:"All Roles"}),l.jsx("option",{value:"admin",children:"Admins"}),l.jsx("option",{value:"business",children:"Businesses"}),l.jsx("option",{value:"member",children:"Members"})]})]})}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(_r,{size:20})," All Users (",j.length,")"]}),j.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No users found"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:j.map(W=>{const A=Pm[W.role]||Pm.member,C=A.Icon;return l.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(C,{size:24,color:A.color})}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[W.displayName||"Unnamed User",W.role==="admin"&&l.jsx(En,{size:16,color:"#c9a227"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[l.jsx(eS,{size:14}),W.email]}),W.businessCode&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[l.jsx(Vt,{size:14}),W.businessCode]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[l.jsx(yf,{size:14}),z(W.lastLogin)]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:()=>v(g===W.id?null:W.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:l.jsx(m4,{size:18})}),g===W.id&&l.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[l.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Pm).map(([N,O])=>l.jsxs("button",{onClick:()=>M(W.id,N),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:W.role===N?O.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[l.jsx(O.Icon,{size:16,color:O.color}),O.label,W.role===N&&l.jsx(Yr,{size:14,color:O.color,style:{marginLeft:"auto"}})]},N)),W.role==="business"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),l.jsxs("button",{onClick:()=>{v(null),E(W.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[l.jsx(Vt,{size:16}),"Assign Business"]})]})]})]})]})]})},W.id)})})]}),_&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),l.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(W=>l.jsxs("button",{onClick:()=>V(_,W.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[l.jsx(Vt,{size:18,color:"var(--kb-navy)"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:W.name}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:W.code})]})]},W.code))}),l.jsx("button",{onClick:()=>E(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}const Q_={curious:Xt,hooked:er,lineAndSinker:Zr,patron:En},Y_={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function o9(){const{businessCode:n}=Og(),[e,t]=P.useState(null),[r,s]=P.useState([]),[a,c]=P.useState(!0),[f,d]=P.useState(!1);P.useEffect(()=>{async function I(){const[T,M]=await Promise.all([E0(n),r2(n)]);t(T),s(M),c(!1)}I()},[n]);const m=()=>{const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(I),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(I=>{var V;const T=(V=I.timestamp)!=null&&V.toDate?I.timestamp.toDate():new Date(I.timestamp),M=new Date;return T.toDateString()===M.toDateString()}).length,v=r.filter(I=>{var V;const T=(V=I.timestamp)!=null&&V.toDate?I.timestamp.toDate():new Date(I.timestamp),M=new Date;return M.setDate(M.getDate()-7),T>M}).length,_=new Set(r.map(I=>I.visitorId)).size,E=r.reduce((I,T)=>{const M=T.memberTier||"curious";return I[M]=(I[M]||0)+1,I},{});if(a)return l.jsx(ln,{title:"Business Details",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return l.jsx(ln,{title:"Business Details",children:l.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[l.jsx(Vt,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),l.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),l.jsx(le,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const b=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return l.jsxs(ln,{title:"Business Details",children:[l.jsxs(le,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[l.jsx(LD,{size:16})," Back to Directory"]}),l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),l.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),l.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[l.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:l.jsx(il,{value:b,size:120,showFrame:!1})}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[l.jsx($y,{size:14})," ",f?"Copied!":"Copy URL"]}),l.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[l.jsx(Hy,{size:14})," Print"]})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Fs,{size:22,color:"var(--kb-green)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(wr,{size:22,color:"#3498db"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(yf,{size:22,color:"#9b59b6"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:v}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_r,{size:22,color:"var(--kb-gold-dark)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:_}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(E).length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(I=>{const T=E[I]||0;if(T===0&&!E[I])return null;const M=Q_[I],V=Y_[I],j={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},Q=Math.max(...Object.values(E),1),z=T/Q*100;return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(M,{size:18,color:V}),l.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:j[I]})]}),l.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:T})]}),l.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${z}%`,height:"100%",background:V,borderRadius:"4px"}})})]},I)}).filter(Boolean)})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsx("input",{type:"text",value:b,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),l.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),l.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[l.jsx("li",{children:"Customer scans QR code with phone"}),l.jsx("li",{children:"App shows verification code + bonus %"}),l.jsx("li",{children:"Customer shows screen to cashier"}),l.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(wr,{size:20})," Recent Check-ins"]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No check-ins recorded yet"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((I,T)=>{var Q,z;const M=(Q=I.timestamp)!=null&&Q.toDate?I.timestamp.toDate():new Date(I.timestamp),V=Q_[I.memberTier]||Xt,j=Y_[I.memberTier]||"#6b7280";return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Yr,{size:18,color:"white"})}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",I.memberTier&&l.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:j,background:`${j}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[l.jsx(V,{size:12}),I.memberTier]})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(z=I.visitorId)==null?void 0:z.substring(0,8),"..."]})]})]}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:M.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},I.id||T)})})]})]})}const a9="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0",l9={lat:42.3944,lng:-73.7059},i2={"BROADST-BAGEL":{address:"4 Broad St, Kinderhook, NY 12106",location:{lat:42.39505,lng:-73.70715},phone:"(518) 758-1133",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},MORNINGBIRD:{address:"19 Hudson St, Kinderhook, NY 12106",location:{lat:42.39328,lng:-73.70528},phone:"(518) 758-1866",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},AVIARY:{address:"12 Hudson St, Kinderhook, NY 12106",location:{lat:42.39412,lng:-73.70578},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},SAISONNIER:{address:"4 Hudson St, Kinderhook, NY 12106",location:{lat:42.39468,lng:-73.70615},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROOKLYN-PIZZA":{address:"15 Chatham St, Kinderhook, NY 12106",location:{lat:42.39558,lng:-73.70825},phone:"(518) 758-6555",hours:{monday:"11:00 AM - 9:00 PM",tuesday:"11:00 AM - 9:00 PM",wednesday:"11:00 AM - 9:00 PM",thursday:"11:00 AM - 9:00 PM",friday:"11:00 AM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"12:00 PM - 9:00 PM"}},"OK-PANTRY":{address:"7 Hudson St, Kinderhook, NY 12106",location:{lat:42.39435,lng:-73.70555},hours:{monday:"10:00 AM - 6:00 PM",tuesday:"10:00 AM - 6:00 PM",wednesday:"10:00 AM - 6:00 PM",thursday:"10:00 AM - 6:00 PM",friday:"10:00 AM - 6:00 PM",saturday:"10:00 AM - 5:00 PM",sunday:"Closed"}},BOOKS:{address:"8 Broad St, Kinderhook, NY 12106",location:{lat:42.39525,lng:-73.70695},hours:{monday:"Closed",tuesday:"11:00 AM - 5:00 PM",wednesday:"11:00 AM - 5:00 PM",thursday:"11:00 AM - 5:00 PM",friday:"11:00 AM - 5:00 PM",saturday:"11:00 AM - 5:00 PM",sunday:"12:00 PM - 4:00 PM"}},ISOLA:{address:"13 Hudson St, Kinderhook, NY 12106",location:{lat:42.39385,lng:-73.70545},hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"OLD-DUTCH":{address:"4 Albany Ave, Kinderhook, NY 12106",location:{lat:42.39595,lng:-73.70632},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"340 Sunset Ave, Kinderhook, NY 12106",location:{lat:42.40125,lng:-73.69865},hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"BOTTLE-SHOP":{address:"6 Broad St, Kinderhook, NY 12106",location:{lat:42.39515,lng:-73.70705},hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},HAMRAHS:{address:"1 Albany Ave, Kinderhook, NY 12106",location:{lat:42.39545,lng:-73.70658},hours:{monday:"Closed",tuesday:"11:00 AM - 8:00 PM",wednesday:"11:00 AM - 8:00 PM",thursday:"11:00 AM - 8:00 PM",friday:"11:00 AM - 9:00 PM",saturday:"11:00 AM - 9:00 PM",sunday:"11:00 AM - 8:00 PM"}}};function ys(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const a=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!a||a.length<2)return null;const c=t.getHours(),f=t.getMinutes(),d=c*60+f,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const v=parseInt(m[2]),_=m[3].toUpperCase();_==="PM"&&g!==12&&(g+=12),_==="AM"&&g===12&&(g=0);const E=g*60+v,b=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(b&&b.length>=2){const I=b[b.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(I){let T=parseInt(I[1]);const M=parseInt(I[2]),V=I[3].toUpperCase();V==="PM"&&T!==12&&(T+=12),V==="AM"&&T===12&&(T=0);const j=T*60+M;return d>=E&&d<j}}}return null}function s2(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}function c9({businesses:n=[],onBusinessClick:e,showOpenOnly:t=!1}){const r=P.useRef(null),s=P.useRef(null),a=P.useRef([]),[c,f]=P.useState(null),[d,m]=P.useState(!1),[g,v]=P.useState(null),_=n.map(b=>({...b,...i2[b.code]})).filter(b=>b.location),E=t?_.filter(b=>ys(b.hours)):_;return P.useEffect(()=>{var I;if((I=window.google)!=null&&I.maps){m(!0);return}const b=document.createElement("script");return b.src=`https://maps.googleapis.com/maps/api/js?key=${a9}&libraries=places`,b.async=!0,b.defer=!0,b.onload=()=>m(!0),b.onerror=()=>v("Failed to load Google Maps"),document.head.appendChild(b),()=>{}},[]),P.useEffect(()=>{if(!(!d||!r.current||s.current))try{s.current=new window.google.maps.Map(r.current,{center:l9,zoom:17,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0})}catch{v("Failed to initialize map")}},[d]),P.useEffect(()=>{!s.current||!d||(a.current.forEach(b=>b.setMap(null)),a.current=[],E.forEach(b=>{const I=ys(b.hours),T=new window.google.maps.Marker({position:b.location,map:s.current,title:b.name,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:I===!0?"#27ae60":I===!1?"#95a5a6":"#c9a227",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}});T.addListener("click",()=>{f(b),e&&e(b)}),a.current.push(T)}))},[E,d,e]),g?l.jsxs("div",{style:{background:"var(--kb-gray-100)",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[l.jsx(Mo,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:g})]}):l.jsxs("div",{style:{position:"relative"},children:[l.jsx("div",{ref:r,style:{width:"100%",height:"400px",borderRadius:"12px",overflow:"hidden",background:"var(--kb-gray-100)"},children:!d&&l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--kb-gray-500)"},children:"Loading map..."})}),l.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",marginTop:"1rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#27ae60"}}),"Open Now"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#95a5a6"}}),"Closed"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#c9a227"}}),"Hours Unknown"]})]}),c&&l.jsxs("div",{style:{position:"absolute",bottom:"60px",left:"50%",transform:"translateX(-50%)",background:"white",borderRadius:"12px",padding:"1rem 1.25rem",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:"280px",maxWidth:"90%",zIndex:10},children:[l.jsx("button",{onClick:()=>f(null),style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--kb-gray-400)"},children:""}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:ys(c.hours)?"#27ae60":"#95a5a6"}}),l.jsx("span",{style:{fontSize:"0.75rem",color:ys(c.hours)?"#27ae60":"var(--kb-gray-500)",fontWeight:"600"},children:ys(c.hours)?"OPEN NOW":"CLOSED"})]}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.1rem"},children:c.name}),c.address&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[l.jsx(Mo,{size:14}),c.address]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"1rem"},children:[l.jsx(wr,{size:14}),s2(c.hours)]}),c.address&&l.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(c.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.85rem",padding:"0.5rem"},children:[l.jsx(tS,{size:14})," Get Directions"]})]})]})}const u9=42.3944,d9=-73.7059,X_={0:{icon:Aw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Aw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:Gd,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:Gd,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:Gd,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:Gd,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:vi,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:vi,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:vi,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:vi,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:vi,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:vi,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Ca,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Ca,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Ca,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Ca,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:vi,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:vi,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:vi,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Ca,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Ca,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:um,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:um,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:um,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function h9({compact:n=!1}){const[e,t]=P.useState(null),[r,s]=P.useState(!0),[a,c]=P.useState(null);if(P.useEffect(()=>{async function m(){try{const v=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${u9}&longitude=${d9}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!v.ok)throw new Error("Weather fetch failed");const _=await v.json();t({temp:Math.round(_.current.temperature_2m),humidity:_.current.relative_humidity_2m,windSpeed:Math.round(_.current.wind_speed_10m),code:_.current.weather_code}),s(!1)}catch(v){console.error("Weather error:",v),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return l.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(a||!e)return null;const f=X_[e.code]||X_[0],d=f.icon;return n?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[l.jsx(d,{size:24}),l.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),l.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:f.description})]}):l.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),l.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),l.jsx(d,{size:56,strokeWidth:1.5})]}),l.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:f.description}),l.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem",opacity:.9,marginBottom:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(f4,{size:14})," ",e.humidity,"%"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(SV,{size:14})," ",e.windSpeed," mph"]})]}),l.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:f.suggestion})]})}function f9(){const[n,e]=P.useState([]),[t,r]=P.useState(!0),[s,a]=P.useState(!1),[c,f]=P.useState("all"),[d,m]=P.useState(!1);P.useEffect(()=>{async function T(){const M=await Us();e(M.filter(V=>V.isActive)),r(!1)}T()},[]);const g=n.map(T=>({...T,...i2[T.code]})),v=g.filter(T=>!(!T.location||s&&!ys(T.hours)||c!=="all"&&T.category!==c)),_=g.filter(T=>T.location&&ys(T.hours)),E=()=>{const M=new Date().toLocaleDateString("en-US",{weekday:"long"}),V=_.map(j=>j.name).join(", ");return`What's open in Kinderhook this ${M}? ${_.length} businesses are ready to serve you: ${V}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},b=async()=>{const T=E();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:T})}catch{}else navigator.clipboard.writeText(T),m(!0),setTimeout(()=>m(!1),2e3)},I=[{key:"all",label:"All"},{key:"food",label:"Food & Drink"},{key:"retail",label:"Retail"},{key:"services",label:"Services"},{key:"arts",label:"Arts & Culture"}];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Vn,{}),l.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),l.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),l.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(200px, 300px) 1fr",gap:"1rem",marginBottom:"2rem"},children:[l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:l.jsx(h9,{})}),l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx(wr,{size:20}),l.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),l.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[_.length," Businesses"]}),l.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),l.jsxs("button",{onClick:b,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d?l.jsx(Yr,{size:18}):l.jsx(Z4,{size:18}),d?"Copied!":"Share"]})]})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem"},children:[l.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:I.map(T=>l.jsx("button",{onClick:()=>f(T.key),className:"btn",style:{padding:"0.5rem 1rem",fontSize:"0.85rem",background:c===T.key?"var(--kb-navy)":"white",color:c===T.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:T.label},T.key))}),l.jsxs("button",{onClick:()=>a(!s),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",fontSize:"0.85rem",background:s?"var(--kb-green)":"white",color:s?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[l.jsx(x4,{size:16}),s?"Showing Open Only":"Show Open Only"]})]}),l.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"2rem"},children:t?l.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):l.jsx(c9,{businesses:c==="all"?n:n.filter(T=>T.category===c),showOpenOnly:s})}),l.jsxs("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:[s?"Open Now":"All Businesses"," (",v.length,")"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:v.map((T,M)=>{const V=ys(T.hours),j=s2(T.hours);return l.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:M*.05},className:"card",style:{padding:"1.25rem"},children:[l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:V?"#27ae60":"#95a5a6"}}),l.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:V?"#27ae60":"var(--kb-gray-500)"},children:V?"OPEN NOW":"CLOSED"})]}),l.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:T.name})]}),T.address&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[l.jsx(Mo,{size:14}),T.address]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[l.jsx(wr,{size:14}),"Today: ",j]}),T.phone&&l.jsxs("a",{href:`tel:${T.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[l.jsx(F4,{size:14}),T.phone]}),T.address&&l.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(T.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[l.jsx(tS,{size:14})," Get Directions"]})]},T.code)})}),v.length===0&&!t&&l.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[l.jsx(Vt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No businesses match your filters"}),l.jsx("button",{onClick:()=>{a(!1),f("all")},className:"btn btn-secondary",style:{marginTop:"1rem"},children:"Clear Filters"})]})]})]}),l.jsx(Ln,{})]})}function p9(){return l.jsx(RD,{children:l.jsx(WC,{children:l.jsxs(xC,{children:[l.jsx(pt,{path:"/",element:l.jsx(a8,{})}),l.jsx(pt,{path:"/about",element:l.jsx(_8,{})}),l.jsx(pt,{path:"/benefits",element:l.jsx(b8,{})}),l.jsx(pt,{path:"/businesses",element:l.jsx(T8,{})}),l.jsx(pt,{path:"/map",element:l.jsx(f9,{})}),l.jsx(pt,{path:"/exchange",element:l.jsx(A8,{})}),l.jsx(pt,{path:"/login",element:l.jsx(j8,{})}),l.jsx(pt,{path:"/account",element:l.jsx(R8,{})}),l.jsx(pt,{path:"/profile",element:l.jsx(P8,{})}),l.jsx(pt,{path:"/card",element:l.jsx(D8,{})}),l.jsx(pt,{path:"/scan/:serial",element:l.jsx(U8,{})}),l.jsx(pt,{path:"/checkin/:businessCode",element:l.jsx(Q8,{})}),l.jsx(pt,{path:"/business/dashboard",element:l.jsx(xi,{allowedRoles:["business","admin"],children:l.jsx(Y8,{})})}),l.jsx(pt,{path:"/admin/dashboard",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(X8,{})})}),l.jsx(pt,{path:"/admin/exchanges",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(r9,{})})}),l.jsx(pt,{path:"/admin/members",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(i9,{})})}),l.jsx(pt,{path:"/admin/generate",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(J8,{})})}),l.jsx(pt,{path:"/admin/issue",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(Z8,{})})}),l.jsx(pt,{path:"/admin/businesses",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(t9,{})})}),l.jsx(pt,{path:"/admin/businesses/:businessCode",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(o9,{})})}),l.jsx(pt,{path:"/admin/users",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(s9,{})})})]})})})}_I.createRoot(document.getElementById("root")).render(l.jsx(P.StrictMode,{children:l.jsx(p9,{})}));
