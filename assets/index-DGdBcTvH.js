(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function JI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fp={exports:{}},hc={},zp={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function ZI(){if(S1)return je;S1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function I(U,ee,Ce){this.props=U,this.context=ee,this.refs=C,this.updater=Ce||T}I.prototype.isReactComponent={},I.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function V(){}V.prototype=I.prototype;function B(U,ee,Ce){this.props=U,this.context=ee,this.refs=C,this.updater=Ce||T}var P=B.prototype=new V;P.constructor=B,k(P,I.prototype),P.isPureReactComponent=!0;var G=Array.isArray,$=Object.prototype.hasOwnProperty,H={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function b(U,ee,Ce){var Ae,Ve={},Me=null,Ge=null;if(ee!=null)for(Ae in ee.ref!==void 0&&(Ge=ee.ref),ee.key!==void 0&&(Me=""+ee.key),ee)$.call(ee,Ae)&&!A.hasOwnProperty(Ae)&&(Ve[Ae]=ee[Ae]);var Ue=arguments.length-2;if(Ue===1)Ve.children=Ce;else if(1<Ue){for(var Xe=Array(Ue),cn=0;cn<Ue;cn++)Xe[cn]=arguments[cn+2];Ve.children=Xe}if(U&&U.defaultProps)for(Ae in Ue=U.defaultProps,Ue)Ve[Ae]===void 0&&(Ve[Ae]=Ue[Ae]);return{$$typeof:n,type:U,key:Me,ref:Ge,props:Ve,_owner:H.current}}function j(U,ee){return{$$typeof:n,type:U.type,key:ee,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ce){return ee[Ce]})}var W=/\/+/g;function M(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):ee.toString(36)}function Ne(U,ee,Ce,Ae,Ve){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var Ge=!1;if(U===null)Ge=!0;else switch(Me){case"string":case"number":Ge=!0;break;case"object":switch(U.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=U,Ve=Ve(Ge),U=Ae===""?"."+M(Ge,0):Ae,G(Ve)?(Ce="",U!=null&&(Ce=U.replace(W,"$&/")+"/"),Ne(Ve,ee,Ce,"",function(cn){return cn})):Ve!=null&&(L(Ve)&&(Ve=j(Ve,Ce+(!Ve.key||Ge&&Ge.key===Ve.key?"":(""+Ve.key).replace(W,"$&/")+"/")+U)),ee.push(Ve)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",G(U))for(var Ue=0;Ue<U.length;Ue++){Me=U[Ue];var Xe=Ae+M(Me,Ue);Ge+=Ne(Me,ee,Ce,Xe,Ve)}else if(Xe=_(U),typeof Xe=="function")for(U=Xe.call(U),Ue=0;!(Me=U.next()).done;)Me=Me.value,Xe=Ae+M(Me,Ue++),Ge+=Ne(Me,ee,Ce,Xe,Ve);else if(Me==="object")throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ge}function He(U,ee,Ce){if(U==null)return U;var Ae=[],Ve=0;return Ne(U,Ae,"","",function(Me){return ee.call(Ce,Me,Ve++)}),Ae}function _t(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(Ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ce)},function(Ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ce)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var Se={current:null},ie={transition:null},pe={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:H};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:He,forEach:function(U,ee,Ce){He(U,function(){ee.apply(this,arguments)},Ce)},count:function(U){var ee=0;return He(U,function(){ee++}),ee},toArray:function(U){return He(U,function(ee){return ee})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},je.Component=I,je.Fragment=t,je.Profiler=s,je.PureComponent=B,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,je.act=ae,je.cloneElement=function(U,ee,Ce){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=k({},U.props),Ve=U.key,Me=U.ref,Ge=U._owner;if(ee!=null){if(ee.ref!==void 0&&(Me=ee.ref,Ge=H.current),ee.key!==void 0&&(Ve=""+ee.key),U.type&&U.type.defaultProps)var Ue=U.type.defaultProps;for(Xe in ee)$.call(ee,Xe)&&!A.hasOwnProperty(Xe)&&(Ae[Xe]=ee[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ee[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=Ce;else if(1<Xe){Ue=Array(Xe);for(var cn=0;cn<Xe;cn++)Ue[cn]=arguments[cn+2];Ae.children=Ue}return{$$typeof:n,type:U.type,key:Ve,ref:Me,props:Ae,_owner:Ge}},je.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},je.createElement=b,je.createFactory=function(U){var ee=b.bind(null,U);return ee.type=U,ee},je.createRef=function(){return{current:null}},je.forwardRef=function(U){return{$$typeof:f,render:U}},je.isValidElement=L,je.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:_t}},je.memo=function(U,ee){return{$$typeof:m,type:U,compare:ee===void 0?null:ee}},je.startTransition=function(U){var ee=ie.transition;ie.transition={};try{U()}finally{ie.transition=ee}},je.unstable_act=ae,je.useCallback=function(U,ee){return Se.current.useCallback(U,ee)},je.useContext=function(U){return Se.current.useContext(U)},je.useDebugValue=function(){},je.useDeferredValue=function(U){return Se.current.useDeferredValue(U)},je.useEffect=function(U,ee){return Se.current.useEffect(U,ee)},je.useId=function(){return Se.current.useId()},je.useImperativeHandle=function(U,ee,Ce){return Se.current.useImperativeHandle(U,ee,Ce)},je.useInsertionEffect=function(U,ee){return Se.current.useInsertionEffect(U,ee)},je.useLayoutEffect=function(U,ee){return Se.current.useLayoutEffect(U,ee)},je.useMemo=function(U,ee){return Se.current.useMemo(U,ee)},je.useReducer=function(U,ee,Ce){return Se.current.useReducer(U,ee,Ce)},je.useRef=function(U){return Se.current.useRef(U)},je.useState=function(U){return Se.current.useState(U)},je.useSyncExternalStore=function(U,ee,Ce){return Se.current.useSyncExternalStore(U,ee,Ce)},je.useTransition=function(){return Se.current.useTransition()},je.version="18.3.1",je}var b1;function Cg(){return b1||(b1=1,zp.exports=ZI()),zp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function e2(){if(I1)return hc;I1=1;var n=Cg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(f,d,m){var g,v={},_=null,T=null;m!==void 0&&(_=""+m),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:f,key:_,ref:T,props:v,_owner:s.current}}return hc.Fragment=t,hc.jsx=l,hc.jsxs=l,hc}var C1;function t2(){return C1||(C1=1,Fp.exports=e2()),Fp.exports}var c=t2(),N=Cg();const Nt=JI(N);var Ld={},Up={exports:{}},xn={},$p={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function n2(){return A1||(A1=1,(function(n){function e(ie,pe){var ae=ie.length;ie.push(pe);e:for(;0<ae;){var U=ae-1>>>1,ee=ie[U];if(0<s(ee,pe))ie[U]=pe,ie[ae]=ee,ae=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var pe=ie[0],ae=ie.pop();if(ae!==pe){ie[0]=ae;e:for(var U=0,ee=ie.length,Ce=ee>>>1;U<Ce;){var Ae=2*(U+1)-1,Ve=ie[Ae],Me=Ae+1,Ge=ie[Me];if(0>s(Ve,ae))Me<ee&&0>s(Ge,Ve)?(ie[U]=Ge,ie[Me]=ae,U=Me):(ie[U]=Ve,ie[Ae]=ae,U=Ae);else if(Me<ee&&0>s(Ge,ae))ie[U]=Ge,ie[Me]=ae,U=Me;else break e}}return pe}function s(ie,pe){var ae=ie.sortIndex-pe.sortIndex;return ae!==0?ae:ie.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();n.unstable_now=function(){return l.now()-f}}var d=[],m=[],g=1,v=null,_=3,T=!1,k=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ie){for(var pe=t(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=ie)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=t(m)}}function G(ie){if(C=!1,P(ie),!k)if(t(d)!==null)k=!0,_t($);else{var pe=t(m);pe!==null&&Se(G,pe.startTime-ie)}}function $(ie,pe){k=!1,C&&(C=!1,V(b),b=-1),T=!0;var ae=_;try{for(P(pe),v=t(d);v!==null&&(!(v.expirationTime>pe)||ie&&!O());){var U=v.callback;if(typeof U=="function"){v.callback=null,_=v.priorityLevel;var ee=U(v.expirationTime<=pe);pe=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(d)&&r(d),P(pe)}else r(d);v=t(d)}if(v!==null)var Ce=!0;else{var Ae=t(m);Ae!==null&&Se(G,Ae.startTime-pe),Ce=!1}return Ce}finally{v=null,_=ae,T=!1}}var H=!1,A=null,b=-1,j=5,L=-1;function O(){return!(n.unstable_now()-L<j)}function W(){if(A!==null){var ie=n.unstable_now();L=ie;var pe=!0;try{pe=A(!0,ie)}finally{pe?M():(H=!1,A=null)}}else H=!1}var M;if(typeof B=="function")M=function(){B(W)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,He=Ne.port2;Ne.port1.onmessage=W,M=function(){He.postMessage(null)}}else M=function(){I(W,0)};function _t(ie){A=ie,H||(H=!0,M())}function Se(ie,pe){b=I(function(){ie(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||T||(k=!0,_t($))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(_){case 1:case 2:case 3:var pe=3;break;default:pe=_}var ae=_;_=pe;try{return ie()}finally{_=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,pe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=_;_=ie;try{return pe()}finally{_=ae}},n.unstable_scheduleCallback=function(ie,pe,ae){var U=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?U+ae:U):ae=U,ie){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ae+ee,ie={id:g++,callback:pe,priorityLevel:ie,startTime:ae,expirationTime:ee,sortIndex:-1},ae>U?(ie.sortIndex=ae,e(m,ie),t(d)===null&&ie===t(m)&&(C?(V(b),b=-1):C=!0,Se(G,ae-U))):(ie.sortIndex=ee,e(d,ie),k||T||(k=!0,_t($))),ie},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ie){var pe=_;return function(){var ae=_;_=pe;try{return ie.apply(this,arguments)}finally{_=ae}}}})(Wp)),Wp}var R1;function r2(){return R1||(R1=1,$p.exports=n2()),$p.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function i2(){if(P1)return xn;P1=1;var n=Cg(),e=r2();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function _(i){return d.call(v,i)?!0:d.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function T(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,p){if(o===null||typeof o>"u"||T(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,u,p,y,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){I[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];I[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){I[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){I[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){I[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){I[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){I[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){I[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){I[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),I.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,o,u,p){var y=I.hasOwnProperty(o)?I[o]:null;(y!==null?y.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,y,p)&&(u=null),p||y===null?_(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):y.mustUseProperty?i[y.propertyName]=u===null?y.type===3?!1:"":u:(o=y.attributeName,p=y.attributeNamespace,u===null?i.removeAttribute(o):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),H=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,U;function ee(i){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var Ce=!1;function Ae(i,o){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var y=Y.stack.split(`
`),x=p.stack.split(`
`),S=y.length-1,D=x.length-1;1<=S&&0<=D&&y[S]!==x[D];)D--;for(;1<=S&&0<=D;S--,D--)if(y[S]!==x[D]){if(S!==1||D!==1)do if(S--,D--,0>D||y[S]!==x[D]){var F=`
`+y[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=D);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function Ve(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case H:return"Portal";case j:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case Ne:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case W:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:Me(i.type)||"Memo";case _t:o=i._payload,i=i._init;try{return Me(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function cn(i){var o=Xe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,x=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,x.call(this,S)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Vo(i){i._valueTracker||(i._valueTracker=cn(i))}function vl(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Xe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Ri(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Mo(i,o){var u=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Eu(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Lo(i,o){o=o.checked,o!=null&&P(i,"checked",o,!1)}function Ls(i,o){Lo(i,o);var u=Ue(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Et(i,o.type,u):o.hasOwnProperty("defaultValue")&&Et(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function xl(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Et(i,o,u){(o!=="number"||Ri(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var gt=Array.isArray;function tr(i,o,u,p){if(i=i.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=o.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function wl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function _l(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function ku(i,o){var u=Ue(o.value),p=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Pi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function El(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?El(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ji,Tu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,y){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,y)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(ji=ji||document.createElement("div"),ji.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ji.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Os(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Su=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(i){Su.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Ni[o]=Ni[i]})});function Di(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ni.hasOwnProperty(i)&&Ni[i]?(""+o).trim():o+"px"}function Bo(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=Di(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,y):i[u]=y}}var kl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(i,o){if(o){if(kl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Fo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=null;function zo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qr=null,Yr=null,ht=null;function Tl(i){if(i=Xl(i)){if(typeof Qr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Ju(o),Qr(i.stateNode,i.type,o))}}function Mi(i){Yr?ht?ht.push(i):ht=[i]:Yr=i}function Li(){if(Yr){var i=Yr,o=ht;if(ht=Yr=null,Tl(i),o)for(i=0;i<o.length;i++)Tl(o[i])}}function bu(i,o){return i(o)}function Iu(){}var _r=!1;function Cu(i,o,u){if(_r)return i(o,u);_r=!0;try{return bu(i,o,u)}finally{_r=!1,(Yr!==null||ht!==null)&&(Iu(),Li())}}function Bs(i,o){var u=i.stateNode;if(u===null)return null;var p=Ju(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Oi=!1;if(f)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Oi=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Oi=!1}function Au(i,o,u,p,y,x,S,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(ne){this.onError(ne)}}var Xr=!1,Er=null,Uo=!1,On=null,Ru={onError:function(i){Xr=!0,Er=i}};function Pu(i,o,u,p,y,x,S,D,F){Xr=!1,Er=null,Au.apply(Ru,arguments)}function Sl(i,o,u,p,y,x,S,D,F){if(Pu.apply(this,arguments),Xr){if(Xr){var Y=Er;Xr=!1,Er=null}else throw Error(t(198));Uo||(Uo=!0,On=Y)}}function rr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function bl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ju(i){if(rr(i)!==i)throw Error(t(188))}function Nu(i){var o=i.alternate;if(!o){if(o=rr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return ju(y),i;if(x===p)return ju(y),o;x=x.sibling}throw Error(t(188))}if(u.return!==p.return)u=y,p=x;else{for(var S=!1,D=y.child;D;){if(D===u){S=!0,u=y,p=x;break}if(D===p){S=!0,p=y,u=x;break}D=D.sibling}if(!S){for(D=x.child;D;){if(D===u){S=!0,u=x,p=y;break}if(D===p){S=!0,p=x,u=y;break}D=D.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Du(i){return i=Nu(i),i!==null?Fs(i):null}function Fs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Fs(i);if(o!==null)return o;i=i.sibling}return null}var Il=e.unstable_scheduleCallback,$o=e.unstable_cancelCallback,zs=e.unstable_shouldYield,Jr=e.unstable_requestPaint,tt=e.unstable_now,yf=e.unstable_getCurrentPriorityLevel,Wo=e.unstable_ImmediatePriority,Cl=e.unstable_UserBlockingPriority,Us=e.unstable_NormalPriority,Al=e.unstable_LowPriority,Ho=e.unstable_IdlePriority,$s=null,kn=null;function Vu(i){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot($s,i,void 0,(i.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:Ws,kr=Math.log,Bn=Math.LN2;function Ws(i){return i>>>=0,i===0?32:31-(kr(i)/Bn|0)|0}var Tr=64,Fi=4194304;function Ke(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Zr(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes,S=u&268435455;if(S!==0){var D=S&~y;D!==0?p=Ke(D):(x&=S,x!==0&&(p=Ke(x)))}else S=u&~y,S!==0?p=Ke(S):x!==0&&(p=Ke(x));if(p===0)return 0;if(o!==0&&o!==p&&(o&y)===0&&(y=p&-p,x=o&-o,y>=x||y===16&&(x&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-Tn(o),y=1<<u,p|=i[u],o&=~y;return p}function Hs(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ks(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var S=31-Tn(x),D=1<<S,F=y[S];F===-1?((D&u)===0||(D&p)!==0)&&(y[S]=Hs(D,o)):F<=o&&(i.expiredLanes|=D),x&=~D}}function Rl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Pl(){var i=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),i}function jl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function qs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Tn(o),i[o]=u}function vf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Tn(u),x=1<<y;o[y]=0,p[y]=-1,i[y]=-1,u&=~x}}function Nl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-Tn(u),y=1<<p;y&o|i[p]&o&&(i[p]|=o),u&=~y}}var Fe=0;function Sr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Dl,Ko,Vl,Ml,Ll,br=!1,qo=[],Ir=null,Cr=null,Ut=null,Gs=new Map,ei=new Map,Sn=[],Mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zi(i,o){switch(i){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Gs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(o.pointerId)}}function ir(i,o,u,p,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Xl(o),o!==null&&Ko(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function Lu(i,o,u,p,y){switch(o){case"focusin":return Ir=ir(Ir,i,o,u,p,y),!0;case"dragenter":return Cr=ir(Cr,i,o,u,p,y),!0;case"mouseover":return Ut=ir(Ut,i,o,u,p,y),!0;case"pointerover":var x=y.pointerId;return Gs.set(x,ir(Gs.get(x)||null,i,o,u,p,y)),!0;case"gotpointercapture":return x=y.pointerId,ei.set(x,ir(ei.get(x)||null,i,o,u,p,y)),!0}return!1}function Go(i){var o=Js(i.target);if(o!==null){var u=rr(o);if(u!==null){if(o=u.tag,o===13){if(o=bl(u),o!==null){i.blockedOn=o,Ll(i.priority,function(){Vl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Qo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Vi=p,u.target.dispatchEvent(p),Vi=null}else return o=Xl(u),o!==null&&Ko(o),i.blockedOn=u,!1;o.shift()}return!0}function Ou(i,o,u){Je(i)&&u.delete(o)}function xf(){br=!1,Ir!==null&&Je(Ir)&&(Ir=null),Cr!==null&&Je(Cr)&&(Cr=null),Ut!==null&&Je(Ut)&&(Ut=null),Gs.forEach(Ou),ei.forEach(Ou)}function Ui(i,o){i.blockedOn===o&&(i.blockedOn=null,br||(br=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xf)))}function $i(i){function o(y){return Ui(y,i)}if(0<qo.length){Ui(qo[0],i);for(var u=1;u<qo.length;u++){var p=qo[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Ir!==null&&Ui(Ir,i),Cr!==null&&Ui(Cr,i),Ut!==null&&Ui(Ut,i),Gs.forEach(o),ei.forEach(o),u=0;u<Sn.length;u++)p=Sn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sn.length&&(u=Sn[0],u.blockedOn===null);)Go(u),u.blockedOn===null&&Sn.shift()}var ti=G.ReactCurrentBatchConfig,ni=!0;function Ar(i,o,u,p){var y=Fe,x=ti.transition;ti.transition=null;try{Fe=1,Ol(i,o,u,p)}finally{Fe=y,ti.transition=x}}function Bu(i,o,u,p){var y=Fe,x=ti.transition;ti.transition=null;try{Fe=4,Ol(i,o,u,p)}finally{Fe=y,ti.transition=x}}function Ol(i,o,u,p){if(ni){var y=Qo(i,o,u,p);if(y===null)Rf(i,o,p,Rr,u),zi(i,p);else if(Lu(y,i,o,u,p))p.stopPropagation();else if(zi(i,p),o&4&&-1<Mu.indexOf(i)){for(;y!==null;){var x=Xl(y);if(x!==null&&Dl(x),x=Qo(i,o,u,p),x===null&&Rf(i,o,p,Rr,u),x===y)break;y=x}y!==null&&p.stopPropagation()}else Rf(i,o,p,null,u)}}var Rr=null;function Qo(i,o,u,p){if(Rr=null,i=zo(p),i=Js(i),i!==null)if(o=rr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=bl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Rr=i,null}function Yo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yf()){case Wo:return 1;case Cl:return 4;case Us:case Al:return 16;case Ho:return 536870912;default:return 16}default:return 16}}var bn=null,Xo=null,ri=null;function Fu(){if(ri)return ri;var i,o=Xo,u=o.length,p,y="value"in bn?bn.value:bn.textContent,x=y.length;for(i=0;i<u&&o[i]===y[i];i++);var S=u-i;for(p=1;p<=S&&o[u-p]===y[x-p];p++);return ri=y.slice(i,1<p?1-p:void 0)}function Qs(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pr(){return!0}function Bl(){return!1}function Jt(i){function o(u,p,y,x,S){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Pr:Bl,this.isPropagationStopped=Bl,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),o}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=Jt(jr),Wi=ae({},jr,{view:0,detail:0}),Jo=Jt(Wi),Zo,ea,In,Xs=ae({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(Zo=i.screenX-In.screenX,ea=i.screenY-In.screenY):ea=Zo=0,In=i),Zo)},movementY:function(i){return"movementY"in i?i.movementY:ea}}),Fl=Jt(Xs),zu=ae({},Xs,{dataTransfer:0}),Uu=Jt(zu),ta=ae({},Wi,{relatedTarget:0}),$t=Jt(ta),$u=ae({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Jt($u),Hi=ae({},jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Jt(Hi),w=ae({},jr,{data:0}),E=Jt(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Re(){return oe}var yt=ae({},Wi,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(i){return i.type==="keypress"?Qs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Jt(yt),kt=ae({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=Jt(kt),ii=ae({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Nr=Jt(ii),Dr=ae({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),na=Jt(Dr),zl=ae({},Xs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=Jt(zl),qb=[9,13,27,32],wf=f&&"CompositionEvent"in window,Ul=null;f&&"documentMode"in document&&(Ul=document.documentMode);var Gb=f&&"TextEvent"in window&&!Ul,y0=f&&(!wf||Ul&&8<Ul&&11>=Ul),v0=" ",x0=!1;function w0(i,o){switch(i){case"keyup":return qb.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ra=!1;function Qb(i,o){switch(i){case"compositionend":return _0(o);case"keypress":return o.which!==32?null:(x0=!0,v0);case"textInput":return i=o.data,i===v0&&x0?null:i;default:return null}}function Yb(i,o){if(ra)return i==="compositionend"||!wf&&w0(i,o)?(i=Fu(),ri=Xo=bn=null,ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return y0&&o.locale!=="ko"?null:o.data;default:return null}}var Xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Xb[i.type]:o==="textarea"}function k0(i,o,u,p){Mi(p),o=Qu(o,"onChange"),0<o.length&&(u=new Ys("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var $l=null,Wl=null;function Jb(i){z0(i,0)}function Hu(i){var o=la(i);if(vl(o))return i}function Zb(i,o){if(i==="change")return o}var T0=!1;if(f){var _f;if(f){var Ef="oninput"in document;if(!Ef){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Ef=typeof S0.oninput=="function"}_f=Ef}else _f=!1;T0=_f&&(!document.documentMode||9<document.documentMode)}function b0(){$l&&($l.detachEvent("onpropertychange",I0),Wl=$l=null)}function I0(i){if(i.propertyName==="value"&&Hu(Wl)){var o=[];k0(o,Wl,i,zo(i)),Cu(Jb,o)}}function eI(i,o,u){i==="focusin"?(b0(),$l=o,Wl=u,$l.attachEvent("onpropertychange",I0)):i==="focusout"&&b0()}function tI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hu(Wl)}function nI(i,o){if(i==="click")return Hu(o)}function rI(i,o){if(i==="input"||i==="change")return Hu(o)}function iI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:iI;function Hl(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!d.call(o,y)||!sr(i[y],o[y]))return!1}return!0}function C0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function A0(i,o){var u=C0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=C0(u)}}function R0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?R0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function P0(){for(var i=window,o=Ri();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Ri(i.document)}return o}function kf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function sI(i){var o=P0(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&R0(u.ownerDocument.documentElement,u)){if(p!==null&&kf(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var y=u.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!i.extend&&x>p&&(y=p,p=x,x=y),y=A0(u,x);var S=A0(u,p);y&&S&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),i.removeAllRanges(),x>p?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var oI=f&&"documentMode"in document&&11>=document.documentMode,ia=null,Tf=null,Kl=null,Sf=!1;function j0(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Sf||ia==null||ia!==Ri(p)||(p=ia,"selectionStart"in p&&kf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kl&&Hl(Kl,p)||(Kl=p,p=Qu(Tf,"onSelect"),0<p.length&&(o=new Ys("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=ia)))}function Ku(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var sa={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},bf={},N0={};f&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function qu(i){if(bf[i])return bf[i];if(!sa[i])return i;var o=sa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in N0)return bf[i]=o[u];return i}var D0=qu("animationend"),V0=qu("animationiteration"),M0=qu("animationstart"),L0=qu("transitionend"),O0=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(i,o){O0.set(i,o),a(o,[i])}for(var If=0;If<B0.length;If++){var Cf=B0[If],aI=Cf.toLowerCase(),lI=Cf[0].toUpperCase()+Cf.slice(1);Ki(aI,"on"+lI)}Ki(D0,"onAnimationEnd"),Ki(V0,"onAnimationIteration"),Ki(M0,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(L0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function F0(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Sl(p,o,void 0,i),i.currentTarget=null}function z0(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var S=p.length-1;0<=S;S--){var D=p[S],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==x&&y.isPropagationStopped())break e;F0(y,D,Y),x=F}else for(S=0;S<p.length;S++){if(D=p[S],F=D.instance,Y=D.currentTarget,D=D.listener,F!==x&&y.isPropagationStopped())break e;F0(y,D,Y),x=F}}}if(Uo)throw i=On,Uo=!1,On=null,i}function nt(i,o){var u=o[Mf];u===void 0&&(u=o[Mf]=new Set);var p=i+"__bubble";u.has(p)||(U0(o,i,2,!1),u.add(p))}function Af(i,o,u){var p=0;o&&(p|=4),U0(u,i,p,o)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Gl(i){if(!i[Gu]){i[Gu]=!0,r.forEach(function(u){u!=="selectionchange"&&(cI.has(u)||Af(u,!1,i),Af(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Gu]||(o[Gu]=!0,Af("selectionchange",!1,o))}}function U0(i,o,u,p){switch(Yo(o)){case 1:var y=Ar;break;case 4:y=Bu;break;default:y=Ol}u=y.bind(null,o,u,i),y=void 0,!Oi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(o,u,{capture:!0,passive:y}):i.addEventListener(o,u,!0):y!==void 0?i.addEventListener(o,u,{passive:y}):i.addEventListener(o,u,!1)}function Rf(i,o,u,p,y){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;S=S.return}for(;D!==null;){if(S=Js(D),S===null)return;if(F=S.tag,F===5||F===6){p=x=S;continue e}D=D.parentNode}}p=p.return}Cu(function(){var Y=x,ne=zo(u),re=[];e:{var te=O0.get(i);if(te!==void 0){var ce=Ys,me=i;switch(i){case"keypress":if(Qs(u)===0)break e;case"keydown":case"keyup":ce=Ye;break;case"focusin":me="focus",ce=$t;break;case"focusout":me="blur",ce=$t;break;case"beforeblur":case"afterblur":ce=$t;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Nr;break;case D0:case V0:case M0:ce=Wu;break;case L0:ce=na;break;case"scroll":ce=Jo;break;case"wheel":ce=Kb;break;case"copy":case"cut":case"paste":ce=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Cn}var ge=(o&4)!==0,vt=!ge&&i==="scroll",K=ge?te!==null?te+"Capture":null:te;ge=[];for(var z=Y,Q;z!==null;){Q=z;var se=Q.stateNode;if(Q.tag===5&&se!==null&&(Q=se,K!==null&&(se=Bs(z,K),se!=null&&ge.push(Ql(z,se,Q)))),vt)break;z=z.return}0<ge.length&&(te=new ce(te,me,null,u,ne),re.push({event:te,listeners:ge}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",te&&u!==Vi&&(me=u.relatedTarget||u.fromElement)&&(Js(me)||me[si]))break e;if((ce||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ce?(me=u.relatedTarget||u.toElement,ce=Y,me=me?Js(me):null,me!==null&&(vt=rr(me),me!==vt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=Y),ce!==me)){if(ge=Fl,se="onMouseLeave",K="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(ge=Cn,se="onPointerLeave",K="onPointerEnter",z="pointer"),vt=ce==null?te:la(ce),Q=me==null?te:la(me),te=new ge(se,z+"leave",ce,u,ne),te.target=vt,te.relatedTarget=Q,se=null,Js(ne)===Y&&(ge=new ge(K,z+"enter",me,u,ne),ge.target=Q,ge.relatedTarget=vt,se=ge),vt=se,ce&&me)t:{for(ge=ce,K=me,z=0,Q=ge;Q;Q=oa(Q))z++;for(Q=0,se=K;se;se=oa(se))Q++;for(;0<z-Q;)ge=oa(ge),z--;for(;0<Q-z;)K=oa(K),Q--;for(;z--;){if(ge===K||K!==null&&ge===K.alternate)break t;ge=oa(ge),K=oa(K)}ge=null}else ge=null;ce!==null&&$0(re,te,ce,ge,!1),me!==null&&vt!==null&&$0(re,vt,me,ge,!0)}}e:{if(te=Y?la(Y):window,ce=te.nodeName&&te.nodeName.toLowerCase(),ce==="select"||ce==="input"&&te.type==="file")var ye=Zb;else if(E0(te))if(T0)ye=rI;else{ye=tI;var we=eI}else(ce=te.nodeName)&&ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ye=nI);if(ye&&(ye=ye(i,Y))){k0(re,ye,u,ne);break e}we&&we(i,te,Y),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&Et(te,"number",te.value)}switch(we=Y?la(Y):window,i){case"focusin":(E0(we)||we.contentEditable==="true")&&(ia=we,Tf=Y,Kl=null);break;case"focusout":Kl=Tf=ia=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,j0(re,u,ne);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":j0(re,u,ne)}var _e;if(wf)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ra?w0(i,u)&&(be="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(be="onCompositionStart");be&&(y0&&u.locale!=="ko"&&(ra||be!=="onCompositionStart"?be==="onCompositionEnd"&&ra&&(_e=Fu()):(bn=ne,Xo="value"in bn?bn.value:bn.textContent,ra=!0)),we=Qu(Y,be),0<we.length&&(be=new E(be,i,null,u,ne),re.push({event:be,listeners:we}),_e?be.data=_e:(_e=_0(u),_e!==null&&(be.data=_e)))),(_e=Gb?Qb(i,u):Yb(i,u))&&(Y=Qu(Y,"onBeforeInput"),0<Y.length&&(ne=new E("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:Y}),ne.data=_e))}z0(re,o)})}function Ql(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Qu(i,o){for(var u=o+"Capture",p=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Bs(i,u),x!=null&&p.unshift(Ql(i,x,y)),x=Bs(i,o),x!=null&&p.push(Ql(i,x,y))),i=i.return}return p}function oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function $0(i,o,u,p,y){for(var x=o._reactName,S=[];u!==null&&u!==p;){var D=u,F=D.alternate,Y=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&Y!==null&&(D=Y,y?(F=Bs(u,x),F!=null&&S.unshift(Ql(u,F,D))):y||(F=Bs(u,x),F!=null&&S.push(Ql(u,F,D)))),u=u.return}S.length!==0&&i.push({event:o,listeners:S})}var uI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function W0(i){return(typeof i=="string"?i:""+i).replace(uI,`
`).replace(dI,"")}function Yu(i,o,u){if(o=W0(o),W0(i)!==o&&u)throw Error(t(425))}function Xu(){}var Pf=null,jf=null;function Nf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Df=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,fI=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(i){return H0.resolve(null).then(i).catch(pI)}:Df;function pI(i){setTimeout(function(){throw i})}function Vf(i,o){var u=o,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){i.removeChild(y),$i(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);$i(o)}function qi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function K0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var aa=Math.random().toString(36).slice(2),Vr="__reactFiber$"+aa,Yl="__reactProps$"+aa,si="__reactContainer$"+aa,Mf="__reactEvents$"+aa,mI="__reactListeners$"+aa,gI="__reactHandles$"+aa;function Js(i){var o=i[Vr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[si]||u[Vr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=K0(i);i!==null;){if(u=i[Vr])return u;i=K0(i)}return o}i=u,u=i.parentNode}return null}function Xl(i){return i=i[Vr]||i[si],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function la(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ju(i){return i[Yl]||null}var Lf=[],ca=-1;function Gi(i){return{current:i}}function rt(i){0>ca||(i.current=Lf[ca],Lf[ca]=null,ca--)}function Ze(i,o){ca++,Lf[ca]=i.current,i.current=o}var Qi={},Zt=Gi(Qi),pn=Gi(!1),Zs=Qi;function ua(i,o){var u=i.type.contextTypes;if(!u)return Qi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in u)y[x]=o[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=y),y}function mn(i){return i=i.childContextTypes,i!=null}function Zu(){rt(pn),rt(Zt)}function q0(i,o,u){if(Zt.current!==Qi)throw Error(t(168));Ze(Zt,o),Ze(pn,u)}function G0(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in o))throw Error(t(108,Ge(i)||"Unknown",y));return ae({},u,p)}function ed(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qi,Zs=Zt.current,Ze(Zt,i),Ze(pn,pn.current),!0}function Q0(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=G0(i,o,Zs),p.__reactInternalMemoizedMergedChildContext=i,rt(pn),rt(Zt),Ze(Zt,i)):rt(pn),Ze(pn,u)}var oi=null,td=!1,Of=!1;function Y0(i){oi===null?oi=[i]:oi.push(i)}function yI(i){td=!0,Y0(i)}function Yi(){if(!Of&&oi!==null){Of=!0;var i=0,o=Fe;try{var u=oi;for(Fe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}oi=null,td=!1}catch(y){throw oi!==null&&(oi=oi.slice(i+1)),Il(Wo,Yi),y}finally{Fe=o,Of=!1}}return null}var da=[],ha=0,nd=null,rd=0,Fn=[],zn=0,eo=null,ai=1,li="";function to(i,o){da[ha++]=rd,da[ha++]=nd,nd=i,rd=o}function X0(i,o,u){Fn[zn++]=ai,Fn[zn++]=li,Fn[zn++]=eo,eo=i;var p=ai;i=li;var y=32-Tn(p)-1;p&=~(1<<y),u+=1;var x=32-Tn(o)+y;if(30<x){var S=y-y%5;x=(p&(1<<S)-1).toString(32),p>>=S,y-=S,ai=1<<32-Tn(o)+y|u<<y|p,li=x+i}else ai=1<<x|u<<y|p,li=i}function Bf(i){i.return!==null&&(to(i,1),X0(i,1,0))}function Ff(i){for(;i===nd;)nd=da[--ha],da[ha]=null,rd=da[--ha],da[ha]=null;for(;i===eo;)eo=Fn[--zn],Fn[zn]=null,li=Fn[--zn],Fn[zn]=null,ai=Fn[--zn],Fn[zn]=null}var An=null,Rn=null,ot=!1,or=null;function J0(i,o){var u=Hn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Z0(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,An=i,Rn=qi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,An=i,Rn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=eo!==null?{id:ai,overflow:li}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Hn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,An=i,Rn=null,!0):!1;default:return!1}}function zf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Uf(i){if(ot){var o=Rn;if(o){var u=o;if(!Z0(i,o)){if(zf(i))throw Error(t(418));o=qi(u.nextSibling);var p=An;o&&Z0(i,o)?J0(p,u):(i.flags=i.flags&-4097|2,ot=!1,An=i)}}else{if(zf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,An=i}}}function ev(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;An=i}function id(i){if(i!==An)return!1;if(!ot)return ev(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Nf(i.type,i.memoizedProps)),o&&(o=Rn)){if(zf(i))throw tv(),Error(t(418));for(;o;)J0(i,o),o=qi(o.nextSibling)}if(ev(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Rn=qi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Rn=null}}else Rn=An?qi(i.stateNode.nextSibling):null;return!0}function tv(){for(var i=Rn;i;)i=qi(i.nextSibling)}function fa(){Rn=An=null,ot=!1}function $f(i){or===null?or=[i]:or.push(i)}var vI=G.ReactCurrentBatchConfig;function Jl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var y=p,x=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var D=y.refs;S===null?delete D[x]:D[x]=S},o._stringRef=x,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function sd(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function nv(i){var o=i._init;return o(i._payload)}function rv(i){function o(K,z){if(i){var Q=K.deletions;Q===null?(K.deletions=[z],K.flags|=16):Q.push(z)}}function u(K,z){if(!i)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function p(K,z){for(K=new Map;z!==null;)z.key!==null?K.set(z.key,z):K.set(z.index,z),z=z.sibling;return K}function y(K,z){return K=is(K,z),K.index=0,K.sibling=null,K}function x(K,z,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<z?(K.flags|=2,z):Q):(K.flags|=2,z)):(K.flags|=1048576,z)}function S(K){return i&&K.alternate===null&&(K.flags|=2),K}function D(K,z,Q,se){return z===null||z.tag!==6?(z=Dp(Q,K.mode,se),z.return=K,z):(z=y(z,Q),z.return=K,z)}function F(K,z,Q,se){var ye=Q.type;return ye===A?ne(K,z,Q.props.children,se,Q.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===_t&&nv(ye)===z.type)?(se=y(z,Q.props),se.ref=Jl(K,z,Q),se.return=K,se):(se=Ad(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=Jl(K,z,Q),se.return=K,se)}function Y(K,z,Q,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=Vp(Q,K.mode,se),z.return=K,z):(z=y(z,Q.children||[]),z.return=K,z)}function ne(K,z,Q,se,ye){return z===null||z.tag!==7?(z=co(Q,K.mode,se,ye),z.return=K,z):(z=y(z,Q),z.return=K,z)}function re(K,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Dp(""+z,K.mode,Q),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case $:return Q=Ad(z.type,z.key,z.props,null,K.mode,Q),Q.ref=Jl(K,null,z),Q.return=K,Q;case H:return z=Vp(z,K.mode,Q),z.return=K,z;case _t:var se=z._init;return re(K,se(z._payload),Q)}if(gt(z)||pe(z))return z=co(z,K.mode,Q,null),z.return=K,z;sd(K,z)}return null}function te(K,z,Q,se){var ye=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ye!==null?null:D(K,z,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===ye?F(K,z,Q,se):null;case H:return Q.key===ye?Y(K,z,Q,se):null;case _t:return ye=Q._init,te(K,z,ye(Q._payload),se)}if(gt(Q)||pe(Q))return ye!==null?null:ne(K,z,Q,se,null);sd(K,Q)}return null}function ce(K,z,Q,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(Q)||null,D(z,K,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case $:return K=K.get(se.key===null?Q:se.key)||null,F(z,K,se,ye);case H:return K=K.get(se.key===null?Q:se.key)||null,Y(z,K,se,ye);case _t:var we=se._init;return ce(K,z,Q,we(se._payload),ye)}if(gt(se)||pe(se))return K=K.get(Q)||null,ne(z,K,se,ye,null);sd(z,se)}return null}function me(K,z,Q,se){for(var ye=null,we=null,_e=z,be=z=0,Bt=null;_e!==null&&be<Q.length;be++){_e.index>be?(Bt=_e,_e=null):Bt=_e.sibling;var We=te(K,_e,Q[be],se);if(We===null){_e===null&&(_e=Bt);break}i&&_e&&We.alternate===null&&o(K,_e),z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We,_e=Bt}if(be===Q.length)return u(K,_e),ot&&to(K,be),ye;if(_e===null){for(;be<Q.length;be++)_e=re(K,Q[be],se),_e!==null&&(z=x(_e,z,be),we===null?ye=_e:we.sibling=_e,we=_e);return ot&&to(K,be),ye}for(_e=p(K,_e);be<Q.length;be++)Bt=ce(_e,K,be,Q[be],se),Bt!==null&&(i&&Bt.alternate!==null&&_e.delete(Bt.key===null?be:Bt.key),z=x(Bt,z,be),we===null?ye=Bt:we.sibling=Bt,we=Bt);return i&&_e.forEach(function(ss){return o(K,ss)}),ot&&to(K,be),ye}function ge(K,z,Q,se){var ye=pe(Q);if(typeof ye!="function")throw Error(t(150));if(Q=ye.call(Q),Q==null)throw Error(t(151));for(var we=ye=null,_e=z,be=z=0,Bt=null,We=Q.next();_e!==null&&!We.done;be++,We=Q.next()){_e.index>be?(Bt=_e,_e=null):Bt=_e.sibling;var ss=te(K,_e,We.value,se);if(ss===null){_e===null&&(_e=Bt);break}i&&_e&&ss.alternate===null&&o(K,_e),z=x(ss,z,be),we===null?ye=ss:we.sibling=ss,we=ss,_e=Bt}if(We.done)return u(K,_e),ot&&to(K,be),ye;if(_e===null){for(;!We.done;be++,We=Q.next())We=re(K,We.value,se),We!==null&&(z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We);return ot&&to(K,be),ye}for(_e=p(K,_e);!We.done;be++,We=Q.next())We=ce(_e,K,be,We.value,se),We!==null&&(i&&We.alternate!==null&&_e.delete(We.key===null?be:We.key),z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We);return i&&_e.forEach(function(XI){return o(K,XI)}),ot&&to(K,be),ye}function vt(K,z,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var ye=Q.key,we=z;we!==null;){if(we.key===ye){if(ye=Q.type,ye===A){if(we.tag===7){u(K,we.sibling),z=y(we,Q.props.children),z.return=K,K=z;break e}}else if(we.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===_t&&nv(ye)===we.type){u(K,we.sibling),z=y(we,Q.props),z.ref=Jl(K,we,Q),z.return=K,K=z;break e}u(K,we);break}else o(K,we);we=we.sibling}Q.type===A?(z=co(Q.props.children,K.mode,se,Q.key),z.return=K,K=z):(se=Ad(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=Jl(K,z,Q),se.return=K,K=se)}return S(K);case H:e:{for(we=Q.key;z!==null;){if(z.key===we)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){u(K,z.sibling),z=y(z,Q.children||[]),z.return=K,K=z;break e}else{u(K,z);break}else o(K,z);z=z.sibling}z=Vp(Q,K.mode,se),z.return=K,K=z}return S(K);case _t:return we=Q._init,vt(K,z,we(Q._payload),se)}if(gt(Q))return me(K,z,Q,se);if(pe(Q))return ge(K,z,Q,se);sd(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,z!==null&&z.tag===6?(u(K,z.sibling),z=y(z,Q),z.return=K,K=z):(u(K,z),z=Dp(Q,K.mode,se),z.return=K,K=z),S(K)):u(K,z)}return vt}var pa=rv(!0),iv=rv(!1),od=Gi(null),ad=null,ma=null,Wf=null;function Hf(){Wf=ma=ad=null}function Kf(i){var o=od.current;rt(od),i._currentValue=o}function qf(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function ga(i,o){ad=i,Wf=ma=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(gn=!0),i.firstContext=null)}function Un(i){var o=i._currentValue;if(Wf!==i)if(i={context:i,memoizedValue:o,next:null},ma===null){if(ad===null)throw Error(t(308));ma=i,ad.dependencies={lanes:0,firstContext:i}}else ma=ma.next=i;return o}var no=null;function Gf(i){no===null?no=[i]:no.push(i)}function sv(i,o,u,p){var y=o.interleaved;return y===null?(u.next=u,Gf(o)):(u.next=y.next,y.next=u),o.interleaved=u,ci(i,p)}function ci(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Xi=!1;function Qf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ui(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ji(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,ci(i,u)}return y=p.interleaved,y===null?(o.next=o,Gf(p)):(o.next=y.next,y.next=o),p.interleaved=o,ci(i,u)}function ld(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Nl(i,u)}}function av(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?y=x=S:x=x.next=S,u=u.next}while(u!==null);x===null?y=x=o:x=x.next=o}else y=x=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function cd(i,o,u,p){var y=i.updateQueue;Xi=!1;var x=y.firstBaseUpdate,S=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,Y=F.next;F.next=null,S===null?x=Y:S.next=Y,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==S&&(D===null?ne.firstBaseUpdate=Y:D.next=Y,ne.lastBaseUpdate=F))}if(x!==null){var re=y.baseState;S=0,ne=Y=F=null,D=x;do{var te=D.lane,ce=D.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var me=i,ge=D;switch(te=o,ce=u,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){re=me.call(ce,re,te);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,te=typeof me=="function"?me.call(ce,re,te):me,te==null)break e;re=ae({},re,te);break e;case 2:Xi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=y.effects,te===null?y.effects=[D]:te.push(D))}else ce={eventTime:ce,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(Y=ne=ce,F=re):ne=ne.next=ce,S|=te;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;te=D,D=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);if(ne===null&&(F=re),y.baseState=F,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,o=y.shared.interleaved,o!==null){y=o;do S|=y.lane,y=y.next;while(y!==o)}else x===null&&(y.shared.lanes=0);so|=S,i.lanes=S,i.memoizedState=re}}function lv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Zl={},Mr=Gi(Zl),ec=Gi(Zl),tc=Gi(Zl);function ro(i){if(i===Zl)throw Error(t(174));return i}function Yf(i,o){switch(Ze(tc,o),Ze(ec,i),Ze(Mr,Zl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Oo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Oo(o,i)}rt(Mr),Ze(Mr,o)}function ya(){rt(Mr),rt(ec),rt(tc)}function cv(i){ro(tc.current);var o=ro(Mr.current),u=Oo(o,i.type);o!==u&&(Ze(ec,i),Ze(Mr,u))}function Xf(i){ec.current===i&&(rt(Mr),rt(ec))}var lt=Gi(0);function ud(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Jf=[];function Zf(){for(var i=0;i<Jf.length;i++)Jf[i]._workInProgressVersionPrimary=null;Jf.length=0}var dd=G.ReactCurrentDispatcher,ep=G.ReactCurrentBatchConfig,io=0,ct=null,Rt=null,Lt=null,hd=!1,nc=!1,rc=0,xI=0;function en(){throw Error(t(321))}function tp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!sr(i[u],o[u]))return!1;return!0}function np(i,o,u,p,y,x){if(io=x,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,dd.current=i===null||i.memoizedState===null?kI:TI,i=u(p,y),nc){x=0;do{if(nc=!1,rc=0,25<=x)throw Error(t(301));x+=1,Lt=Rt=null,o.updateQueue=null,dd.current=SI,i=u(p,y)}while(nc)}if(dd.current=md,o=Rt!==null&&Rt.next!==null,io=0,Lt=Rt=ct=null,hd=!1,o)throw Error(t(300));return i}function rp(){var i=rc!==0;return rc=0,i}function Lr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function $n(){if(Rt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var o=Lt===null?ct.memoizedState:Lt.next;if(o!==null)Lt=o,Rt=i;else{if(i===null)throw Error(t(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function ic(i,o){return typeof o=="function"?o(i):o}function ip(i){var o=$n(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Rt,y=p.baseQueue,x=u.pending;if(x!==null){if(y!==null){var S=y.next;y.next=x.next,x.next=S}p.baseQueue=y=x,u.pending=null}if(y!==null){x=y.next,p=p.baseState;var D=S=null,F=null,Y=x;do{var ne=Y.lane;if((io&ne)===ne)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var re={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=re,S=p):F=F.next=re,ct.lanes|=ne,so|=ne}Y=Y.next}while(Y!==null&&Y!==x);F===null?S=p:F.next=D,sr(p,o.memoizedState)||(gn=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do x=y.lane,ct.lanes|=x,so|=x,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function sp(i){var o=$n(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,x=o.memoizedState;if(y!==null){u.pending=null;var S=y=y.next;do x=i(x,S.action),S=S.next;while(S!==y);sr(x,o.memoizedState)||(gn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function uv(){}function dv(i,o){var u=ct,p=$n(),y=o(),x=!sr(p.memoizedState,y);if(x&&(p.memoizedState=y,gn=!0),p=p.queue,op(pv.bind(null,u,p,i),[i]),p.getSnapshot!==o||x||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,sc(9,fv.bind(null,u,p,y,o),void 0,null),Ot===null)throw Error(t(349));(io&30)!==0||hv(u,o,y)}return y}function hv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function fv(i,o,u,p){o.value=u,o.getSnapshot=p,mv(o)&&gv(i)}function pv(i,o,u){return u(function(){mv(o)&&gv(i)})}function mv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!sr(i,u)}catch{return!0}}function gv(i){var o=ci(i,1);o!==null&&ur(o,i,1,-1)}function yv(i){var o=Lr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:i},o.queue=i,i=i.dispatch=EI.bind(null,ct,i),[o.memoizedState,i]}function sc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function vv(){return $n().memoizedState}function fd(i,o,u,p){var y=Lr();ct.flags|=i,y.memoizedState=sc(1|o,u,void 0,p===void 0?null:p)}function pd(i,o,u,p){var y=$n();p=p===void 0?null:p;var x=void 0;if(Rt!==null){var S=Rt.memoizedState;if(x=S.destroy,p!==null&&tp(p,S.deps)){y.memoizedState=sc(o,u,x,p);return}}ct.flags|=i,y.memoizedState=sc(1|o,u,x,p)}function xv(i,o){return fd(8390656,8,i,o)}function op(i,o){return pd(2048,8,i,o)}function wv(i,o){return pd(4,2,i,o)}function _v(i,o){return pd(4,4,i,o)}function Ev(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function kv(i,o,u){return u=u!=null?u.concat([i]):null,pd(4,4,Ev.bind(null,o,i),u)}function ap(){}function Tv(i,o){var u=$n();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&tp(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function Sv(i,o){var u=$n();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&tp(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function bv(i,o,u){return(io&21)===0?(i.baseState&&(i.baseState=!1,gn=!0),i.memoizedState=u):(sr(u,o)||(u=Pl(),ct.lanes|=u,so|=u,i.baseState=!0),o)}function wI(i,o){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var p=ep.transition;ep.transition={};try{i(!1),o()}finally{Fe=u,ep.transition=p}}function Iv(){return $n().memoizedState}function _I(i,o,u){var p=ns(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Cv(i))Av(o,u);else if(u=sv(i,o,u,p),u!==null){var y=dn();ur(u,i,p,y),Rv(u,o,p)}}function EI(i,o,u){var p=ns(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Cv(i))Av(o,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,D=x(S,u);if(y.hasEagerState=!0,y.eagerState=D,sr(D,S)){var F=o.interleaved;F===null?(y.next=y,Gf(o)):(y.next=F.next,F.next=y),o.interleaved=y;return}}catch{}finally{}u=sv(i,o,y,p),u!==null&&(y=dn(),ur(u,i,p,y),Rv(u,o,p))}}function Cv(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Av(i,o){nc=hd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Rv(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Nl(i,u)}}var md={readContext:Un,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},kI={readContext:Un,useCallback:function(i,o){return Lr().memoizedState=[i,o===void 0?null:o],i},useContext:Un,useEffect:xv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,fd(4194308,4,Ev.bind(null,o,i),u)},useLayoutEffect:function(i,o){return fd(4194308,4,i,o)},useInsertionEffect:function(i,o){return fd(4,2,i,o)},useMemo:function(i,o){var u=Lr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Lr();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=_I.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var o=Lr();return i={current:i},o.memoizedState=i},useState:yv,useDebugValue:ap,useDeferredValue:function(i){return Lr().memoizedState=i},useTransition:function(){var i=yv(!1),o=i[0];return i=wI.bind(null,i[1]),Lr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=ct,y=Lr();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Ot===null)throw Error(t(349));(io&30)!==0||hv(p,o,u)}y.memoizedState=u;var x={value:u,getSnapshot:o};return y.queue=x,xv(pv.bind(null,p,x,i),[i]),p.flags|=2048,sc(9,fv.bind(null,p,x,u,o),void 0,null),u},useId:function(){var i=Lr(),o=Ot.identifierPrefix;if(ot){var u=li,p=ai;u=(p&~(1<<32-Tn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=rc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=xI++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},TI={readContext:Un,useCallback:Tv,useContext:Un,useEffect:op,useImperativeHandle:kv,useInsertionEffect:wv,useLayoutEffect:_v,useMemo:Sv,useReducer:ip,useRef:vv,useState:function(){return ip(ic)},useDebugValue:ap,useDeferredValue:function(i){var o=$n();return bv(o,Rt.memoizedState,i)},useTransition:function(){var i=ip(ic)[0],o=$n().memoizedState;return[i,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Iv,unstable_isNewReconciler:!1},SI={readContext:Un,useCallback:Tv,useContext:Un,useEffect:op,useImperativeHandle:kv,useInsertionEffect:wv,useLayoutEffect:_v,useMemo:Sv,useReducer:sp,useRef:vv,useState:function(){return sp(ic)},useDebugValue:ap,useDeferredValue:function(i){var o=$n();return Rt===null?o.memoizedState=i:bv(o,Rt.memoizedState,i)},useTransition:function(){var i=sp(ic)[0],o=$n().memoizedState;return[i,o]},useMutableSource:uv,useSyncExternalStore:dv,useId:Iv,unstable_isNewReconciler:!1};function ar(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function lp(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:ae({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var gd={isMounted:function(i){return(i=i._reactInternals)?rr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=dn(),y=ns(i),x=ui(p,y);x.payload=o,u!=null&&(x.callback=u),o=Ji(i,x,y),o!==null&&(ur(o,i,y,p),ld(o,i,y))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=dn(),y=ns(i),x=ui(p,y);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=Ji(i,x,y),o!==null&&(ur(o,i,y,p),ld(o,i,y))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=dn(),p=ns(i),y=ui(u,p);y.tag=2,o!=null&&(y.callback=o),o=Ji(i,y,p),o!==null&&(ur(o,i,p,u),ld(o,i,p))}};function Pv(i,o,u,p,y,x,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,S):o.prototype&&o.prototype.isPureReactComponent?!Hl(u,p)||!Hl(y,x):!0}function jv(i,o,u){var p=!1,y=Qi,x=o.contextType;return typeof x=="object"&&x!==null?x=Un(x):(y=mn(o)?Zs:Zt.current,p=o.contextTypes,x=(p=p!=null)?ua(i,y):Qi),o=new o(u,x),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=gd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),o}function Nv(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&gd.enqueueReplaceState(o,o.state,null)}function cp(i,o,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs={},Qf(i);var x=o.contextType;typeof x=="object"&&x!==null?y.context=Un(x):(x=mn(o)?Zs:Zt.current,y.context=ua(i,x)),y.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(lp(i,o,x,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&gd.enqueueReplaceState(y,y.state,null),cd(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function va(i,o){try{var u="",p=o;do u+=Ve(p),p=p.return;while(p);var y=u}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:o,stack:y,digest:null}}function up(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function dp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var bI=typeof WeakMap=="function"?WeakMap:Map;function Dv(i,o,u){u=ui(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){kd||(kd=!0,bp=p),dp(i,o)},u}function Vv(i,o,u){u=ui(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=o.value;u.payload=function(){return p(y)},u.callback=function(){dp(i,o)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){dp(i,o),typeof p!="function"&&(es===null?es=new Set([this]):es.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Mv(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new bI;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(y.add(u),i=FI.bind(null,i,o,u),o.then(i,i))}function Lv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ov(i,o,u,p,y){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ui(-1,1),o.tag=2,Ji(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var II=G.ReactCurrentOwner,gn=!1;function un(i,o,u,p){o.child=i===null?iv(o,null,u,p):pa(o,i.child,u,p)}function Bv(i,o,u,p,y){u=u.render;var x=o.ref;return ga(o,y),p=np(i,o,u,p,x,y),u=rp(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&u&&Bf(o),o.flags|=1,un(i,o,p,y),o.child)}function Fv(i,o,u,p,y){if(i===null){var x=u.type;return typeof x=="function"&&!Np(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=x,zv(i,o,x,p,y)):(i=Ad(u.type,null,p,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,(i.lanes&y)===0){var S=x.memoizedProps;if(u=u.compare,u=u!==null?u:Hl,u(S,p)&&i.ref===o.ref)return di(i,o,y)}return o.flags|=1,i=is(x,p),i.ref=o.ref,i.return=o,o.child=i}function zv(i,o,u,p,y){if(i!==null){var x=i.memoizedProps;if(Hl(x,p)&&i.ref===o.ref)if(gn=!1,o.pendingProps=p=x,(i.lanes&y)!==0)(i.flags&131072)!==0&&(gn=!0);else return o.lanes=i.lanes,di(i,o,y)}return hp(i,o,u,p,y)}function Uv(i,o,u){var p=o.pendingProps,y=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(wa,Pn),Pn|=u;else{if((u&1073741824)===0)return i=x!==null?x.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(wa,Pn),Pn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:u,Ze(wa,Pn),Pn|=p}else x!==null?(p=x.baseLanes|u,o.memoizedState=null):p=u,Ze(wa,Pn),Pn|=p;return un(i,o,y,u),o.child}function $v(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function hp(i,o,u,p,y){var x=mn(u)?Zs:Zt.current;return x=ua(o,x),ga(o,y),u=np(i,o,u,p,x,y),p=rp(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&p&&Bf(o),o.flags|=1,un(i,o,u,y),o.child)}function Wv(i,o,u,p,y){if(mn(u)){var x=!0;ed(o)}else x=!1;if(ga(o,y),o.stateNode===null)vd(i,o),jv(o,u,p),cp(o,u,p,y),p=!0;else if(i===null){var S=o.stateNode,D=o.memoizedProps;S.props=D;var F=S.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Un(Y):(Y=mn(u)?Zs:Zt.current,Y=ua(o,Y));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||F!==Y)&&Nv(o,S,p,Y),Xi=!1;var te=o.memoizedState;S.state=te,cd(o,p,S,y),F=o.memoizedState,D!==p||te!==F||pn.current||Xi?(typeof ne=="function"&&(lp(o,u,ne,p),F=o.memoizedState),(D=Xi||Pv(o,u,D,p,te,F,Y))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),S.props=p,S.state=F,S.context=Y,p=D):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,ov(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:ar(o.type,D),S.props=Y,re=o.pendingProps,te=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=Un(F):(F=mn(u)?Zs:Zt.current,F=ua(o,F));var ce=u.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==re||te!==F)&&Nv(o,S,p,F),Xi=!1,te=o.memoizedState,S.state=te,cd(o,p,S,y);var me=o.memoizedState;D!==re||te!==me||pn.current||Xi?(typeof ce=="function"&&(lp(o,u,ce,p),me=o.memoizedState),(Y=Xi||Pv(o,u,Y,p,te,me,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,me,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,me,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=me),S.props=p,S.state=me,S.context=F,p=Y):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),p=!1)}return fp(i,o,u,p,x,y)}function fp(i,o,u,p,y,x){$v(i,o);var S=(o.flags&128)!==0;if(!p&&!S)return y&&Q0(o,u,!1),di(i,o,x);p=o.stateNode,II.current=o;var D=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&S?(o.child=pa(o,i.child,null,x),o.child=pa(o,null,D,x)):un(i,o,D,x),o.memoizedState=p.state,y&&Q0(o,u,!0),o.child}function Hv(i){var o=i.stateNode;o.pendingContext?q0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&q0(i,o.context,!1),Yf(i,o.containerInfo)}function Kv(i,o,u,p,y){return fa(),$f(y),o.flags|=256,un(i,o,u,p),o.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function mp(i){return{baseLanes:i,cachePool:null,transitions:null}}function qv(i,o,u){var p=o.pendingProps,y=lt.current,x=!1,S=(o.flags&128)!==0,D;if((D=S)||(D=i!==null&&i.memoizedState===null?!1:(y&2)!==0),D?(x=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Ze(lt,y&1),i===null)return Uf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,i=p.fallback,x?(p=o.mode,x=o.child,S={mode:"hidden",children:S},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=Rd(S,p,0,null),i=co(i,p,u,null),x.return=o,i.return=o,x.sibling=i,o.child=x,o.child.memoizedState=mp(u),o.memoizedState=pp,i):gp(o,S));if(y=i.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return CI(i,o,S,p,D,y,u);if(x){x=p.fallback,S=o.mode,y=i.child,D=y.sibling;var F={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==y?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=is(y,F),p.subtreeFlags=y.subtreeFlags&14680064),D!==null?x=is(D,x):(x=co(x,S,u,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,S=i.child.memoizedState,S=S===null?mp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=i.childLanes&~u,o.memoizedState=pp,p}return x=i.child,i=x.sibling,p=is(x,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function gp(i,o){return o=Rd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function yd(i,o,u,p){return p!==null&&$f(p),pa(o,i.child,null,u),i=gp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function CI(i,o,u,p,y,x,S){if(u)return o.flags&256?(o.flags&=-257,p=up(Error(t(422))),yd(i,o,S,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(x=p.fallback,y=o.mode,p=Rd({mode:"visible",children:p.children},y,0,null),x=co(x,y,S,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,(o.mode&1)!==0&&pa(o,i.child,null,S),o.child.memoizedState=mp(S),o.memoizedState=pp,x);if((o.mode&1)===0)return yd(i,o,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var D=p.dgst;return p=D,x=Error(t(419)),p=up(x,p,void 0),yd(i,o,S,p)}if(D=(S&i.childLanes)!==0,gn||D){if(p=Ot,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ci(i,y),ur(p,i,y,-1))}return jp(),p=up(Error(t(421))),yd(i,o,S,p)}return y.data==="$?"?(o.flags|=128,o.child=i.child,o=zI.bind(null,i),y._reactRetry=o,null):(i=x.treeContext,Rn=qi(y.nextSibling),An=o,ot=!0,or=null,i!==null&&(Fn[zn++]=ai,Fn[zn++]=li,Fn[zn++]=eo,ai=i.id,li=i.overflow,eo=o),o=gp(o,p.children),o.flags|=4096,o)}function Gv(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),qf(i.return,o,u)}function yp(i,o,u,p,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=u,x.tailMode=y)}function Qv(i,o,u){var p=o.pendingProps,y=p.revealOrder,x=p.tail;if(un(i,o,p.children,u),p=lt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gv(i,u,o);else if(i.tag===19)Gv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(lt,p),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(u=o.child,y=null;u!==null;)i=u.alternate,i!==null&&ud(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),yp(o,!1,y,u,x);break;case"backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&ud(i)===null){o.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}yp(o,!0,u,null,x);break;case"together":yp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function di(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),so|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=is(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=is(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function AI(i,o,u){switch(o.tag){case 3:Hv(o),fa();break;case 5:cv(o);break;case 1:mn(o.type)&&ed(o);break;case 4:Yf(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,y=o.memoizedProps.value;Ze(od,p._currentValue),p._currentValue=y;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?qv(i,o,u):(Ze(lt,lt.current&1),i=di(i,o,u),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return Qv(i,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ze(lt,lt.current),p)break;return null;case 22:case 23:return o.lanes=0,Uv(i,o,u)}return di(i,o,u)}var Yv,vp,Xv,Jv;Yv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},vp=function(){},Xv=function(i,o,u,p){var y=i.memoizedProps;if(y!==p){i=o.stateNode,ro(Mr.current);var x=null;switch(u){case"input":y=Mo(i,y),p=Mo(i,p),x=[];break;case"select":y=ae({},y,{value:void 0}),p=ae({},p,{value:void 0}),x=[];break;case"textarea":y=wl(i,y),p=wl(i,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Xu)}nr(u,p);var S;u=null;for(Y in y)if(!p.hasOwnProperty(Y)&&y.hasOwnProperty(Y)&&y[Y]!=null)if(Y==="style"){var D=y[Y];for(S in D)D.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?x||(x=[]):(x=x||[]).push(Y,null));for(Y in p){var F=p[Y];if(D=y!=null?y[Y]:void 0,p.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(S in D)!D.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&D[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(x||(x=[]),x.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(x=x||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&nt("scroll",i),x||D===F||(x=[])):(x=x||[]).push(Y,F))}u&&(x=x||[]).push("style",u);var Y=x;(o.updateQueue=Y)&&(o.flags|=4)}},Jv=function(i,o,u,p){u!==p&&(o.flags|=4)};function oc(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function RI(i,o,u){var p=o.pendingProps;switch(Ff(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return mn(o.type)&&Zu(),tn(o),null;case 3:return p=o.stateNode,ya(),rt(pn),rt(Zt),Zf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(id(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,or!==null&&(Ap(or),or=null))),vp(i,o),tn(o),null;case 5:Xf(o);var y=ro(tc.current);if(u=o.type,i!==null&&o.stateNode!=null)Xv(i,o,u,p,y),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return tn(o),null}if(i=ro(Mr.current),id(o)){p=o.stateNode,u=o.type;var x=o.memoizedProps;switch(p[Vr]=o,p[Yl]=x,i=(o.mode&1)!==0,u){case"dialog":nt("cancel",p),nt("close",p);break;case"iframe":case"object":case"embed":nt("load",p);break;case"video":case"audio":for(y=0;y<ql.length;y++)nt(ql[y],p);break;case"source":nt("error",p);break;case"img":case"image":case"link":nt("error",p),nt("load",p);break;case"details":nt("toggle",p);break;case"input":Eu(p,x),nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},nt("invalid",p);break;case"textarea":_l(p,x),nt("invalid",p)}nr(u,x),y=null;for(var S in x)if(x.hasOwnProperty(S)){var D=x[S];S==="children"?typeof D=="string"?p.textContent!==D&&(x.suppressHydrationWarning!==!0&&Yu(p.textContent,D,i),y=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(x.suppressHydrationWarning!==!0&&Yu(p.textContent,D,i),y=["children",""+D]):s.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&nt("scroll",p)}switch(u){case"input":Vo(p),xl(p,x,!0);break;case"textarea":Vo(p),Pi(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=Xu)}p=y,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=El(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(u,{is:p.is}):(i=S.createElement(u),u==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,u),i[Vr]=o,i[Yl]=p,Yv(i,o,!1,!1),o.stateNode=i;e:{switch(S=Fo(u,p),u){case"dialog":nt("cancel",i),nt("close",i),y=p;break;case"iframe":case"object":case"embed":nt("load",i),y=p;break;case"video":case"audio":for(y=0;y<ql.length;y++)nt(ql[y],i);y=p;break;case"source":nt("error",i),y=p;break;case"img":case"image":case"link":nt("error",i),nt("load",i),y=p;break;case"details":nt("toggle",i),y=p;break;case"input":Eu(i,p),y=Mo(i,p),nt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=ae({},p,{value:void 0}),nt("invalid",i);break;case"textarea":_l(i,p),y=wl(i,p),nt("invalid",i);break;default:y=p}nr(u,y),D=y;for(x in D)if(D.hasOwnProperty(x)){var F=D[x];x==="style"?Bo(i,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Tu(i,F)):x==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&Os(i,F):typeof F=="number"&&Os(i,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?F!=null&&x==="onScroll"&&nt("scroll",i):F!=null&&P(i,x,F,S))}switch(u){case"input":Vo(i),xl(i,p,!1);break;case"textarea":Vo(i),Pi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ue(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?tr(i,!!p.multiple,x,!1):p.defaultValue!=null&&tr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Xu)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)Jv(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=ro(tc.current),ro(Mr.current),id(o)){if(p=o.stateNode,u=o.memoizedProps,p[Vr]=o,(x=p.nodeValue!==u)&&(i=An,i!==null))switch(i.tag){case 3:Yu(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yu(p.nodeValue,u,(i.mode&1)!==0)}x&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Vr]=o,o.stateNode=p}return tn(o),null;case 13:if(rt(lt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Rn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)tv(),fa(),o.flags|=98560,x=!1;else if(x=id(o),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Vr]=o}else fa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),x=!1}else or!==null&&(Ap(or),or=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?Pt===0&&(Pt=3):jp())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return ya(),vp(i,o),i===null&&Gl(o.stateNode.containerInfo),tn(o),null;case 10:return Kf(o.type._context),tn(o),null;case 17:return mn(o.type)&&Zu(),tn(o),null;case 19:if(rt(lt),x=o.memoizedState,x===null)return tn(o),null;if(p=(o.flags&128)!==0,S=x.rendering,S===null)if(p)oc(x,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ud(i),S!==null){for(o.flags|=128,oc(x,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)x=u,i=p,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,i=S.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}x.tail!==null&&tt()>_a&&(o.flags|=128,p=!0,oc(x,!1),o.lanes=4194304)}else{if(!p)if(i=ud(S),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),oc(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!ot)return tn(o),null}else 2*tt()-x.renderingStartTime>_a&&u!==1073741824&&(o.flags|=128,p=!0,oc(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(u=x.last,u!==null?u.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=tt(),o.sibling=null,u=lt.current,Ze(lt,p?u&1|2:u&1),o):(tn(o),null);case 22:case 23:return Pp(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Pn&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function PI(i,o){switch(Ff(o),o.tag){case 1:return mn(o.type)&&Zu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ya(),rt(pn),rt(Zt),Zf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Xf(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));fa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return ya(),null;case 10:return Kf(o.type._context),null;case 22:case 23:return Pp(),null;case 24:return null;default:return null}}var xd=!1,nn=!1,jI=typeof WeakSet=="function"?WeakSet:Set,fe=null;function xa(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){ft(i,o,p)}else u.current=null}function xp(i,o,u){try{u()}catch(p){ft(i,o,p)}}var Zv=!1;function NI(i,o){if(Pf=ni,i=P0(),kf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var S=0,D=-1,F=-1,Y=0,ne=0,re=i,te=null;t:for(;;){for(var ce;re!==u||y!==0&&re.nodeType!==3||(D=S+y),re!==x||p!==0&&re.nodeType!==3||(F=S+p),re.nodeType===3&&(S+=re.nodeValue.length),(ce=re.firstChild)!==null;)te=re,re=ce;for(;;){if(re===i)break t;if(te===u&&++Y===y&&(D=S),te===x&&++ne===p&&(F=S),(ce=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ce}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(jf={focusedElem:i,selectionRange:u},ni=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,vt=me.memoizedState,K=o.stateNode,z=K.getSnapshotBeforeUpdate(o.elementType===o.type?ge:ar(o.type,ge),vt);K.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return me=Zv,Zv=!1,me}function ac(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&xp(o,u,x)}y=y.next}while(y!==p)}}function wd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function wp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function e1(i){var o=i.alternate;o!==null&&(i.alternate=null,e1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Vr],delete o[Yl],delete o[Mf],delete o[mI],delete o[gI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function t1(i){return i.tag===5||i.tag===3||i.tag===4}function n1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||t1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _p(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Xu));else if(p!==4&&(i=i.child,i!==null))for(_p(i,o,u),i=i.sibling;i!==null;)_p(i,o,u),i=i.sibling}function Ep(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Ep(i,o,u),i=i.sibling;i!==null;)Ep(i,o,u),i=i.sibling}var Wt=null,lr=!1;function Zi(i,o,u){for(u=u.child;u!==null;)r1(i,o,u),u=u.sibling}function r1(i,o,u){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount($s,u)}catch{}switch(u.tag){case 5:nn||xa(u,o);case 6:var p=Wt,y=lr;Wt=null,Zi(i,o,u),Wt=p,lr=y,Wt!==null&&(lr?(i=Wt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Wt.removeChild(u.stateNode));break;case 18:Wt!==null&&(lr?(i=Wt,u=u.stateNode,i.nodeType===8?Vf(i.parentNode,u):i.nodeType===1&&Vf(i,u),$i(i)):Vf(Wt,u.stateNode));break;case 4:p=Wt,y=lr,Wt=u.stateNode.containerInfo,lr=!0,Zi(i,o,u),Wt=p,lr=y;break;case 0:case 11:case 14:case 15:if(!nn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&xp(u,o,S),y=y.next}while(y!==p)}Zi(i,o,u);break;case 1:if(!nn&&(xa(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){ft(u,o,D)}Zi(i,o,u);break;case 21:Zi(i,o,u);break;case 22:u.mode&1?(nn=(p=nn)||u.memoizedState!==null,Zi(i,o,u),nn=p):Zi(i,o,u);break;default:Zi(i,o,u)}}function i1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new jI),o.forEach(function(p){var y=UI.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function cr(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var x=i,S=o,D=S;e:for(;D!==null;){switch(D.tag){case 5:Wt=D.stateNode,lr=!1;break e;case 3:Wt=D.stateNode.containerInfo,lr=!0;break e;case 4:Wt=D.stateNode.containerInfo,lr=!0;break e}D=D.return}if(Wt===null)throw Error(t(160));r1(x,S,y),Wt=null,lr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Y){ft(y,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)s1(o,i),o=o.sibling}function s1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(cr(o,i),Or(i),p&4){try{ac(3,i,i.return),wd(3,i)}catch(ge){ft(i,i.return,ge)}try{ac(5,i,i.return)}catch(ge){ft(i,i.return,ge)}}break;case 1:cr(o,i),Or(i),p&512&&u!==null&&xa(u,u.return);break;case 5:if(cr(o,i),Or(i),p&512&&u!==null&&xa(u,u.return),i.flags&32){var y=i.stateNode;try{Os(y,"")}catch(ge){ft(i,i.return,ge)}}if(p&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,S=u!==null?u.memoizedProps:x,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&x.type==="radio"&&x.name!=null&&Lo(y,x),Fo(D,S);var Y=Fo(D,x);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?Bo(y,re):ne==="dangerouslySetInnerHTML"?Tu(y,re):ne==="children"?Os(y,re):P(y,ne,re,Y)}switch(D){case"input":Ls(y,x);break;case"textarea":ku(y,x);break;case"select":var te=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?tr(y,!!x.multiple,ce,!1):te!==!!x.multiple&&(x.defaultValue!=null?tr(y,!!x.multiple,x.defaultValue,!0):tr(y,!!x.multiple,x.multiple?[]:"",!1))}y[Yl]=x}catch(ge){ft(i,i.return,ge)}}break;case 6:if(cr(o,i),Or(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(ge){ft(i,i.return,ge)}}break;case 3:if(cr(o,i),Or(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{$i(o.containerInfo)}catch(ge){ft(i,i.return,ge)}break;case 4:cr(o,i),Or(i);break;case 13:cr(o,i),Or(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Sp=tt())),p&4&&i1(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(nn=(Y=nn)||ne,cr(o,i),nn=Y):cr(o,i),Or(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(fe=i,ne=i.child;ne!==null;){for(re=fe=ne;fe!==null;){switch(te=fe,ce=te.child,te.tag){case 0:case 11:case 14:case 15:ac(4,te,te.return);break;case 1:xa(te,te.return);var me=te.stateNode;if(typeof me.componentWillUnmount=="function"){p=te,u=te.return;try{o=p,me.props=o.memoizedProps,me.state=o.memoizedState,me.componentWillUnmount()}catch(ge){ft(p,u,ge)}}break;case 5:xa(te,te.return);break;case 22:if(te.memoizedState!==null){l1(re);continue}}ce!==null?(ce.return=te,fe=ce):l1(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{y=re.stateNode,Y?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(D=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Di("display",S))}catch(ge){ft(i,i.return,ge)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=Y?"":re.memoizedProps}catch(ge){ft(i,i.return,ge)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:cr(o,i),Or(i),p&4&&i1(i);break;case 21:break;default:cr(o,i),Or(i)}}function Or(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(t1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Os(y,""),p.flags&=-33);var x=n1(i);Ep(i,x,y);break;case 3:case 4:var S=p.stateNode.containerInfo,D=n1(i);_p(i,D,S);break;default:throw Error(t(161))}}catch(F){ft(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function DI(i,o,u){fe=i,o1(i)}function o1(i,o,u){for(var p=(i.mode&1)!==0;fe!==null;){var y=fe,x=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||xd;if(!S){var D=y.alternate,F=D!==null&&D.memoizedState!==null||nn;D=xd;var Y=nn;if(xd=S,(nn=F)&&!Y)for(fe=y;fe!==null;)S=fe,F=S.child,S.tag===22&&S.memoizedState!==null?c1(y):F!==null?(F.return=S,fe=F):c1(y);for(;x!==null;)fe=x,o1(x),x=x.sibling;fe=y,xd=D,nn=Y}a1(i)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,fe=x):a1(i)}}function a1(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:nn||wd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!nn)if(u===null)p.componentDidMount();else{var y=o.elementType===o.type?u.memoizedProps:ar(o.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&lv(o,x,p);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}lv(o,S,u)}break;case 5:var D=o.stateNode;if(u===null&&o.flags&4){u=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&$i(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||o.flags&512&&wp(o)}catch(te){ft(o,o.return,te)}}if(o===i){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function l1(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function c1(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{wd(4,o)}catch(F){ft(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var y=o.return;try{p.componentDidMount()}catch(F){ft(o,y,F)}}var x=o.return;try{wp(o)}catch(F){ft(o,x,F)}break;case 5:var S=o.return;try{wp(o)}catch(F){ft(o,S,F)}}}catch(F){ft(o,o.return,F)}if(o===i){fe=null;break}var D=o.sibling;if(D!==null){D.return=o.return,fe=D;break}fe=o.return}}var VI=Math.ceil,_d=G.ReactCurrentDispatcher,kp=G.ReactCurrentOwner,Wn=G.ReactCurrentBatchConfig,$e=0,Ot=null,Tt=null,Ht=0,Pn=0,wa=Gi(0),Pt=0,lc=null,so=0,Ed=0,Tp=0,cc=null,yn=null,Sp=0,_a=1/0,hi=null,kd=!1,bp=null,es=null,Td=!1,ts=null,Sd=0,uc=0,Ip=null,bd=-1,Id=0;function dn(){return($e&6)!==0?tt():bd!==-1?bd:bd=tt()}function ns(i){return(i.mode&1)===0?1:($e&2)!==0&&Ht!==0?Ht&-Ht:vI.transition!==null?(Id===0&&(Id=Pl()),Id):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:Yo(i.type)),i)}function ur(i,o,u,p){if(50<uc)throw uc=0,Ip=null,Error(t(185));qs(i,u,p),(($e&2)===0||i!==Ot)&&(i===Ot&&(($e&2)===0&&(Ed|=u),Pt===4&&rs(i,Ht)),vn(i,p),u===1&&$e===0&&(o.mode&1)===0&&(_a=tt()+500,td&&Yi()))}function vn(i,o){var u=i.callbackNode;Ks(i,o);var p=Zr(i,i===Ot?Ht:0);if(p===0)u!==null&&$o(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&$o(u),o===1)i.tag===0?yI(d1.bind(null,i)):Y0(d1.bind(null,i)),fI(function(){($e&6)===0&&Yi()}),u=null;else{switch(Sr(p)){case 1:u=Wo;break;case 4:u=Cl;break;case 16:u=Us;break;case 536870912:u=Ho;break;default:u=Us}u=x1(u,u1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function u1(i,o){if(bd=-1,Id=0,($e&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ea()&&i.callbackNode!==u)return null;var p=Zr(i,i===Ot?Ht:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Cd(i,p);else{o=p;var y=$e;$e|=2;var x=f1();(Ot!==i||Ht!==o)&&(hi=null,_a=tt()+500,ao(i,o));do try{OI();break}catch(D){h1(i,D)}while(!0);Hf(),_d.current=x,$e=y,Tt!==null?o=0:(Ot=null,Ht=0,o=Pt)}if(o!==0){if(o===2&&(y=Rl(i),y!==0&&(p=y,o=Cp(i,y))),o===1)throw u=lc,ao(i,0),rs(i,p),vn(i,tt()),u;if(o===6)rs(i,p);else{if(y=i.current.alternate,(p&30)===0&&!MI(y)&&(o=Cd(i,p),o===2&&(x=Rl(i),x!==0&&(p=x,o=Cp(i,x))),o===1))throw u=lc,ao(i,0),rs(i,p),vn(i,tt()),u;switch(i.finishedWork=y,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:lo(i,yn,hi);break;case 3:if(rs(i,p),(p&130023424)===p&&(o=Sp+500-tt(),10<o)){if(Zr(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){dn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Df(lo.bind(null,i,yn,hi),o);break}lo(i,yn,hi);break;case 4:if(rs(i,p),(p&4194240)===p)break;for(o=i.eventTimes,y=-1;0<p;){var S=31-Tn(p);x=1<<S,S=o[S],S>y&&(y=S),p&=~x}if(p=y,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*VI(p/1960))-p,10<p){i.timeoutHandle=Df(lo.bind(null,i,yn,hi),p);break}lo(i,yn,hi);break;case 5:lo(i,yn,hi);break;default:throw Error(t(329))}}}return vn(i,tt()),i.callbackNode===u?u1.bind(null,i):null}function Cp(i,o){var u=cc;return i.current.memoizedState.isDehydrated&&(ao(i,o).flags|=256),i=Cd(i,o),i!==2&&(o=yn,yn=u,o!==null&&Ap(o)),i}function Ap(i){yn===null?yn=i:yn.push.apply(yn,i)}function MI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],x=y.getSnapshot;y=y.value;try{if(!sr(x(),y))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rs(i,o){for(o&=~Tp,o&=~Ed,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Tn(o),p=1<<u;i[u]=-1,o&=~p}}function d1(i){if(($e&6)!==0)throw Error(t(327));Ea();var o=Zr(i,0);if((o&1)===0)return vn(i,tt()),null;var u=Cd(i,o);if(i.tag!==0&&u===2){var p=Rl(i);p!==0&&(o=p,u=Cp(i,p))}if(u===1)throw u=lc,ao(i,0),rs(i,o),vn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,lo(i,yn,hi),vn(i,tt()),null}function Rp(i,o){var u=$e;$e|=1;try{return i(o)}finally{$e=u,$e===0&&(_a=tt()+500,td&&Yi())}}function oo(i){ts!==null&&ts.tag===0&&($e&6)===0&&Ea();var o=$e;$e|=1;var u=Wn.transition,p=Fe;try{if(Wn.transition=null,Fe=1,i)return i()}finally{Fe=p,Wn.transition=u,$e=o,($e&6)===0&&Yi()}}function Pp(){Pn=wa.current,rt(wa)}function ao(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,hI(u)),Tt!==null)for(u=Tt.return;u!==null;){var p=u;switch(Ff(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Zu();break;case 3:ya(),rt(pn),rt(Zt),Zf();break;case 5:Xf(p);break;case 4:ya();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Kf(p.type._context);break;case 22:case 23:Pp()}u=u.return}if(Ot=i,Tt=i=is(i.current,null),Ht=Pn=o,Pt=0,lc=null,Tp=Ed=so=0,yn=cc=null,no!==null){for(o=0;o<no.length;o++)if(u=no[o],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,x=u.pending;if(x!==null){var S=x.next;x.next=y,p.next=S}u.pending=p}no=null}return i}function h1(i,o){do{var u=Tt;try{if(Hf(),dd.current=md,hd){for(var p=ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}hd=!1}if(io=0,Lt=Rt=ct=null,nc=!1,rc=0,kp.current=null,u===null||u.return===null){Pt=1,lc=o,Tt=null;break}e:{var x=i,S=u.return,D=u,F=o;if(o=Ht,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ne=D,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=Lv(S);if(ce!==null){ce.flags&=-257,Ov(ce,S,D,x,o),ce.mode&1&&Mv(x,Y,o),o=ce,F=Y;var me=o.updateQueue;if(me===null){var ge=new Set;ge.add(F),o.updateQueue=ge}else me.add(F);break e}else{if((o&1)===0){Mv(x,Y,o),jp();break e}F=Error(t(426))}}else if(ot&&D.mode&1){var vt=Lv(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Ov(vt,S,D,x,o),$f(va(F,D));break e}}x=F=va(F,D),Pt!==4&&(Pt=2),cc===null?cc=[x]:cc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var K=Dv(x,F,o);av(x,K);break e;case 1:D=F;var z=x.type,Q=x.stateNode;if((x.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(es===null||!es.has(Q)))){x.flags|=65536,o&=-o,x.lanes|=o;var se=Vv(x,D,o);av(x,se);break e}}x=x.return}while(x!==null)}m1(u)}catch(ye){o=ye,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function f1(){var i=_d.current;return _d.current=md,i===null?md:i}function jp(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ot===null||(so&268435455)===0&&(Ed&268435455)===0||rs(Ot,Ht)}function Cd(i,o){var u=$e;$e|=2;var p=f1();(Ot!==i||Ht!==o)&&(hi=null,ao(i,o));do try{LI();break}catch(y){h1(i,y)}while(!0);if(Hf(),$e=u,_d.current=p,Tt!==null)throw Error(t(261));return Ot=null,Ht=0,Pt}function LI(){for(;Tt!==null;)p1(Tt)}function OI(){for(;Tt!==null&&!zs();)p1(Tt)}function p1(i){var o=v1(i.alternate,i,Pn);i.memoizedProps=i.pendingProps,o===null?m1(i):Tt=o,kp.current=null}function m1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=RI(u,o,Pn),u!==null){Tt=u;return}}else{if(u=PI(u,o),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Pt=6,Tt=null;return}}if(o=o.sibling,o!==null){Tt=o;return}Tt=o=i}while(o!==null);Pt===0&&(Pt=5)}function lo(i,o,u){var p=Fe,y=Wn.transition;try{Wn.transition=null,Fe=1,BI(i,o,u,p)}finally{Wn.transition=y,Fe=p}return null}function BI(i,o,u,p){do Ea();while(ts!==null);if(($e&6)!==0)throw Error(t(327));u=i.finishedWork;var y=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=u.lanes|u.childLanes;if(vf(i,x),i===Ot&&(Tt=Ot=null,Ht=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Td||(Td=!0,x1(Us,function(){return Ea(),null})),x=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||x){x=Wn.transition,Wn.transition=null;var S=Fe;Fe=1;var D=$e;$e|=4,kp.current=null,NI(i,u),s1(u,i),sI(jf),ni=!!Pf,jf=Pf=null,i.current=u,DI(u),Jr(),$e=D,Fe=S,Wn.transition=x}else i.current=u;if(Td&&(Td=!1,ts=i,Sd=y),x=i.pendingLanes,x===0&&(es=null),Vu(u.stateNode),vn(i,tt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)y=o[u],p(y.value,{componentStack:y.stack,digest:y.digest});if(kd)throw kd=!1,i=bp,bp=null,i;return(Sd&1)!==0&&i.tag!==0&&Ea(),x=i.pendingLanes,(x&1)!==0?i===Ip?uc++:(uc=0,Ip=i):uc=0,Yi(),null}function Ea(){if(ts!==null){var i=Sr(Sd),o=Wn.transition,u=Fe;try{if(Wn.transition=null,Fe=16>i?16:i,ts===null)var p=!1;else{if(i=ts,ts=null,Sd=0,($e&6)!==0)throw Error(t(331));var y=$e;for($e|=4,fe=i.current;fe!==null;){var x=fe,S=x.child;if((fe.flags&16)!==0){var D=x.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(fe=Y;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:ac(8,ne,x)}var re=ne.child;if(re!==null)re.return=ne,fe=re;else for(;fe!==null;){ne=fe;var te=ne.sibling,ce=ne.return;if(e1(ne),ne===Y){fe=null;break}if(te!==null){te.return=ce,fe=te;break}fe=ce}}}var me=x.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var vt=ge.sibling;ge.sibling=null,ge=vt}while(ge!==null)}}fe=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,fe=S;else e:for(;fe!==null;){if(x=fe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:ac(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,fe=K;break e}fe=x.return}}var z=i.current;for(fe=z;fe!==null;){S=fe;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,fe=Q;else e:for(S=z;fe!==null;){if(D=fe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:wd(9,D)}}catch(ye){ft(D,D.return,ye)}if(D===S){fe=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,fe=se;break e}fe=D.return}}if($e=y,Yi(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot($s,i)}catch{}p=!0}return p}finally{Fe=u,Wn.transition=o}}return!1}function g1(i,o,u){o=va(u,o),o=Dv(i,o,1),i=Ji(i,o,1),o=dn(),i!==null&&(qs(i,1,o),vn(i,o))}function ft(i,o,u){if(i.tag===3)g1(i,i,u);else for(;o!==null;){if(o.tag===3){g1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(es===null||!es.has(p))){i=va(u,i),i=Vv(o,i,1),o=Ji(o,i,1),i=dn(),o!==null&&(qs(o,1,i),vn(o,i));break}}o=o.return}}function FI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=dn(),i.pingedLanes|=i.suspendedLanes&u,Ot===i&&(Ht&u)===u&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>tt()-Sp?ao(i,0):Tp|=u),vn(i,o)}function y1(i,o){o===0&&((i.mode&1)===0?o=1:(o=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var u=dn();i=ci(i,o),i!==null&&(qs(i,o,u),vn(i,u))}function zI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),y1(i,u)}function UI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),y1(i,u)}var v1;v1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||pn.current)gn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return gn=!1,AI(i,o,u);gn=(i.flags&131072)!==0}else gn=!1,ot&&(o.flags&1048576)!==0&&X0(o,rd,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;vd(i,o),i=o.pendingProps;var y=ua(o,Zt.current);ga(o,u),y=np(null,o,p,i,y,u);var x=rp();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,mn(p)?(x=!0,ed(o)):x=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Qf(o),y.updater=gd,o.stateNode=y,y._reactInternals=o,cp(o,p,i,u),o=fp(null,o,p,!0,x,u)):(o.tag=0,ot&&x&&Bf(o),un(null,o,y,u),o=o.child),o;case 16:p=o.elementType;e:{switch(vd(i,o),i=o.pendingProps,y=p._init,p=y(p._payload),o.type=p,y=o.tag=WI(p),i=ar(p,i),y){case 0:o=hp(null,o,p,i,u);break e;case 1:o=Wv(null,o,p,i,u);break e;case 11:o=Bv(null,o,p,i,u);break e;case 14:o=Fv(null,o,p,ar(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),hp(i,o,p,y,u);case 1:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),Wv(i,o,p,y,u);case 3:e:{if(Hv(o),i===null)throw Error(t(387));p=o.pendingProps,x=o.memoizedState,y=x.element,ov(i,o),cd(o,p,null,u);var S=o.memoizedState;if(p=S.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){y=va(Error(t(423)),o),o=Kv(i,o,p,u,y);break e}else if(p!==y){y=va(Error(t(424)),o),o=Kv(i,o,p,u,y);break e}else for(Rn=qi(o.stateNode.containerInfo.firstChild),An=o,ot=!0,or=null,u=iv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(fa(),p===y){o=di(i,o,u);break e}un(i,o,p,u)}o=o.child}return o;case 5:return cv(o),i===null&&Uf(o),p=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,S=y.children,Nf(p,y)?S=null:x!==null&&Nf(p,x)&&(o.flags|=32),$v(i,o),un(i,o,S,u),o.child;case 6:return i===null&&Uf(o),null;case 13:return qv(i,o,u);case 4:return Yf(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=pa(o,null,p,u):un(i,o,p,u),o.child;case 11:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),Bv(i,o,p,y,u);case 7:return un(i,o,o.pendingProps,u),o.child;case 8:return un(i,o,o.pendingProps.children,u),o.child;case 12:return un(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,y=o.pendingProps,x=o.memoizedProps,S=y.value,Ze(od,p._currentValue),p._currentValue=S,x!==null)if(sr(x.value,S)){if(x.children===y.children&&!pn.current){o=di(i,o,u);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var D=x.dependencies;if(D!==null){S=x.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(x.tag===1){F=ui(-1,u&-u),F.tag=2;var Y=x.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),Y.pending=F}}x.lanes|=u,F=x.alternate,F!==null&&(F.lanes|=u),qf(x.return,u,o),D.lanes|=u;break}F=F.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=u,D=S.alternate,D!==null&&(D.lanes|=u),qf(S,u,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}un(i,o,y.children,u),o=o.child}return o;case 9:return y=o.type,p=o.pendingProps.children,ga(o,u),y=Un(y),p=p(y),o.flags|=1,un(i,o,p,u),o.child;case 14:return p=o.type,y=ar(p,o.pendingProps),y=ar(p.type,y),Fv(i,o,p,y,u);case 15:return zv(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),vd(i,o),o.tag=1,mn(p)?(i=!0,ed(o)):i=!1,ga(o,u),jv(o,p,y),cp(o,p,y,u),fp(null,o,p,!0,i,u);case 19:return Qv(i,o,u);case 22:return Uv(i,o,u)}throw Error(t(156,o.tag))};function x1(i,o){return Il(i,o)}function $I(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(i,o,u,p){return new $I(i,o,u,p)}function Np(i){return i=i.prototype,!(!i||!i.isReactComponent)}function WI(i){if(typeof i=="function")return Np(i)?1:0;if(i!=null){if(i=i.$$typeof,i===W)return 11;if(i===He)return 14}return 2}function is(i,o){var u=i.alternate;return u===null?(u=Hn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Ad(i,o,u,p,y,x){var S=2;if(p=i,typeof i=="function")Np(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return co(u.children,y,x,o);case b:S=8,y|=8;break;case j:return i=Hn(12,u,o,y|2),i.elementType=j,i.lanes=x,i;case M:return i=Hn(13,u,o,y),i.elementType=M,i.lanes=x,i;case Ne:return i=Hn(19,u,o,y),i.elementType=Ne,i.lanes=x,i;case Se:return Rd(u,y,x,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:S=10;break e;case O:S=9;break e;case W:S=11;break e;case He:S=14;break e;case _t:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Hn(S,u,o,y),o.elementType=i,o.type=p,o.lanes=x,o}function co(i,o,u,p){return i=Hn(7,i,p,o),i.lanes=u,i}function Rd(i,o,u,p){return i=Hn(22,i,p,o),i.elementType=Se,i.lanes=u,i.stateNode={isHidden:!1},i}function Dp(i,o,u){return i=Hn(6,i,null,o),i.lanes=u,i}function Vp(i,o,u){return o=Hn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function HI(i,o,u,p,y){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Mp(i,o,u,p,y,x,S,D,F){return i=new HI(i,o,u,D,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=Hn(3,null,null,o),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(x),i}function KI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function w1(i){if(!i)return Qi;i=i._reactInternals;e:{if(rr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(mn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(mn(u))return G0(i,u,o)}return o}function _1(i,o,u,p,y,x,S,D,F){return i=Mp(u,p,!0,i,y,x,S,D,F),i.context=w1(null),u=i.current,p=dn(),y=ns(u),x=ui(p,y),x.callback=o??null,Ji(u,x,y),i.current.lanes=y,qs(i,y,p),vn(i,p),i}function Pd(i,o,u,p){var y=o.current,x=dn(),S=ns(y);return u=w1(u),o.context===null?o.context=u:o.pendingContext=u,o=ui(x,S),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Ji(y,o,S),i!==null&&(ur(i,y,S,x),ld(i,y,S)),S}function jd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function E1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Lp(i,o){E1(i,o),(i=i.alternate)&&E1(i,o)}function qI(){return null}var k1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Op(i){this._internalRoot=i}Nd.prototype.render=Op.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Pd(i,o,null,null)},Nd.prototype.unmount=Op.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;oo(function(){Pd(null,i,null,null)}),o[si]=null}};function Nd(i){this._internalRoot=i}Nd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ml();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Sn.length&&o!==0&&o<Sn[u].priority;u++);Sn.splice(u,0,i),u===0&&Go(i)}};function Bp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function T1(){}function GI(i,o,u,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var Y=jd(S);x.call(Y)}}var S=_1(o,p,i,0,null,!1,!1,"",T1);return i._reactRootContainer=S,i[si]=S.current,Gl(i.nodeType===8?i.parentNode:i),oo(),S}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var D=p;p=function(){var Y=jd(F);D.call(Y)}}var F=Mp(i,0,!1,null,null,!1,!1,"",T1);return i._reactRootContainer=F,i[si]=F.current,Gl(i.nodeType===8?i.parentNode:i),oo(function(){Pd(o,F,u,p)}),F}function Vd(i,o,u,p,y){var x=u._reactRootContainer;if(x){var S=x;if(typeof y=="function"){var D=y;y=function(){var F=jd(S);D.call(F)}}Pd(o,S,i,y)}else S=GI(u,o,i,y,p);return jd(S)}Dl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ke(o.pendingLanes);u!==0&&(Nl(o,u|1),vn(o,tt()),($e&6)===0&&(_a=tt()+500,Yi()))}break;case 13:oo(function(){var p=ci(i,1);if(p!==null){var y=dn();ur(p,i,1,y)}}),Lp(i,1)}},Ko=function(i){if(i.tag===13){var o=ci(i,134217728);if(o!==null){var u=dn();ur(o,i,134217728,u)}Lp(i,134217728)}},Vl=function(i){if(i.tag===13){var o=ns(i),u=ci(i,o);if(u!==null){var p=dn();ur(u,i,o,p)}Lp(i,o)}},Ml=function(){return Fe},Ll=function(i,o){var u=Fe;try{return Fe=i,o()}finally{Fe=u}},Qr=function(i,o,u){switch(o){case"input":if(Ls(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var y=Ju(p);if(!y)throw Error(t(90));vl(p),Ls(p,y)}}}break;case"textarea":ku(i,u);break;case"select":o=u.value,o!=null&&tr(i,!!u.multiple,o,!1)}},bu=Rp,Iu=oo;var QI={usingClientEntryPoint:!1,Events:[Xl,la,Ju,Mi,Li,Rp]},dc={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YI={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Du(i),i===null?null:i.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance||qI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{$s=Md.inject(YI),kn=Md}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QI,xn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bp(o))throw Error(t(200));return KI(i,o,null,u)},xn.createRoot=function(i,o){if(!Bp(i))throw Error(t(299));var u=!1,p="",y=k1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=Mp(i,1,!1,null,null,u,!1,p,y),i[si]=o.current,Gl(i.nodeType===8?i.parentNode:i),new Op(o)},xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Du(o),i=i===null?null:i.stateNode,i},xn.flushSync=function(i){return oo(i)},xn.hydrate=function(i,o,u){if(!Dd(o))throw Error(t(200));return Vd(null,i,o,!0,u)},xn.hydrateRoot=function(i,o,u){if(!Bp(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,y=!1,x="",S=k1;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=_1(o,null,i,1,u??null,y,!1,x,S),i[si]=o.current,Gl(i),p)for(i=0;i<p.length;i++)u=p[i],y=u._getVersion,y=y(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,y]:o.mutableSourceEagerHydrationData.push(u,y);return new Nd(o)},xn.render=function(i,o,u){if(!Dd(o))throw Error(t(200));return Vd(null,i,o,!1,u)},xn.unmountComponentAtNode=function(i){if(!Dd(i))throw Error(t(40));return i._reactRootContainer?(oo(function(){Vd(null,null,i,!1,function(){i._reactRootContainer=null,i[si]=null})}),!0):!1},xn.unstable_batchedUpdates=Rp,xn.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Dd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Vd(i,o,u,!1,p)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var j1;function s2(){if(j1)return Up.exports;j1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Up.exports=i2(),Up.exports}var N1;function o2(){if(N1)return Ld;N1=1;var n=s2();return Ld.createRoot=n.createRoot,Ld.hydrateRoot=n.hydrateRoot,Ld}var a2=o2();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var D1="popstate";function l2(n={}){function e(s,a){let{pathname:l="/",search:f="",hash:d=""}=Ao(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Im("",{pathname:l,search:f,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let l=s.document.querySelector("base"),f="";if(l&&l.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof a=="string"?a:Mc(a))}function r(s,a){Dn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return u2(e,t,r,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c2(){return Math.random().toString(36).substring(2,10)}function V1(n,e){return{usr:n.state,key:n.key,idx:e}}function Im(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ao(e):e,state:t,key:e&&e.key||r||c2()}}function Mc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ao(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function u2(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,f="POP",d=null,m=g();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function g(){return(l.state||{idx:null}).idx}function v(){f="POP";let I=g(),V=I==null?null:I-m;m=I,d&&d({action:f,location:C.location,delta:V})}function _(I,V){f="PUSH";let B=Im(C.location,I,V);t&&t(B,I),m=g()+1;let P=V1(B,m),G=C.createHref(B);try{l.pushState(P,"",G)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(G)}a&&d&&d({action:f,location:C.location,delta:1})}function T(I,V){f="REPLACE";let B=Im(C.location,I,V);t&&t(B,I),m=g();let P=V1(B,m),G=C.createHref(B);l.replaceState(P,"",G),a&&d&&d({action:f,location:C.location,delta:0})}function k(I){return d2(I)}let C={get action(){return f},get location(){return n(s,l)},listen(I){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(D1,v),d=I,()=>{s.removeEventListener(D1,v),d=null}},createHref(I){return e(s,I)},createURL:k,encodeLocation(I){let V=k(I);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:_,replace:T,go(I){return l.go(I)}};return C}function d2(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Mc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function z_(n,e,t="/"){return h2(n,e,t,!1)}function h2(n,e,t,r){let s=typeof e=="string"?Ao(e):e,a=wi(s.pathname||"/",t);if(a==null)return null;let l=U_(n);f2(l);let f=null;for(let d=0;f==null&&d<l.length;++d){let m=T2(a);f=E2(l[d],m,r)}return f}function U_(n,e=[],t=[],r="",s=!1){let a=(l,f,d=s,m)=>{let g={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;at(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let v=gi([r,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(at(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),U_(l.children,e,_,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:w2(v,l.index),routesMeta:_})};return n.forEach((l,f)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,f);else for(let m of $_(l.path))a(l,f,!0,m)}),e}function $_(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=$_(r.join("/")),f=[];return f.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&f.push(...l),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function f2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var p2=/^:[\w-]+$/,m2=3,g2=2,y2=1,v2=10,x2=-2,M1=n=>n==="*";function w2(n,e){let t=n.split("/"),r=t.length;return t.some(M1)&&(r+=x2),e&&(r+=g2),t.filter(s=>!M1(s)).reduce((s,a)=>s+(p2.test(a)?m2:a===""?y2:v2),r)}function _2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function E2(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),_=d.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gi([a,v.pathname]),pathnameBase:C2(gi([a,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(a=gi([a,v.pathnameBase]))}return l}function uh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=k2(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},_)=>{if(g==="*"){let k=f[_]||"";l=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const T=f[_];return v&&!T?m[g]=void 0:m[g]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function k2(n,e=!1,t=!0){Dn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function T2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S2=n=>W_.test(n);function b2(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ao(n):n,a;if(t)if(S2(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Dn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=L1(t.substring(1),"/"):a=L1(t,e)}else a=e;return{pathname:a,search:A2(r),hash:R2(s)}}function L1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Hp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ag(n){let e=I2(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Rg(n,e,t,r=!1){let s;typeof n=="string"?s=Ao(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),Hp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Hp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Hp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,f;if(l==null)f=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}f=v>=0?e[v]:"/"}let d=b2(s,f),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var gi=n=>n.join("/").replace(/\/\/+/g,"/"),C2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),A2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,R2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,P2=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function j2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function N2(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var H_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function K_(n,e){let t=n;if(typeof t!="string"||!W_.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(H_)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=wi(l.pathname,e);l.origin===a.origin&&f!=null?t=f+l.search+l.hash:s=!0}catch{Dn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q_=["POST","PUT","PATCH","DELETE"];new Set(q_);var D2=["GET",...q_];new Set(D2);var el=N.createContext(null);el.displayName="DataRouter";var Uh=N.createContext(null);Uh.displayName="DataRouterState";var V2=N.createContext(!1),G_=N.createContext({isTransitioning:!1});G_.displayName="ViewTransition";var M2=N.createContext(new Map);M2.displayName="Fetchers";var L2=N.createContext(null);L2.displayName="Await";var Mn=N.createContext(null);Mn.displayName="Navigation";var tu=N.createContext(null);tu.displayName="Location";var wr=N.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var Pg=N.createContext(null);Pg.displayName="RouteError";var Q_="REACT_ROUTER_ERROR",O2="REDIRECT",B2="ROUTE_ERROR_RESPONSE";function F2(n){if(n.startsWith(`${Q_}:${O2}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function z2(n){if(n.startsWith(`${Q_}:${B2}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new P2(e.status,e.statusText,e.data)}catch{}}function U2(n,{relative:e}={}){at(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Mn),{hash:s,pathname:a,search:l}=ru(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:gi([t,a])),r.createHref({pathname:f,search:l,hash:s})}function tl(){return N.useContext(tu)!=null}function er(){return at(tl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(tu).location}var Y_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X_(n){N.useContext(Mn).static||N.useLayoutEffect(n)}function nu(){let{isDataRoute:n}=N.useContext(wr);return n?tC():$2()}function $2(){at(tl(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(el),{basename:e,navigator:t}=N.useContext(Mn),{matches:r}=N.useContext(wr),{pathname:s}=er(),a=JSON.stringify(Ag(r)),l=N.useRef(!1);return X_(()=>{l.current=!0}),N.useCallback((d,m={})=>{if(Dn(l.current,Y_),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=Rg(d,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:gi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,s,n])}N.createContext(null);function J_(){let{matches:n}=N.useContext(wr),e=n[n.length-1];return e?e.params:{}}function ru(n,{relative:e}={}){let{matches:t}=N.useContext(wr),{pathname:r}=er(),s=JSON.stringify(Ag(t));return N.useMemo(()=>Rg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function W2(n,e){return Z_(n,e)}function Z_(n,e,t,r,s){var B;at(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=N.useContext(Mn),{matches:l}=N.useContext(wr),f=l[l.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",v=f&&f.route;{let P=v&&v.path||"";tE(m,!v||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let _=er(),T;if(e){let P=typeof e=="string"?Ao(e):e;at(g==="/"||((B=P.pathname)==null?void 0:B.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),T=P}else T=_;let k=T.pathname||"/",C=k;if(g!=="/"){let P=g.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(P.length).join("/")}let I=z_(n,{pathname:C});Dn(v||I!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Dn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Q2(I&&I.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:gi([g,a.encodeLocation?a.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:gi([g,a.encodeLocation?a.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),l,t,r,s);return e&&V?N.createElement(tu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},V):V}function H2(){let n=eC(),e=j2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var K2=N.createElement(H2,null),eE=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=z2(n.digest);t&&(n=t)}let e=n!==void 0?N.createElement(wr.Provider,{value:this.props.routeContext},N.createElement(Pg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?N.createElement(q2,{error:n},e):e}};eE.contextType=V2;var Kp=new WeakMap;function q2({children:n,error:e}){let{basename:t}=N.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=F2(e.digest);if(r){let s=Kp.get(e);if(s)throw s;let a=K_(r.location,t);if(H_&&!Kp.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Kp.set(e,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function G2({routeContext:n,match:e,children:t}){let r=N.useContext(el);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(wr.Provider,{value:n},t)}function Q2(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let g=a.findIndex(v=>v.route.id&&(l==null?void 0:l[v.route.id])!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:_,errors:T}=t,k=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||k){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let m=t&&r?(g,v)=>{var _,T;r(g,{location:t.location,params:((T=(_=t.matches)==null?void 0:_[0])==null?void 0:T.params)??{},unstable_pattern:N2(t.matches),errorInfo:v})}:void 0;return a.reduceRight((g,v,_)=>{let T,k=!1,C=null,I=null;t&&(T=l&&v.route.id?l[v.route.id]:void 0,C=v.route.errorElement||K2,f&&(d<0&&_===0?(tE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,I=null):d===_&&(k=!0,I=v.route.hydrateFallbackElement||null)));let V=e.concat(a.slice(0,_+1)),B=()=>{let P;return T?P=C:k?P=I:v.route.Component?P=N.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=g,N.createElement(G2,{match:v,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:P})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?N.createElement(eE,{location:t.location,revalidation:t.revalidation,component:C,error:T,children:B(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:m}):B()},null)}function jg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y2(n){let e=N.useContext(el);return at(e,jg(n)),e}function X2(n){let e=N.useContext(Uh);return at(e,jg(n)),e}function J2(n){let e=N.useContext(wr);return at(e,jg(n)),e}function Ng(n){let e=J2(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Z2(){return Ng("useRouteId")}function eC(){var r;let n=N.useContext(Pg),e=X2("useRouteError"),t=Ng("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function tC(){let{router:n}=Y2("useNavigate"),e=Ng("useNavigate"),t=N.useRef(!1);return X_(()=>{t.current=!0}),N.useCallback(async(s,a={})=>{Dn(t.current,Y_),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var O1={};function tE(n,e,t){!e&&!O1[n]&&(O1[n]=!0,Dn(!1,t))}N.memo(nC);function nC({routes:n,future:e,state:t,onError:r}){return Z_(n,void 0,t,r,e)}function rC({to:n,replace:e,state:t,relative:r}){at(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Mn);Dn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(wr),{pathname:l}=er(),f=nu(),d=Rg(n,Ag(a),l,r==="path"),m=JSON.stringify(d);return N.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function St(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){at(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[f,s,a,l]);typeof t=="string"&&(t=Ao(t));let{pathname:m="/",search:g="",hash:v="",state:_=null,key:T="default"}=t,k=N.useMemo(()=>{let C=wi(m,f);return C==null?null:{location:{pathname:C,search:g,hash:v,state:_,key:T},navigationType:r}},[f,m,g,v,_,T,r]);return Dn(k!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:N.createElement(Mn.Provider,{value:d},N.createElement(tu.Provider,{children:e,value:k}))}function sC({children:n,location:e}){return W2(Cm(n),e)}function Cm(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){t.push.apply(t,Cm(r.props.children,a));return}at(r.type===St,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Cm(r.props.children,a)),t.push(l)}),t}var Gd="get",Qd="application/x-www-form-urlencoded";function $h(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function oC(n){return $h(n)&&n.tagName.toLowerCase()==="button"}function aC(n){return $h(n)&&n.tagName.toLowerCase()==="form"}function lC(n){return $h(n)&&n.tagName.toLowerCase()==="input"}function cC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uC(n,e){return n.button===0&&(!e||e==="_self")&&!cC(n)}var Od=null;function dC(){if(Od===null)try{new FormData(document.createElement("form"),0),Od=!1}catch{Od=!0}return Od}var hC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qp(n){return n!=null&&!hC.has(n)?(Dn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qd}"`),null):n}function fC(n,e){let t,r,s,a,l;if(aC(n)){let f=n.getAttribute("action");r=f?wi(f,e):null,t=n.getAttribute("method")||Gd,s=qp(n.getAttribute("enctype"))||Qd,a=new FormData(n)}else if(oC(n)||lC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?wi(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Gd,s=qp(n.getAttribute("formenctype"))||qp(f.getAttribute("enctype"))||Qd,a=new FormData(f,n),!dC()){let{name:m,type:g,value:v}=n;if(g==="image"){let _=m?`${m}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else m&&a.append(m,v)}}else{if($h(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Gd,r=null,s=Qd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&wi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function mC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yC(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await mC(a,t);return l.links?l.links():[]}return[]}));return _C(r.flat(1).filter(gC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function B1(n,e,t,r,s,a){let l=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,m)=>l(d,m)||f(d,m)):a==="data"?e.filter((d,m)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function vC(n,e,{includeHydrateFallback:t}={}){return xC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function xC(n){return[...new Set(n)]}function wC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _C(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(wC(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function nE(){let n=N.useContext(el);return Dg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function EC(){let n=N.useContext(Uh);return Dg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Vg=N.createContext(void 0);Vg.displayName="FrameworkContext";function rE(){let n=N.useContext(Vg);return Dg(n,"You must render this element inside a <HydratedRouter> element"),n}function kC(n,e){let t=N.useContext(Vg),[r,s]=N.useState(!1),[a,l]=N.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,_=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let C=V=>{V.forEach(B=>{l(B.isIntersecting)})},I=new IntersectionObserver(C,{threshold:.5});return _.current&&I.observe(_.current),()=>{I.disconnect()}}},[n]),N.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let T=()=>{s(!0)},k=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:fc(f,T),onBlur:fc(d,k),onMouseEnter:fc(m,T),onMouseLeave:fc(g,k),onTouchStart:fc(v,T)}]:[!1,_,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TC({page:n,...e}){let{router:t}=nE(),r=N.useMemo(()=>z_(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(bC,{page:n,matches:r,...e}):null}function SC(n){let{manifest:e,routeModules:t}=rE(),[r,s]=N.useState([]);return N.useEffect(()=>{let a=!1;return yC(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function bC({page:n,matches:e,...t}){let r=er(),{future:s,manifest:a,routeModules:l}=rE(),{basename:f}=nE(),{loaderData:d,matches:m}=EC(),g=N.useMemo(()=>B1(n,e,m,a,r,"data"),[n,e,m,a,r]),v=N.useMemo(()=>B1(n,e,m,a,r,"assets"),[n,e,m,a,r]),_=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,I=!1;if(e.forEach(B=>{var G;let P=a.routes[B.route.id];!P||!P.hasLoader||(!g.some($=>$.route.id===B.route.id)&&B.route.id in d&&((G=l[B.route.id])!=null&&G.shouldRevalidate)||P.hasClientLoader?I=!0:C.add(B.route.id))}),C.size===0)return[];let V=pC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return I&&C.size>0&&V.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[V.pathname+V.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,a,g,e,n,l]),T=N.useMemo(()=>vC(v,a),[v,a]),k=SC(v);return N.createElement(N.Fragment,null,_.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),k.map(({key:C,link:I})=>N.createElement("link",{key:C,nonce:t.nonce,...I})))}function IC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CC&&(window.__reactRouterVersion="7.12.0")}catch{}function AC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=N.useRef();s.current==null&&(s.current=l2({window:r,v5Compat:!0}));let a=s.current,[l,f]=N.useState({action:a.action,location:a.location}),d=N.useCallback(m=>{t===!1?f(m):N.startTransition(()=>f(m))},[t]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(iC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var iE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:f,target:d,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...T},k){let{basename:C,unstable_useTransitions:I}=N.useContext(Mn),V=typeof m=="string"&&iE.test(m),B=K_(m,C);m=B.to;let P=U2(m,{relative:s}),[G,$,H]=kC(r,T),A=NC(m,{replace:l,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:I});function b(L){e&&e(L),L.defaultPrevented||A(L)}let j=N.createElement("a",{...T,...H,href:B.absoluteURL||P,onClick:B.isExternal||a?e:b,ref:IC(k,$),target:d,"data-discover":!V&&t==="render"?"true":void 0});return G&&!V?N.createElement(N.Fragment,null,j,N.createElement(TC,{page:P})):j});ue.displayName="Link";var RC=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:f,children:d,...m},g){let v=ru(l,{relative:m.relative}),_=er(),T=N.useContext(Uh),{navigator:k,basename:C}=N.useContext(Mn),I=T!=null&&OC(v)&&f===!0,V=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,B=_.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(B=B.toLowerCase(),P=P?P.toLowerCase():null,V=V.toLowerCase()),P&&C&&(P=wi(P,C)||P);const G=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let $=B===V||!s&&B.startsWith(V)&&B.charAt(G)==="/",H=P!=null&&(P===V||!s&&P.startsWith(V)&&P.charAt(V.length)==="/"),A={isActive:$,isPending:H,isTransitioning:I},b=$?e:void 0,j;typeof r=="function"?j=r(A):j=[r,$?"active":null,H?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(A):a;return N.createElement(ue,{...m,"aria-current":b,className:j,ref:g,style:L,to:l,viewTransition:f},typeof d=="function"?d(A):d)});RC.displayName="NavLink";var PC=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=Gd,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_,...T},k)=>{let{unstable_useTransitions:C}=N.useContext(Mn),I=MC(),V=LC(f,{relative:m}),B=l.toLowerCase()==="get"?"get":"post",P=typeof f=="string"&&iE.test(f),G=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let H=$.nativeEvent.submitter,A=(H==null?void 0:H.getAttribute("formmethod"))||l,b=()=>I(H||$.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:a,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:_});C&&t!==!1?N.startTransition(()=>b()):b()};return N.createElement("form",{ref:k,method:B,action:V,onSubmit:r?d:G,...T,"data-discover":!P&&n==="render"?"true":void 0})});PC.displayName="Form";function jC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sE(n){let e=N.useContext(el);return at(e,jC(n)),e}function NC(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=nu(),g=er(),v=ru(n,{relative:a});return N.useCallback(_=>{if(uC(_,e)){_.preventDefault();let T=t!==void 0?t:Mc(g)===Mc(v),k=()=>m(n,{replace:T,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});d?N.startTransition(()=>k()):k()}},[g,m,v,t,r,e,n,s,a,l,f,d])}var DC=0,VC=()=>`__${String(++DC)}__`;function MC(){let{router:n}=sE("useSubmit"),{basename:e}=N.useContext(Mn),t=Z2(),r=n.fetch,s=n.navigate;return N.useCallback(async(a,l={})=>{let{action:f,method:d,encType:m,formData:g,body:v}=fC(a,e);if(l.navigate===!1){let _=l.fetcherKey||VC();await r(_,t,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,flushSync:l.flushSync})}else await s(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function LC(n,{relative:e}={}){let{basename:t}=N.useContext(Mn),r=N.useContext(wr);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...ru(n||".",{relative:e})},l=er();if(n==null){a.search=l.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(v=>v).forEach(v=>f.append("index",v));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:gi([t,a.pathname])),Mc(a)}function OC(n,{relative:e}={}){let t=N.useContext(G_);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=sE("useViewTransitionState"),s=ru(n,{relative:e});if(!t.isTransitioning)return!1;let a=wi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=wi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return uh(s.pathname,l)!=null||uh(s.pathname,a)!=null}const BC=()=>{};var F1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},FC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],f=n[t++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,f=l?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=a>>2,v=(a&3)<<4|f>>4;let _=(f&15)<<2|m>>6,T=m&63;d||(T=64,l||(_=64)),r.push(t[g],t[v],t[_],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||m==null||v==null)throw new zC;const _=a<<2|f>>4;if(r.push(_),m!==64){const T=f<<4&240|m>>2;if(r.push(T),v!==64){const k=m<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UC=function(n){const e=oE(n);return aE.encodeByteArray(e,!0)},dh=function(n){return UC(n).replace(/\./g,"")},lE=function(n){try{return aE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=()=>$C().__FIREBASE_DEFAULTS__,HC=()=>{if(typeof process>"u"||typeof F1>"u")return;const n=F1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lE(n[1]);return e&&JSON.parse(e)},Wh=()=>{try{return BC()||WC()||HC()||KC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cE=n=>{var e,t;return(t=(e=Wh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},qC=n=>{const e=cE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uE=()=>{var n;return(n=Wh())==null?void 0:n.config},dE=n=>{var e;return(e=Wh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dh(JSON.stringify(t)),dh(JSON.stringify(l)),""].join(".")}const Sc={};function YC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?n.emulator.push(e):n.prod.push(e);return n}function XC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let z1=!1;function fE(n,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||Sc[n]===e||Sc[n]||z1)return;Sc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=YC().prod.length>0;function l(){const _=document.getElementById(r);_&&_.remove()}function f(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function m(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{z1=!0,l()},_}function g(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=XC(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),C=t("learnmore"),I=document.getElementById(C)||document.createElement("a"),V=t("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const P=_.element;f(P),g(I,C);const G=m();d(B,V),P.append(B,k,I,G),document.body.appendChild(P)}a?(k.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function ZC(){var e;const n=(e=Wh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rA(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iA(){return!ZC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){try{return typeof indexedDB=="object"}catch{return!1}}function oA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="FirebaseError";class Ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aA,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?lA(a,r):"Error",f=`${this.serviceName}: ${l} (${s}).`;return new Ii(s,f,r)}}function lA(n,e){return n.replace(cA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cA=/\{\$([^}]+)}/g;function uA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ws(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(U1(a)&&U1(l)){if(!ws(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function U1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function vc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dA(n,e){const t=new hA(n,e);return t.subscribe.bind(t)}class hA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Gp),s.error===void 0&&(s.error=Gp),s.complete===void 0&&(s.complete=Gp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n){return n&&n._delegate?n._delegate:n}class _o{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new GC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gA(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mA(n){return n===ho?void 0:n}function gA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const vA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},xA=Le.INFO,wA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},_A=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=wA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=xA,this._logHandler=_A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const EA=(n,e)=>e.some(t=>n instanceof t);let $1,W1;function kA(){return $1||($1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return W1||(W1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pE=new WeakMap,Am=new WeakMap,mE=new WeakMap,Qp=new WeakMap,Lg=new WeakMap;function SA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ps(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&pE.set(t,n)}).catch(()=>{}),Lg.set(e,n),e}function bA(n){if(Am.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Am.set(n,e)}let Rm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Am.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IA(n){Rm=n(Rm)}function CA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Yp(this),e,...t);return mE.set(r,e.sort?e.sort():[e]),ps(r)}:TA().includes(n)?function(...e){return n.apply(Yp(this),e),ps(pE.get(this))}:function(...e){return ps(n.apply(Yp(this),e))}}function AA(n){return typeof n=="function"?CA(n):(n instanceof IDBTransaction&&bA(n),EA(n,kA())?new Proxy(n,Rm):n)}function ps(n){if(n instanceof IDBRequest)return SA(n);if(Qp.has(n))return Qp.get(n);const e=AA(n);return e!==n&&(Qp.set(n,e),Lg.set(e,n)),e}const Yp=n=>Lg.get(n);function RA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),f=ps(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ps(l.result),d.oldVersion,d.newVersion,ps(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const PA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],Xp=new Map;function H1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=jA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PA.includes(t)))return;const a=async function(l,...f){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return Xp.set(e,a),a}IA(n=>({...n,get:(e,t,r)=>H1(e,t)||n.get(e,t,r),has:(e,t)=>!!H1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function DA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",K1="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Mg("@firebase/app"),VA="@firebase/app-compat",MA="@firebase/analytics-compat",LA="@firebase/analytics",OA="@firebase/app-check-compat",BA="@firebase/app-check",FA="@firebase/auth",zA="@firebase/auth-compat",UA="@firebase/database",$A="@firebase/data-connect",WA="@firebase/database-compat",HA="@firebase/functions",KA="@firebase/functions-compat",qA="@firebase/installations",GA="@firebase/installations-compat",QA="@firebase/messaging",YA="@firebase/messaging-compat",XA="@firebase/performance",JA="@firebase/performance-compat",ZA="@firebase/remote-config",eR="@firebase/remote-config-compat",tR="@firebase/storage",nR="@firebase/storage-compat",rR="@firebase/firestore",iR="@firebase/ai",sR="@firebase/firestore-compat",oR="firebase",aR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",lR={[Pm]:"fire-core",[VA]:"fire-core-compat",[LA]:"fire-analytics",[MA]:"fire-analytics-compat",[BA]:"fire-app-check",[OA]:"fire-app-check-compat",[FA]:"fire-auth",[zA]:"fire-auth-compat",[UA]:"fire-rtdb",[$A]:"fire-data-connect",[WA]:"fire-rtdb-compat",[HA]:"fire-fn",[KA]:"fire-fn-compat",[qA]:"fire-iid",[GA]:"fire-iid-compat",[QA]:"fire-fcm",[YA]:"fire-fcm-compat",[XA]:"fire-perf",[JA]:"fire-perf-compat",[ZA]:"fire-rc",[eR]:"fire-rc-compat",[tR]:"fire-gcs",[nR]:"fire-gcs-compat",[rR]:"fire-fst",[sR]:"fire-fst-compat",[iR]:"fire-vertex","fire-js":"fire-js",[oR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,cR=new Map,Nm=new Map;function q1(n,e){try{n.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fa(n){const e=n.name;if(Nm.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,n);for(const t of hh.values())q1(t,n);for(const t of cR.values())q1(t,n);return!0}function Og(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new iu("app","Firebase",uR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=aR;function gE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:jm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(t||(t=uE()),!t)throw ms.create("no-options");const a=hh.get(s);if(a){if(ws(t,a.options)&&ws(r,a.config))return a;throw ms.create("duplicate-app",{appName:s})}const l=new yA(s);for(const d of Nm.values())l.addComponent(d);const f=new dR(t,r,l);return hh.set(s,f),f}function yE(n=jm){const e=hh.get(n);if(!e&&n===jm&&uE())return gE();if(!e)throw ms.create("no-app",{appName:n});return e}function gs(n,e,t){let r=lR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(l.join(" "));return}Fa(new _o(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebase-heartbeat-database",fR=1,Lc="firebase-heartbeat-store";let Jp=null;function vE(){return Jp||(Jp=RA(hR,fR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),Jp}async function pR(n){try{const t=(await vE()).transaction(Lc),r=await t.objectStore(Lc).get(xE(n));return await t.done,r}catch(e){if(e instanceof Ii)_i.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function G1(n,e){try{const r=(await vE()).transaction(Lc,"readwrite");await r.objectStore(Lc).put(e,xE(n)),await r.done}catch(t){if(t instanceof Ii)_i.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(r.message)}}}function xE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1024,gR=30;class yR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Q1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>gR){const l=wR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Q1(),{heartbeatsToSend:r,unsentEntries:s}=vR(this._heartbeatsCache.heartbeats),a=dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _i.warn(t),""}}}function Q1(){return new Date().toISOString().substring(0,10)}function vR(n,e=mR){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Y1(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Y1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sA()?oA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Y1(n){return dh(JSON.stringify({version:2,heartbeats:n})).length}function wR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){Fa(new _o("platform-logger",e=>new NA(e),"PRIVATE")),Fa(new _o("heartbeat",e=>new yR(e),"PRIVATE")),gs(Pm,K1,n),gs(Pm,K1,"esm2020"),gs("fire-js","")}_R("");function wE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ER=wE,_E=new iu("auth","Firebase",wE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Mg("@firebase/auth");function kR(n,...e){fh.logLevel<=Le.WARN&&fh.warn(`Auth (${rl}): ${n}`,...e)}function Yd(n,...e){fh.logLevel<=Le.ERROR&&fh.error(`Auth (${rl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,...e){throw Fg(n,...e)}function pr(n,...e){return Fg(n,...e)}function Bg(n,e,t){const r={...ER(),[e]:t};return new iu("auth","Firebase",r).create(e,{appName:n.name})}function yi(n){return Bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(n,"argument-error"),Bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _E.create(n,...e)}function ke(n,e,...t){if(!n)throw Fg(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yd(e),new Error(e)}function Ei(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function SR(){return X1()==="http:"||X1()==="https:"}function X1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SR()||tA()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=JC()||nA()}get(){return bR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RR=new ou(3e4,6e4);function Ps(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ci(n,e,t,r,s={}){return kE(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=su({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...a};return eA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&nl(n.emulatorConfig.host)&&(m.credentials="include"),EE.fetch()(await TE(n,n.config.apiHost,t,f),m)})}async function kE(n,e,t){n._canInitEmulator=!1;const r={...CR,...e};try{const s=new jR(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Bd(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Bd(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Bd(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Bg(n,g,m);Zn(n,g)}}catch(s){if(s instanceof Ii)throw s;Zn(n,"network-request-failed",{message:String(s)})}}async function au(n,e,t,r,s={}){const a=await Ci(n,e,t,r,s);return"mfaPendingCredential"in a&&Zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function TE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?zg(n.config,s):`${n.config.apiScheme}://${s}`;return AR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function PR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),RR.get())})}}function Bd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=pr(n,e,r);return s.customData._tokenResponse=t,s}function J1(n){return n!==void 0&&n.enterprise!==void 0}class NR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DR(n,e){return Ci(n,"GET","/v2/recaptchaConfig",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){return Ci(n,"POST","/v1/accounts:delete",e)}async function ph(n,e){return Ci(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MR(n,e=!1){const t=Mt(n),r=await t.getIdToken(e),s=Ug(r);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:bc(Zp(s.auth_time)),issuedAtTime:bc(Zp(s.iat)),expirationTime:bc(Zp(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Zp(n){return Number(n)*1e3}function Ug(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{const s=lE(t);return s?JSON.parse(s):(Yd("Failed to decode base64 JWT payload"),null)}catch(s){return Yd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Z1(n){const e=Ug(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ii&&LR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(n){var v;const e=n.auth,t=await n.getIdToken(),r=await za(n,ph(e,{idToken:t}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(v=s.providerUserInfo)!=null&&v.length?SE(s.providerUserInfo):[],l=FR(n.providerData,a),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function BR(n){const e=Mt(n);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FR(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(n,e){const t=await kE(n,{},async()=>{const r=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await TE(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&nl(n.emulatorConfig.host)&&(d.credentials="include"),EE.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UR(n,e){return Ci(n,"POST","/v2/accounts:revokeToken",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await zR(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new ja;return r&&(ke(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ja,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await za(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MR(this,e)}reload(){return BR(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await za(this,VR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:T,providerData:k,stsTokenManager:C}=t;ke(v&&C,e,"internal-error");const I=ja.fromJSON(this.name,C);ke(typeof v=="string",e,"internal-error"),os(r,e.name),os(s,e.name),ke(typeof _=="boolean",e,"internal-error"),ke(typeof T=="boolean",e,"internal-error"),os(a,e.name),os(l,e.name),os(f,e.name),os(d,e.name),os(m,e.name),os(g,e.name);const V=new fr({uid:v,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(V.providerData=k.map(B=>({...B}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,r=!1){const s=new ja;s.updateFromServerResponse(t);const a=new fr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await mh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?SE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new ja;f.updateFromIdToken(r);const d=new fr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;function mi(n){Ei(n instanceof Function,"Expected a class definition");let e=ex.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ex.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bE.type="NONE";const tx=bE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n,e,t){return`firebase:${n}:${e}:${t}`}class Na{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Xd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ph(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Na(mi(tx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||mi(tx);const l=Xd(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(l);if(g){let v;if(typeof g=="string"){const _=await ph(e,{idToken:g}).catch(()=>{});if(!_)break;v=await fr._fromGetAccountInfoResponse(e,_,g)}else v=fr._fromJSON(e,g);m!==a&&(f=v),a=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Na(a,e,r):(a=d[0],f&&await a._set(l,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Na(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jE(e))return"Blackberry";if(NE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IE(n=ln()){return/firefox\//i.test(n)}function CE(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(n=ln()){return/crios\//i.test(n)}function RE(n=ln()){return/iemobile/i.test(n)}function PE(n=ln()){return/android/i.test(n)}function jE(n=ln()){return/blackberry/i.test(n)}function NE(n=ln()){return/webos/i.test(n)}function $g(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $R(n=ln()){var e;return $g(n)&&!!((e=window.navigator)!=null&&e.standalone)}function WR(){return rA()&&document.documentMode===10}function DE(n=ln()){return $g(n)||PE(n)||NE(n)||jE(n)||/windows phone/i.test(n)||RE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e=[]){let t;switch(n){case"Browser":t=nx(ln());break;case"Worker":t=`${nx(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,f)=>{try{const d=e(a);l(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e={}){return Ci(n,"GET","/v2/passwordPolicy",Ps(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=6;class GR{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new HR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ph(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(yi(this));const t=e?Mt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KR(this),t=new GR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mi(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&kR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function js(n){return Mt(n)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=dA(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YR(n){Hh=n}function ME(n){return Hh.loadJS(n)}function XR(){return Hh.recaptchaEnterpriseScript}function JR(){return Hh.gapiScript}function ZR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class eP{constructor(){this.enterprise=new tP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nP="recaptcha-enterprise",LE="NO_RECAPTCHA";class rP{constructor(e){this.type=nP,this.auth=js(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{DR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new NR(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(d=>{f(d)})})}function s(a,l,f){const d=window.grecaptcha;J1(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(LE)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eP().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!t&&J1(window.grecaptcha))s(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=XR();d.length!==0&&(d+=f),ME(d).then(()=>{s(f,a,l)}).catch(m=>{l(m)})}}).catch(f=>{l(f)})})}}async function ix(n,e,t,r=!1,s=!1){const a=new rP(n);let l;if(s)l=LE;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Mm(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ix(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ix(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n,e){const t=Og(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ws(a,e??{}))return s;Zn(s,"already-initialized")}return t.initialize({options:e})}function sP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oP(n,e,t){const r=js(n);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=OE(e),{host:l,port:f}=aP(e),d=f===null?"":`:${f}`,m={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(ws(m,r.config.emulator)&&ws(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,nl(l)?(hE(`${a}//${l}${d}`),fE("Auth",!0)):lP()}function OE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aP(n){const e=OE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:sx(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:sx(l)}}}function sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function cP(n,e){return Ci(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(n,e){return au(n,"POST","/v1/accounts:signInWithPassword",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}async function hP(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Wg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,t,"signInWithPassword",uP);case"emailLink":return dP(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,r,"signUpPassword",cP);case"emailLink":return hP(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n,e){return au(n,"POST","/v1/accounts:signInWithIdp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="http://localhost";class Eo extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new Eo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Da(e,t)}buildRequest(){const e={requestUri:fP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=su(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mP(n){const e=yc(vc(n)).link,t=e?yc(vc(e)).deep_link_id:null,r=yc(vc(n)).deep_link_id;return(r?yc(vc(r)).link:null)||r||t||e||n}class Hg{constructor(e){const t=yc(vc(e)),r=t.apiKey??null,s=t.oobCode??null,a=pP(t.mode??null);ke(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mP(e);try{return new Hg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hg.parseLink(t);return ke(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Kg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends lu{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fi.credential(t,r)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends lu{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends lu{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ds.credential(t,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e){return au(n,"POST","/v1/accounts:signUp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await fr._fromIdTokenResponse(e,r,s),l=ox(r);return new ko({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ox(r);return new ko({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ox(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Ii{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new gh(e,t,r,s)}}function BE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(n,a,e,r):a})}async function yP(n,e,t=!1){const r=await za(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ko._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e,t=!1){const{auth:r}=n;if(jn(r.app))return Promise.reject(yi(r));const s="reauthenticate";try{const a=await za(n,BE(r,s,e,n),t);ke(a.idToken,r,"internal-error");const l=Ug(a.idToken);ke(l,r,"internal-error");const{sub:f}=l;return ke(n.uid===f,r,"user-mismatch"),ko._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r="signIn",s=await BE(n,r,e),a=await ko._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function xP(n,e){return FE(js(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(n){const e=js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wP(n,e,t){if(jn(n.app))return Promise.reject(yi(n));const r=js(n),l=await Mm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gP).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&zE(n),d}),f=await ko._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function _P(n,e,t){return jn(n.app)?Promise.reject(yi(n)):xP(Mt(n),il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(n,e){return Ci(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Mt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await za(r,EP(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function TP(n,e,t,r){return Mt(n).onIdTokenChanged(e,t,r)}function SP(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function bP(n,e,t,r){return Mt(n).onAuthStateChanged(e,t,r)}function IP(n){return Mt(n).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=1e3,AP=10;class $E extends UE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,f,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);WR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},CP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const RP=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends UE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WE.type="SESSION";const HE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Kh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(l).map(async m=>m(t.origin,a)),d=await PP(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((f,d)=>{const m=qg("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(_.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function NP(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function DP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MP(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebaseLocalStorageDb",LP=1,vh="firebaseLocalStorage",GE="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function OP(){const n=indexedDB.deleteDatabase(qE);return new cu(n).toPromise()}function Lm(){const n=indexedDB.open(qE,LP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vh,{keyPath:GE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await OP(),e(await Lm()))})})}async function ax(n,e,t){const r=qh(n,!0).put({[GE]:e,value:t});return new cu(r).toPromise()}async function BP(n,e){const t=qh(n,!1).get(e),r=await new cu(t).toPromise();return r===void 0?null:r.value}function lx(n,e){const t=qh(n,!0).delete(e);return new cu(t).toPromise()}const FP=800,zP=3;class QE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(MP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await DP(),!this.activeServiceWorker)return;this.sender=new jP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await ax(e,yh,"1"),await lx(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ax(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>BP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=qh(s,!1).getAll();return new cu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QE.type="LOCAL";const UP=QE;new ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n,e){return e?mi(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $P(n){return FE(n.auth,new Gg(n),n.bypassAuthState)}function WP(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),vP(t,new Gg(n),n.bypassAuthState)}async function HP(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),yP(t,new Gg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $P;case"linkViaPopup":case"linkViaRedirect":return HP;case"reauthViaPopup":case"reauthViaRedirect":return WP;default:Zn(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=new ou(2e3,1e4);async function qP(n,e,t){if(jn(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const r=js(n);TR(n,e,Kg);const s=YE(r,t);return new po(r,"signInViaPopup",e,s).executeNotNull()}class po extends XE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KP.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="pendingRedirect",Jd=new Map;class QP extends XE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await YP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YP(n,e){const t=ZP(e),r=JP(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function XP(n,e){Jd.set(n._key(),e)}function JP(n){return mi(n._redirectPersistence)}function ZP(n){return Xd(GP,n.config.apiKey,n.name)}async function ej(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r=js(n),s=YE(r,e),l=await new QP(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=600*1e3;class nj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tj&&this.cachedEventUids.clear(),this.cachedEventUids.has(cx(e))}saveEventToCache(e){this.cachedEventUids.add(cx(e)),this.lastProcessedEventTime=Date.now()}}function cx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(n,e={}){return Ci(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function aj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ij(n);for(const t of e)try{if(lj(t))return}catch{}Zn(n,"unauthorized-domain")}function lj(n){const e=Dm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!oj.test(t))return!1;if(sj.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new ou(3e4,6e4);function ux(){const n=Fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uj(n){return new Promise((e,t)=>{var s,a,l;function r(){ux(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ux(),t(pr(n,"network-request-failed"))},timeout:cj.get()})}if((a=(s=Fr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Fr().gapi)!=null&&l.load)r();else{const f=ZR("iframefcb");return Fr()[f]=()=>{gapi.load?r():t(pr(n,"network-request-failed"))},ME(`${JR()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function dj(n){return Zd=Zd||uj(n),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new ou(5e3,15e3),fj="__/auth/iframe",pj="emulator/auth/iframe",mj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yj(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zg(e,pj):`https://${n.config.authDomain}/${fj}`,r={apiKey:e.apiKey,appName:n.name,v:rl},s=gj.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${su(r).slice(1)}`}async function vj(n){const e=await dj(n),t=Fr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:yj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mj,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=pr(n,"network-request-failed"),f=Fr().setTimeout(()=>{a(l)},hj.get());function d(){Fr().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wj=500,_j=600,Ej="_blank",kj="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tj(n,e,t,r=wj,s=_j){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={...xj,width:r.toString(),height:s.toString(),top:a,left:l},m=ln().toLowerCase();t&&(f=AE(m)?Ej:t),IE(m)&&(e=e||kj,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[T,k])=>`${_}${T}=${k},`,"");if($R(m)&&f!=="_self")return Sj(e||"",f),new dx(null);const v=window.open(e||"",f,g);ke(v,n,"popup-blocked");try{v.focus()}catch{}return new dx(v)}function Sj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="__/auth/handler",Ij="emulator/auth/handler",Cj=encodeURIComponent("fac");async function hx(n,e,t,r,s,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:rl,eventId:s};if(e instanceof Kg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",uA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof lu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const f=l;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${Cj}=${encodeURIComponent(d)}`:"";return`${Aj(n)}?${su(f).slice(1)}${m}`}function Aj({config:n}){return n.emulator?zg(n,Ij):`https://${n.authDomain}/${bj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class Rj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=ej,this._overrideRedirectResult=XP}async _openPopup(e,t,r,s){var l;Ei((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await hx(e,t,r,Dm(),s);return Tj(e,a,qg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await hx(e,t,r,Dm(),s);return NP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ei(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vj(e),r=new nj(e);return t.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(em,{type:em},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[em];a!==void 0&&t(!!a),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DE()||CE()||$g()}}const Pj=Rj;var fx="@firebase/auth",px="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(n){Fa(new _o("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VE(n)},m=new QR(r,s,a,d);return sP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new _o("auth-internal",e=>{const t=js(e.getProvider("auth").getImmediate());return(r=>new jj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(fx,px,Nj(n)),gs(fx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=300,Mj=dE("authIdTokenMaxAge")||Vj;let mx=null;const Lj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Mj)return;const s=t==null?void 0:t.token;mx!==s&&(mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Oj(n=yE()){const e=Og(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iP(n,{popupRedirectResolver:Pj,persistence:[UP,RP,HE]}),r=dE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Lj(a.toString());SP(t,l,()=>l(t.currentUser)),TP(t,f=>l(f))}}const s=cE("auth");return s&&oP(t,`http://${s}`),t}function Bj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}YR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=pr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,ZE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,b){function j(){}j.prototype=b.prototype,A.F=b.prototype,A.prototype=new j,A.prototype.constructor=A,A.D=function(L,O,W){for(var M=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)M[Ne-2]=arguments[Ne];return b.prototype[O].apply(L,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,b,j){j||(j=0);const L=Array(16);if(typeof b=="string")for(var O=0;O<16;++O)L[O]=b.charCodeAt(j++)|b.charCodeAt(j++)<<8|b.charCodeAt(j++)<<16|b.charCodeAt(j++)<<24;else for(O=0;O<16;++O)L[O]=b[j++]|b[j++]<<8|b[j++]<<16|b[j++]<<24;b=A.g[0],j=A.g[1],O=A.g[2];let W=A.g[3],M;M=b+(W^j&(O^W))+L[0]+3614090360&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[1]+3905402710&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[2]+606105819&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[3]+3250441966&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[4]+4118548399&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[5]+1200080426&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[6]+2821735955&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[7]+4249261313&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[8]+1770035416&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[9]+2336552879&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[10]+4294925233&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[11]+2304563134&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[12]+1804603682&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[13]+4254626195&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[14]+2792965006&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[15]+1236535329&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(O^W&(j^O))+L[1]+4129170786&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[6]+3225465664&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[11]+643717713&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[0]+3921069994&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[5]+3593408605&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[10]+38016083&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[15]+3634488961&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[4]+3889429448&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[9]+568446438&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[14]+3275163606&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[3]+4107603335&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[8]+1163531501&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[13]+2850285829&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[2]+4243563512&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[7]+1735328473&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[12]+2368359562&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(j^O^W)+L[5]+4294588738&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[8]+2272392833&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[11]+1839030562&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[14]+4259657740&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[1]+2763975236&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[4]+1272893353&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[7]+4139469664&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[10]+3200236656&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[13]+681279174&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[0]+3936430074&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[3]+3572445317&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[6]+76029189&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[9]+3654602809&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[12]+3873151461&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[15]+530742520&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[2]+3299628645&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(O^(j|~W))+L[0]+4096336452&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[7]+1126891415&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[14]+2878612391&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[5]+4237533241&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[12]+1700485571&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[3]+2399980690&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[10]+4293915773&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[1]+2240044497&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[8]+1873313359&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[15]+4264355552&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[6]+2734768916&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[13]+1309151649&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[4]+4149444226&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[11]+3174756917&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[2]+718787259&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+b&4294967295,A.g[1]=A.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+W&4294967295}r.prototype.v=function(A,b){b===void 0&&(b=A.length);const j=b-this.blockSize,L=this.C;let O=this.h,W=0;for(;W<b;){if(O==0)for(;W<=j;)s(this,A,W),W+=this.blockSize;if(typeof A=="string"){for(;W<b;)if(L[O++]=A.charCodeAt(W++),O==this.blockSize){s(this,L),O=0;break}}else for(;W<b;)if(L[O++]=A[W++],O==this.blockSize){s(this,L),O=0;break}}this.h=O,this.o+=b},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var b=1;b<A.length-8;++b)A[b]=0;b=this.o*8;for(var j=A.length-8;j<A.length;++j)A[j]=b&255,b/=256;for(this.v(A),A=Array(16),b=0,j=0;j<4;++j)for(let L=0;L<32;L+=8)A[b++]=this.g[j]>>>L&255;return A};function a(A,b){var j=f;return Object.prototype.hasOwnProperty.call(j,A)?j[A]:j[A]=b(A)}function l(A,b){this.h=b;const j=[];let L=!0;for(let O=A.length-1;O>=0;O--){const W=A[O]|0;L&&W==b||(j[O]=W,L=!1)}this.g=j}var f={};function d(A){return-128<=A&&A<128?a(A,function(b){return new l([b|0],b<0?-1:0)}):new l([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return I(m(-A));const b=[];let j=1;for(let L=0;A>=j;L++)b[L]=A/j|0,j*=4294967296;return new l(b,0)}function g(A,b){if(A.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(A.charAt(0)=="-")return I(g(A.substring(1),b));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=m(Math.pow(b,8));let L=v;for(let W=0;W<A.length;W+=8){var O=Math.min(8,A.length-W);const M=parseInt(A.substring(W,W+O),b);O<8?(O=m(Math.pow(b,O)),L=L.j(O).add(m(M))):(L=L.j(j),L=L.add(m(M)))}return L}var v=d(0),_=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(C(this))return-I(this).m();let A=0,b=1;for(let j=0;j<this.g.length;j++){const L=this.i(j);A+=(L>=0?L:4294967296+L)*b,b*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(C(this))return"-"+I(this).toString(A);const b=m(Math.pow(A,6));var j=this;let L="";for(;;){const O=G(j,b).g;j=V(j,O.j(b));let W=((j.g.length>0?j.g[0]:j.h)>>>0).toString(A);if(j=O,k(j))return W+L;for(;W.length<6;)W="0"+W;L=W+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let b=0;b<A.g.length;b++)if(A.g[b]!=0)return!1;return!0}function C(A){return A.h==-1}n.l=function(A){return A=V(this,A),C(A)?-1:k(A)?0:1};function I(A){const b=A.g.length,j=[];for(let L=0;L<b;L++)j[L]=~A.g[L];return new l(j,~A.h).add(_)}n.abs=function(){return C(this)?I(this):this},n.add=function(A){const b=Math.max(this.g.length,A.g.length),j=[];let L=0;for(let O=0;O<=b;O++){let W=L+(this.i(O)&65535)+(A.i(O)&65535),M=(W>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);L=M>>>16,W&=65535,M&=65535,j[O]=M<<16|W}return new l(j,j[j.length-1]&-2147483648?-1:0)};function V(A,b){return A.add(I(b))}n.j=function(A){if(k(this)||k(A))return v;if(C(this))return C(A)?I(this).j(I(A)):I(I(this).j(A));if(C(A))return I(this.j(I(A)));if(this.l(T)<0&&A.l(T)<0)return m(this.m()*A.m());const b=this.g.length+A.g.length,j=[];for(var L=0;L<2*b;L++)j[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<A.g.length;O++){const W=this.i(L)>>>16,M=this.i(L)&65535,Ne=A.i(O)>>>16,He=A.i(O)&65535;j[2*L+2*O]+=M*He,B(j,2*L+2*O),j[2*L+2*O+1]+=W*He,B(j,2*L+2*O+1),j[2*L+2*O+1]+=M*Ne,B(j,2*L+2*O+1),j[2*L+2*O+2]+=W*Ne,B(j,2*L+2*O+2)}for(A=0;A<b;A++)j[A]=j[2*A+1]<<16|j[2*A];for(A=b;A<2*b;A++)j[A]=0;return new l(j,0)};function B(A,b){for(;(A[b]&65535)!=A[b];)A[b+1]+=A[b]>>>16,A[b]&=65535,b++}function P(A,b){this.g=A,this.h=b}function G(A,b){if(k(b))throw Error("division by zero");if(k(A))return new P(v,v);if(C(A))return b=G(I(A),b),new P(I(b.g),I(b.h));if(C(b))return b=G(A,I(b)),new P(I(b.g),b.h);if(A.g.length>30){if(C(A)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var j=_,L=b;L.l(A)<=0;)j=$(j),L=$(L);var O=H(j,1),W=H(L,1);for(L=H(L,2),j=H(j,2);!k(L);){var M=W.add(L);M.l(A)<=0&&(O=O.add(j),W=M),L=H(L,1),j=H(j,1)}return b=V(A,O.j(b)),new P(O,b)}for(O=v;A.l(b)>=0;){for(j=Math.max(1,Math.floor(A.m()/b.m())),L=Math.ceil(Math.log(j)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),W=m(j),M=W.j(b);C(M)||M.l(A)>0;)j-=L,W=m(j),M=W.j(b);k(W)&&(W=_),O=O.add(W),A=V(A,M)}return new P(O,A)}n.B=function(A){return G(this,A).h},n.and=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)&A.i(L);return new l(j,this.h&A.h)},n.or=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)|A.i(L);return new l(j,this.h|A.h)},n.xor=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)^A.i(L);return new l(j,this.h^A.h)};function $(A){const b=A.g.length+1,j=[];for(let L=0;L<b;L++)j[L]=A.i(L)<<1|A.i(L-1)>>>31;return new l(j,A.h)}function H(A,b){const j=b>>5;b%=32;const L=A.g.length-j,O=[];for(let W=0;W<L;W++)O[W]=b>0?A.i(W+j)>>>b|A.i(W+j+1)<<32-b:A.i(W+j);return new l(O,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ZE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=g,ys=l}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var Fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ek,xc,tk,eh,Om,nk,rk,ik;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fd=="object"&&Fd];for(var w=0;w<h.length;++w){var E=h[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,w){if(w)e:{var E=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in E))break e;E=E[q]}h=h[h.length-1],R=E[h],w=w(R),w!=R&&w!=null&&e(E,h,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(w){var E=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&E.push([R,w[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function f(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function d(h,w,E){return h.call.apply(h.bind,arguments)}function m(h,w,E){return m=d,m.apply(null,arguments)}function g(h,w){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function v(h,w){function E(){}E.prototype=w.prototype,h.Z=w.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(R,q,X){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return w.prototype[q].apply(R,oe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const w=h.length;if(w>0){const E=Array(w);for(let R=0;R<w;R++)E[R]=h[R];return E}return[]}function k(h,w){for(let R=1;R<arguments.length;R++){const q=arguments[R];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const X=q.length||0;h.length=E+X;for(let oe=0;oe<X;oe++)h[E+oe]=q[oe]}else h.push(q)}}class C{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function I(h){l.setTimeout(()=>{throw h},0)}function V(){var h=A;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class B{constructor(){this.h=this.g=null}add(w,E){const R=P.get();R.set(w,E),this.h?this.h.next=R:this.g=R,this.h=R}}var P=new C(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,H=!1,A=new B,b=()=>{const h=Promise.resolve(void 0);$=()=>{h.then(j)}};function j(){for(var h;h=V();){try{h.h.call(h.g)}catch(E){I(E)}var w=P;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}H=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};l.addEventListener("test",E,w),l.removeEventListener("test",E,w)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,w){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}v(Ne,O),Ne.prototype.init=function(h,w){const E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(E=="mouseover"?w=h.fromElement:E=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),_t=0;function Se(h,w,E,R,q){this.listener=h,this.proxy=null,this.src=w,this.type=E,this.capture=!!R,this.ha=q,this.key=++_t,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,w,E){for(const R in h)w.call(E,h[R],R,h)}function ae(h,w){for(const E in h)w.call(void 0,h[E],E,h)}function U(h){const w={};for(const E in h)w[E]=h[E];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(h,w){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)h[E]=R[E];for(let X=0;X<ee.length;X++)E=ee[X],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,w,E,R,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Me(h,w,R,q);return oe>-1?(w=h[oe],E||(w.fa=!1)):(w=new Se(w,this.src,X,!!R,q),w.fa=E,h.push(w)),w};function Ve(h,w){const E=w.type;if(E in h.g){var R=h.g[E],q=Array.prototype.indexOf.call(R,w,void 0),X;(X=q>=0)&&Array.prototype.splice.call(R,q,1),X&&(ie(w),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Me(h,w,E,R){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==w&&X.capture==!!E&&X.ha==R)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(h,w,E,R,q){if(Array.isArray(w)){for(let X=0;X<w.length;X++)Xe(h,w[X],E,R,q);return null}return E=xl(E),h&&h[He]?h.J(w,E,f(R)?!!R.capture:!1,q):cn(h,w,E,!1,R,q)}function cn(h,w,E,R,q,X){if(!w)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Re=Lo(h);if(Re||(h[Ge]=Re=new Ae(h)),E=Re.add(w,E,R,oe,X),E.proxy)return E;if(R=Vo(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)W||(q=oe),q===void 0&&(q=!1),h.addEventListener(w.toString(),R,q);else if(h.attachEvent)h.attachEvent(Mo(w.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Vo(){function h(E){return w.call(h.src,h.listener,E)}const w=Eu;return h}function vl(h,w,E,R,q){if(Array.isArray(w))for(var X=0;X<w.length;X++)vl(h,w[X],E,R,q);else R=f(R)?!!R.capture:!!R,E=xl(E),h&&h[He]?(h=h.i,X=String(w).toString(),X in h.g&&(w=h.g[X],E=Me(w,E,R,q),E>-1&&(ie(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete h.g[X],h.h--)))):h&&(h=Lo(h))&&(w=h.g[w.toString()],h=-1,w&&(h=Me(w,E,R,q)),(E=h>-1?w[h]:null)&&Ri(E))}function Ri(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[He])Ve(w.i,h);else{var E=h.type,R=h.proxy;w.removeEventListener?w.removeEventListener(E,R,h.capture):w.detachEvent?w.detachEvent(Mo(E),R):w.addListener&&w.removeListener&&w.removeListener(R),(E=Lo(w))?(Ve(E,h),E.h==0&&(E.src=null,w[Ge]=null)):ie(h)}}}function Mo(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function Eu(h,w){if(h.da)h=!0;else{w=new Ne(w,this);const E=h.listener,R=h.ha||h.src;h.fa&&Ri(h),h=E.call(R,w)}return h}function Lo(h){return h=h[Ge],h instanceof Ae?h:null}var Ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function xl(h){return typeof h=="function"?h:(h[Ls]||(h[Ls]=function(w){return h.handleEvent(w)}),h[Ls])}function Et(){L.call(this),this.i=new Ae(this),this.M=this,this.G=null}v(Et,L),Et.prototype[He]=!0,Et.prototype.removeEventListener=function(h,w,E,R){vl(this,h,w,E,R)};function gt(h,w){var E,R=h.G;if(R)for(E=[];R;R=R.G)E.push(R);if(h=h.M,R=w.type||w,typeof w=="string")w=new O(w,h);else if(w instanceof O)w.target=w.target||h;else{var q=w;w=new O(R,h),Ce(w,q)}q=!0;let X,oe;if(E)for(oe=E.length-1;oe>=0;oe--)X=w.g=E[oe],q=tr(X,R,!0,w)&&q;if(X=w.g=h,q=tr(X,R,!0,w)&&q,q=tr(X,R,!1,w)&&q,E)for(oe=0;oe<E.length;oe++)X=w.g=E[oe],q=tr(X,R,!1,w)&&q}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const E=h.g[w];for(let R=0;R<E.length;R++)ie(E[R]);delete h.g[w],h.h--}}this.G=null},Et.prototype.J=function(h,w,E,R){return this.i.add(String(h),w,!1,E,R)},Et.prototype.K=function(h,w,E,R){return this.i.add(String(h),w,!0,E,R)};function tr(h,w,E,R){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let X=0;X<w.length;++X){const oe=w[X];if(oe&&!oe.da&&oe.capture==E){const Re=oe.listener,yt=oe.ha||oe.src;oe.fa&&Ve(h.i,oe),q=Re.call(yt,R)!==!1&&q}}return q&&!R.defaultPrevented}function wl(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(h,w||0)}function _l(h){h.g=wl(()=>{h.g=null,h.i&&(h.i=!1,_l(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class ku extends L{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:_l(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(h){L.call(this),this.h=h,this.g={}}v(Pi,L);var El=[];function Oo(h){pe(h.g,function(w,E){this.g.hasOwnProperty(E)&&Ri(w)},h),h.g={}}Pi.prototype.N=function(){Pi.Z.N.call(this),Oo(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=l.JSON.stringify,Tu=l.JSON.parse,Os=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Ni(){}function Su(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bo(){O.call(this,"d")}v(Bo,O);function kl(){O.call(this,"c")}v(kl,O);var nr={},Fo=null;function Vi(){return Fo=Fo||new Et}nr.Ia="serverreachability";function zo(h){O.call(this,nr.Ia,h)}v(zo,O);function Qr(h){const w=Vi();gt(w,new zo(w))}nr.STAT_EVENT="statevent";function Yr(h,w){O.call(this,nr.STAT_EVENT,h),this.stat=w}v(Yr,O);function ht(h){const w=Vi();gt(w,new Yr(w,h))}nr.Ja="timingevent";function Tl(h,w){O.call(this,nr.Ja,h),this.size=w}v(Tl,O);function Mi(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},w)}function Li(){this.g=!0}Li.prototype.ua=function(){this.g=!1};function bu(h,w,E,R,q,X){h.info(function(){if(h.g)if(X){var oe="",Re=X.split("&");for(let Ye=0;Ye<Re.length;Ye++){var yt=Re[Ye].split("=");if(yt.length>1){const kt=yt[0];yt=yt[1];const Cn=kt.split("_");oe=Cn.length>=2&&Cn[1]=="type"?oe+(kt+"="+yt+"&"):oe+(kt+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+w+`
`+E+`
`+oe})}function Iu(h,w,E,R,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+w+`
`+E+`
`+X+" "+oe})}function _r(h,w,E,R){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+Bs(h,E)+(R?" "+R:"")})}function Cu(h,w){h.info(function(){return"TIMEOUT: "+w})}Li.prototype.info=function(){};function Bs(h,w){if(!h.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var E=X[h];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return ji(X)}catch{return w}}var Oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Au;function Xr(){}v(Xr,Ni),Xr.prototype.g=function(){return new XMLHttpRequest},Au=new Xr;function Er(h){return encodeURIComponent(String(h))}function Uo(h){var w=1;h=h.split(":");const E=[];for(;w>0&&h.length;)E.push(h.shift()),w--;return h.length&&E.push(h.join(":")),E}function On(h,w,E,R){this.j=h,this.i=w,this.l=E,this.S=R||1,this.V=new Pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ru}function Ru(){this.i=null,this.g="",this.h=!1}var Pu={},Sl={};function rr(h,w,E){h.M=1,h.A=Zr(Bn(w)),h.u=E,h.R=!0,bl(h,null)}function bl(h,w){h.F=Date.now(),Fs(h),h.B=Bn(h.A);var E=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Ml(E.i,"t",R),h.C=0,E=h.j.L,h.h=new Ru,h.g=zu(h.j,E?w:null,!h.u),h.P>0&&(h.O=new ku(m(h.Y,h,h.g),h.P)),w=h.V,E=h.g,R=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(El[0]=q.toString()),q=El);for(let X=0;X<q.length;X++){const oe=Xe(E,q[X],R||w.handleEvent,!1,w.h||w);if(!oe)break;w.g[oe.key]=oe}w=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),Qr(),bu(h.i,h.v,h.B,h.l,h.S,h.u)}On.prototype.ba=function(h){h=h.target;const w=this.O;w&&Ar(h)==3?w.j():this.Y(h)},On.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Ar(this.g),yt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Bu(this.g)))){this.K||Re!=4||yt==7||(yt==8||Ye<=0?Qr(3):Qr(2)),$o(this);var w=this.g.ca();this.X=w;var E=ju(this);if(this.o=w==200,Iu(this.i,this.v,this.B,this.l,this.S,Re,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(R)){var X=R;break t}}X=null}if(h=X)_r(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,h);else{this.o=!1,this.m=3,ht(12),Jr(this),zs(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<E.length;)if(kt=Du(this,E),kt==Sl){Re==4&&(this.m=4,ht(14),h=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Pu){this.m=4,ht(15),_r(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else _r(this.i,this.l,kt,null),tt(this,kt);if(Nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||E.length!=0||this.h.h||(this.m=1,ht(16),h=!1),this.o=this.o&&h,!h)_r(this.i,this.l,E,"[Invalid Chunked Response]"),Jr(this),zs(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ys(oe),oe.P=!0,ht(11))}}else _r(this.i,this.l,E,null),tt(this,E);Re==4&&Jr(this),this.o&&!this.K&&(Re==4?Zo(this.j,this):(this.o=!1,Fs(this)))}else Ol(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Jr(this),zs(this)}}}catch{}finally{}};function ju(h){if(!Nu(h))return h.g.la();const w=Bu(h.g);if(w==="")return"";let E="";const R=w.length,q=Ar(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Jr(h),zs(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<R;X++)h.h.h=!0,E+=h.h.i.decode(w[X],{stream:!(q&&X==R-1)});return w.length=0,h.h.g+=E,h.C=0,h.h.g}function Nu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Du(h,w){var E=h.C,R=w.indexOf(`
`,E);return R==-1?Sl:(E=Number(w.substring(E,R)),isNaN(E)?Pu:(R+=1,R+E>w.length?Sl:(w=w.slice(R,R+E),h.C=R+E,w)))}On.prototype.cancel=function(){this.K=!0,Jr(this)};function Fs(h){h.T=Date.now()+h.H,Il(h,h.H)}function Il(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Mi(m(h.aa,h),w)}function $o(h){h.D&&(l.clearTimeout(h.D),h.D=null)}On.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Cu(this.i,this.B),this.M!=2&&(Qr(),ht(17)),Jr(this),this.m=2,zs(this)):Il(this,this.T-h)};function zs(h){h.j.I==0||h.K||Zo(h.j,h)}function Jr(h){$o(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,Oo(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function tt(h,w){try{var E=h.j;if(E.I!=0&&(E.g==h||Al(E.h,h))){if(!h.L&&Al(E.h,h)&&E.I==3){try{var R=E.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Jo(E),bn(E);else break e;jr(E),ht(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Mi(m(E.Va,E),6e3));Us(E.h)<=1&&E.ta&&(E.ta=void 0)}else In(E,11)}else if((h.L||E.g==h)&&Jo(E),!M(w))for(q=E.Ba.g.parse(w),w=0;w<q.length;w++){let Ye=q[w];const kt=Ye[0];if(!(kt<=E.K))if(E.K=kt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Cn=Ye[3];Cn!=null&&(E.ka=Cn,E.j.info("VER="+E.ka));const ii=Ye[4];ii!=null&&(E.za=ii,E.j.info("SVER="+E.za));const Nr=Ye[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(R=1.5*Nr,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Dr=h.g;if(Dr){const na=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var X=R.h;X.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ho(X,X.h),X.h=null))}if(R.G){const zl=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(R.wa=zl,Ke(R.J,R.G,zl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var oe=h;if(R.na=Fl(R,R.L?R.ba:null,R.W),oe.L){$s(R.h,oe);var Re=oe,yt=R.O;yt&&(Re.H=yt),Re.D&&($o(Re),Fs(Re)),R.g=oe}else Jt(R);E.i.length>0&&ri(E)}else Ye[0]!="stop"&&Ye[0]!="close"||In(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?In(E,7):Yo(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Qr(4)}catch{}}var yf=class{constructor(h,w){this.g=h,this.map=w}};function Wo(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Us(h){return h.h?1:h.g?h.g.size:0}function Al(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Ho(h,w){h.g?h.g.add(w):h.h=w}function $s(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Wo.prototype.cancel=function(){if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const E of h.g.values())w=w.concat(E.G);return w}return T(h.i)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(h,w){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const R=h[E].indexOf("=");let q,X=null;R>=0?(q=h[E].substring(0,R),X=h[E].substring(R+1)):q=h[E],w(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function kr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof kr?(this.l=h.l,Ws(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,Fi(this,Ll(h.i)),this.m=h.m):h&&(w=String(h).match(Vu))?(this.l=!1,Ws(this,w[1]||"",!0),this.o=Hs(w[2]||""),this.g=Hs(w[3]||"",!0),Tr(this,w[4]),this.h=Hs(w[5]||"",!0),Fi(this,w[6]||"",!0),this.m=Hs(w[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}kr.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Ks(w,Pl,!0),":");var E=this.g;return(E||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Ks(w,Pl,!0),"@"),h.push(Er(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ks(E,E.charAt(0)=="/"?qs:jl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ks(E,Nl)),h.join("")},kr.prototype.resolve=function(h){const w=Bn(this);let E=!!h.j;E?Ws(w,h.j):E=!!h.o,E?w.o=h.o:E=!!h.g,E?w.g=h.g:E=h.u!=null;var R=h.h;if(E)Tr(w,h.u);else if(E=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=w.h.lastIndexOf("/");q!=-1&&(R=w.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Re=q[oe++];Re=="."?R&&oe==q.length&&X.push(""):Re==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&oe==q.length&&X.push("")):(X.push(Re),R=!0)}R=X.join("/")}else R=q}return E?w.h=R:E=h.i.toString()!=="",E?Fi(w,Ll(h.i)):E=!!h.m,E&&(w.m=h.m),w};function Bn(h){return new kr(h)}function Ws(h,w,E){h.j=E?Hs(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Fi(h,w,E){w instanceof Fe?(h.i=w,qo(h.i,h.l)):(E||(w=Ks(w,vf)),h.i=new Fe(w,h.l))}function Ke(h,w,E){h.i.set(w,E)}function Zr(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Hs(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ks(h,w,E){return typeof h=="string"?(h=encodeURI(h).replace(w,Rl),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pl=/[#\/\?@]/g,jl=/[#\?:]/g,qs=/[#\?]/g,vf=/[#\?@]/g,Nl=/#/g;function Fe(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function Sr(h){h.g||(h.g=new Map,h.h=0,h.i&&Tn(h.i,function(w,E){h.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}n=Fe.prototype,n.add=function(h,w){Sr(this),this.i=null,h=br(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(w),this.h+=1,this};function Dl(h,w){Sr(h),w=br(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Ko(h,w){return Sr(h),w=br(h,w),h.g.has(w)}n.forEach=function(h,w){Sr(this),this.g.forEach(function(E,R){E.forEach(function(q){h.call(w,q,R,this)},this)},this)};function Vl(h,w){Sr(h);let E=[];if(typeof w=="string")Ko(h,w)&&(E=E.concat(h.g.get(br(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)E=E.concat(h[w]);return E}n.set=function(h,w){return Sr(this),this.i=null,h=br(this,h),Ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=Vl(this,h),h.length>0?String(h[0]):w):w};function Ml(h,w,E){Dl(h,w),E.length>0&&(h.i=null,h.g.set(br(h,w),T(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var E=w[R];const q=Er(E);E=Vl(this,E);for(let X=0;X<E.length;X++){let oe=q;E[X]!==""&&(oe+="="+Er(E[X])),h.push(oe)}}return this.i=h.join("&")};function Ll(h){const w=new Fe;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function br(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function qo(h,w){w&&!h.j&&(Sr(h),h.i=null,h.g.forEach(function(E,R){const q=R.toLowerCase();R!=q&&(Dl(this,R),Ml(this,q,E))},h)),h.j=w}function Ir(h,w){const E=new Li;if(l.Image){const R=new Image;R.onload=g(Ut,E,"TestLoadImage: loaded",!0,w,R),R.onerror=g(Ut,E,"TestLoadImage: error",!1,w,R),R.onabort=g(Ut,E,"TestLoadImage: abort",!1,w,R),R.ontimeout=g(Ut,E,"TestLoadImage: timeout",!1,w,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else w(!1)}function Cr(h,w){const E=new Li,R=new AbortController,q=setTimeout(()=>{R.abort(),Ut(E,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(q),X.ok?Ut(E,"TestPingServer: ok",!0,w):Ut(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),Ut(E,"TestPingServer: error",!1,w)})}function Ut(h,w,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function Gs(){this.g=new Os}function ei(h){this.i=h.Sb||null,this.h=h.ab||!1}v(ei,Ni),ei.prototype.g=function(){return new Sn(this.i,this.h)};function Sn(h,w){Et.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Sn,Et),n=Sn.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,ir(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?zi(this):ir(this),this.readyState==3&&Mu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,zi(this))},n.Na=function(h){this.g&&(this.response=h,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ir(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=w.next();return h.join(`\r
`)};function ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Lu(h){let w="";return pe(h,function(E,R){w+=R,w+=":",w+=E,w+=`\r
`}),w}function Go(h,w,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Lu(E),typeof h=="string"?E!=null&&Er(E):Ke(h,w,E))}function Je(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Je,Et);var Ou=/^https?$/i,xf=["POST","PUT"];n=Je.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Au.g(),this.g.onreadystatechange=_(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(X){Ui(this,X);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())E.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(xf,w,void 0)>=0)||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of E)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Ui(this,X)}};function Ui(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,$i(h),ni(h)}function $i(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ti(this):this.Xa())},n.Xa=function(){ti(this)};function ti(h){if(h.h&&typeof a<"u"){if(h.v&&Ar(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),Ar(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var R;if(R=X===0){let oe=String(h.D).match(Vu)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),R=!Ou.test(oe?oe.toLowerCase():"")}E=R}if(E)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var q=Ar(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",$i(h)}}finally{ni(h)}}}}function ni(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,w||gt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ar(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),Tu(w)}};function Bu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(h){const w={};h=(h.g&&Ar(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(M(h[R]))continue;var E=Uo(h[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=w[q]||[];w[q]=X,X.push(E)}ae(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(h,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||w}function Qo(h){this.za=0,this.i=[],this.j=new Li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,h),this.Za=Rr("retryDelaySeedMs",1e4,h),this.Ta=Rr("forwardChannelMaxRetries",2,h),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wo(h&&h.concurrentRequestLimit),this.Ba=new Gs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qo.prototype,n.ka=8,n.I=1,n.connect=function(h,w,E,R){ht(0),this.W=h,this.H=w||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Fl(this,null,this.W),ri(this)};function Yo(h){if(Xo(h),h.I==3){var w=h.V++,E=Bn(h.J);if(Ke(E,"SID",h.M),Ke(E,"RID",w),Ke(E,"TYPE","terminate"),Pr(h,E),w=new On(h,h.j,w),w.M=2,w.A=Zr(Bn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=w.A,E=!0),E||(w.g=zu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Fs(w)}Xs(h)}function bn(h){h.g&&(Ys(h),h.g.cancel(),h.g=null)}function Xo(h){bn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Jo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function ri(h){if(!Cl(h.h)&&!h.m){h.m=!0;var w=h.Ea;$||b(),H||($(),H=!0),A.add(w,h),h.D=0}}function Fu(h,w){return Us(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Mi(m(h.Ea,h,w),ea(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new On(this,this.j,h);let X=this.o;if(this.U&&(X?(X=U(X),Ce(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Bl(this,q,w),E=Bn(this.J),Ke(E,"RID",h),Ke(E,"CVER",22),this.G&&Ke(E,"X-HTTP-Session-Id",this.G),Pr(this,E),X&&(this.R?w="headers="+Er(Lu(X))+"&"+w:this.u&&Go(E,this.u,X)),Ho(this.h,q),this.Ra&&Ke(E,"TYPE","init"),this.S?(Ke(E,"$req",w),Ke(E,"SID","null"),q.U=!0,rr(q,E,null)):rr(q,E,w),this.I=2}}else this.I==3&&(h?Qs(this,h):this.i.length==0||Cl(this.h)||Qs(this))};function Qs(h,w){var E;w?E=w.l:E=h.V++;const R=Bn(h.J);Ke(R,"SID",h.M),Ke(R,"RID",E),Ke(R,"AID",h.K),Pr(h,R),h.u&&h.o&&Go(R,h.u,h.o),E=new On(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Bl(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ho(h.h,E),rr(E,R,w)}function Pr(h,w){h.H&&pe(h.H,function(E,R){Ke(w,R,E)}),h.l&&pe({},function(E,R){Ke(w,R,E)})}function Bl(h,w,E){E=Math.min(h.i.length,E);const R=h.l?m(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const yt=["count="+E];Re==-1?E>0?(Re=q[0].g,yt.push("ofs="+Re)):Re=0:yt.push("ofs="+Re);let Ye=!0;for(let kt=0;kt<E;kt++){var X=q[kt].g;const Cn=q[kt].map;if(X-=Re,X<0)Re=Math.max(0,q[kt].g-100),Ye=!1;else try{X="req"+X+"_"||"";try{var oe=Cn instanceof Map?Cn:Object.entries(Cn);for(const[ii,Nr]of oe){let Dr=Nr;f(Nr)&&(Dr=ji(Nr)),yt.push(X+ii+"="+encodeURIComponent(Dr))}}catch(ii){throw yt.push(X+"type="+encodeURIComponent("_badmap")),ii}}catch{R&&R(Cn)}}if(Ye){oe=yt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),w.G=h,oe}function Jt(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;$||b(),H||($(),H=!0),A.add(w,h),h.A=0}}function jr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Mi(m(h.Da,h),ea(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Wi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Mi(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),bn(this),Wi(this))};function Ys(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function Wi(h){h.g=new On(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=Bn(h.na);Ke(w,"RID","rpc"),Ke(w,"SID",h.M),Ke(w,"AID",h.K),Ke(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(w,"TO",h.ia),Ke(w,"TYPE","xmlhttp"),Pr(h,w),h.u&&h.o&&Go(w,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Zr(Bn(w)),E.u=null,E.R=!0,bl(E,h)}n.Va=function(){this.C!=null&&(this.C=null,bn(this),jr(this),ht(19))};function Jo(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Zo(h,w){var E=null;if(h.g==w){Jo(h),Ys(h),h.g=null;var R=2}else if(Al(h.h,w))E=w.G,$s(h.h,w),R=1;else return;if(h.I!=0){if(w.o)if(R==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var q=h.D;R=Vi(),gt(R,new Tl(R,E)),ri(h)}else Jt(h);else if(q=w.m,q==3||q==0&&w.X>0||!(R==1&&Fu(h,w)||R==2&&jr(h)))switch(E&&E.length>0&&(w=h.h,w.i=w.i.concat(E)),q){case 1:In(h,5);break;case 4:In(h,10);break;case 3:In(h,6);break;default:In(h,2)}}}function ea(h,w){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*w}function In(h,w){if(h.j.info("Error code "+w),w==2){var E=m(h.bb,h),R=h.Ua;const q=!R;R=new kr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ws(R,"https"),Zr(R),q?Ir(R.toString(),E):Cr(R.toString(),E)}else ht(2);h.I=0,h.l&&h.l.pa(w),Xs(h),Xo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Xs(h){if(h.I=0,h.ja=[],h.l){const w=kn(h.h);(w.length!=0||h.i.length!=0)&&(k(h.ja,w),k(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Fl(h,w,E){var R=E instanceof kr?Bn(E):new kr(E);if(R.g!="")w&&(R.g=w+"."+R.g),Tr(R,R.u);else{var q=l.location;R=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const X=new kr(null);R&&Ws(X,R),w&&(X.g=w),q&&Tr(X,q),E&&(X.h=E),R=X}return E=h.G,w=h.wa,E&&w&&Ke(R,E,w),Ke(R,"VER",h.ka),Pr(h,R),R}function zu(h,w,E){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new Je(new ei({ab:E})):new Je(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}n=Uu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ta(){}ta.prototype.g=function(h,w){return new $t(h,w)};function $t(h,w){Et.call(this),this.g=new Qo(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!M(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!M(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Hi(this)}v($t,Et),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Yo(this.g)},$t.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=ji(h),h=E);w.i.push(new yf(w.Ya++,h)),w.I==3&&ri(w)},$t.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,$t.Z.N.call(this)};function $u(h){Bo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const E in w){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}v($u,Bo);function Wu(){kl.call(this),this.status=1}v(Wu,kl);function Hi(h){this.g=h}v(Hi,Uu),Hi.prototype.ra=function(){gt(this.g,"a")},Hi.prototype.qa=function(h){gt(this.g,new $u(h))},Hi.prototype.pa=function(h){gt(this.g,new Wu)},Hi.prototype.oa=function(){gt(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,ik=function(){return new ta},rk=function(){return Vi()},nk=nr,Om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,eh=Oi,Bi.COMPLETE="complete",tk=Bi,Su.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Et.prototype.listen=Et.prototype.J,xc=Su,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,ek=Je}).apply(typeof Fd<"u"?Fd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl="12.8.0";function Fj(n){sl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new Mg("@firebase/firestore");function ka(){return To.logLevel}function de(n,...e){if(To.logLevel<=Le.DEBUG){const t=e.map(Qg);To.debug(`Firestore (${sl}): ${n}`,...t)}}function ki(n,...e){if(To.logLevel<=Le.ERROR){const t=e.map(Qg);To.error(`Firestore (${sl}): ${n}`,...t)}}function Ua(n,...e){if(To.logLevel<=Le.WARN){const t=e.map(Qg);To.warn(`Firestore (${sl}): ${n}`,...t)}}function Qg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sk(n,r,t)}function sk(n,e,t){let r=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ki(r),new Error(r)}function Qe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||sk(e,s,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class Uj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $j{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let a=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new ok(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class Wj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Hj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Wj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qj(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Bm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return tm(s)===tm(a)?Oe(s,a):tm(s)?1:-1}return Oe(n.length,e.length)}const Gj=55296,Qj=57343;function tm(n){const e=n.charCodeAt(0);return e>=Gj&&e<=Qj}function $a(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__name__";class Br{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Br.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Br.isNumericId(e),s=Br.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Bm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class et extends Br{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const Yj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Br{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return Yj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vx}static keyField(){return new Gt([vx])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new le(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(l=!l,s++):f!=="."||l?(r+=f,s++):(a(),s++)}if(a(),l)throw new le(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(et.fromString(e))}static fromName(e){return new xe(et.fromString(e).popFirst(5))}static empty(){return new xe(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e,t){if(!t)throw new le(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xj(n,e,t,r){if(e===!0&&r===!0)throw new le(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xx(n){if(!xe.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(xe.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lk(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gh(n);throw new le(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!lk(n))throw new le(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new le(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,Ex=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ex);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_x)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ex}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new it(0,0))}static max(){return new Ie(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function Jj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new _s(s,xe.empty(),e)}function Zj(n){return new _s(n.readTime,n.key,Bc)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Ie.min(),xe.empty(),Bc)}static max(){return new _s(Ie.max(),xe.empty(),Bc)}}function e5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==t5)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let s=0,a=0,l=!1;e.forEach((f=>{++s,f.next((()=>{++a,l&&a===s&&t()}),(d=>r(d)))})),l=!0,a===s&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((s=>s?Z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,s)=>{const a=e.length,l=new Array(a);let f=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next((g=>{l[m]=g,++f,f===a&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new Z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function r5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=-1;function Yh(n){return n==null}function xh(n){return n===0&&1/n==-1/0}function i5(n){return typeof n=="number"&&Number.isInteger(n)&&!xh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="";function s5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kx(e)),e=o5(n.get(t),e);return kx(e)}function o5(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case ck:t+="";break;default:t+=a}}return t}function kx(n){return n+ck+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=a??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sx(this.data.getIterator())}getIteratorFrom(e){return new Sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Dt(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dk("Invalid base64 string: "+a):a}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const a5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=a5.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ks(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="server_timestamp",fk="__type__",pk="__previous_value__",mk="__local_write_time__";function Jg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fk])==null?void 0:r.stringValue)===hk}function Xh(n){const e=n.mapValue.fields[pk];return Jg(e)?Xh(e):e}function Fc(n){const e=Es(n.mapValue.fields[mk].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,t,r,s,a,l,f,d,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=v}}const wh="(default)";class zc{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}function c5(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new le(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="__type__",u5="__max__",Ud={mapValue:{}},yk="__vector__",_h="value";function Ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jg(n)?4:h5(n)?9007199254740991:d5(n)?10:11:Te(28295,{value:n})}function Kr(n,e){if(n===e)return!0;const t=Ts(n);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fc(n).isEqual(Fc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Es(s.timestampValue),f=Es(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return ks(s.bytesValue).isEqual(ks(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return xt(s.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return xt(s.integerValue)===xt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=xt(s.doubleValue),f=xt(a.doubleValue);return l===f?xh(l)===xh(f):isNaN(l)&&isNaN(f)}return!1})(n,e);case 9:return $a(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Tx(l)!==Tx(f))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(f[d]===void 0||!Kr(l[d],f[d])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Uc(n,e){return(n.values||[]).find((t=>Kr(t,e)))!==void 0}function Wa(n,e){if(n===e)return 0;const t=Ts(n),r=Ts(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=xt(a.integerValue||a.doubleValue),d=xt(l.integerValue||l.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return bx(n.timestampValue,e.timestampValue);case 4:return bx(Fc(n),Fc(e));case 5:return Bm(n.stringValue,e.stringValue);case 6:return(function(a,l){const f=ks(a),d=ks(l);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),d=l.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Oe(f[m],d[m]);if(g!==0)return g}return Oe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Oe(xt(a.latitude),xt(l.latitude));return f!==0?f:Oe(xt(a.longitude),xt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ix(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var _,T,k,C;const f=a.fields||{},d=l.fields||{},m=(_=f[_h])==null?void 0:_.arrayValue,g=(T=d[_h])==null?void 0:T.arrayValue,v=Oe(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((C=g==null?void 0:g.values)==null?void 0:C.length)||0);return v!==0?v:Ix(m,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ud.mapValue&&l===Ud.mapValue)return 0;if(a===Ud.mapValue)return 1;if(l===Ud.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),m=l.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=Bm(d[v],g[v]);if(_!==0)return _;const T=Wa(f[d[v]],m[g[v]]);if(T!==0)return T}return Oe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function bx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Es(n),r=Es(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function Ix(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Wa(t[s],r[s]);if(a)return a}return Oe(t.length,r.length)}function Ha(n){return Fm(n)}function Fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ks(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Fm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Fm(t.fields[l])}`;return s+"}"})(n.mapValue):Te(61005,{value:n})}function th(n){switch(Ts(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(n);return e?16+th(e):16;case 5:return 2*n.stringValue.length;case 6:return ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+th(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ns(r.fields,((a,l)=>{s+=a.length+th(l)})),s})(n.mapValue);default:throw Te(13486,{value:n})}}function Cx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zm(n){return!!n&&"integerValue"in n}function Zg(n){return!!n&&"arrayValue"in n}function Ax(n){return!!n&&"nullValue"in n}function Rx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nh(n){return!!n&&"mapValue"in n}function d5(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gk])==null?void 0:r.stringValue)===yk}function Ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ic(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(n.arrayValue.values[t]);return e}return{...n}}function h5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===u5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Gt.emptyPath(),r={},s=[];e.forEach(((l,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}l?r[f.lastSegment()]=Ic(l):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ns(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new _n(Ic(this.value))}}function vk(n){const e=[];return Ns(n.fields,((t,r)=>{const s=new Gt([t]);if(nh(r)){const a=vk(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,s,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),_n.empty(),0)}static newFoundDocument(e,t,r,s){return new on(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function Px(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=Wa(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function jx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t="asc"){this.field=e,this.dir=t}}function f5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{}class Ct extends xk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new m5(e,t,r):t==="array-contains"?new v5(e,r):t==="in"?new x5(e,r):t==="not-in"?new w5(e,r):t==="array-contains-any"?new _5(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new g5(e,r):new y5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wa(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends xk{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vr(e,t)}matches(e){return wk(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wk(n){return n.op==="and"}function _k(n){return p5(n)&&wk(n)}function p5(n){for(const e of n.filters)if(e instanceof vr)return!1;return!0}function Um(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(_k(n))return n.filters.map((e=>Um(e))).join(",");{const e=n.filters.map((t=>Um(t))).join(",");return`${n.op}(${e})`}}function Ek(n,e){return n instanceof Ct?(function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&Kr(r.value,s.value)})(n,e):n instanceof vr?(function(r,s){return s instanceof vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,f)=>a&&Ek(l,s.filters[f])),!0):!1})(n,e):void Te(19439)}function kk(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`})(n):n instanceof vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(kk).join(" ,")+"}"})(n):"Filter"}class m5 extends Ct{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class g5 extends Ct{constructor(e,t){super(e,"in",t),this.keys=Tk("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class y5 extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=Tk("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Tk(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>xe.fromName(r.referenceValue)))}class v5 extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zg(t)&&Uc(t.arrayValue,this.value)}}class x5 extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class w5 extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class _5 extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,t=null,r=[],s=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function Nx(n,e=null,t=[],r=[],s=null,a=null,l=null){return new E5(n,e,t,r,s,a,l)}function ey(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Um(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ha(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ha(r))).join(",")),e.Te=t}return e.Te}function ty(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!f5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ek(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jx(n.startAt,e.startAt)&&jx(n.endAt,e.endAt)}function $m(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t=null,r=[],s=[],a=null,l="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function k5(n,e,t,r,s,a,l,f){return new ll(n,e,t,r,s,a,l,f)}function ny(n){return new ll(n)}function Dx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function T5(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sk(n){return n.collectionGroup!==null}function Cc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new Dt(Gt.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new $c(a,r))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new $c(Gt.keyField(),r))}return e.Ie}function zr(n){const e=Pe(n);return e.Ee||(e.Ee=S5(e,Cc(n))),e.Ee}function S5(n,e){if(n.limitType==="F")return Nx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new $c(s.field,a)}));const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return Nx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Wm(n,e){const t=n.filters.concat([e]);return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b5(n,e){const t=n.explicitOrderBy.concat([e]);return new ll(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function kh(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jh(n,e){return ty(zr(n),zr(e))&&n.limitType===e.limitType}function bk(n){return`${ey(zr(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>kk(s))).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ha(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ha(s))).join(",")),`Target(${r})`})(zr(n))}; limitType=${n.limitType})`}function Zh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Cc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,f,d){const m=Px(l,f,d);return l.inclusive?m<=0:m<0})(r.startAt,Cc(r),s)||r.endAt&&!(function(l,f,d){const m=Px(l,f,d);return l.inclusive?m>=0:m>0})(r.endAt,Cc(r),s))})(n,e)}function I5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ik(n){return(e,t)=>{let r=!1;for(const s of Cc(n)){const a=C5(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function C5(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(a,l,f){const d=l.data.field(a),m=f.data.field(a);return d!==null&&m!==null?Wa(d,m):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return uk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=new dt(xe.comparator);function Ti(){return A5}const Ck=new dt(xe.comparator);function wc(...n){let e=Ck;for(const t of n)e=e.insert(t.key,t);return e}function Ak(n){let e=Ck;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function mo(){return Ac()}function Rk(){return Ac()}function Ac(){return new Ro((n=>n.toString()),((n,e)=>n.isEqual(e)))}const R5=new dt(xe.comparator),P5=new Dt(xe.comparator);function Be(...n){let e=P5;for(const t of n)e=e.add(t);return e}const j5=new Dt(Oe);function N5(){return j5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function Pk(n){return{integerValue:""+n}}function jk(n,e){return i5(e)?Pk(e):ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function D5(n,e,t){return n instanceof Wc?(function(s,a){const l={fields:{[fk]:{stringValue:hk},[mk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Jg(a)&&(a=Xh(a)),a&&(l.fields[pk]=a),{mapValue:l}})(t,e):n instanceof Ka?Dk(n,e):n instanceof Hc?Vk(n,e):(function(s,a){const l=Nk(s,a),f=Vx(l)+Vx(s.Ae);return zm(l)&&zm(s.Ae)?Pk(f):ry(s.serializer,f)})(n,e)}function V5(n,e,t){return n instanceof Ka?Dk(n,e):n instanceof Hc?Vk(n,e):t}function Nk(n,e){return n instanceof Kc?(function(r){return zm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Wc extends ef{}class Ka extends ef{constructor(e){super(),this.elements=e}}function Dk(n,e){const t=Mk(e);for(const r of n.elements)t.some((s=>Kr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Hc extends ef{constructor(e){super(),this.elements=e}}function Vk(n,e){let t=Mk(e);for(const r of n.elements)t=t.filter((s=>!Kr(s,r)));return{arrayValue:{values:t}}}class Kc extends ef{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vx(n){return xt(n.integerValue||n.doubleValue)}function Mk(n){return Zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.field=e,this.transform=t}}function M5(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ka&&s instanceof Ka||r instanceof Hc&&s instanceof Hc?$a(r.elements,s.elements,Kr):r instanceof Kc&&s instanceof Kc?Kr(r.Ae,s.Ae):r instanceof Wc&&s instanceof Wc})(n.transform,e.transform)}class L5{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tf{}function Lk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bk(n.key,mr.none()):new du(n.key,n.data,mr.none());{const t=n.data,r=_n.empty();let s=new Dt(Gt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Ds(n.key,r,new Nn(s.toArray()),mr.none())}}function O5(n,e,t){n instanceof du?(function(s,a,l){const f=s.value.clone(),d=Lx(s.fieldTransforms,a,l.transformResults);f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ds?(function(s,a,l){if(!rh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Lx(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(Ok(s)),d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Rc(n,e,t,r){return n instanceof du?(function(a,l,f,d){if(!rh(a.precondition,l))return f;const m=a.value.clone(),g=Ox(a.fieldTransforms,d,l);return m.setAll(g),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ds?(function(a,l,f,d){if(!rh(a.precondition,l))return f;const m=Ox(a.fieldTransforms,d,l),g=l.data;return g.setAll(Ok(a)),g.setAll(m),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,l,f){return rh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(n,e,t)}function B5(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=Nk(r.transform,s||null);a!=null&&(t===null&&(t=_n.empty()),t.set(r.field,a))}return t||null}function Mx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$a(r,s,((a,l)=>M5(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends tf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends tf{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ok(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Lx(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,f=e.data.field(a.field);r.set(a.field,V5(l,f,t[s]))}return r}function Ox(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,D5(a,l,e))}return r}class Bk extends tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F5 extends tf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&O5(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Rk();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(s.key)?null:f;const d=Lk(l,f);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,((t,r)=>Mx(t,r)))&&$a(this.baseMutations,e.baseMutations,((t,r)=>Mx(t,r)))}}class sy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return R5})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new sy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,ze;function W5(n){switch(n){case J.OK:return Te(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function Fk(n){if(n===void 0)return ki("GRPC error has no .code"),J.UNKNOWN;switch(n){case bt.OK:return J.OK;case bt.CANCELLED:return J.CANCELLED;case bt.UNKNOWN:return J.UNKNOWN;case bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case bt.INTERNAL:return J.INTERNAL;case bt.UNAVAILABLE:return J.UNAVAILABLE;case bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case bt.NOT_FOUND:return J.NOT_FOUND;case bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case bt.ABORTED:return J.ABORTED;case bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case bt.DATA_LOSS:return J.DATA_LOSS;default:return Te(39323,{code:n})}}(ze=bt||(bt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new ys([4294967295,4294967295],0);function Bx(n){const e=H5().encode(n),t=new ZE;return t.update(e),new Uint8Array(t.digest())}function Fx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ys([t,r],0),new ys([s,a],0)]}class oy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ys.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ys.fromNumber(r)));return s.compare(K5)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bx(e),[r,s]=Fx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new oy(a,s,t);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const t=Bx(e),[r,s]=Fx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nf(Ie.min(),s,new dt(Oe),Ti(),Be())}}class hu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hu(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class zk{constructor(e,t){this.targetId=e,this.Ce=t}}class Uk{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class zx{constructor(){this.ve=0,this.Fe=Ux(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:a})}})),new hu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Ux()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class q5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.He=$d(),this.Je=$d(),this.Ze=new dt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if($m(a))if(r===0){const l=new xe(a.path);this.et(t,l,on.newNoDocument(l,Ie.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const f=this.ut(e),d=f?this.ct(f,e,l):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,f;try{l=ks(r).toUint8Array()}catch(d){if(d instanceof dk)return Ua("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new oy(l,s,a)}catch(d){return Ua(d instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&$m(f.target)){const d=new xe(f.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,on.newNoDocument(d,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Be();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new nf(e,t,this.Ze,this.je,r);return this.je=Ti(),this.He=$d(),this.Je=$d(),this.Ze=new dt(Oe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Dt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Dt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $d(){return new dt(xe.comparator)}function Ux(){return new dt(xe.comparator)}const G5={asc:"ASCENDING",desc:"DESCENDING"},Q5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y5={and:"AND",or:"OR"};class X5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hm(n,e){return n.useProto3Json||Yh(e)?e:{value:e}}function Th(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J5(n,e){return Th(n,e.toTimestamp())}function Ur(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const r=Es(t);return new it(r.seconds,r.nanos)})(n))}function ay(n,e){return Km(n,e).canonicalString()}function Km(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Wk(n){const e=et.fromString(n);return Qe(Qk(e),10190,{key:e.toString()}),e}function qm(n,e){return ay(n.databaseId,e.path)}function nm(n,e){const t=Wk(e);if(t.get(1)!==n.databaseId.projectId)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(Kk(t))}function Hk(n,e){return ay(n.databaseId,e)}function Z5(n){const e=Wk(n);return e.length===4?et.emptyPath():Kk(e)}function Gm(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kk(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $x(n,e,t){return{name:qm(n,e),fields:t.value.mapValue.fields}}function eN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Te(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,g){return m.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),Yt.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Yt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(m){const g=m.code===void 0?J.UNKNOWN:Fk(m.code);return new le(g,m.message||"")})(l);t=new Uk(r,s,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=nm(n,r.document.name),a=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):Ie.min(),f=new _n({mapValue:{fields:r.document.fields}}),d=on.newFoundDocument(s,a,l,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new ih(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=nm(n,r.document),a=r.readTime?Ur(r.readTime):Ie.min(),l=on.newNoDocument(s,a),f=r.removedTargetIds||[];t=new ih([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=nm(n,r.document),a=r.removedTargetIds||[];t=new ih([],a,s,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new $5(s,a),f=r.targetId;t=new zk(f,l)}}return t}function tN(n,e){let t;if(e instanceof du)t={update:$x(n,e.key,e.value)};else if(e instanceof Bk)t={delete:qm(n,e.key)};else if(e instanceof Ds)t={update:$x(n,e.key,e.data),updateMask:uN(e.fieldMask)};else{if(!(e instanceof F5))return Te(16599,{dt:e.type});t={verify:qm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Wc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ka)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kc)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:J5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)})(n,e.precondition)),t}function nN(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?Ur(s.updateTime):Ur(a);return l.isEqual(Ie.min())&&(l=Ur(a)),new L5(l,s.transformResults||[])})(t,e)))):[]}function rN(n,e){return{documents:[Hk(n,e.path)]}}function iN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hk(n,s);const a=(function(m){if(m.length!==0)return Gk(vr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((g=>(function(_){return{field:Sa(_.field),direction:aN(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=Hm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function sN(n){let e=Z5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(v){const _=qk(v);return _ instanceof vr&&_k(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((_=>(function(k){return new $c(ba(k.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(_)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let _;return _=typeof v=="object"?v.value:v,Yh(_)?null:_})(t.limit));let d=null;t.startAt&&(d=(function(v){const _=!!v.before,T=v.values||[];return new Eh(T,_)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const _=!v.before,T=v.values||[];return new Eh(T,_)})(t.endAt)),k5(e,s,l,a,f,"F",d,m)}function oN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qk(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ba(t.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ba(t.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ba(t.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ba(t.unaryFilter.field);return Ct.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(ba(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vr.create(t.compositeFilter.filters.map((r=>qk(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function aN(n){return G5[n]}function lN(n){return Q5[n]}function cN(n){return Y5[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function ba(n){return Gt.fromServerFormat(n.fieldPath)}function Gk(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(Rx(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(Ax(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rx(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(Ax(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:lN(t.op),value:t.value}}})(n):n instanceof vr?(function(t){const r=t.getFilters().map((s=>Gk(s)));return r.length===1?r[0]:{compositeFilter:{op:cN(t.op),filters:r}}})(n):Te(54877,{filter:n})}function uN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Yk(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r,s,a=Ie.min(),l=Ie.min(),f=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.yt=e}}function hN(n){const e=sN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.Sn=new pN}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(_s.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class pN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Dt(et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xk=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Xk,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qa(0)}static ar(){return new qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LruGarbageCollector",mN=1048576;function Kx([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class gN{constructor(e){this.Pr=e,this.buffer=new Dt(Kx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(Hx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?de(Hx,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Ar(3e5)}))}}class vN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Qh.ce);const r=new gN(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Wx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,l,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(m=Date.now(),ka()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(f-l)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v}))))}}function xN(n,e){return new vN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.changes=new Ro((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Rc(r.mutation,s,Nn.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Be()){const s=mo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=wc();return a.forEach(((f,d)=>{l=l.insert(f,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=mo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Be())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,f)=>{t.set(l,f)}))}))}computeViews(e,t,r,s){let a=Ti();const l=Ac(),f=(function(){return Ac()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Ds)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),Rc(g.mutation,m,g.mutation.getFieldMask(),it.now())):l.set(m.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((m,g)=>l.set(m,g))),t.forEach(((m,g)=>f.set(m,new _N(g,l.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Ac();let s=new dt(((l,f)=>l-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const f of l)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Nn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const v=(s.get(f.batchId)||Be()).add(d);s=s.insert(f.batchId,v)}))})).next((()=>{const l=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,v=Rk();g.forEach((_=>{if(!a.has(_)){const T=Lk(t.get(_),r.get(_));T!==null&&v.set(_,T),a=a.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return Z.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return T5(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Z.resolve(mo());let f=Bc,d=a;return l.next((m=>Z.forEach(m,((g,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),a.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{d=d.insert(g,_)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,d,m,Be()))).next((g=>({batchId:f,changes:Ak(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let s=wc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=wc();return this.indexManager.getCollectionParents(e,a).next((f=>Z.forEach(f,(d=>{const m=(function(v,_){return new ll(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((v,_)=>{l=l.insert(v,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((d,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,on.newInvalidDocument(g)))}));let f=wc();return l.forEach(((d,m)=>{const g=a.get(d);g!==void 0&&Rc(g.mutation,m,Nn.empty(),it.now()),Zh(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ur(s.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:hN(s.bundledQuery),readTime:Ur(s.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.overlays=new dt(xe.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mo();return Z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const s=mo(),a=t.length+1,l=new xe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new dt(((m,g)=>m-g));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=mo(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=mo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return Z.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new U5(t,r));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.kr=new Dt(Ft.Kr),this.qr=new Dt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new xe(new et([])),r=new Ft(t,e),s=new Ft(t,e+1),a=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new xe(new et([])),r=new Ft(t,e),s=new Ft(t,e+1);let a=Be();return this.qr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ft(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return xe.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Dt(Ft.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new z5(a,t,r,s);this.mutationQueue.push(l);for(const f of s)this.Jr=this.Jr.add(new Ft(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Xg:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(Oe);return t.forEach((s=>{const a=new Ft(s,0),l=new Ft(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;xe.isDocumentKey(a)||(a=a.child(""));const l=new Ft(new xe(a),0);let f=new Dt(Oe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),l),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Z.forEach(t.mutations,(s=>{const a=new Ft(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Ft(t,0),s=this.Jr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.ti=e,this.docs=(function(){return new dt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():on.newInvalidDocument(s))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ti();const l=t.path,f=new xe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||e5(Zj(g),r)<=0||(s.has(g.key)||Zh(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Te(9500)}ni(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new CN(this)}getSize(e){return Z.resolve(this.size)}}class CN extends wN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.persistence=e,this.ri=new Ro((t=>ey(t)),ty),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new ly,this.targetCount=0,this.oi=qa._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),Z.waitFor(a).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this._i={},this.overlays={},this.ai=new Qh(0),this.ui=!1,this.ui=!0,this.ci=new SN,this.referenceDelegate=e(this),this.li=new AN(this),this.indexManager=new fN,this.remoteDocumentCache=(function(s){return new IN(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new dN(t),this.Pi=new kN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new bN(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const s=new RN(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return Z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class RN extends n5{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Ri=new ly,this.Ai=null}static Vi(e){return new cy(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(r=>{const s=xe.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sh{constructor(e,t){this.persistence=e,this.fi=new Ro((r=>s5(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=xN(this,t)}static Vi(e,t){return new Sh(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((f=>{f||(r++,a.removeEntry(l,Ie.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=th(e.data.value)),t}wr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new uy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return iA()?8:r5(ln())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new PN;return this.ys(e,t,l).next((f=>{if(a.result=f,this.As)return this.ws(e,t,l,f.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(ka()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(ka()<=Le.DEBUG&&de("QueryEngine","Query:",Ta(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ka()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):Z.resolve())}gs(e,t){if(Dx(t))return Z.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=kh(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Be(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,l,d.readTime)?this.gs(e,kh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return Dx(t)||s.isEqual(Ie.min())?Z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,s)?Z.resolve(null):(ka()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ta(t)),this.Ds(e,l,t,Jj(s,Bc)).next((f=>f)))}))}bs(e,t){let r=new Dt(Ik(e));return t.forEach(((s,a)=>{Zh(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return ka()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.fs.getDocumentsMatchingQuery(e,t,_s.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LocalStore",NN=3e8;class DN{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new dt(Oe),this.Fs=new Ro((a=>ey(a)),ty),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function VN(n,e,t,r){return new DN(n,e,t,r)}async function Zk(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let d=Be();for(const m of s){l.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of a){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:l,addedBatchIds:f})))}))}))}function MN(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const v=m.batch,_=v.keys();let T=Z.resolve();return _.forEach((k=>{T=T.next((()=>g.getEntry(d,k))).next((C=>{const I=m.docVersions.get(k);Qe(I!==null,48541),C.version.compareTo(I)<0&&(v.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),g.addEntry(C)))}))})),T.next((()=>f.mutationQueue.removeMutationBatch(d,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Be();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function eT(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function LN(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;f.push(t.li.removeMatchingKeys(a,g.removedDocuments,v).next((()=>t.li.addMatchingKeys(a,g.addedDocuments,v))));let T=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Yt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(v,T),(function(C,I,V){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=NN?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(_,T,g)&&f.push(t.li.updateTargetData(a,T))}));let d=Ti(),m=Be();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),f.push(ON(a,l,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ie.min())){const g=t.li.getLastRemoteSnapshotVersion(a).next((v=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(g)}return Z.waitFor(f).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,m))).next((()=>d))})).then((a=>(t.vs=s,a)))}function ON(n,e,t){let r=Be(),s=Be();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Ti();return t.forEach(((f,d)=>{const m=a.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(f,d.readTime),l=l.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(f,d)):de(dy,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:l,Ls:s}}))}function BN(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FN(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,Z.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new hs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Qm(n,e,t){const r=Pe(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!al(l))throw l;de(dy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function qx(n,e,t){const r=Pe(n);let s=Ie.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,g){const v=Pe(d),_=v.Fs.get(g);return _!==void 0?Z.resolve(v.vs.get(_)):v.li.getTargetData(m,g)})(r,l,zr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((d=>{a=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ie.min(),t?a:Be()))).next((f=>(zN(r,I5(e),f),{documents:f,ks:a})))))}function zN(n,e,t){let r=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class Gx{constructor(){this.activeTargetIds=N5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UN{constructor(){this.vo=new Gx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Gx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="ConnectivityMonitor";class Yx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(Qx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(Qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd=null;function Ym(){return Wd===null?Wd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wd++,"0x"+Wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="RestConnection",WN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class HN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===wh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=Ym(),f=this.Qo(e,t.toUriEncodedString());de(rm,`Sending RPC '${e}' ${l}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,a);const{host:m}=new URL(f),g=nl(m);return this.zo(e,f,d,r,g).then((v=>(de(rm,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ua(rm,`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v}))}jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=WN[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",pc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Va extends HN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Va.c_){const e=rk();pc(e,nk.STAT_EVENT,(t=>{t.stat===Om.PROXY?de(rn,"STAT_EVENT: detected buffering proxy"):t.stat===Om.NOPROXY&&de(rn,"STAT_EVENT: detected no buffering proxy")})),Va.c_=!0}}zo(e,t,r,s,a){const l=Ym();return new Promise(((f,d)=>{const m=new ek;m.setWithCredentials(!0),m.listenOnce(tk.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case eh.NO_ERROR:const v=m.getResponseJson();de(rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),f(v);break;case eh.TIMEOUT:de(rn,`RPC '${e}' ${l} timed out`),d(new le(J.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const _=m.getStatus();if(de(rn,`RPC '${e}' ${l} failed with status:`,_,"response text:",m.getResponseText()),_>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const C=(function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(B)>=0?B:J.UNKNOWN})(k.status);d(new le(C,k.message))}else d(new le(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new le(J.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{de(rn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);de(rn,`RPC '${e}' ${l} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Ym(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=a.join("");de(rn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=l.createWebChannel(m,f);this.I_(g);let v=!1,_=!1;const T=new KN({Ho:k=>{_?de(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(v||(de(rn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),de(rn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return pc(g,xc.EventType.OPEN,(()=>{_||(de(rn,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),pc(g,xc.EventType.CLOSE,(()=>{_||(_=!0,de(rn,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(g))})),pc(g,xc.EventType.ERROR,(k=>{_||(_=!0,Ua(rn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),T.o_(new le(J.UNAVAILABLE,"The operation could not be completed")))})),pc(g,xc.EventType.MESSAGE,(k=>{var C;if(!_){const I=k.data[0];Qe(!!I,16349);const V=I,B=(V==null?void 0:V.error)||((C=V[0])==null?void 0:C.error);if(B){de(rn,`RPC '${e}' stream ${s} received error:`,B);const P=B.status;let G=(function(A){const b=bt[A];if(b!==void 0)return Fk(b)})(P),$=B.message;G===void 0&&(G=J.INTERNAL,$="Unknown error status: "+P+" with message "+B.message),_=!0,T.o_(new le(G,$)),g.close()}else de(rn,`RPC '${e}' stream ${s} received:`,I),T.__(I)}})),Va.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ik()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n){return new Va(n)}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n){return new X5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Va.c_=!1;class tT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="PersistentStream";class nT{constructor(e,t,r,s,a,l,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new le(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Xx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(Xx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GN extends nT{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eN(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ie.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ie.min():l.readTime?Ur(l.readTime):Ie.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Gm(this.serializer),t.addTarget=(function(a,l){let f;const d=l.target;if(f=$m(d)?{documents:rN(a,d)}:{query:iN(a,d).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=$k(a,l.resumeToken);const m=Hm(a,l.expectedCount);m!==null&&(f.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Th(a,l.snapshotVersion.toTimestamp());const m=Hm(a,l.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=oN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Gm(this.serializer),t.removeTarget=e,this.K_(t)}}class QN extends nT{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nN(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Gm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>tN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{}class XN extends YN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Km(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(J.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,Km(t,r),s,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(J.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function JN(n,e,t,r){return new XN(n,e,t,r)}class ZN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ki(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class eD{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Po(this)&&(de(So,"Restarting streams for network reachability change."),await(async function(d){const m=Pe(d);m.Ea.add(4),await fu(m),m.Va.set("Unknown"),m.Ea.delete(4),await sf(m)})(this))}))})),this.Va=new ZN(r,s)}}async function sf(n){if(Po(n))for(const e of n.Ra)await e(!0)}async function fu(n){for(const e of n.Ra)await e(!1)}function rT(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),my(t)?py(t):cl(t).O_()&&fy(t,e))}function hy(n,e){const t=Pe(n),r=cl(t);t.Ia.delete(e),r.O_()&&iT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Po(t)&&t.Va.set("Unknown"))}function fy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).Z_(e)}function iT(n,e){n.da.$e(e),cl(n).X_(e)}function py(n){n.da=new q5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.Va.ua()}function my(n){return Po(n)&&!cl(n).x_()&&n.Ia.size>0}function Po(n){return Pe(n).Ea.size===0}function sT(n){n.da=void 0}async function tD(n){n.Va.set("Online")}async function nD(n){n.Ia.forEach(((e,t)=>{fy(n,e)}))}async function rD(n,e){sT(n),my(n)?(n.Va.ha(e),py(n)):n.Va.set("Unknown")}async function iD(n,e,t){if(n.Va.set("Online"),e instanceof Uk&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,l),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){de(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(n,r)}else if(e instanceof ih?n.da.Xe(e):e instanceof zk?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const r=await eT(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(m);g&&a.Ia.set(m,g.withResumeToken(d.resumeToken,l))}})),f.targetMismatches.forEach(((d,m)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Yt.EMPTY_BYTE_STRING,g.snapshotVersion)),iT(a,d);const v=new hs(g.target,d,m,g.sequenceNumber);fy(a,v)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){de(So,"Failed to raise snapshot:",r),await bh(n,r)}}async function bh(n,e,t){if(!al(e))throw e;n.Ea.add(1),await fu(n),n.Va.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(So,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await sf(n)}))}function oT(n,e){return e().catch((t=>bh(n,t,e)))}async function of(n){const e=Pe(n),t=Ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xg;for(;sD(e);)try{const s=await BN(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,oD(e,s)}catch(s){await bh(e,s)}aT(e)&&lT(e)}function sD(n){return Po(n)&&n.Ta.length<10}function oD(n,e){n.Ta.push(e);const t=Ss(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function aT(n){return Po(n)&&!Ss(n).x_()&&n.Ta.length>0}function lT(n){Ss(n).start()}async function aD(n){Ss(n).ra()}async function lD(n){const e=Ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function cD(n,e,t){const r=n.Ta.shift(),s=sy.from(r,e,t);await oT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await of(n)}async function uD(n,e){e&&Ss(n).Y_&&await(async function(r,s){if((function(l){return W5(l)&&l!==J.ABORTED})(s.code)){const a=r.Ta.shift();Ss(r).B_(),await oT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await of(r)}})(n,e),aT(n)&&lT(n)}async function Jx(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),de(So,"RemoteStore received new credentials");const r=Po(t);t.Ea.add(3),await fu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sf(t)}async function dD(n,e){const t=Pe(n);e?(t.Ea.delete(2),await sf(t)):e||(t.Ea.add(2),await fu(t),t.Va.set("Unknown"))}function cl(n){return n.ma||(n.ma=(function(t,r,s){const a=Pe(t);return a.sa(),new GN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:tD.bind(null,n),Yo:nD.bind(null,n),t_:rD.bind(null,n),J_:iD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),my(n)?py(n):n.Va.set("Unknown")):(await n.ma.stop(),sT(n))}))),n.ma}function Ss(n){return n.fa||(n.fa=(function(t,r,s){const a=Pe(t);return a.sa(),new QN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:aD.bind(null,n),t_:uD.bind(null,n),ta:lD.bind(null,n),na:cD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await of(n)):(await n.fa.stop(),n.Ta.length>0&&(de(So,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,f=new gy(e,t,l,s,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(n,e){if(ki("AsyncQueue",`${e}: ${n}`),al(n))return new le(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=wc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new dt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ga{constructor(e,t,r,s,a,l,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((f=>{l.push({type:0,doc:f})})),new Ga(e,t,Ma.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class fD{constructor(){this.queries=ew(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=ew(),a.forEach(((l,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new le(J.ABORTED,"Firestore shutting down"))}}function ew(){return new Ro((n=>bk(n)),Jh)}async function cT(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new hD,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const f=yy(l,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&vy(t)}async function uT(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const f of l.ba)f.Fa(s)&&(r=!0);l.wa=s}}r&&vy(t)}function mD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function vy(n){n.Ca.forEach((e=>{e.next()}))}var Xm,tw;(tw=Xm||(Xm={})).Ma="default",tw.Cache="cache";class dT{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.key=e}}class fT{constructor(e){this.key=e}}class gD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=Ik(e),this.tu=new Ma(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Zx,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),T=Zh(this.query,v)?v:null,k=!!_&&this.mutatedKeys.has(_.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let I=!1;_&&T?_.data.isEqual(T.data)?k!==C&&(r.track({type:3,doc:T}),I=!0):this.su(_,T)||(r.track({type:2,doc:T}),I=!0,(d&&this.eu(T,d)>0||m&&this.eu(T,m)<0)&&(f=!0)):!_&&T?(r.track({type:0,doc:T}),I=!0):_&&!T&&(r.track({type:1,doc:_}),I=!0,(d||m)&&(f=!0)),I&&(T?(l=l.add(T),a=C?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(T,k){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:I})}};return C(T)-C(k)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,l.length!==0||m?{snapshot:new Ga(this.query,e.tu,a,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new fT(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new hT(r))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ga.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const xy="SyncEngine";class yD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vD{constructor(e){this.key=e,this.hu=!1}}class xD{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ro((f=>bk(f)),Jh),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(xe.comparator),this.Au=new Map,this.Vu=new ly,this.du={},this.mu=new Map,this.fu=qa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wD(n,e,t=!0){const r=xT(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await pT(r,e,t,!0),s}async function _D(n,e){const t=xT(n);await pT(t,e,!0,!1)}async function pT(n,e,t,r){const s=await FN(n.localStore,zr(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let f;return r&&(f=await ED(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&rT(n.remoteStore,s),f}async function ED(n,e,t,r,s){n.pu=(v,_,T)=>(async function(C,I,V,B){let P=I.view.ru(V);P.Ss&&(P=await qx(C.localStore,I.query,!1).then((({documents:A})=>I.view.ru(A,P))));const G=B&&B.targetChanges.get(I.targetId),$=B&&B.targetMismatches.get(I.targetId)!=null,H=I.view.applyChanges(P,C.isPrimaryClient,G,$);return rw(C,I.targetId,H.au),H.snapshot})(n,v,_,T);const a=await qx(n.localStore,e,!0),l=new gD(e,a.ks),f=l.ru(a.documents),d=hu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=l.applyChanges(f,n.isPrimaryClient,d);rw(n,t,m.au);const g=new yD(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function kD(n,e,t){const r=Pe(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!Jh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Qm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&hy(r.remoteStore,s.targetId),Jm(r,s.targetId)})).catch(ol)):(Jm(r,s.targetId),await Qm(r.localStore,s.targetId,!0))}async function TD(n,e){const t=Pe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hy(t.remoteStore,r.targetId))}async function SD(n,e,t){const r=jD(n);try{const s=await(function(l,f){const d=Pe(l),m=it.now(),g=f.reduce(((T,k)=>T.add(k.key)),Be());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let k=Ti(),C=Be();return d.xs.getEntries(T,g).next((I=>{k=I,k.forEach(((V,B)=>{B.isValidDocument()||(C=C.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,k))).next((I=>{v=I;const V=[];for(const B of f){const P=B5(B,v.get(B.key).overlayedDocument);P!=null&&V.push(new Ds(B.key,P,vk(P.value.mapValue),mr.exists(!0)))}return d.mutationQueue.addMutationBatch(T,m,V,f)})).next((I=>{_=I;const V=I.applyToLocalDocumentSet(v,C);return d.documentOverlayCache.saveOverlays(T,I.batchId,V)}))})).then((()=>({batchId:_.batchId,changes:Ak(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,f,d){let m=l.du[l.currentUser.toKey()];m||(m=new dt(Oe)),m=m.insert(f,d),l.du[l.currentUser.toKey()]=m})(r,s.batchId,t),await pu(r,s.changes),await of(r.remoteStore)}catch(s){const a=yy(s,"Failed to persist write");t.reject(a)}}async function mT(n,e){const t=Pe(n);try{const r=await LN(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Qe(l.hu,14607):s.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))})),await pu(t,r,e)}catch(r){await ol(r)}}function nw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(l,f){const d=Pe(l);d.onlineState=f;let m=!1;d.queries.forEach(((g,v)=>{for(const _ of v.ba)_.va(f)&&(m=!0)})),m&&vy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new dt(xe.comparator);l=l.insert(a,on.newNoDocument(a,Ie.min()));const f=Be().add(a),d=new nf(Ie.min(),new Map,new dt(Oe),l,f);await mT(r,d),r.Ru=r.Ru.remove(a),r.Au.delete(e),wy(r)}else await Qm(r.localStore,e,!1).then((()=>Jm(r,e,t))).catch(ol)}async function ID(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await MN(t.localStore,e);yT(t,r,null),gT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pu(t,s)}catch(s){await ol(s)}}async function CD(n,e,t){const r=Pe(n);try{const s=await(function(l,f){const d=Pe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((v=>(Qe(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(m,v)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);yT(r,e,t),gT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pu(r,s)}catch(s){await ol(s)}}function gT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function yT(n,e,t){const r=Pe(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||vT(n,r)}))}function vT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(hy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),wy(n))}function rw(n,e,t){for(const r of t)r instanceof hT?(n.Vu.addReference(r.key,e),AD(n,r)):r instanceof fT?(de(xy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||vT(n,r.key)):Te(19791,{wu:r})}function AD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(de(xy,"New document in limbo: "+t),n.Eu.add(r),wy(n))}function wy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(et.fromString(e)),r=n.fu.next();n.Au.set(r,new vD(t)),n.Ru=n.Ru.insert(t,r),rT(n.remoteStore,new hs(zr(ny(t.path)),r,"TargetPurposeLimboResolution",Qh.ce))}}async function pu(n,e,t){const r=Pe(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{l.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){s.push(m);const v=uy.Es(d.targetId,m);a.push(v)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(d,m){const g=Pe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Z.forEach(m,(_=>Z.forEach(_.Ts,(T=>g.persistence.referenceDelegate.addReference(v,_.targetId,T))).next((()=>Z.forEach(_.Is,(T=>g.persistence.referenceDelegate.removeReference(v,_.targetId,T)))))))))}catch(v){if(!al(v))throw v;de(dy,"Failed to update sequence numbers: "+v)}for(const v of m){const _=v.targetId;if(!v.fromCache){const T=g.vs.get(_),k=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(_,C)}}})(r.localStore,a))}async function RD(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){de(xy,"User change. New user:",e.toKey());const r=await Zk(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new le(J.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(t,r.Ns)}}function PD(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const f=t.Tu.get(l);s=s.unionWith(f.view.nu)}return s}}function xT(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bD.bind(null,e),e.Pu.J_=pD.bind(null,e.eventManager),e.Pu.yu=mD.bind(null,e.eventManager),e}function jD(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CD.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VN(this.persistence,new jN,e.initialUser,this.serializer)}Cu(e){return new Jk(cy.Vi,this.serializer)}Du(e){return new UN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class ND extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Jk((r=>Sh.Vi(r,t)),this.serializer)}}class Zm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RD.bind(null,this.syncEngine),await dD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fD})()}createDatastore(e){const t=rf(e.databaseInfo.databaseId),r=qN(e.databaseInfo);return JN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,f){return new eD(r,s,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>nw(this.syncEngine,t,0)),(function(){return Yx.v()?new Yx:new $N})())}createSyncEngine(e,t){return(function(s,a,l,f,d,m,g){const v=new xD(s,a,l,f,d,m);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);de(So,"RemoteStore shutting down."),a.Ea.add(5),await fu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Zm.provider={build:()=>new Zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class DD{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{de(bs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(de(bs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=yy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sm(n,e){n.asyncQueue.verifyOperationInProgress(),de(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Zk(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function iw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VD(n);de(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Jx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Jx(e.remoteStore,s))),n._onlineComponents=e}async function VD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(bs,"Using user provided OfflineComponentProvider");try{await sm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ua("Error using user provided cache. Falling back to memory cache: "+t),await sm(n,new Ih)}}else de(bs,"Using default OfflineComponentProvider"),await sm(n,new ND(void 0));return n._offlineComponents}async function _T(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(bs,"Using user provided OnlineComponentProvider"),await iw(n,n._uninitializedComponentsProvider._online)):(de(bs,"Using default OnlineComponentProvider"),await iw(n,new Zm))),n._onlineComponents}function MD(n){return _T(n).then((e=>e.syncEngine))}async function ET(n){const e=await _T(n),t=e.eventManager;return t.onListen=wD.bind(null,e.syncEngine),t.onUnlisten=kD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_D.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TD.bind(null,e.syncEngine),t}function LD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new wT({next:_=>{g.Nu(),l.enqueueAndForget((()=>uT(a,v)));const T=_.docs.has(f);!T&&_.fromCache?m.reject(new le(J.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&d&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new dT(ny(f.path),g,{includeMetadataChanges:!0,Ka:!0});return cT(a,v)})(await ET(n),n.asyncQueue,e,t,r))),r.promise}function OD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new wT({next:_=>{g.Nu(),l.enqueueAndForget((()=>uT(a,v))),_.fromCache&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(_)},error:_=>m.reject(_)}),v=new dT(f,g,{includeMetadataChanges:!0,Ka:!0});return cT(a,v)})(await ET(n),n.asyncQueue,e,t,r))),r.promise}function BD(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((async()=>SD(await MD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="ComponentProvider",sw=new Map;function zD(n,e,t,r,s){return new l5(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,kT(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firestore.googleapis.com",ow=!0;class aw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TT,this.ssl=ow}else this.host=e.host,this.ssl=e.ssl??ow;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mN)throw new le(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class af{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zj;switch(r.type){case"firstParty":return new Hj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=sw.get(t);r&&(de(FD,"Removing Datastore"),sw.delete(t),r.terminate())})(this),Promise.resolve()}}function UD(n,e,t,r={}){var m;n=Hr(n,af);const s=nl(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(hE(`https://${f}`),fE("Firestore",!0)),a.host!==TT&&a.host!==f&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:s,emulatorOptions:r};if(!ws(d,l)&&(n._setSettings(d),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=sn.MOCK_USER;else{g=QC(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new le(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new sn(_)}n._authCredentials=new Uj(new ok(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(uu(t,wt._jsonSchema))return new wt(e,r||null,new xe(et.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:At("string",wt._jsonSchemaVersion),referencePath:At("string")};class vs extends Vs{constructor(e,t,r){super(e,t,ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new xe(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function En(n,e,...t){if(n=Mt(n),ak("collection","path",e),n instanceof af){const r=et.fromString(e,...t);return wx(r),new vs(n,null,r)}{if(!(n instanceof wt||n instanceof vs))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return wx(r),new vs(n.firestore,null,r)}}function zt(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Yg.newId()),ak("doc","path",e),n instanceof af){const r=et.fromString(e,...t);return xx(r),new wt(n,null,new xe(r))}{if(!(n instanceof wt||n instanceof vs))throw new le(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return xx(r),new wt(n.firestore,n instanceof vs?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="AsyncQueue";class cw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tT(this,"async_queue_retry"),this._c=()=>{const r=im();r&&de(lw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=im();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=im();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;de(lw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ki("INTERNAL UNHANDLED ERROR: ",uw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=gy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:uw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function uw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ul extends af{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new cw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cw(e),this._firestoreClient=void 0,await e}}}function $D(n,e){const t=typeof n=="object"?n:yE(),r=typeof n=="string"?n:wh,s=Og(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=qC("firestore");a&&UD(s,...a)}return s}function _y(n){if(n._terminated)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WD(n),n._firestoreClient}function WD(n){var r,s,a,l;const e=n._freezeSettings(),t=zD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Yt.fromBase64String(e))}catch(t){throw new le(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:At("string",qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(uu(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:At("string",$r._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new le(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:At("string",gr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=/^__.*__$/;class KD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class ST{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:n})}}class lf{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ch(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bT(this.dataSource)&&HD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class qD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rf(e)}createContext(e,t,r,s=!1){return new lf({dataSource:e,methodName:t,targetDoc:r,path:Gt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(n){const e=n._freezeSettings(),t=rf(n._databaseId);return new qD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IT(n,e,t,r,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);by("Data must be an object, but it was:",l,r);const f=CT(r,l);let d,m;if(a.merge)d=new Nn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const _=bo(e,v,t);if(!l.contains(_))throw new le(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);PT(g,_)||g.push(_)}d=new Nn(g),m=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,m=l.fieldTransforms;return new KD(new _n(f),d,m)}class uf extends dl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uf}}function GD(n,e,t){return new lf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ky extends dl{_toFieldTransform(e){return new iy(e.path,new Wc)}isEqual(e){return e instanceof ky}}class Ty extends dl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=GD(this,e,!0),r=this.Ac.map((a=>hl(a,t))),s=new Ka(r);return new iy(e.path,s)}isEqual(e){return e instanceof Ty&&ws(this.Ac,e.Ac)}}class Sy extends dl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Kc(e.serializer,jk(e.serializer,this.Vc));return new iy(e.path,t)}isEqual(e){return e instanceof Sy&&this.Vc===e.Vc}}function QD(n,e,t,r){const s=n.createContext(1,e,t);by("Data must be an object, but it was:",s,r);const a=[],l=_n.empty();Ns(r,((d,m)=>{const g=RT(e,d,t);m=Mt(m);const v=s.childContextForFieldPath(g);if(m instanceof uf)a.push(g);else{const _=hl(m,v);_!=null&&(a.push(g),l.set(g,_))}}));const f=new Nn(a);return new ST(l,f,s.fieldTransforms)}function YD(n,e,t,r,s,a){const l=n.createContext(1,e,t),f=[bo(e,r,t)],d=[s];if(a.length%2!=0)throw new le(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)f.push(bo(e,a[_])),d.push(a[_+1]);const m=[],g=_n.empty();for(let _=f.length-1;_>=0;--_)if(!PT(m,f[_])){const T=f[_];let k=d[_];k=Mt(k);const C=l.childContextForFieldPath(T);if(k instanceof uf)m.push(T);else{const I=hl(k,C);I!=null&&(m.push(T),g.set(T,I))}}const v=new Nn(m);return new ST(g,v,l.fieldTransforms)}function XD(n,e,t,r=!1){return hl(t,n.createContext(r?4:3,e))}function hl(n,e){if(AT(n=Mt(n)))return by("Unsupported field value:",e,n),CT(n,e);if(n instanceof dl)return(function(r,s){if(!bT(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const f of r){let d=hl(f,s.childContextForArray(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Th(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(s.serializer,a)}}if(r instanceof $r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:$k(s.serializer,r._byteString)};if(r instanceof wt){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ay(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gr)return(function(l,f){const d=l instanceof gr?l.toArray():l;return{mapValue:{fields:{[gk]:{stringValue:yk},[_h]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return ry(f.serializer,g)}))}}}}}})(r,s);if(Yk(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Gh(r)}`)})(n,e)}function CT(n,e){const t={};return uk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,((r,s)=>{const a=hl(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function AT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof $r||n instanceof qn||n instanceof wt||n instanceof dl||n instanceof gr||Yk(n))}function by(n,e,t){if(!AT(t)||!lk(t)){const r=Gh(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function bo(n,e,t){if((e=Mt(e))instanceof Ey)return e._internalPath;if(typeof e=="string")return RT(n,e);throw Ch("Field path arguments must be of type string or ",n,!1,void 0,t)}const JD=new RegExp("[~\\*/\\[\\]]");function RT(n,e,t){if(e.search(JD)>=0)throw Ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ey(...e.split("."))._internalPath}catch{throw Ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ch(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new le(J.INVALID_ARGUMENT,f+n+d)}function PT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ns(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[_h].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>xt(l.doubleValue)));return new gr(t)}convertGeoPoint(e){return new $r(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=Es(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Qe(Qk(r),9688,{name:e});const s=new zc(r.get(1),r.get(3)),a=new xe(r.popFirst(5));return s.isEqual(t)||ki(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function Vt(){return new ky("serverTimestamp")}function eV(...n){return new Ty("arrayUnion",n)}function Iy(n){return new Sy("increment",n)}const dw="@firebase/firestore",hw="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(bo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tV extends NT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cy{}class Ay extends Cy{}function Is(n,e,...t){let r=[];e instanceof Cy&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((d=>d instanceof Ry)).length,f=a.filter((d=>d instanceof df)).length;if(l>1||l>0&&f>0)throw new le(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class df extends Ay{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new df(e,t,r)}_apply(e){const t=this._parse(e);return DT(e._query,t),new Vs(e.firestore,e.converter,Wm(e._query,t))}_parse(e){const t=cf(e.firestore);return(function(a,l,f,d,m,g,v){let _;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new le(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){pw(v,g);const k=[];for(const C of v)k.push(fw(d,a,C));_={arrayValue:{values:k}}}else _=fw(d,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||pw(v,g),_=XD(f,l,v,g==="in"||g==="not-in");return Ct.create(m,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qc(n,e,t){const r=e,s=bo("where",n);return df._create(s,r,t)}class Ry extends Cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ry(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const f=a.getFlattenedFilters();for(const d of f)DT(l,d),l=Wm(l,d)})(e._query,t),new Vs(e.firestore,e.converter,Wm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends Ay{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Py(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $c(a,l)})(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,b5(e._query,t))}}function Qa(n,e="asc"){const t=e,r=bo("orderBy",n);return Py._create(r,t)}class jy extends Ay{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jy(e,t,r)}_apply(e){return new Vs(e.firestore,e.converter,kh(e._query,this._limit,this._limitType))}}function rV(n){return jy._create("limit",n,"F")}function fw(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new le(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sk(e)&&t.indexOf("/")!==-1)throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!xe.isDocumentKey(r))throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cx(n,new xe(r))}if(t instanceof wt)return Cx(n,t._key);throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(t)}.`)}function pw(n,e){if(!Array.isArray(n)||n.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DT(n,e){const t=(function(s,a){for(const l of s)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function VT(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends NT{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:At("string",vo._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class sh extends vo{data(e={}){return super.data(e)}}class La{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ec(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new sh(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((f=>{const d=new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ec(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ec(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),g=l.indexOf(f.doc.key)),{type:iV(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=La._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */La._jsonSchemaVersion="firestore/querySnapshot/1.0",La._jsonSchema={type:At("string",La._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){n=Hr(n,wt);const e=Hr(n.firestore,ul),t=_y(e);return LD(t,n._key).then((r=>sV(e,n,r)))}function yr(n){n=Hr(n,Vs);const e=Hr(n.firestore,ul),t=_y(e),r=new jT(e);return nV(n._query),OD(t,n._query).then((s=>new La(e,r,n,s)))}function mu(n,e,t){n=Hr(n,wt);const r=Hr(n.firestore,ul),s=VT(n.converter,e),a=cf(r);return Dy(r,[IT(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,mr.none())])}function Gr(n,e,t,...r){n=Hr(n,wt);const s=Hr(n.firestore,ul),a=cf(s);let l;return l=typeof(e=Mt(e))=="string"||e instanceof Ey?YD(a,"updateDoc",n._key,e,t,r):QD(a,"updateDoc",n._key,e),Dy(s,[l.toMutation(n._key,mr.exists(!0))])}function Ny(n,e){const t=Hr(n.firestore,ul),r=zt(n),s=VT(n.converter,e),a=cf(n.firestore);return Dy(t,[IT(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then((()=>r))}function Dy(n,e){const t=_y(n);return BD(t,e)}function sV(n,e,t){const r=t.docs.get(e._key),s=new jT(n);return new vo(n,s,e._key,r,new Ec(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Fj(rl),Fa(new _o("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new ul(new $j(r.getProvider("auth-internal")),new Kj(l,r.getProvider("app-check-internal")),c5(l,s),l);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),gs(dw,hw,e),gs(dw,hw,"esm2020")})();var oV="firebase",aV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(oV,aV,"app");const lV={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},MT=gE(lV),qe=$D(MT),Io=Oj(MT),jo="users",xo={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function cV(n,e,t){const s=(await wP(Io,n,e)).user;return await kP(s,{displayName:t}),await mu(zt(qe,jo,s.uid),{uid:s.uid,email:s.email,displayName:t,role:xo.MEMBER,createdAt:Vt(),lastLogin:Vt()}),s}async function uV(n,e){const t=await _P(Io,n,e);return await Gr(zt(qe,jo,t.user.uid),{lastLogin:Vt()}),t.user}async function dV(){var a;const n=new fi,t=(await qP(Io,n)).user,r=zt(qe,jo,t.uid);return(await fl(r)).exists()?await Gr(r,{lastLogin:Vt(),photoURL:t.photoURL}):await mu(r,{uid:t.uid,email:t.email,displayName:t.displayName||((a=t.email)==null?void 0:a.split("@")[0]),photoURL:t.photoURL,role:xo.MEMBER,createdAt:Vt(),lastLogin:Vt(),provider:"google"}),t}async function LT(){return IP(Io)}async function mw(n){const e=zt(qe,jo,n),t=await fl(e);return t.exists()?t.data():null}async function hV(n,e){if(!Object.values(xo).includes(e))throw new Error("Invalid role");await Gr(zt(qe,jo,n),{role:e,updatedAt:Vt()})}async function fV(n,e){await Gr(zt(qe,jo,n),{role:xo.BUSINESS,businessCode:e,updatedAt:Vt()})}async function pV(){return(await yr(En(qe,jo))).docs.map(e=>({id:e.id,...e.data()}))}function mV(n){return bP(Io,n)}const OT=N.createContext(null);function gV({children:n}){const[e,t]=N.useState(null),[r,s]=N.useState(null),[a,l]=N.useState(!0);N.useEffect(()=>{const k=mV(async C=>{if(t(C),C){const I=await mw(C.uid);s(I)}else s(null);l(!1)});return()=>k()},[]);const f=!!e,d=(r==null?void 0:r.role)===xo.ADMIN,m=(r==null?void 0:r.role)===xo.BUSINESS,g=(r==null?void 0:r.role)===xo.MEMBER,T={user:e,profile:r,loading:a,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...k)=>r?k.includes(r.role):!1,refreshProfile:async()=>{if(e){const k=await mw(e.uid);s(k)}}};return c.jsx(OT.Provider,{value:T,children:n})}function No(){const n=N.useContext(OT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),gw=n=>{const e=vV(n);return e.charAt(0).toUpperCase()+e.slice(1)},BT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),xV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...f},d)=>N.createElement("svg",{ref:d,...wV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:BT("lucide",s),...!a&&!xV(f)&&{"aria-hidden":"true"},...f},[...l.map(([m,g])=>N.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=N.forwardRef(({className:r,...s},a)=>N.createElement(_V,{ref:a,iconNode:e,className:BT(`lucide-${yV(gw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=gw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],hf=ve("arrow-right-left",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eg=ve("arrow-right",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ai=ve("award",TV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Vy=ve("banknote",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],FT=ve("briefcase",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],My=ve("calendar",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zT=ve("chart-column",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gc=ve("check",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],PV=ve("chevron-left",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ly=ve("circle-alert",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cs=ve("circle-check-big",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],VV=ve("circle-x",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ya=ve("clock",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],OV=ve("coins",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UT=ve("compass",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$T=ve("copy",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],tg=ve("credit-card",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],$V=ve("croissant",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ln=ve("crown",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],WT=ve("download",HV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],qV=ve("ellipsis-vertical",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],QV=ve("gift",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],XV=ve("house",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ZV=ve("layout-dashboard",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],tM=ve("lightbulb",eM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Oy=ve("loader-circle",nM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iM=ve("lock",rM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Xa=ve("log-in",sM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ng=ve("log-out",oM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],HT=ve("mail",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Pc=ve("map-pin",lM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],uM=ve("megaphone",cM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yw=ve("package",dM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],KT=ve("palette",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vw=ve("plus",fM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],mM=ve("printer",pM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],xs=ve("qr-code",gM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vM=ve("refresh-cw",yM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wM=ve("save",xM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],EM=ve("search",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ah=ve("send",kM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SM=ve("shield-check",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rh=ve("shield",bM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],qT=ve("shopping-bag",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xw=ve("smartphone",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ff=ve("sparkles",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],PM=ve("square-check-big",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],NM=ve("square",jM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xr=ve("star",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Qt=ve("store",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xt=ve("target",MM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],OM=ve("toggle-left",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],FM=ve("toggle-right",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pl=ve("trending-up",zM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$M=ve("trophy",UM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ww=ve("user-plus",WM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oa=ve("user",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Si=ve("users",KM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],GT=ve("utensils-crossed",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],QM=ve("zap",GM);function as({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:a}=No(),l=er();return s?c.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx(Oy,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),c.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),c.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a?e.length>0&&r&&!e.includes(r.role)?c.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[c.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),c.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:c.jsx(rC,{to:"/login",state:{from:l},replace:!0})}const QT=N.createContext({});function YM(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const YT=typeof window<"u",XM=YT?N.useLayoutEffect:N.useEffect,By=N.createContext(null);function Fy(n,e){n.indexOf(e)===-1&&n.push(e)}function zy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qr=(n,e,t)=>t>e?e:t<n?n:t;let Uy=()=>{};const bi={},XT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function JT(n){return typeof n=="object"&&n!==null}const ZT=n=>/^0[^.\s]+$/u.test(n);function $y(n){let e;return()=>(e===void 0&&(e=n()),e)}const Qn=n=>n,JM=(n,e)=>t=>e(n(t)),gu=(...n)=>n.reduce(JM),Qc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Wy{constructor(){this.subscriptions=[]}add(e){return Fy(this.subscriptions,e),()=>zy(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=n=>n*1e3,Gn=n=>n/1e3;function eS(n,e){return e?n*(1e3/e):0}const tS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,ZM=1e-7,e4=12;function t4(n,e,t,r,s){let a,l,f=0;do l=e+(t-e)/2,a=tS(l,r,s)-n,a>0?t=l:e=l;while(Math.abs(a)>ZM&&++f<e4);return l}function yu(n,e,t,r){if(n===e&&t===r)return Qn;const s=a=>t4(a,0,1,n,t);return a=>a===0||a===1?a:tS(s(a),e,r)}const nS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,rS=n=>e=>1-n(1-e),iS=yu(.33,1.53,.69,.99),Hy=rS(iS),sS=nS(Hy),oS=n=>(n*=2)<1?.5*Hy(n):.5*(2-Math.pow(2,-10*(n-1))),Ky=n=>1-Math.sin(Math.acos(n)),aS=rS(Ky),lS=nS(Ky),n4=yu(.42,0,1,1),r4=yu(0,0,.58,1),cS=yu(.42,0,.58,1),i4=n=>Array.isArray(n)&&typeof n[0]!="number",uS=n=>Array.isArray(n)&&typeof n[0]=="number",s4={linear:Qn,easeIn:n4,easeInOut:cS,easeOut:r4,circIn:Ky,circInOut:lS,circOut:aS,backIn:Hy,backInOut:sS,backOut:iS,anticipate:oS},o4=n=>typeof n=="string",_w=n=>{if(uS(n)){Uy(n.length===4);const[e,t,r,s]=n;return yu(e,t,r,s)}else if(o4(n))return s4[n];return n},Hd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function a4(n,e){let t=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,v=!1,_=!1)=>{const k=_&&s?t:r;return v&&l.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(f=g,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,m.process(g))}};return m}const l4=40;function dS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Hd.reduce((P,G)=>(P[G]=a4(a),P),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:v,preRender:_,render:T,postRender:k}=l,C=()=>{const P=bi.useManualTiming?s.timestamp:performance.now();t=!1,bi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(P-s.timestamp,l4),1)),s.timestamp=P,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),v.process(s),_.process(s),T.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(C))},I=()=>{t=!0,r=!0,s.isProcessing||n(C)};return{schedule:Hd.reduce((P,G)=>{const $=l[G];return P[G]=(H,A=!1,b=!1)=>(t||I(),$.schedule(H,A,b)),P},{}),cancel:P=>{for(let G=0;G<Hd.length;G++)l[Hd[G]].cancel(P)},state:s,steps:l}}const{schedule:st,cancel:As,state:Kt,steps:om}=dS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qn,!0);let oh;function c4(){oh=void 0}const hn={now:()=>(oh===void 0&&hn.set(Kt.isProcessing||bi.useManualTiming?Kt.timestamp:performance.now()),oh),set:n=>{oh=n,queueMicrotask(c4)}},hS=n=>e=>typeof e=="string"&&e.startsWith(n),fS=hS("--"),u4=hS("var(--"),qy=n=>u4(n)?d4.test(n.split("/*")[0].trim()):!1,d4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ew(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const ml={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Yc={...ml,transform:n=>qr(0,1,n)},Kd={...ml,default:1},jc=n=>Math.round(n*1e5)/1e5,Gy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h4(n){return n==null}const f4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qy=(n,e)=>t=>!!(typeof t=="string"&&f4.test(t)&&t.startsWith(n)||e&&!h4(t)&&Object.prototype.hasOwnProperty.call(t,e)),pS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,l,f]=r.match(Gy);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(l),alpha:f!==void 0?parseFloat(f):1}},p4=n=>qr(0,255,n),am={...ml,transform:n=>Math.round(p4(n))},go={test:Qy("rgb","red"),parse:pS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+am.transform(n)+", "+am.transform(e)+", "+am.transform(t)+", "+jc(Yc.transform(r))+")"};function m4(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rg={test:Qy("#"),parse:m4,transform:go.transform},vu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ls=vu("deg"),Wr=vu("%"),he=vu("px"),g4=vu("vh"),y4=vu("vw"),kw={...Wr,parse:n=>Wr.parse(n)/100,transform:n=>Wr.transform(n*100)},Ia={test:Qy("hsl","hue"),parse:pS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Wr.transform(jc(e))+", "+Wr.transform(jc(t))+", "+jc(Yc.transform(r))+")"},It={test:n=>go.test(n)||rg.test(n)||Ia.test(n),parse:n=>go.test(n)?go.parse(n):Ia.test(n)?Ia.parse(n):rg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?go.transform(n):Ia.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},v4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x4(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Gy))==null?void 0:e.length)||0)+(((t=n.match(v4))==null?void 0:t.length)||0)>0}const mS="number",gS="color",w4="var",_4="var(",Tw="${}",E4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(E4,d=>(It.test(d)?(r.color.push(a),s.push(gS),t.push(It.parse(d))):d.startsWith(_4)?(r.var.push(a),s.push(w4),t.push(d)):(r.number.push(a),s.push(mS),t.push(parseFloat(d))),++a,Tw)).split(Tw);return{values:t,split:f,indexes:r,types:s}}function yS(n){return Xc(n).values}function vS(n){const{split:e,types:t}=Xc(n),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const f=t[l];f===mS?a+=jc(s[l]):f===gS?a+=It.transform(s[l]):a+=s[l]}return a}}const k4=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function T4(n){const e=yS(n);return vS(n)(e.map(k4))}const Rs={test:x4,parse:yS,createTransformer:vS,getAnimatableNone:T4};function lm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function S4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,l=0;if(!e)s=a=l=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=lm(d,f,n+1/3),a=lm(d,f,n),l=lm(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Ph(n,e){return t=>t>0?e:n}const ut=(n,e,t)=>n+(e-n)*t,cm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},b4=[rg,go,Ia],I4=n=>b4.find(e=>e.test(n));function Sw(n){const e=I4(n);if(!e)return!1;let t=e.parse(n);return e===Ia&&(t=S4(t)),t}const bw=(n,e)=>{const t=Sw(n),r=Sw(e);if(!t||!r)return Ph(n,e);const s={...t};return a=>(s.red=cm(t.red,r.red,a),s.green=cm(t.green,r.green,a),s.blue=cm(t.blue,r.blue,a),s.alpha=ut(t.alpha,r.alpha,a),go.transform(s))},ig=new Set(["none","hidden"]);function C4(n,e){return ig.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function A4(n,e){return t=>ut(n,e,t)}function Yy(n){return typeof n=="number"?A4:typeof n=="string"?qy(n)?Ph:It.test(n)?bw:j4:Array.isArray(n)?xS:typeof n=="object"?It.test(n)?bw:R4:Ph}function xS(n,e){const t=[...n],r=t.length,s=n.map((a,l)=>Yy(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=s[l](a);return t}}function R4(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Yy(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function P4(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=n.indexes[a][r[a]],f=n.values[l]??0;t[s]=f,r[a]++}return t}const j4=(n,e)=>{const t=Rs.createTransformer(e),r=Xc(n),s=Xc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ig.has(n)&&!s.values.length||ig.has(e)&&!r.values.length?C4(n,e):gu(xS(P4(r,s),s.values),t):Ph(n,e)};function wS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ut(n,e,t):Yy(n)(n,e)}const N4=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>st.update(e,t),stop:()=>As(e),now:()=>Kt.isProcessing?Kt.timestamp:hn.now()}},_S=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jh=2e4;function Xy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<jh;)e+=t,r=n.next(e);return e>=jh?1/0:e}function D4(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(Xy(r),jh);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Gn(s)}}const V4=5;function ES(n,e,t){const r=Math.max(e-V4,0);return eS(t-n(r),e-r)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},um=.001;function M4({duration:n=mt.duration,bounce:e=mt.bounce,velocity:t=mt.velocity,mass:r=mt.mass}){let s,a,l=1-e;l=qr(mt.minDamping,mt.maxDamping,l),n=qr(mt.minDuration,mt.maxDuration,Gn(n)),l<1?(s=m=>{const g=m*l,v=g*n,_=g-t,T=sg(m,l),k=Math.exp(-v);return um-_/T*k},a=m=>{const v=m*l*n,_=v*t+t,T=Math.pow(l,2)*Math.pow(m,2)*n,k=Math.exp(-v),C=sg(Math.pow(m,2),l);return(-s(m)+um>0?-1:1)*((_-T)*k)/C}):(s=m=>{const g=Math.exp(-m*n),v=(m-t)*n+1;return-um+g*v},a=m=>{const g=Math.exp(-m*n),v=(t-m)*(n*n);return g*v});const f=5/n,d=O4(s,a,f);if(n=xi(n),isNaN(d))return{stiffness:mt.stiffness,damping:mt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:n}}}const L4=12;function O4(n,e,t){let r=t;for(let s=1;s<L4;s++)r=r-n(r)/e(r);return r}function sg(n,e){return n*Math.sqrt(1-e*e)}const B4=["duration","bounce"],F4=["stiffness","damping","mass"];function Iw(n,e){return e.some(t=>n[t]!==void 0)}function z4(n){let e={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...n};if(!Iw(n,F4)&&Iw(n,B4))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*qr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:mt.mass,stiffness:s,damping:a}}else{const t=M4(n);e={...e,...t,mass:mt.mass},e.isResolvedFromDuration=!0}return e}function Nh(n=mt.visualDuration,e=mt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:m,mass:g,duration:v,velocity:_,isResolvedFromDuration:T}=z4({...t,velocity:-Gn(t.velocity||0)}),k=_||0,C=m/(2*Math.sqrt(d*g)),I=l-a,V=Gn(Math.sqrt(d/g)),B=Math.abs(I)<5;r||(r=B?mt.restSpeed.granular:mt.restSpeed.default),s||(s=B?mt.restDelta.granular:mt.restDelta.default);let P;if(C<1){const $=sg(V,C);P=H=>{const A=Math.exp(-C*V*H);return l-A*((k+C*V*I)/$*Math.sin($*H)+I*Math.cos($*H))}}else if(C===1)P=$=>l-Math.exp(-V*$)*(I+(k+V*I)*$);else{const $=V*Math.sqrt(C*C-1);P=H=>{const A=Math.exp(-C*V*H),b=Math.min($*H,300);return l-A*((k+C*V*I)*Math.sinh(b)+$*I*Math.cosh(b))/$}}const G={calculatedDuration:T&&v||null,next:$=>{const H=P($);if(T)f.done=$>=v;else{let A=$===0?k:0;C<1&&(A=$===0?xi(k):ES(P,$,H));const b=Math.abs(A)<=r,j=Math.abs(l-H)<=s;f.done=b&&j}return f.value=f.done?l:H,f},toString:()=>{const $=Math.min(Xy(G),jh),H=_S(A=>G.next($*A).value,$,30);return $+"ms "+H},toTransition:()=>{}};return G}Nh.applyToOptions=n=>{const e=D4(n,100,Nh);return n.ease=e.ease,n.duration=xi(e.duration),n.type="keyframes",n};function og({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:f,max:d,restDelta:m=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},T=b=>f!==void 0&&b<f||d!==void 0&&b>d,k=b=>f===void 0?d:d===void 0||Math.abs(f-b)<Math.abs(d-b)?f:d;let C=t*e;const I=v+C,V=l===void 0?I:l(I);V!==I&&(C=V-v);const B=b=>-C*Math.exp(-b/r),P=b=>V+B(b),G=b=>{const j=B(b),L=P(b);_.done=Math.abs(j)<=m,_.value=_.done?V:L};let $,H;const A=b=>{T(_.value)&&($=b,H=Nh({keyframes:[_.value,k(_.value)],velocity:ES(P,b,_.value),damping:s,stiffness:a,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:b=>{let j=!1;return!H&&$===void 0&&(j=!0,G(b),A(b)),$!==void 0&&b>=$?H.next(b-$):(!j&&G(b),_)}}}function U4(n,e,t){const r=[],s=t||bi.mix||wS,a=n.length-1;for(let l=0;l<a;l++){let f=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Qn:e;f=gu(d,f)}r.push(f)}return r}function $4(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(Uy(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=U4(e,r,s),d=f.length,m=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=Qc(n[v],n[v+1],g);return f[v](_)};return t?g=>m(qr(n[0],n[a-1],g)):m}function W4(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Qc(0,e,r);n.push(ut(t,1,s))}}function H4(n){const e=[0];return W4(e,n.length-1),e}function K4(n,e){return n.map(t=>t*e)}function q4(n,e){return n.map(()=>e||cS).splice(0,n.length-1)}function Nc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=i4(r)?r.map(_w):_w(r),a={done:!1,value:e[0]},l=K4(t&&t.length===e.length?t:H4(e),n),f=$4(l,e,{ease:Array.isArray(s)?s:q4(e,s)});return{calculatedDuration:n,next:d=>(a.value=f(d),a.done=d>=n,a)}}const G4=n=>n!==null;function Jy(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(G4),f=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!f||r===void 0?a[f]:r}const Q4={decay:og,inertia:og,tween:Nc,keyframes:Nc,spring:Nh};function kS(n){typeof n.type=="string"&&(n.type=Q4[n.type])}class Zy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Y4=n=>n/100;class e0 extends Zy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==hn.now()&&this.tick(hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;kS(e);const{type:t=Nc,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:f}=e;const d=t||Nc;d!==Nc&&typeof f[0]!="number"&&(this.mixKeyframes=gu(Y4,wS(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=Xy(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:T,type:k,onUpdate:C,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const V=this.currentTime-m*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?V<0:V>s;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,G=r;if(v){const b=Math.min(this.currentTime,s)/f;let j=Math.floor(b),L=b%1;!L&&b>=1&&(L=1),L===1&&j--,j=Math.min(j,v+1),!!(j%2)&&(_==="reverse"?(L=1-L,T&&(L-=T/f)):_==="mirror"&&(G=l)),P=qr(0,1,L)*f}const $=B?{done:!1,value:g[0]}:G.next(P);a&&($.value=a($.value));let{done:H}=$;!B&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return A&&k!==og&&($.value=Jy(g,this.options,I,this.speed)),C&&C($.value),A&&this.finish(),$}then(e,t){return this.finished.then(e,t)}get duration(){return Gn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gn(e)}get time(){return Gn(this.currentTime)}set time(e){var t;e=xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Gn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=N4,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function X4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const yo=n=>n*180/Math.PI,ag=n=>{const e=yo(Math.atan2(n[1],n[0]));return lg(e)},J4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ag,rotateZ:ag,skewX:n=>yo(Math.atan(n[1])),skewY:n=>yo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},lg=n=>(n=n%360,n<0&&(n+=360),n),Cw=ag,Aw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Rw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Z4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Aw,scaleY:Rw,scale:n=>(Aw(n)+Rw(n))/2,rotateX:n=>lg(yo(Math.atan2(n[6],n[5]))),rotateY:n=>lg(yo(Math.atan2(-n[2],n[0]))),rotateZ:Cw,rotate:Cw,skewX:n=>yo(Math.atan(n[4])),skewY:n=>yo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function cg(n){return n.includes("scale")?1:0}function ug(n,e){if(!n||n==="none")return cg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=Z4,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=J4,s=f}if(!s)return cg(e);const a=r[e],l=s[1].split(",").map(tL);return typeof a=="function"?a(l):l[a]}const eL=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return ug(t,e)};function tL(n){return parseFloat(n.trim())}const gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(gl),Pw=n=>n===ml||n===he,nL=new Set(["x","y","z"]),rL=gl.filter(n=>!nL.has(n));function iL(n){const e=[];return rL.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const fs={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>ug(e,"x"),y:(n,{transform:e})=>ug(e,"y")};fs.translateX=fs.x;fs.translateY=fs.y;const wo=new Set;let dg=!1,hg=!1,fg=!1;function TS(){if(hg){const n=Array.from(wo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=iL(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,l])=>{var f;(f=r.getValue(a))==null||f.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}hg=!1,dg=!1,wo.forEach(n=>n.complete(fg)),wo.clear()}function SS(){wo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(hg=!0)})}function sL(){fg=!0,SS(),TS(),fg=!1}class t0{constructor(e,t,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),dg||(dg=!0,st.read(SS),st.resolveKeyframes(TS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const f=r.readValue(t,l);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}X4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oL=n=>n.startsWith("--");function aL(n,e,t){oL(e)?n.style.setProperty(e,t):n.style[e]=t}const lL=$y(()=>window.ScrollTimeline!==void 0),cL={};function uL(n,e){const t=$y(n);return()=>cL[e]??t()}const bS=uL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,jw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kc([0,.65,.55,1]),circOut:kc([.55,0,1,.45]),backIn:kc([.31,.01,.66,-.59]),backOut:kc([.33,1.53,.69,.99])};function IS(n,e){if(n)return typeof n=="function"?bS()?_S(n,e):"ease-out":uS(n)?kc(n):Array.isArray(n)?n.map(t=>IS(t,e)||jw.easeOut):jw[n]}function dL(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const v=IS(f,s);Array.isArray(v)&&(g.easing=v);const _={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return m&&(_.pseudoElement=m),n.animate(g,_)}function CS(n){return typeof n=="function"&&"applyToOptions"in n}function hL({type:n,...e}){return CS(n)&&bS()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fL extends Zy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Uy(typeof e.type!="string");const m=hL(e);this.animation=dL(t,r,s,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Jy(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):aL(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Gn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gn(e)}get time(){return Gn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&lL()?(this.animation.timeline=e,Qn):t(this)}}const AS={anticipate:oS,backInOut:sS,circInOut:lS};function pL(n){return n in AS}function mL(n){typeof n.ease=="string"&&pL(n.ease)&&(n.ease=AS[n.ease])}const dm=10;class gL extends fL{constructor(e){mL(e),kS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new e0({...l,autoplay:!1}),d=Math.max(dm,hn.now()-this.startTime),m=qr(0,dm,d-dm);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const Nw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Rs.test(n)||n==="0")&&!n.startsWith("url("));function yL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function vL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=Nw(s,e),f=Nw(a,e);return!l||!f?!1:yL(n)||(t==="spring"||CS(t))&&r}function pg(n){n.duration=0,n.type="keyframes"}const xL=new Set(["opacity","clipPath","filter","transform"]),wL=$y(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _L(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:l}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return wL()&&t&&xL.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const EL=40;class kL extends Zy{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:f,name:d,motionValue:m,element:g,...v}){var k;super(),this.stop=()=>{var C,I;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=hn.now();const _={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:m,element:g,...v},T=(g==null?void 0:g.KeyframeResolver)||t0;this.keyframeResolver=new T(f,(C,I,V)=>this.onKeyframesResolved(C,I,_,!V),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var I,V;this.keyframeResolver=void 0;const{name:a,type:l,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=hn.now(),vL(e,a,l,f)||((bi.instantAnimations||!d)&&(g==null||g(Jy(e,r,t))),e[0]=e[e.length-1],pg(r),r.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>EL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},T=!m&&_L(_),k=(V=(I=_.motionValue)==null?void 0:I.owner)==null?void 0:V.current,C=T?new gL({..._,element:k}):new e0(_);C.finished.then(()=>{this.notifyFinished()}).catch(Qn),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),sL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function RS(n,e,t,r=0,s=1){const a=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),l=n.size,f=(l-1)*r;return typeof t=="function"?t(a,l):s===1?a*r:f-a*r}const TL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SL(n){const e=TL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function PS(n,e,t=1){const[r,s]=SL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return XT(l)?parseFloat(l):l}return qy(s)?PS(s,e,t+1):s}const bL={type:"spring",stiffness:500,damping:25,restSpeed:10},IL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),CL={type:"keyframes",duration:.8},AL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RL=(n,{keyframes:e})=>e.length>2?CL:yl.has(n)?n.startsWith("scale")?IL(e[1]):bL:AL,PL=n=>n!==null;function jL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(PL),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function n0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function NL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const r0=(n,e,t,r={},s,a)=>l=>{const f=n0(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-xi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:_=>{e.set(_),f.onUpdate&&f.onUpdate(_)},onComplete:()=>{l(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:a?void 0:s};NL(f)||Object.assign(g,RL(n,g)),g.duration&&(g.duration=xi(g.duration)),g.repeatDelay&&(g.repeatDelay=xi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(pg(g),g.delay===0&&(v=!0)),(bi.instantAnimations||bi.skipAnimations)&&(v=!0,pg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,v&&!a&&e.get()!==void 0){const _=jL(g.keyframes,f);if(_!==void 0){st.update(()=>{g.onUpdate(_),g.onComplete()});return}}return f.isSync?new e0(g):new kL(g)};function Dw(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function i0(n,e,t,r){if(typeof e=="function"){const[s,a]=Dw(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=Dw(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function Ba(n,e,t){const r=n.getProps();return i0(r,e,t!==void 0?t:r.custom,n)}const jS=new Set(["width","height","top","left","right","bottom",...gl]),Vw=30,DL=n=>!isNaN(parseFloat(n));class VL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=hn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=DL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Wy);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Vw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Vw);return eS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ja(n,e){return new VL(n,e)}const mg=n=>Array.isArray(n);function ML(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ja(t))}function LL(n){return mg(n)?n[n.length-1]||0:n}function OL(n,e){const t=Ba(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const l in a){const f=LL(a[l]);ML(n,l,f)}}const an=n=>!!(n&&n.getVelocity);function BL(n){return!!(an(n)&&n.add)}function gg(n,e){const t=n.getValue("willChange");if(BL(t))return t.add(e);if(!t&&bi.WillChange){const r=new bi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function s0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const FL="framerAppearId",NS="data-"+s0(FL);function DS(n){return n.props[NS]}function zL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function VS(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...f}=e;r&&(a=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const v=n.getValue(g,n.latestValues[g]??null),_=f[g];if(_===void 0||m&&zL(m,g))continue;const T={delay:t,...n0(a||{},g)},k=v.get();if(k!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===k&&!T.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const V=DS(n);if(V){const B=window.MotionHandoffAnimation(V,g,st);B!==null&&(T.startTime=B,C=!0)}}gg(n,g),v.start(r0(g,v,_,n.shouldReduceMotion&&jS.has(g)?{type:!1}:T,n,C));const I=v.animation;I&&d.push(I)}return l&&Promise.all(d).then(()=>{st.update(()=>{l&&OL(n,l)})}),d}function yg(n,e,t={}){var d;const r=Ba(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(VS(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:_}=s;return UL(n,e,m,g,v,_,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(t.delay)])}function UL(n,e,t=0,r=0,s=0,a=1,l){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(yg(d,e,{...l,delay:t+(typeof r=="function"?0:r)+RS(n.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function $L(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>yg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=yg(n,e,t);else{const s=typeof e=="function"?Ba(n,e,t.custom):e;r=Promise.all(VS(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const WL={test:n=>n==="auto",parse:n=>n},MS=n=>e=>e.test(n),LS=[ml,he,Wr,ls,y4,g4,WL],Mw=n=>LS.find(MS(n));function HL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ZT(n):!0}const KL=new Set(["brightness","contrast","saturate","opacity"]);function qL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Gy)||[];if(!r)return n;const s=t.replace(r,"");let a=KL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const GL=/\b([a-z-]*)\(.*?\)/gu,vg={...Rs,getAnimatableNone:n=>{const e=n.match(GL);return e?e.map(qL).join(" "):n}},Lw={...ml,transform:Math.round},QL={rotate:ls,rotateX:ls,rotateY:ls,rotateZ:ls,scale:Kd,scaleX:Kd,scaleY:Kd,scaleZ:Kd,skew:ls,skewX:ls,skewY:ls,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Yc,originX:kw,originY:kw,originZ:he},o0={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,top:he,right:he,bottom:he,left:he,inset:he,insetBlock:he,insetBlockStart:he,insetBlockEnd:he,insetInline:he,insetInlineStart:he,insetInlineEnd:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,paddingBlock:he,paddingBlockStart:he,paddingBlockEnd:he,paddingInline:he,paddingInlineStart:he,paddingInlineEnd:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,marginBlock:he,marginBlockStart:he,marginBlockEnd:he,marginInline:he,marginInlineStart:he,marginInlineEnd:he,backgroundPositionX:he,backgroundPositionY:he,...QL,zIndex:Lw,fillOpacity:Yc,strokeOpacity:Yc,numOctaves:Lw},YL={...o0,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:vg,WebkitFilter:vg},OS=n=>YL[n];function BS(n,e){let t=OS(n);return t!==vg&&(t=Rs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const XL=new Set(["auto","none","0"]);function JL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!XL.has(a)&&Xc(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=BS(t,s)}class ZL extends t0{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let v=e[g];if(typeof v=="string"&&(v=v.trim(),qy(v))){const _=PS(v,t.current);_!==void 0&&(e[g]=_),g===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!jS.has(r)||e.length!==2)return;const[s,a]=e,l=Mw(s),f=Mw(a),d=Ew(s),m=Ew(a);if(d!==m&&fs[r]){this.needsMeasurement=!0;return}if(l!==f)if(Pw(l)&&Pw(f))for(let g=0;g<e.length;g++){const v=e[g];typeof v=="string"&&(e[g]=parseFloat(v))}else fs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||HL(e[s]))&&r.push(s);r.length&&JL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=fs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function e3(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const FS=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function t3(n){return JT(n)&&"offsetHeight"in n}const{schedule:a0}=dS(queueMicrotask,!1),hr={x:!1,y:!1};function zS(){return hr.x||hr.y}function n3(n){return n==="x"||n==="y"?hr[n]?null:(hr[n]=!0,()=>{hr[n]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}function US(n,e){const t=e3(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function Ow(n){return!(n.pointerType==="touch"||zS())}function r3(n,e,t={}){const[r,s,a]=US(n,t),l=f=>{if(!Ow(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=v=>{Ow(v)&&(m(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",l,s)}),a}const $S=(n,e)=>e?n===e?!0:$S(n,e.parentElement):!1,l0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,i3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WS(n){return i3.has(n.tagName)||n.isContentEditable===!0}const ah=new WeakSet;function Bw(n){return e=>{e.key==="Enter"&&n(e)}}function hm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const s3=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Bw(()=>{if(ah.has(t))return;hm(t,"down");const s=Bw(()=>{hm(t,"up")}),a=()=>hm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Fw(n){return l0(n)&&!zS()}function o3(n,e,t={}){const[r,s,a]=US(n,t),l=f=>{const d=f.currentTarget;if(!Fw(f))return;ah.add(d);const m=e(d,f),g=(T,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),ah.has(d)&&ah.delete(d),Fw(T)&&typeof m=="function"&&m(T,{success:k})},v=T=>{g(T,d===window||d===document||t.useGlobalTarget||$S(d,T.target))},_=T=>{g(T,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",l,s),t3(f)&&(f.addEventListener("focus",m=>s3(m,s)),!WS(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),a}function HS(n){return JT(n)&&"ownerSVGElement"in n}function a3(n){return HS(n)&&n.tagName==="svg"}const l3=[...LS,It,Rs],c3=n=>l3.find(MS(n)),zw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ca=()=>({x:zw(),y:zw()}),Uw=()=>({min:0,max:0}),jt=()=>({x:Uw(),y:Uw()}),xg={current:null},KS={current:!1},u3=typeof window<"u";function d3(){if(KS.current=!0,!!u3)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>xg.current=n.matches;n.addEventListener("change",e),e()}else xg.current=!1}const h3=new WeakMap;function pf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Jc(n){return typeof n=="string"||Array.isArray(n)}const c0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],u0=["initial",...c0];function mf(n){return pf(n.animate)||u0.some(e=>Jc(n[e]))}function qS(n){return!!(mf(n)||n.variants)}function f3(n,e,t){for(const r in e){const s=e[r],a=t[r];if(an(s))n.addValue(r,s);else if(an(a))n.addValue(r,Ja(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,Ja(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const $w=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Dh={};function GS(n){Dh=n}function p3(){return Dh}class m3{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=hn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,st.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=mf(t),this.isVariantNode=qS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const T=v[_];d[_]!==void 0&&an(T)&&T.set(d[_])}}mount(e){var t;this.current=e,h3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(KS.current||d3(),this.shouldReduceMotion=xg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),As(this.notifyUpdate),As(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=yl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Dh){const t=Dh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<$w.length;r++){const s=$w[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=f3(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ja(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XT(r)||ZT(r))?r=parseFloat(r):!c3(r)&&Rs.test(t)&&(r=BS(e,t)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=i0(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!an(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Wy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){a0.render(this.render)}}class QS extends m3{constructor(){super(...arguments),this.KeyframeResolver=ZL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ms{constructor(e){this.isMounted=!1,this.node=e}update(){}}function YS({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function g3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function y3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function fm(n){return n===void 0||n===1}function wg({scale:n,scaleX:e,scaleY:t}){return!fm(n)||!fm(e)||!fm(t)}function fo(n){return wg(n)||XS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function XS(n){return Ww(n.x)||Ww(n.y)}function Ww(n){return n&&n!=="0%"}function Vh(n,e,t){const r=n-t,s=e*r;return t+s}function Hw(n,e,t,r,s){return s!==void 0&&(n=Vh(n,s,r)),Vh(n,t,r)+e}function _g(n,e=0,t=1,r,s){n.min=Hw(n.min,e,t,r,s),n.max=Hw(n.max,e,t,r,s)}function JS(n,{x:e,y:t}){_g(n.x,e.translate,e.scale,e.originPoint),_g(n.y,t.translate,t.scale,t.originPoint)}const Kw=.999999999999,qw=1.0000000000001;function v3(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,l;for(let f=0;f<s;f++){a=t[f],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ra(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,JS(n,l)),r&&fo(a.latestValues)&&Ra(n,a.latestValues))}e.x<qw&&e.x>Kw&&(e.x=1),e.y<qw&&e.y>Kw&&(e.y=1)}function Aa(n,e){n.min=n.min+e,n.max=n.max+e}function Gw(n,e,t,r,s=.5){const a=ut(n.min,n.max,s);_g(n,e,t,a,r)}function Ra(n,e){Gw(n.x,e.x,e.scaleX,e.scale,e.originX),Gw(n.y,e.y,e.scaleY,e.scale,e.originY)}function ZS(n,e){return YS(y3(n.getBoundingClientRect(),e))}function x3(n,e,t){const r=ZS(n,t),{scroll:s}=e;return s&&(Aa(r.x,s.offset.x),Aa(r.y,s.offset.y)),r}const w3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_3=gl.length;function E3(n,e,t){let r="",s=!0;for(let a=0;a<_3;a++){const l=gl[a],f=n[l];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(l.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=FS(f,o0[l]);if(!d){s=!1;const g=w3[l]||l;r+=`${g}(${m}) `}t&&(e[l]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function d0(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let l=!1,f=!1;for(const d in e){const m=e[d];if(yl.has(d)){l=!0;continue}else if(fS(d)){s[d]=m;continue}else{const g=FS(m,o0[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=E3(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${m} ${g}`}}function eb(n,{style:e,vars:t},r,s){const a=n.style;let l;for(l in e)a[l]=e[l];s==null||s.applyProjectionStyles(a,r);for(l in t)a.setProperty(l,t[l])}function Qw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const mc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(he.test(n))n=parseFloat(n);else return n;const t=Qw(n,e.target.x),r=Qw(n,e.target.y);return`${t}% ${r}%`}},k3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Rs.parse(n);if(s.length>5)return r;const a=Rs.createTransformer(n),l=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=f,s[1+l]/=d;const m=ut(f,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=m),typeof s[3+l]=="number"&&(s[3+l]/=m),a(s)}},Eg={borderRadius:{...mc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mc,borderTopRightRadius:mc,borderBottomLeftRadius:mc,borderBottomRightRadius:mc,boxShadow:k3};function tb(n,{layout:e,layoutId:t}){return yl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Eg[n]||n==="opacity")}function h0(n,e,t){var l;const r=n.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const f in r)(an(r[f])||s&&an(s[f])||tb(f,n)||((l=t==null?void 0:t.getValue(f))==null?void 0:l.liveStyle)!==void 0)&&(a[f]=r[f]);return a}function T3(n){return window.getComputedStyle(n)}class S3 extends QS{constructor(){super(...arguments),this.type="html",this.renderInstance=eb}readValueFromInstance(e,t){var r;if(yl.has(t))return(r=this.projection)!=null&&r.isProjecting?cg(t):eL(e,t);{const s=T3(e),a=(fS(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ZS(e,t)}build(e,t,r){d0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return h0(e,t,r)}}const b3={offset:"stroke-dashoffset",array:"stroke-dasharray"},I3={offset:"strokeDashoffset",array:"strokeDasharray"};function C3(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?b3:I3;n[a.offset]=he.transform(-r);const l=he.transform(e),f=he.transform(t);n[a.array]=`${l} ${f}`}const A3=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function nb(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...f},d,m,g){if(d0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete v.transformBox);for(const T of A3)v[T]!==void 0&&(_[T]=v[T],delete v[T]);e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),s!==void 0&&C3(v,s,a,l,!1)}const rb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ib=n=>typeof n=="string"&&n.toLowerCase()==="svg";function R3(n,e,t,r){eb(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(rb.has(s)?s:s0(s),e.attrs[s])}function sb(n,e,t){const r=h0(n,e,t);for(const s in n)if(an(n[s])||an(e[s])){const a=gl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}class P3 extends QS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(yl.has(t)){const r=OS(t);return r&&r.default||0}return t=rb.has(t)?t:s0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return sb(e,t,r)}build(e,t,r){nb(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){R3(e,t,r,s)}mount(e){this.isSVGTag=ib(e.tagName),super.mount(e)}}const j3=u0.length;function ob(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ob(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<j3;t++){const r=u0[t],s=n.props[r];(Jc(s)||s===!1)&&(e[r]=s)}return e}function ab(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const N3=[...c0].reverse(),D3=c0.length;function V3(n){return e=>Promise.all(e.map(({animation:t,options:r})=>$L(n,t,r)))}function M3(n){let e=V3(n),t=Yw(),r=!0;const s=d=>(m,g)=>{var _;const v=Ba(n,g,d==="exit"?(_=n.presenceContext)==null?void 0:_.custom:void 0);if(v){const{transition:T,transitionEnd:k,...C}=v;m={...m,...C,...k}}return m};function a(d){e=d(n)}function l(d){const{props:m}=n,g=ob(n.parent)||{},v=[],_=new Set;let T={},k=1/0;for(let I=0;I<D3;I++){const V=N3[I],B=t[V],P=m[V]!==void 0?m[V]:g[V],G=Jc(P),$=V===d?B.isActive:null;$===!1&&(k=I);let H=P===g[V]&&P!==m[V]&&G;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),B.protectedKeys={...T},!B.isActive&&$===null||!P&&!B.prevProp||pf(P)||typeof P=="boolean")continue;const A=L3(B.prevProp,P);let b=A||V===d&&B.isActive&&!H&&G||I>k&&G,j=!1;const L=Array.isArray(P)?P:[P];let O=L.reduce(s(V),{});$===!1&&(O={});const{prevResolvedValues:W={}}=B,M={...W,...O},Ne=Se=>{b=!0,_.has(Se)&&(j=!0,_.delete(Se)),B.needsAnimating[Se]=!0;const ie=n.getValue(Se);ie&&(ie.liveStyle=!1)};for(const Se in M){const ie=O[Se],pe=W[Se];if(T.hasOwnProperty(Se))continue;let ae=!1;mg(ie)&&mg(pe)?ae=!ab(ie,pe):ae=ie!==pe,ae?ie!=null?Ne(Se):_.add(Se):ie!==void 0&&_.has(Se)?Ne(Se):B.protectedKeys[Se]=!0}B.prevProp=P,B.prevResolvedValues=O,B.isActive&&(T={...T,...O}),r&&n.blockInitialAnimation&&(b=!1);const He=H&&A;b&&(!He||j)&&v.push(...L.map(Se=>{const ie={type:V};if(typeof Se=="string"&&r&&!He&&n.manuallyAnimateOnMount&&n.parent){const{parent:pe}=n,ae=Ba(pe,Se);if(pe.enteringChildren&&ae){const{delayChildren:U}=ae.transition||{};ie.delay=RS(pe.enteringChildren,n,U)}}return{animation:Se,options:ie}}))}if(_.size){const I={};if(typeof m.initial!="boolean"){const V=Ba(n,Array.isArray(m.initial)?m.initial[0]:m.initial);V&&V.transition&&(I.transition=V.transition)}_.forEach(V=>{const B=n.getBaseTarget(V),P=n.getValue(V);P&&(P.liveStyle=!0),I[V]=B??null}),v.push({animation:I})}let C=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function f(d,m){var v;if(t[d].isActive===m)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(_=>{var T;return(T=_.animationState)==null?void 0:T.setActive(d,m)}),t[d].isActive=m;const g=l(d);for(const _ in t)t[_].protectedKeys={};return g}return{animateChanges:l,setActive:f,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Yw()}}}function L3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ab(e,n):!1}function uo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yw(){return{animate:uo(!0),whileInView:uo(),whileHover:uo(),whileTap:uo(),whileDrag:uo(),whileFocus:uo(),exit:uo()}}function Xw(n,e){n.min=e.min,n.max=e.max}function dr(n,e){Xw(n.x,e.x),Xw(n.y,e.y)}function Jw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const lb=1e-4,O3=1-lb,B3=1+lb,cb=.01,F3=0-cb,z3=0+cb;function fn(n){return n.max-n.min}function U3(n,e,t){return Math.abs(n-e)<=t}function Zw(n,e,t,r=.5){n.origin=r,n.originPoint=ut(e.min,e.max,n.origin),n.scale=fn(t)/fn(e),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(n.scale>=O3&&n.scale<=B3||isNaN(n.scale))&&(n.scale=1),(n.translate>=F3&&n.translate<=z3||isNaN(n.translate))&&(n.translate=0)}function Dc(n,e,t,r){Zw(n.x,e.x,t.x,r?r.originX:void 0),Zw(n.y,e.y,t.y,r?r.originY:void 0)}function e_(n,e,t){n.min=t.min+e.min,n.max=n.min+fn(e)}function $3(n,e,t){e_(n.x,e.x,t.x),e_(n.y,e.y,t.y)}function t_(n,e,t){n.min=e.min-t.min,n.max=n.min+fn(e)}function Mh(n,e,t){t_(n.x,e.x,t.x),t_(n.y,e.y,t.y)}function n_(n,e,t,r,s){return n-=e,n=Vh(n,1/t,r),s!==void 0&&(n=Vh(n,1/s,r)),n}function W3(n,e=0,t=1,r=.5,s,a=n,l=n){if(Wr.test(e)&&(e=parseFloat(e),e=ut(l.min,l.max,e/100)-l.min),typeof e!="number")return;let f=ut(a.min,a.max,r);n===a&&(f-=e),n.min=n_(n.min,e,t,f,s),n.max=n_(n.max,e,t,f,s)}function r_(n,e,[t,r,s],a,l){W3(n,e[t],e[r],e[s],e.scale,a,l)}const H3=["x","scaleX","originX"],K3=["y","scaleY","originY"];function i_(n,e,t,r){r_(n.x,e,H3,t?t.x:void 0,r?r.x:void 0),r_(n.y,e,K3,t?t.y:void 0,r?r.y:void 0)}function s_(n){return n.translate===0&&n.scale===1}function ub(n){return s_(n.x)&&s_(n.y)}function o_(n,e){return n.min===e.min&&n.max===e.max}function q3(n,e){return o_(n.x,e.x)&&o_(n.y,e.y)}function a_(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function db(n,e){return a_(n.x,e.x)&&a_(n.y,e.y)}function l_(n){return fn(n.x)/fn(n.y)}function c_(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Kn(n){return[n("x"),n("y")]}function G3(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:v,rotateY:_,skewX:T,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),T&&(r+=`skewX(${T}deg) `),k&&(r+=`skewY(${k}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const hb=["TopLeft","TopRight","BottomLeft","BottomRight"],Q3=hb.length,u_=n=>typeof n=="string"?parseFloat(n):n,d_=n=>typeof n=="number"||he.test(n);function Y3(n,e,t,r,s,a){s?(n.opacity=ut(0,t.opacity??1,X3(r)),n.opacityExit=ut(e.opacity??1,0,J3(r))):a&&(n.opacity=ut(e.opacity??1,t.opacity??1,r));for(let l=0;l<Q3;l++){const f=`border${hb[l]}Radius`;let d=h_(e,f),m=h_(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||d_(d)===d_(m)?(n[f]=Math.max(ut(u_(d),u_(m),r),0),(Wr.test(m)||Wr.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,r))}function h_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const X3=fb(0,.5,aS),J3=fb(.5,.95,Qn);function fb(n,e,t){return r=>r<n?0:r>e?1:t(Qc(n,e,r))}function Z3(n,e,t){const r=an(n)?n:Ja(n);return r.start(r0("",r,e,t)),r.animation}function Zc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const eO=(n,e)=>n.depth-e.depth;class tO{constructor(){this.children=[],this.isDirty=!1}add(e){Fy(this.children,e),this.isDirty=!0}remove(e){zy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eO),this.isDirty=!1,this.children.forEach(e)}}function nO(n,e){const t=hn.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(As(r),n(a-e))};return st.setup(r,!0),()=>As(r)}function lh(n){return an(n)?n.get():n}class rO{constructor(){this.members=[]}add(e){Fy(this.members,e),e.scheduleRender()}remove(e){if(zy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ch={hasAnimatedSinceResize:!0,hasEverUpdated:!1},pm=["","X","Y","Z"],iO=1e3;let sO=0;function mm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function pb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=DS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&pb(r)}function mb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},f=e==null?void 0:e()){this.id=sO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lO),this.nodes.forEach(hO),this.nodes.forEach(fO),this.nodes.forEach(cO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new tO)}addEventListener(l,f){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Wy),this.eventHandlers.get(l).add(f)}notifyListeners(l,...f){const d=this.eventHandlers.get(l);d&&d.notify(...f)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=HS(l)&&!a3(l),this.instance=l;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;st.read(()=>{v=window.innerWidth}),n(l,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,g&&g(),g=nO(_,250),ch.hasAnimatedSinceResize&&(ch.hasAnimatedSinceResize=!1,this.nodes.forEach(m_)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||vO,{onLayoutAnimationStart:C,onLayoutAnimationComplete:I}=m.getProps(),V=!this.targetLayout||!db(this.targetLayout,T),B=!v&&_;if(this.options.layoutRoot||this.resumeFrom||B||v&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...n0(k,"layout"),onPlay:C,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,B)}else v||m_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),As(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(p_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dO),this.nodes.forEach(oO),this.nodes.forEach(aO)):this.nodes.forEach(p_),this.clearAllSnapshots();const f=hn.now();Kt.delta=qr(0,1e3/60,f-Kt.timestamp),Kt.timestamp=f,Kt.isProcessing=!0,om.update.process(Kt),om.preRender.process(Kt),om.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,a0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uO),this.sharedNodes.forEach(mO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!ub(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&this.instance&&(f||fo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return l&&(d=this.removeTransform(d)),xO(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return jt();const f=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(wO))){const{scroll:g}=this.root;g&&(Aa(f.x,g.offset.x),Aa(f.y,g.offset.y))}return f}removeElementScroll(l){var d;const f=jt();if(dr(f,l),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:_}=g;g!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&dr(f,l),Aa(f.x,v.offset.x),Aa(f.y,v.offset.y))}return f}applyTransform(l,f=!1){const d=jt();dr(d,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ra(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),fo(g.latestValues)&&Ra(d,g.latestValues)}return fo(this.latestValues)&&Ra(d,this.latestValues),d}removeTransform(l){const f=jt();dr(f,l);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!fo(m.latestValues))continue;wg(m.latestValues)&&m.updateSnapshot();const g=jt(),v=m.measurePageBox();dr(g,v),i_(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return fo(this.latestValues)&&i_(f,this.latestValues),f}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var T;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!this.layout||!(g||v))return;this.resolvedRelativeTargetAt=Kt.timestamp;const _=this.getClosestProjectingParent();_&&this.linkedParentVersion!==_.layoutVersion&&!_.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(_&&_.layout?this.createRelativeTarget(_,this.layout.layoutBox,_.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),JS(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?this.createRelativeTarget(_,this.target,_.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||wg(this.parent.latestValues)||XS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,f,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Mh(this.relativeTargetOrigin,f,d),dr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const l=this.getLead(),f=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;dr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;v3(this.layoutCorrected,this.treeScale,this.path,f),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=jt());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jw(this.prevProjectionDelta.x,this.projectionDelta.x),Jw(this.prevProjectionDelta.y,this.projectionDelta.y)),Dc(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!c_(this.projectionDelta.x,this.prevProjectionDelta.x)||!c_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ca(),this.projectionDelta=Ca(),this.projectionDeltaWithTransform=Ca()}setAnimationOrigin(l,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},v=Ca();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const _=jt(),T=d?d.source:void 0,k=this.layout?this.layout.source:void 0,C=T!==k,I=this.getStack(),V=!I||I.members.length<=1,B=!!(C&&!V&&this.options.crossfade===!0&&!this.path.some(yO));this.animationProgress=0;let P;this.mixTargetDelta=G=>{const $=G/1e3;g_(v.x,l.x,$),g_(v.y,l.y,$),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gO(this.relativeTarget,this.relativeTargetOrigin,_,$),P&&q3(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=jt()),dr(P,this.relativeTarget)),C&&(this.animationValues=g,Y3(g,m,this.latestValues,$,B,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(As(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{ch.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ja(0)),this.currentAnimation=Z3(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=l;if(!(!f||!d||!m)){if(this!==l&&this.layout&&m&&gb(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||jt();const v=fn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=fn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}dr(f,d),Ra(f,g),Dc(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(l,f){this.sharedNodes.has(l)||this.sharedNodes.set(l,new rO),this.sharedNodes.get(l).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var f;const{layoutId:l}=this.options;return l?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:l}=this.options;return l?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let f=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&mm("z",l,m,this.animationValues);for(let g=0;g<pm.length;g++)mm(`rotate${pm[g]}`,l,m,this.animationValues),mm(`skew${pm[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}applyProjectionStyles(l,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=lh(f==null?void 0:f.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=lh(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!fo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let v=G3(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:_,y:T}=this.projectionDelta;l.transformOrigin=`${_.origin*100}% ${T.origin*100}% 0`,m.animationValues?l.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Eg){if(g[k]===void 0)continue;const{correct:C,applyTo:I,isCSSVariable:V}=Eg[k],B=v==="none"?g[k]:C(g[k],m);if(I){const P=I.length;for(let G=0;G<P;G++)l[I[G]]=B}else V?this.options.visualElement.renderState.vars[k]=B:l[k]=B}this.options.layoutId&&(l.pointerEvents=m===this?lh(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var f;return(f=l.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(f_),this.root.sharedNodes.clear()}}}function oO(n){n.updateLayout()}function aO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?Kn(v=>{const _=l?e.measuredBox[v]:e.layoutBox[v],T=fn(_);_.min=r[v].min,_.max=_.min+T}):gb(a,e.layoutBox,r)&&Kn(v=>{const _=l?e.measuredBox[v]:e.layoutBox[v],T=fn(r[v]);_.max=_.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+T)});const f=Ca();Dc(f,r,e.layoutBox);const d=Ca();l?Dc(d,n.applyTransform(s,!0),e.measuredBox):Dc(d,r,e.layoutBox);const m=!ub(f);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:T}=v;if(_&&T){const k=jt();Mh(k,e.layoutBox,_.layoutBox);const C=jt();Mh(C,r,T.layoutBox),db(k,C)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=k,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function lO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function uO(n){n.clearSnapshot()}function f_(n){n.clearMeasurements()}function p_(n){n.isLayoutDirty=!1}function dO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function m_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function hO(n){n.resolveTargetDelta()}function fO(n){n.calcProjection()}function pO(n){n.resetSkewAndRotation()}function mO(n){n.removeLeadSnapshot()}function g_(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function y_(n,e,t,r){n.min=ut(e.min,t.min,r),n.max=ut(e.max,t.max,r)}function gO(n,e,t,r){y_(n.x,e.x,t.x,r),y_(n.y,e.y,t.y,r)}function yO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const vO={duration:.45,ease:[.4,0,.1,1]},v_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),x_=v_("applewebkit/")&&!v_("chrome/")?Math.round:Qn;function w_(n){n.min=x_(n.min),n.max=x_(n.max)}function xO(n){w_(n.x),w_(n.y)}function gb(n,e,t){return n==="position"||n==="preserve-aspect"&&!U3(l_(e),l_(t),.2)}function wO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const _O=mb({attachResizeListener:(n,e)=>Zc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gm={current:void 0},yb=mb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!gm.current){const n=new _O({});n.mount(window),n.setOptions({layoutScroll:!0}),gm.current=n}return gm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),vb=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function EO(n=!0){const e=N.useContext(By);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(n)return s(a)},[n]);const l=N.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const xb=N.createContext({strict:!1}),__={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let E_=!1;function kO(){if(E_)return;const n={};for(const e in __)n[e]={isEnabled:t=>__[e].some(r=>!!t[r])};GS(n),E_=!0}function wb(){return kO(),p3()}function TO(n){const e=wb();for(const t in n)e[t]={...e[t],...n[t]};GS(e)}const SO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||SO.has(n)}let _b=n=>!Lh(n);function bO(n){typeof n=="function"&&(_b=e=>e.startsWith("on")?!Lh(e):n(e))}try{bO(require("@emotion/is-prop-valid").default)}catch{}function IO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(_b(s)||t===!0&&Lh(s)||!e&&!Lh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const gf=N.createContext({});function CO(n,e){if(mf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Jc(t)?t:void 0,animate:Jc(r)?r:void 0}}return n.inherit!==!1?e:{}}function AO(n){const{initial:e,animate:t}=CO(n,N.useContext(gf));return N.useMemo(()=>({initial:e,animate:t}),[k_(e),k_(t)])}function k_(n){return Array.isArray(n)?n.join(" "):n}const f0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Eb(n,e,t){for(const r in e)!an(e[r])&&!tb(r,t)&&(n[r]=e[r])}function RO({transformTemplate:n},e){return N.useMemo(()=>{const t=f0();return d0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function PO(n,e){const t=n.style||{},r={};return Eb(r,t,n),Object.assign(r,RO(n,e)),r}function jO(n,e){const t={},r=PO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const kb=()=>({...f0(),attrs:{}});function NO(n,e,t,r){const s=N.useMemo(()=>{const a=kb();return nb(a,e,ib(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};Eb(a,n.style,n),s.style={...a,...s.style}}return s}const DO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function p0(n){return typeof n!="string"||n.includes("-")?!1:!!(DO.indexOf(n)>-1||/[A-Z]/u.test(n))}function VO(n,e,t,{latestValues:r},s,a=!1,l){const d=(l??p0(n)?NO:jO)(e,r,s,n),m=IO(e,typeof n=="string",a),g=n!==N.Fragment?{...m,...d,ref:t}:{},{children:v}=e,_=N.useMemo(()=>an(v)?v.get():v,[v]);return N.createElement(n,{...g,children:_})}function MO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:LO(t,r,s,n),renderState:e()}}function LO(n,e,t,r){const s={},a=r(n,{});for(const _ in a)s[_]=lh(a[_]);let{initial:l,animate:f}=n;const d=mf(n),m=qS(n);e&&m&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?f:l;if(v&&typeof v!="boolean"&&!pf(v)){const _=Array.isArray(v)?v:[v];for(let T=0;T<_.length;T++){const k=i0(n,_[T]);if(k){const{transitionEnd:C,transition:I,...V}=k;for(const B in V){let P=V[B];if(Array.isArray(P)){const G=g?P.length-1:0;P=P[G]}P!==null&&(s[B]=P)}for(const B in C)s[B]=C[B]}}}return s}const Tb=n=>(e,t)=>{const r=N.useContext(gf),s=N.useContext(By),a=()=>MO(n,e,r,s);return t?a():YM(a)},OO=Tb({scrapeMotionValuesFromProps:h0,createRenderState:f0}),BO=Tb({scrapeMotionValuesFromProps:sb,createRenderState:kb}),FO=Symbol.for("motionComponentSymbol");function zO(n,e,t){const r=N.useRef(t);N.useInsertionEffect(()=>{r.current=t});const s=N.useRef(null);return N.useCallback(a=>{var f;a&&((f=n.onMount)==null||f.call(n,a)),e&&(a?e.mount(a):e.unmount());const l=r.current;if(typeof l=="function")if(a){const d=l(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[e])}const Sb=N.createContext({});function Tc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function UO(n,e,t,r,s,a){var I,V;const{visualElement:l}=N.useContext(gf),f=N.useContext(xb),d=N.useContext(By),m=N.useContext(vb).reducedMotion,g=N.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:a}));const v=g.current,_=N.useContext(Sb);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&$O(g.current,t,s,_);const T=N.useRef(!1);N.useInsertionEffect(()=>{v&&T.current&&v.update(t,d)});const k=t[NS],C=N.useRef(!!k&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,k))&&((V=window.MotionHasOptimisedAnimation)==null?void 0:V.call(window,k)));return XM(()=>{v&&(T.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),C.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!C.current&&v.animationState&&v.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)==null||B.call(window,k)}),C.current=!1),v.enteringChildren=void 0)}),v}function $O(n,e,t,r){const{layoutId:s,layout:a,drag:l,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:bb(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||f&&Tc(f),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function bb(n){if(n)return n.options.allowProjection!==!1?n.projection:bb(n.parent)}function ym(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&TO(r);const a=t?t==="svg":p0(n),l=a?BO:OO;function f(m,g){let v;const _={...N.useContext(vb),...m,layoutId:WO(m)},{isStatic:T}=_,k=AO(m),C=l(m,T);if(!T&&YT){HO();const I=KO(_);v=I.MeasureLayout,k.visualElement=UO(n,C,_,s,I.ProjectionNode,a)}return c.jsxs(gf.Provider,{value:k,children:[v&&k.visualElement?c.jsx(v,{visualElement:k.visualElement,..._}):null,VO(n,m,zO(C,k.visualElement,g),C,T,e,a)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=N.forwardRef(f);return d[FO]=n,d}function WO({layoutId:n}){const e=N.useContext(QT).id;return e&&n!==void 0?e+"-"+n:n}function HO(n,e){N.useContext(xb).strict}function KO(n){const e=wb(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function qO(n,e){if(typeof Proxy>"u")return ym;const t=new Map,r=(a,l)=>ym(a,l,n,e),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(t.has(l)||t.set(l,ym(l,void 0,n,e)),t.get(l))})}const GO=(n,e)=>e.isSVG??p0(n)?new P3(e):new S3(e,{allowProjection:n!==N.Fragment});class QO extends Ms{constructor(e){super(e),e.animationState||(e.animationState=M3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let YO=0;class XO extends Ms{constructor(){super(...arguments),this.id=YO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const JO={animation:{Feature:QO},exit:{Feature:XO}};function xu(n){return{point:{x:n.pageX,y:n.pageY}}}const ZO=n=>e=>l0(e)&&n(e,xu(e));function Vc(n,e,t,r){return Zc(n,e,ZO(t),r)}const Ib=({current:n})=>n?n.ownerDocument.defaultView:null,T_=(n,e)=>Math.abs(n-e);function e6(n,e){const t=T_(n.x,e.x),r=T_(n.y,e.y);return Math.sqrt(t**2+r**2)}const S_=new Set(["auto","scroll"]);class Cb{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=xm(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,C=e6(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!C)return;const{point:I}=T,{timestamp:V}=Kt;this.history.push({...I,timestamp:V});const{onStart:B,onMove:P}=this.handlers;k||(B&&B(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,T)},this.handlePointerMove=(T,k)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=vm(k,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(T,k)=>{this.end();const{onEnd:C,onSessionEnd:I,resumeAnimation:V}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=xm(T.type==="pointercancel"?this.lastMoveEventInfo:vm(k,this.transformPagePoint),this.history);this.startEvent&&C&&C(T,B),I&&I(T,B)},!l0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const d=xu(e),m=vm(d,this.transformPagePoint),{point:g}=m,{timestamp:v}=Kt;this.history=[{...g,timestamp:v}];const{onSessionStart:_}=t;_&&_(e,xm(m,this.history)),this.removeListeners=gu(Vc(this.contextWindow,"pointermove",this.handlePointerMove),Vc(this.contextWindow,"pointerup",this.handlePointerUp),Vc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(S_.has(r.overflowX)||S_.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),st.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),As(this.updatePoint)}}function vm(n,e){return e?{point:e(n.point)}:n}function b_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function xm({point:n},e){return{point:n,delta:b_(n,Ab(e)),offset:b_(n,t6(e)),velocity:n6(e,.1)}}function t6(n){return n[0]}function Ab(n){return n[n.length-1]}function n6(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=Ab(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>xi(e)));)t--;if(!r)return{x:0,y:0};const a=Gn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function r6(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ut(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ut(t,n,r.max):Math.min(n,t)),n}function I_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function i6(n,{top:e,left:t,bottom:r,right:s}){return{x:I_(n.x,t,s),y:I_(n.y,e,r)}}function C_(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function s6(n,e){return{x:C_(n.x,e.x),y:C_(n.y,e.y)}}function o6(n,e){let t=.5;const r=fn(n),s=fn(e);return s>r?t=Qc(e.min,e.max-r,n.min):r>s&&(t=Qc(n.min,n.max-s,e.min)),qr(0,1,t)}function a6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const kg=.35;function l6(n=kg){return n===!1?n=0:n===!0&&(n=kg),{x:A_(n,"left","right"),y:A_(n,"top","bottom")}}function A_(n,e,t){return{min:R_(n,e),max:R_(n,t)}}function R_(n,e){return typeof n=="number"?n:n[e]||0}const c6=new WeakMap;class u6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{t?(this.stopAnimation(),this.snapToCursor(xu(v).point)):this.pauseAnimation()},l=(v,_)=>{this.stopAnimation();const{drag:T,dragPropagation:k,onDragStart:C}=this.getProps();if(T&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n3(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kn(V=>{let B=this.getAxisMotionValue(V).get()||0;if(Wr.test(B)){const{projection:P}=this.visualElement;if(P&&P.layout){const G=P.layout.layoutBox[V];G&&(B=fn(G)*(parseFloat(B)/100))}}this.originPoint[V]=B}),C&&st.postRender(()=>C(v,_)),gg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},f=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:T,dragDirectionLock:k,onDirectionLock:C,onDrag:I}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:V}=_;if(k&&this.currentDirection===null){this.currentDirection=d6(V),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",_.point,V),this.updateAxis("y",_.point,V),this.visualElement.render(),I&&I(v,_)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Kn(v=>{var _;return this.getAnimationState(v)==="paused"&&((_=this.getAxisMotionValue(v).animation)==null?void 0:_.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Cb(e,{onSessionStart:a,onStart:l,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:Ib(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:f}=this.getProps();f&&st.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!qd(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=r6(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Tc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=i6(r.layoutBox,e):this.constraints=!1,this.elastic=l6(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Kn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=a6(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Tc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=x3(r,s.root,this.visualElement.getTransformPagePoint());let l=s6(s.layout.layoutBox,a);if(t){const f=t(g3(l));this.hasMutatedConstraints=!!f,f&&(l=YS(f))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Kn(g=>{if(!qd(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,T=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return gg(this.visualElement,e),r.start(r0(e,r,0,t,this.visualElement,!1))}stopAnimation(){Kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kn(t=>{const{drag:r}=this.getProps();if(!qd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:f}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-ut(l,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Tc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Kn(l=>{const f=this.getAxisMotionValue(l);if(f&&this.constraints!==!1){const d=f.get();s[l]=o6({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kn(l=>{if(!qd(l,e,null))return;const f=this.getAxisMotionValue(l),{min:d,max:m}=this.constraints[l];f.set(ut(d,m,s[l]))})}addListeners(){if(!this.visualElement.current)return;c6.set(this.visualElement,this);const e=this.visualElement.current,t=Vc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!WS(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const l=Zc(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Kn(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=kg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:f}}}function qd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function d6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class h6 extends Ms{constructor(e){super(e),this.removeGroupControls=Qn,this.removeListeners=Qn,this.controls=new u6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const P_=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class f6 extends Ms{constructor(){super(...arguments),this.removePointerDownListener=Qn}onPointerDown(e){this.session=new Cb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ib(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:P_(e),onStart:P_(t),onMove:r,onEnd:(a,l)=>{delete this.session,s&&st.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Vc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let wm=!1;class p6 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),wm&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ch.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,wm=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||st.postRender(()=>{const f=l.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),a0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;wm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Rb(n){const[e,t]=EO(),r=N.useContext(QT);return c.jsx(p6,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(Sb),isPresent:e,safeToRemove:t})}const m6={pan:{Feature:f6},drag:{Feature:h6,ProjectionNode:yb,MeasureLayout:Rb}};function j_(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&st.postRender(()=>a(e,xu(e)))}class g6 extends Ms{mount(){const{current:e}=this.node;e&&(this.unmount=r3(e,(t,r)=>(j_(this.node,r,"Start"),s=>j_(this.node,s,"End"))))}unmount(){}}class y6 extends Ms{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gu(Zc(this.node.current,"focus",()=>this.onFocus()),Zc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function N_(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&st.postRender(()=>a(e,xu(e)))}class v6 extends Ms{mount(){const{current:e}=this.node;e&&(this.unmount=o3(e,(t,r)=>(N_(this.node,r,"Start"),(s,{success:a})=>N_(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tg=new WeakMap,_m=new WeakMap,x6=n=>{const e=Tg.get(n.target);e&&e(n)},w6=n=>{n.forEach(x6)};function _6({root:n,...e}){const t=n||document;_m.has(t)||_m.set(t,{});const r=_m.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(w6,{root:n,...e})),r[s]}function E6(n,e,t){const r=_6(e);return Tg.set(n,t),r.observe(n),()=>{Tg.delete(n),r.unobserve(n)}}const k6={some:0,all:1};class T6 extends Ms{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:k6[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=m?g:v;_&&_(d)};return E6(this.node.current,l,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(S6(e,t))&&this.startObserver()}unmount(){}}function S6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const b6={inView:{Feature:T6},tap:{Feature:v6},focus:{Feature:y6},hover:{Feature:g6}},I6={layout:{ProjectionNode:yb,MeasureLayout:Rb}},C6={...JO,...b6,...m6,...I6},Ee=qO(C6,GO);function Yn(){var k;const n=er(),e=nu(),{user:t,profile:r,isAuthenticated:s,isAdmin:a,isBusiness:l}=No(),[f,d]=N.useState(!1),[m,g]=N.useState(!1),v=[{to:"/",label:"Home"},{to:"/about",label:"How It Works"},{to:"/benefits",label:"Benefits"},{to:"/businesses",label:"For Businesses"}],_=async()=>{await LT(),g(!1),e("/")},T=C=>n.pathname===C;return c.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),c.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),c.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:v.map(C=>c.jsx(ue,{to:C.to,style:{color:T(C.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:T(C.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:T(C.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:C.label},C.to))}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?c.jsx(c.Fragment,{children:c.jsxs("div",{style:{position:"relative"},children:[c.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[c.jsx(Oa,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&c.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[c.jsxs(ue,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[c.jsx(tg,{size:16})," My OK Card"]}),c.jsxs(ue,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Oa,{size:16})," My Profile"]}),l&&c.jsxs(ue,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Qt,{size:16})," Business Dashboard"]}),a&&c.jsxs(ue,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Rh,{size:16})," Admin Portal"]}),c.jsxs("button",{onClick:_,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[c.jsx(ng,{size:16})," Sign Out"]})]})]})}):c.jsx(c.Fragment,{children:c.jsxs(ue,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:16})," Sign In"]})}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),c.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?c.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):c.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&c.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[v.map(C=>c.jsx(ue,{to:C.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:T(C.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:T(C.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:C.label},C.to)),c.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),c.jsxs(ue,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Oa,{size:16})," My Profile"]}),l&&c.jsxs(ue,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:16})," Business Dashboard"]}),a&&c.jsxs(ue,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Rh,{size:16})," Admin Portal"]}),c.jsxs("button",{onClick:()=>{_(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(ng,{size:16})," Sign Out"]})]}):c.jsxs(ue,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:16})," Sign In"]}),c.jsx(ue,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),c.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function Xn(){return c.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),c.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx(ue,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),c.jsx(ue,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),c.jsx(ue,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),c.jsx(ue,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx(ue,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),c.jsx(ue,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),c.jsx(ue,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),c.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",c.jsx("br",{}),"Columbia County, NY"]})]})]}),c.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),c.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:c.jsx(ue,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function A6(){return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),c.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",c.jsx("br",{}),c.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),c.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),c.jsx(ue,{to:"/about",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"Learn How It Works"})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:hf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Qt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:xs},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:pl}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(n.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",n.step]}),c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n.description})]},e))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:Xt},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:xr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:Ai},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Ln,featured:!0}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:n.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[n.featured&&c.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),c.jsx("div",{style:{width:"50px",height:"50px",background:`${n.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:c.jsx(n.Icon,{size:24,color:n.color,strokeWidth:1.5})}),c.jsx("h3",{style:{color:n.color,marginBottom:"0.5rem"},children:n.name}),c.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[n.businesses," businesses visited"]}),c.jsxs("div",{style:{background:`${n.color}15`,borderRadius:"8px",padding:"1rem"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:n.color},children:n.bonus}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},e))}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((n,e)=>c.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:n},e))}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[c.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),c.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),c.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),c.jsx(Xn,{})]})}var R6=Object.defineProperty,Oh=Object.getOwnPropertySymbols,Pb=Object.prototype.hasOwnProperty,jb=Object.prototype.propertyIsEnumerable,D_=(n,e,t)=>e in n?R6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sg=(n,e)=>{for(var t in e||(e={}))Pb.call(e,t)&&D_(n,t,e[t]);if(Oh)for(var t of Oh(e))jb.call(e,t)&&D_(n,t,e[t]);return n},bg=(n,e)=>{var t={};for(var r in n)Pb.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Oh)for(var r of Oh(n))e.indexOf(r)<0&&jb.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Co;(n=>{const e=class De{constructor(d,m,g,v){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let _=[];for(let k=0;k<this.size;k++)_.push(!1);for(let k=0;k<this.size;k++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(g);if(this.drawCodewords(T),v==-1){let k=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const I=this.getPenaltyScore();I<k&&(v=C,k=I),this.applyMask(C)}}s(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return De.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return De.encodeSegments([g],m)}static encodeSegments(d,m,g=1,v=40,_=-1,T=!0){if(!(De.MIN_VERSION<=g&&g<=v&&v<=De.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let k,C;for(k=g;;k++){const P=De.getNumDataCodewords(k,m)*8,G=l.getTotalBits(d,k);if(G<=P){C=G;break}if(k>=v)throw new RangeError("Data too long")}for(const P of[De.Ecc.MEDIUM,De.Ecc.QUARTILE,De.Ecc.HIGH])T&&C<=De.getNumDataCodewords(k,P)*8&&(m=P);let I=[];for(const P of d){t(P.mode.modeBits,4,I),t(P.numChars,P.mode.numCharCountBits(k),I);for(const G of P.getData())I.push(G)}s(I.length==C);const V=De.getNumDataCodewords(k,m)*8;s(I.length<=V),t(0,Math.min(4,V-I.length),I),t(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let P=236;I.length<V;P^=253)t(P,8,I);let B=[];for(;B.length*8<I.length;)B.push(0);return I.forEach((P,G)=>B[G>>>3]|=P<<7-(G&7)),new De(k,m,B,_)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let v=0;v<m;v++)g==0&&v==0||g==0&&v==m-1||g==m-1&&v==0||this.drawAlignmentPattern(d[g],d[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let _=0;_<10;_++)g=g<<1^(g>>>9)*1335;const v=(m<<10|g)^21522;s(v>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,r(v,_));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,r(v,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,r(v,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,r(v,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const v=r(m,g),_=this.size-11+g%3,T=Math.floor(g/3);this.setFunctionModule(_,T,v),this.setFunctionModule(T,_,v)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let v=-4;v<=4;v++){const _=Math.max(Math.abs(v),Math.abs(g)),T=d+v,k=m+g;0<=T&&T<this.size&&0<=k&&k<this.size&&this.setFunctionModule(T,k,_!=2&&_!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let v=-2;v<=2;v++)this.setFunctionModule(d+v,m+g,Math.max(Math.abs(v),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=De.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const v=De.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],_=De.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],T=Math.floor(De.getNumRawDataModules(m)/8),k=v-T%v,C=Math.floor(T/v);let I=[];const V=De.reedSolomonComputeDivisor(_);for(let P=0,G=0;P<v;P++){let $=d.slice(G,G+C-_+(P<k?0:1));G+=$.length;const H=De.reedSolomonComputeRemainder($,V);P<k&&$.push(0),I.push($.concat(H))}let B=[];for(let P=0;P<I[0].length;P++)I.forEach((G,$)=>{(P!=C-_||$>=k)&&B.push(G[P])});return s(B.length==T),B}drawCodewords(d){if(d.length!=Math.floor(De.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let v=0;v<this.size;v++)for(let _=0;_<2;_++){const T=g-_,C=(g+1&2)==0?this.size-1-v:v;!this.isFunction[C][T]&&m<d.length*8&&(this.modules[C][T]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let v;switch(d){case 0:v=(g+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=g%3==0;break;case 3:v=(g+m)%3==0;break;case 4:v=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:v=g*m%2+g*m%3==0;break;case 6:v=(g*m%2+g*m%3)%2==0;break;case 7:v=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&v&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let _=0;_<this.size;_++){let T=!1,k=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[_][I]==T?(k++,k==5?d+=De.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,C),T||(d+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),T=this.modules[_][I],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,C)*De.PENALTY_N3}for(let _=0;_<this.size;_++){let T=!1,k=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][_]==T?(k++,k==5?d+=De.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,C),T||(d+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),T=this.modules[I][_],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,C)*De.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let T=0;T<this.size-1;T++){const k=this.modules[_][T];k==this.modules[_][T+1]&&k==this.modules[_+1][T]&&k==this.modules[_+1][T+1]&&(d+=De.PENALTY_N2)}let m=0;for(const _ of this.modules)m=_.reduce((T,k)=>T+(k?1:0),m);const g=this.size*this.size,v=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=v&&v<=9),d+=v*De.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let v=this.size-7;g.length<d;v-=m)g.splice(1,0,v);return g}}static getNumRawDataModules(d){if(d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(De.getNumRawDataModules(d)/8)-De.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*De.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<d-1;v++)m.push(0);m.push(1);let g=1;for(let v=0;v<d;v++){for(let _=0;_<m.length;_++)m[_]=De.reedSolomonMultiply(m[_],g),_+1<m.length&&(m[_]^=m[_+1]);g=De.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(v=>0);for(const v of d){const _=v^g.shift();g.push(0),m.forEach((T,k)=>g[k]^=De.reedSolomonMultiply(T,_))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let v=7;v>=0;v--)g=g<<1^(g>>>7)*285,g^=(m>>>v&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const a=class pt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new pt(pt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!pt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const v=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+v),10),v*3+1,m),g+=v}return new pt(pt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!pt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let v=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;v+=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(v,11,m)}return g<d.length&&t(pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new pt(pt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:pt.isNumeric(d)?[pt.makeNumeric(d)]:pt.isAlphanumeric(d)?[pt.makeAlphanumeric(d)]:[pt.makeBytes(pt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new pt(pt.Mode.ECI,0,m)}static isNumeric(d){return pt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return pt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const v of d){const _=v.mode.numCharCountBits(m);if(v.numChars>=1<<_)return 1/0;g+=4+_+v.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=a;n.QrSegment=a})(Co||(Co={}));(n=>{(e=>{const t=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Co||(Co={}));(n=>{(e=>{const t=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Co||(Co={}));var Pa=Co;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var P6={L:Pa.QrCode.Ecc.LOW,M:Pa.QrCode.Ecc.MEDIUM,Q:Pa.QrCode.Ecc.QUARTILE,H:Pa.QrCode.Ecc.HIGH},Nb=128,Db="L",Vb="#FFFFFF",Mb="#000000",Lb=!1,Ob=1,j6=4,N6=0,D6=.1;function Bb(n,e=0){const t=[];return n.forEach(function(r,s){let a=null;r.forEach(function(l,f){if(!l&&a!==null){t.push(`M${a+e} ${s+e}h${f-a}v1H${a+e}z`),a=null;return}if(f===r.length-1){if(!l)return;a===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${a+e},${s+e} h${f+1-a}v1H${a+e}z`);return}l&&a===null&&(a=f)})}),t.join("")}function Fb(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function V6(n,e,t,r){if(r==null)return null;const s=n.length+t*2,a=Math.floor(e*D6),l=s/e,f=(r.width||a)*l,d=(r.height||a)*l,m=r.x==null?n.length/2-f/2:r.x*l,g=r.y==null?n.length/2-d/2:r.y*l,v=r.opacity==null?1:r.opacity;let _=null;if(r.excavate){let k=Math.floor(m),C=Math.floor(g),I=Math.ceil(f+m-k),V=Math.ceil(d+g-C);_={x:k,y:C,w:I,h:V}}const T=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:_,opacity:v,crossOrigin:T}}function M6(n,e){return e!=null?Math.max(Math.floor(e),0):n?j6:N6}function zb({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:a,size:l,boostLevel:f}){let d=Nt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((C,I)=>(C.push(...Pa.QrSegment.makeSegments(I)),C),[]);return Pa.QrCode.encodeSegments(k,P6[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:v,calculatedImageSettings:_}=Nt.useMemo(()=>{let T=d.getModules();const k=M6(r,s),C=T.length+k*2,I=V6(T,l,k,a);return{cells:T,margin:k,numCells:C,calculatedImageSettings:I}},[d,l,a,r,s]);return{qrcode:d,margin:g,cells:m,numCells:v,calculatedImageSettings:_}}var L6=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),O6=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Nb,level:l=Db,bgColor:f=Vb,fgColor:d=Mb,includeMargin:m=Lb,minVersion:g=Ob,boostLevel:v,marginSize:_,imageSettings:T}=r,C=bg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=C,V=bg(C,["style"]),B=T==null?void 0:T.src,P=Nt.useRef(null),G=Nt.useRef(null),$=Nt.useCallback(Ne=>{P.current=Ne,typeof t=="function"?t(Ne):t&&(t.current=Ne)},[t]),[H,A]=Nt.useState(!1),{margin:b,cells:j,numCells:L,calculatedImageSettings:O}=zb({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:_,imageSettings:T,size:a});Nt.useEffect(()=>{if(P.current!=null){const Ne=P.current,He=Ne.getContext("2d");if(!He)return;let _t=j;const Se=G.current,ie=O!=null&&Se!==null&&Se.complete&&Se.naturalHeight!==0&&Se.naturalWidth!==0;ie&&O.excavation!=null&&(_t=Fb(j,O.excavation));const pe=window.devicePixelRatio||1;Ne.height=Ne.width=a*pe;const ae=a/L*pe;He.scale(ae,ae),He.fillStyle=f,He.fillRect(0,0,L,L),He.fillStyle=d,L6?He.fill(new Path2D(Bb(_t,b))):j.forEach(function(U,ee){U.forEach(function(Ce,Ae){Ce&&He.fillRect(Ae+b,ee+b,1,1)})}),O&&(He.globalAlpha=O.opacity),ie&&He.drawImage(Se,O.x+b,O.y+b,O.w,O.h)}}),Nt.useEffect(()=>{A(!1)},[B]);const W=Sg({height:a,width:a},I);let M=null;return B!=null&&(M=Nt.createElement("img",{src:B,key:B,style:{display:"none"},onLoad:()=>{A(!0)},ref:G,crossOrigin:O==null?void 0:O.crossOrigin})),Nt.createElement(Nt.Fragment,null,Nt.createElement("canvas",Sg({style:W,height:a,width:a,ref:$,role:"img"},V)),M)});O6.displayName="QRCodeCanvas";var Bh=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Nb,level:l=Db,bgColor:f=Vb,fgColor:d=Mb,includeMargin:m=Lb,minVersion:g=Ob,boostLevel:v,title:_,marginSize:T,imageSettings:k}=r,C=bg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:V,numCells:B,calculatedImageSettings:P}=zb({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:T,imageSettings:k,size:a});let G=V,$=null;k!=null&&P!=null&&(P.excavation!=null&&(G=Fb(V,P.excavation)),$=Nt.createElement("image",{href:k.src,height:P.h,width:P.w,x:P.x+I,y:P.y+I,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const H=Bb(G,I);return Nt.createElement("svg",Sg({height:a,width:a,viewBox:`0 0 ${B} ${B}`,ref:t,role:"img"},C),!!_&&Nt.createElement("title",null,_),Nt.createElement("path",{fill:f,d:`M0,0 h${B}v${B}H0z`,shapeRendering:"crispEdges"}),Nt.createElement("path",{fill:d,d:H,shapeRendering:"crispEdges"}),$)});Bh.displayName="QRCodeSVG";const V_={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function eu({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=V_[t]||V_[5],a=e+48,l=16;return r?c.jsx("div",{style:{width:a,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:l,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:c.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:l-2,padding:"8px",position:"relative"},children:[c.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),c.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[c.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),c.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),c.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),c.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),c.jsx(Bh,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[c.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),c.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),c.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):c.jsx(Bh,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const B6="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",F6="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",z6="Broad Street Bagel Co.";function U6(){const[n,e]=N.useState(null),[t,r]=N.useState(0),[s,a]=N.useState(!1);return c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:c.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[c.jsx(QM,{size:16})," Try It Live"]}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[c.jsxs(Ee.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(SM,{size:22,color:"white"})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:c.jsx(Ee.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:c.jsx(eu,{value:B6,size:130,denomination:5,showFrame:!0})})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[c.jsx(xw,{size:20,color:"#3498db"}),c.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),c.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((l,f)=>c.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Qt,{size:22,color:"white"})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:c.jsx(Ee.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:c.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),c.jsx(eu,{value:F6,size:110,denomination:1,showFrame:!1}),c.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[c.jsx($V,{size:14,color:"var(--kb-green)"}),c.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:z6})]})]})})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[c.jsx(xw,{size:20,color:"var(--kb-green)"}),c.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),c.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((l,f)=>c.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),c.jsxs("div",{style:{position:"relative",zIndex:1},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[c.jsx(ff,{size:20,color:"var(--kb-gold)"}),c.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),c.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(Qt,{size:24,color:"var(--kb-gold)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(eg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(pl,{size:24,color:"var(--kb-gold)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(eg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(xr,{size:24,color:"var(--kb-navy)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),c.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((l,f)=>c.jsxs("div",{style:{padding:"0.5rem 1rem",background:l.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:l.featured?"var(--kb-navy)":"white",fontWeight:l.featured?"600":"400"},children:[l.name,": ",l.bonus]},f))})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),c.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function $6(){return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),c.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[c.jsxs("p",{style:{marginBottom:"1rem"},children:[c.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),c.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),c.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),c.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),c.jsx(U6,{}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),c.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[c.jsxs("p",{style:{marginBottom:"1rem"},children:[c.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),c.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',c.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),c.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),c.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),c.jsx(ue,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),c.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),c.jsx(Xn,{})]})}const Jn={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function Ig(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function W6(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function m0(n){const e=Ig(n),t=W6(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=Jn[t],s=e?Jn[e].threshold:0,a=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,a)),remaining:r.threshold-n,nextTier:r}}function H6(){const n=[{Icon:OV,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Qt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:xr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:QV,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:zT,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Si,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),c.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),c.jsx("div",{style:{overflowX:"auto"},children:c.jsxs("table",{style:{minWidth:"700px"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"25%"},children:"Tier"}),c.jsx("th",{style:{width:"20%"},children:"Requirement"}),c.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),c.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xt,{size:18,color:"#888"}),c.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),c.jsx("td",{children:"1+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xr,{size:18,color:"#2e7d32"}),c.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),c.jsx("td",{children:"5+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ai,{size:18,color:"#1565c0"}),c.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),c.jsx("td",{children:"10+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),c.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:18,color:"#c9a227"}),c.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),c.jsx("td",{children:"15+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>c.jsx(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),c.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),c.jsx("div",{className:"card",style:{padding:"2rem"},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>c.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),c.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),c.jsx("div",{style:{marginTop:"2rem"},children:c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),c.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),c.jsx(ue,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),c.jsx(Xn,{})]})}const wu="businesses";async function Ub(n){const e=zt(qe,wu,n),t=await fl(e);return t.exists()?{code:t.id,...t.data()}:null}async function Do(){const n=Is(En(qe,wu),Qa("name"));return(await yr(n)).docs.map(t=>({code:t.id,...t.data()}))}async function M_(n,e,t){await mu(zt(qe,wu,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Vt()})}async function K6(n){const e=zt(qe,wu,n);await Gr(e,{checkinCount:Iy(1)})}async function q6(n,e){const t=zt(qe,wu,n);await Gr(t,{isActive:e})}const Em={food:{label:"Food & Drink",Icon:GT,color:"#e74c3c"},retail:{label:"Retail",Icon:qT,color:"#9b59b6"},services:{label:"Services",Icon:FT,color:"#3498db"},arts:{label:"Arts & Culture",Icon:KT,color:"#1abc9c"}};function G6(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all");N.useEffect(()=>{async function d(){const m=await Do();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const l=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),c.jsx(ue,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Si,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:vM,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:uM,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:$M,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Vy,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:zT,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),c.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>c.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[c.jsxs("button",{onClick:()=>a("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(Em).map(([d,m])=>c.jsxs("button",{onClick:()=>a(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?c.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):l.length===0?c.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",c.jsx(ue,{to:"/admin/businesses",children:"Add some!"})]}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:l.map((d,m)=>{const g=Em[d.category]||Em.services;return c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),c.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&c.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),c.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),c.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),c.jsx(Xn,{})]})}const $b="members";function Fh(){return Io.currentUser?Io.currentUser.uid:zh()}function zh(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Za(n){const e=zt(qe,$b,n),t=await fl(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function Q6(n,e){const t=zt(qe,$b,n),r=await fl(t);if(r.exists()){const s=r.data(),a=s.businessesVisited||[],l=!a.includes(e),f=l?a.length+1:a.length,d=Ig(f),m=d!==s.tier;return await Gr(t,{businessesVisited:eV(e),totalCheckins:Iy(1),tier:d,lastCheckin:Vt()}),{isNewBusiness:l,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:l?[...a,e]:a,totalCheckins:(s.totalCheckins||0)+1}}else{const s=Ig(1);return await mu(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Vt(),lastCheckin:Vt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const Y6={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function X6(){const[n,e]=N.useState(null),[t,r]=N.useState(!0),[s,a]=N.useState(20),[l,f]=N.useState(!1),[d,m]=N.useState(!1);N.useEffect(()=>{async function V(){const B=zh(),P=await Za(B);e(P),r(!1)}V()},[]);const g=(n==null?void 0:n.tier)||"curious",v=Jn[g]||Jn.curious,_=n?v.bonus:.1,T=s*_,k=s+T,C=async()=>{f(!0);try{await Ny(En(qe,"exchanges"),{visitorId:zh(),usdAmount:s,bonusRate:_,bonusAmount:T,kinderbucksAmount:k,tier:g,status:"pending",createdAt:Vt()}),m(!0)}catch(V){console.error("Exchange error:",V),alert("Error submitting exchange request")}f(!1)},I=[10,20,50,100];return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),c.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),c.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:c.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?c.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),c.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),c.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",c.jsxs("strong",{children:["$",s," USD"]})," "," ",c.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[c.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),c.jsx(ue,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const V=Y6[g]||Xt;return c.jsx(V,{size:28,color:v.color,strokeWidth:1.5})})(),c.jsx("span",{style:{fontWeight:"600",color:v.color,fontSize:"1.2rem"},children:v.name})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),c.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.color},children:[Math.round(_*100),"%"]})]})]}),!n&&c.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(tM,{size:16,color:"var(--kb-gold)"})," ",c.jsx(ue,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{children:"Amount (USD)"}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:I.map(V=>c.jsxs("button",{onClick:()=>a(V),className:s===V?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",V]},V))}),c.jsx("input",{type:"number",value:s,onChange:V=>a(Math.max(1,Number(V.target.value))),min:"1",style:{width:"100%"}})]}),c.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[c.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),c.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[c.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[v.name," Bonus (",Math.round(_*100),"%)"]}),c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",T.toFixed(2)]})]}),c.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),c.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),c.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),c.jsx("button",{onClick:C,disabled:l,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:l?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),c.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),c.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),c.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[c.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),c.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"Community Bank NA"})," - 19 Broad Street"]}),c.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),c.jsx(Xn,{})]})}const L_={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function J6(){var V,B;const[n,e]=N.useState(null),[t,r]=N.useState([]),[s,a]=N.useState([]),[l,f]=N.useState(!0),[d,m]=N.useState("overview");if(N.useEffect(()=>{async function P(){const G=zh(),$=await Za(G),H=await Do();try{const A=Is(En(qe,"exchanges"),qc("visitorId","==",G),Qa("createdAt","desc")),b=await yr(A);a(b.docs.map(j=>({id:j.id,...j.data()})))}catch(A){console.error("Error loading exchanges:",A)}e($),r(H),f(!1)}P()},[]),l)return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{className:"page page-center",style:{flex:1},children:c.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),c.jsx(Xn,{})]});const g=(n==null?void 0:n.tier)||null,v=g?Jn[g]:null,_=((V=n==null?void 0:n.businessesVisited)==null?void 0:V.length)||0,T=m0(_),k=((B=n==null?void 0:n.businessesVisited)==null?void 0:B.map(P=>{const G=t.find($=>$.code===P);return G?G.name:P}))||[],C=t.filter(P=>{var G;return P.isActive&&!((G=n==null?void 0:n.businessesVisited)!=null&&G.includes(P.code))}),I=s.reduce((P,G)=>P+(G.kinderbucksAmount||0),0);return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:c.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{width:"80px",height:"80px",background:v?v.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const P=g&&L_[g]?L_[g]:Xt;return c.jsx(P,{size:40,color:"white",strokeWidth:1.5})})()}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),c.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:v?v.name:"New Member"}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:v?`${Math.round(v.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),c.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:c.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(P=>c.jsx("button",{onClick:()=>m(P),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===P?"600":"400",color:d===P?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===P?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:P},P))})}),c.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsx("div",{className:"stat-value",children:_}),c.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),c.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",I.toFixed(0)]}),c.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[c.jsxs(ue,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Vy,{size:18})," Exchange"]}),c.jsxs(ue,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:18})," Find Businesses"]}),c.jsxs(ue,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(ff,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:[v&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),T.nextTier?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"0.5rem"},children:[c.jsx("span",{style:{color:v.color,fontWeight:"600"},children:v.name}),c.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),c.jsx("span",{style:{color:T.nextTier.color,fontWeight:"600"},children:T.nextTier.name})]}),c.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:c.jsx("div",{className:"progress-bar-fill",style:{width:`${T.progress}%`,background:v.color}})}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[T.remaining," more business",T.remaining!==1?"es":""," to reach ",T.nextTier.name]})]}):c.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Gc,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((P,G)=>c.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Gc,{size:14})," ",P]},G))}):c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),C.length>0&&c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(UT,{size:20,color:"var(--kb-navy)"})," Still to Explore (",C.length,")"]}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[C.slice(0,12).map(P=>c.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:P.name},P.code)),C.length>12&&c.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",C.length-12," more"]})]})]})]}),d==="history"&&c.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?c.jsx("div",{children:s.map((P,G)=>{var $,H,A,b;return c.jsxs("div",{style:{padding:"1rem 0",borderBottom:G<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",P.usdAmount,"  $",($=P.kinderbucksAmount)==null?void 0:$.toFixed(2)," KB"]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((b=(A=(H=P.createdAt)==null?void 0:H.toDate)==null?void 0:A.call(H))==null?void 0:b.toLocaleDateString())||"Pending","  ",Math.round(P.bonusRate*100),"% bonus"]})]}),c.jsx("span",{className:"badge",style:{background:P.status==="completed"?"#d4edda":"#fff3cd",color:P.status==="completed"?"var(--kb-green)":"#856404"},children:P.status})]},P.id)})}):c.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[c.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),c.jsx(Xn,{})]})}const O_={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},gc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function Z6(){var C,I;const{user:n,profile:e,isAuthenticated:t}=No(),[r,s]=N.useState(null),[a,l]=N.useState([]),[f,d]=N.useState(!0);N.useEffect(()=>{async function V(){const B=Fh(),P=await Za(B),G=await Do();s(P),l(G.filter($=>$.isActive)),d(!1)}V()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=Jn[m],v=((C=r==null?void 0:r.businessesVisited)==null?void 0:C.length)||0,_=m0(v),T=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.map(V=>{const B=a.find(P=>P.code===V);return B?B.name:V}))||[],k=a.filter(V=>{var B;return!((B=r==null?void 0:r.businessesVisited)!=null&&B.includes(V.code))});return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:c.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:f?c.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Oa,{size:24,color:"var(--kb-gray-500)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${gc[m]} 0%, ${gc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const V=O_[m]||Xt;return c.jsx(V,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),c.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),c.jsxs(ue,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[c.jsx(tg,{size:28}),"SHOW MY OK CARD"]}),c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[v," Business",v!==1?"es":""," Visited"]}),_.nextTier?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:c.jsxs(Ee.div,{initial:{width:0},animate:{width:`${_.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${gc[m]}, ${_.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[v,"/",_.nextTier.threshold]})}),c.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[c.jsx("strong",{children:_.remaining})," more to reach"," ",c.jsx("strong",{style:{color:_.nextTier.color},children:_.nextTier.name})]})]}):c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),T.length>0&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Gc,{size:20,color:"var(--kb-green)"})," Visited"]}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:T.map((V,B)=>c.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Gc,{size:14})," ",V]},B))})]}),k.length>0&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(UT,{size:20})," Still to Explore (",k.length,")"]}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(V=>c.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:V.name},V.code)),k.length>10&&c.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),c.jsxs(ue,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",c.jsx(eg,{size:16})]})]}),c.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&c.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[c.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),c.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:18})," Sign In"]})]})]}):c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[c.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[c.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:c.jsx(ff,{size:36,color:"var(--kb-gold)"})}),c.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&c.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),c.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:18})," Sign In or Create Account"]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[c.jsxs(ue,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:18})," Find Businesses"]}),c.jsxs(ue,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(tg,{size:18})," View My Card"]})]})]}),c.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Qt},{step:2,text:"Scan their check-in QR code with your phone",icon:Xt},{step:3,text:"Build your tier to unlock better exchange rates",icon:pl}].map(V=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(V.icon,{size:20,color:"var(--kb-gold)"})}),c.jsx("div",{style:{color:"var(--kb-gray-700)"},children:V.text})]},V.step))})]}),c.jsxs("div",{style:{marginTop:"2rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(Jn).map(([V,B])=>{const P=O_[V];return c.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[c.jsx(P,{size:24,color:gc[V],style:{marginBottom:"0.5rem"}}),c.jsx("div",{style:{fontWeight:"600",color:gc[V],marginBottom:"0.25rem"},children:B.name}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(B.bonus*100),"% bonus"]})]},V)})})]})]})})}),c.jsx(Xn,{})]})}function eB(){var V,B;const[n,e]=N.useState("login"),[t,r]=N.useState(""),[s,a]=N.useState(""),[l,f]=N.useState(""),[d,m]=N.useState(""),[g,v]=N.useState(!1),_=nu(),T=er(),{isAuthenticated:k}=No(),C=((B=(V=T.state)==null?void 0:V.from)==null?void 0:B.pathname)||"/profile",I=async P=>{P.preventDefault(),m(""),v(!0);try{if(n==="signup"){if(!l.trim()){m("Please enter your name"),v(!1);return}await cV(t,s,l)}else await uV(t,s);_(C,{replace:!0})}catch(G){console.error("Auth error:",G),G.code==="auth/email-already-in-use"?m("An account with this email already exists"):G.code==="auth/weak-password"?m("Password should be at least 6 characters"):G.code==="auth/invalid-email"?m("Please enter a valid email address"):G.code==="auth/user-not-found"||G.code==="auth/wrong-password"||G.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}v(!1)};return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[c.jsxs("div",{className:"card",style:{padding:"2rem"},children:[c.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[c.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[c.jsx(Xa,{size:18})," Sign In"]}),c.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[c.jsx(ww,{size:18})," Sign Up"]})]}),c.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&c.jsxs(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[c.jsx(Ly,{size:18}),d]}),c.jsxs("form",{onSubmit:I,children:[n==="signup"&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(Oa,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"text",value:l,onChange:P=>f(P.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(HT,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"email",value:t,onChange:P=>r(P.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(iM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"password",value:s,onChange:P=>a(P.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&c.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),c.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?c.jsxs(c.Fragment,{children:[c.jsx(Oy,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):c.jsxs(c.Fragment,{children:[n==="login"?c.jsx(Xa,{size:20}):c.jsx(ww,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[c.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),c.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),c.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),c.jsxs("button",{type:"button",onClick:async()=>{m(""),v(!0);try{await dV(),_(C,{replace:!0})}catch(P){console.error("Google sign-in error:",P),P.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}v(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),c.jsx("div",{style:{marginTop:"1rem"},children:c.jsx(ue,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),c.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:c.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),c.jsx(Xn,{}),c.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const tB={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},nB={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function rB(){var k;const{user:n,profile:e,isAuthenticated:t}=No(),[r,s]=N.useState(null),[a,l]=N.useState(!0);N.useEffect(()=>{async function C(){const I=Fh(),V=await Za(I);s(V),l(!1)}C()},[n]);const f=(r==null?void 0:r.tier)||"curious",d=Jn[f],m=nB[f],g=tB[f],v=((k=r==null?void 0:r.businessesVisited)==null?void 0:k.length)||0,_=Fh(),T=_?_.substring(0,8).toUpperCase():"GUEST";return a?c.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):c.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[c.jsxs(ue,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1.1rem",marginBottom:"1rem"},children:[c.jsx(PV,{size:24})," Back"]}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"400px"},children:[c.jsxs("div",{style:{background:"white",borderRadius:"24px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[c.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,padding:"2rem",textAlign:"center",color:"white"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:c.jsx("div",{style:{width:"70px",height:"70px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(g,{size:40,strokeWidth:1.5})})}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:d.name}),c.jsxs("div",{style:{fontSize:"1.1rem",opacity:.9},children:[Math.round(d.bonus*100),"% Exchange Bonus"]})]}),c.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[t&&(e==null?void 0:e.displayName)&&c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e.displayName}),c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:m.bg,borderRadius:"100px",color:m.primary,fontWeight:"600",fontSize:"1rem",marginBottom:"1.5rem"},children:[c.jsx(ff,{size:18}),"OK Member"]}),c.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[c.jsx(Bh,{value:`kinderbucks:member:${_}:${f}`,size:160,level:"M",style:{display:"block",margin:"0 auto"}}),c.jsx("div",{style:{marginTop:"1rem",fontFamily:"monospace",fontSize:"1.2rem",fontWeight:"600",color:"var(--kb-navy)",letterSpacing:"0.1em"},children:T}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"0.25rem"},children:"Show this to the cashier"})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:m.primary},children:v}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:m.primary},children:[Math.round(d.bonus*100),"%"]}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-500)"},children:"Bonus"})]})]})]}),c.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1rem 2rem",textAlign:"center"},children:[c.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem",letterSpacing:"0.05em"},children:"KINDERBUCKS"}),c.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.8rem",marginTop:"0.25rem"},children:"Village of Kinderhook"})]})]}),c.jsxs("div",{style:{marginTop:"2rem",textAlign:"center",color:"rgba(255,255,255,0.7)",fontSize:"1rem",lineHeight:1.6},children:["Show this card when making a purchase",c.jsx("br",{}),"to receive your ",Math.round(d.bonus*100),"% exchange bonus!"]})]})})]})}const _u="kinderbucks",iB="scans";async function sB(n){const e=zt(qe,_u,n),t=await fl(e);return t.exists()?{serial:t.id,...t.data()}:null}async function Wb(){const n=Is(En(qe,_u),Qa("serial"));return(await yr(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function oB(n,e){const t=n.map(r=>mu(zt(qe,_u,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Vt()}));await Promise.all(t)}async function aB(n,e,t=null){const r=zt(qe,_u,n),s={status:e,issuedAt:Vt(),...t&&{issuedTo:t}};await Gr(r,s)}async function lB(n){const e=zt(qe,_u,n);await Gr(e,{scanCount:Iy(1),lastScanned:Vt(),status:"active"}),await Ny(En(qe,iB),{serial:n,scannedAt:Vt(),userAgent:navigator.userAgent||null})}function Hb(){const[n,e]=N.useState([]);return N.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,a)=>({id:a,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>c.jsx(Ee.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const B_={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function cB({kinderbuck:n}){const e=B_[n.denomination]||B_[5];return c.jsxs(Ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[c.jsxs(Ee.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[c.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),c.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),c.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:c.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[c.jsxs("p",{children:["Status: ",c.jsx("strong",{children:n.status})]}),n.issuedAt&&c.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),c.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),c.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:c.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function uB(){const{serial:n}=J_(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null);return N.useEffect(()=>{async function f(){try{const d=await sB(n);d?(t(d),await lB(n)):l("not_found")}catch(d){console.error("Verification error:",d),l("error")}finally{s(!1)}}f()},[n]),r?c.jsxs("div",{className:"page page-center",children:[c.jsx(Ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),c.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):a==="not_found"?c.jsxs("div",{className:"page page-center",children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),c.jsxs("p",{children:["Serial ",c.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):a?c.jsxs("div",{className:"page page-center",children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),c.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):c.jsxs("div",{className:"page page-center",children:[c.jsx(Hb,{}),c.jsx(cB,{kinderbuck:e})]})}const g0="checkins",dB=3600*1e3;async function hB(n,e){var t;try{const r=new Date(Date.now()-dB),s=Is(En(qe,g0),qc("visitorId","==",n),qc("businessCode","==",e)),a=await yr(s);if(a.empty)return!1;for(const l of a.docs)if((((t=l.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function fB(n,e,t){await Ny(En(qe,g0),{visitorId:n,businessCode:e,timestamp:Vt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function pB(n){try{const e=Is(En(qe,g0),qc("businessCode","==",n));return(await yr(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,a)=>{var d,m,g,v;const l=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((v=(g=a.timestamp)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(0))-l}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}const F_={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function mB(){var V;const{businessCode:n}=J_(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null),[f,d]=N.useState(null),[m,g]=N.useState(!1),[v,_]=N.useState(!1);if(N.useEffect(()=>{async function B(){try{const P=await Ub(n);if(!P){l("not_found"),s(!1);return}if(!P.isActive){l("inactive"),s(!1);return}t(P);const G=Fh();if(await hB(G,n)){g(!0);const j=await Za(G);j&&d({tierChanged:!1,newTier:j.tier,businessesVisited:j.businessesVisited||[],totalCheckins:j.totalCheckins||0,isNewBusiness:!1}),s(!1);return}const H=await Za(G),A=(H==null?void 0:H.tier)||null,b=await Q6(G,n);await fB(G,n,b.newTier),await K6(n),d(b),b.tierChanged&&b.newTier&&_(!0),s(!1)}catch(P){console.error("Check-in error:",P),l("error"),s(!1)}}B()},[n]),r)return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx(Ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(Oy,{size:48,color:"var(--kb-navy)"})}),c.jsx("p",{style:{marginTop:"1rem",color:"#5a6c7d"},children:"Checking in..."})]});if(a==="not_found")return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Business Not Found"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"This check-in code doesn't match any participating business."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a==="inactive")return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#e67e22"},children:"Business Not Active"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"This business is not currently participating in Kinderhooker."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a)return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Something went wrong"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"Please try scanning again."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});const T=(f==null?void 0:f.newTier)||"curious",k=Jn[T],C=((V=f==null?void 0:f.businessesVisited)==null?void 0:V.length)||0,I=m0(C);return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh",padding:"2rem"},children:[v&&c.jsx(Hb,{}),c.jsxs(Ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},style:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"400px",width:"100%",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[m?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(Ya,{size:32,color:"var(--kb-gray-500)"})}),c.jsx("h2",{style:{color:"#5a6c7d",marginBottom:"0.5rem"},children:"Already Checked In!"}),c.jsxs("p",{style:{color:"#888",marginBottom:"1.5rem"},children:["You visited ",c.jsx("strong",{children:e.name})," recently.",c.jsx("br",{}),"Come back in an hour for another check-in!"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs(Ee.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"#d4edda",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.5rem"},children:c.jsx(Gc,{size:28,color:"var(--kb-green)"})}),c.jsxs("h2",{style:{color:"#1a5f2a",marginBottom:"0.5rem"},children:["Welcome to ",e.name,"!"]}),c.jsx("p",{style:{color:"#5a6c7d",marginBottom:"1.5rem"},children:"Check-in recorded!"})]}),(f==null?void 0:f.tierChanged)&&(f==null?void 0:f.newTier)&&c.jsxs(Ee.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},style:{background:k.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=F_[T]||Xt;return c.jsx(B,{size:32,color:k.color,strokeWidth:1.5})})()}),c.jsx("div",{style:{color:k.color,fontWeight:"bold",fontSize:"1.2rem"},children:f.oldTier?"NEW TIER UNLOCKED!":"WELCOME, KINDERHOOKER!"}),c.jsx("div",{style:{color:k.color,fontSize:"1.5rem",fontWeight:"bold"},children:k.name})]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},style:{background:k.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=F_[T]||Xt;return c.jsx(B,{size:40,color:k.color,strokeWidth:1.5})})()}),c.jsx("div",{style:{color:k.color,fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px"},children:k.name}),c.jsxs("div",{style:{color:"#5a6c7d",fontSize:"0.9rem",marginTop:"0.5rem"},children:[Math.round(k.bonus*100),"% Kinderbuck Match Bonus"]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[c.jsxs("p",{style:{color:"#2c3e50",marginBottom:"0.5rem"},children:["You've visited ",c.jsx("strong",{children:C})," business",C!==1?"es":""]}),I.nextTier&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{background:"#e0e0e0",borderRadius:"10px",height:"20px",overflow:"hidden",marginBottom:"0.5rem"},children:c.jsx(Ee.div,{initial:{width:0},animate:{width:`${I.progress}%`},transition:{delay:.7,duration:.5},style:{background:`linear-gradient(90deg, ${k.color}, ${I.nextTier.color})`,height:"100%",borderRadius:"10px"}})}),c.jsxs("p",{style:{color:"#5a6c7d",fontSize:"0.85rem"},children:[I.remaining," more to reach ",c.jsx("strong",{style:{color:I.nextTier.color},children:I.nextTier.name}),"!"]})]}),!I.nextTier&&c.jsxs("p",{style:{color:"#c9a227",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/profile",className:"btn",style:{background:"#1a5f2a"},children:"View My Profile"}),c.jsx(ue,{to:"/",className:"btn btn-secondary",children:"Home"})]})]})]})}function gB(){const{profile:n}=No(),[e,t]=N.useState(null),[r,s]=N.useState([]),[a,l]=N.useState(!0),[f,d]=N.useState(!1),[m,g]=N.useState(!1);N.useEffect(()=>{async function I(){if(!(n!=null&&n.businessCode)){l(!1);return}const[V,B]=await Promise.all([Ub(n.businessCode),pB(n.businessCode)]);t(V),s(B),l(!1)}I()},[n==null?void 0:n.businessCode]);const v=()=>{const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(I),g(!0),setTimeout(()=>g(!1),2e3)},_=r.filter(I=>{var P;const V=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp),B=new Date;return V.toDateString()===B.toDateString()}).length,T=r.filter(I=>{var P;const V=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp),B=new Date;return B.setDate(B.getDate()-7),V>B}).length,k=new Set(r.map(I=>I.visitorId)).size;if(a)return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),c.jsx(Xn,{})]});if(!(n!=null&&n.businessCode))return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[c.jsx(Qt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),c.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),c.jsx(Xn,{})]});const C=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"2rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Dashboard"}),c.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage your Kinderbucks check-ins"})]}),c.jsxs("button",{onClick:()=>d(!f),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18}),f?"Hide QR Code":"Show QR Code"]})]})}),f&&c.jsx(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card",style:{marginBottom:"2rem",padding:"2rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{textAlign:"center"},children:c.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",display:"inline-block"},children:c.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"16px"},children:[c.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),c.jsx(eu,{value:C,size:150,denomination:1,showFrame:!1}),c.jsx("div",{style:{marginTop:"8px",fontWeight:"600",color:"var(--kb-navy)"},children:e==null?void 0:e.name})]})})}),c.jsxs("div",{style:{flex:1,minWidth:"250px"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Display This QR Code"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Print and display this QR code at your counter. Customers can scan it with their phone to check in and build their Kinderhooker status."}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("input",{type:"text",value:C,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),c.jsxs("button",{onClick:v,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m?c.jsx(Cs,{size:16}):c.jsx($T,{size:16}),m?"Copied!":"Copy"]})]})]}),c.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(WT,{size:18})," Print QR Code"]})]})]})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(pl,{size:24,color:"var(--kb-green)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Total Check-ins"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Ya,{size:24,color:"#3498db"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:_}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Today"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(My,{size:24,color:"#9b59b6"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:T}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"This Week"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Si,{size:24,color:"var(--kb-gold-dark)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:k}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Unique Visitors"})]})]})})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ya,{size:20})," Recent Check-ins"]}),r.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No check-ins yet"}),c.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,20).map((I,V)=>{var P;const B=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp);return c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Cs,{size:18,color:"white"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:I.tier&&`${I.tier} member`})]})]}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:B.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},I.id||V)})})]})]})}),c.jsx(Xn,{})]})}function Vn({children:n,title:e}){const t=er(),r=nu(),{user:s,profile:a,isAdmin:l}=No(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:ZV},{to:"/admin/exchanges",label:"Exchanges",Icon:hf},{to:"/admin/members",label:"Members",Icon:Si},{to:"/admin/generate",label:"Generate QR",Icon:xs},{to:"/admin/issue",label:"Issue Currency",Icon:Ah},{to:"/admin/businesses",label:"Businesses",Icon:Qt},{to:"/admin/users",label:"User Management",Icon:Rh}],d=async()=>{await LT(),r("/")},m=g=>t.pathname===g;return c.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[c.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[c.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),c.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),c.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>c.jsxs(ue,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[c.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),c.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&c.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(a==null?void 0:a.displayName)||s.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(a==null?void 0:a.role)||"member"})]}),c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[c.jsx(XV,{size:18}),"Back to Site"]}),s&&c.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[c.jsx(ng,{size:18}),"Sign Out"]})]})]}),c.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[c.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:c.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),c.jsx("div",{style:{padding:"2rem"},children:n})]}),c.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function yB(){const[n,e]=N.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=N.useState([]),[s,a]=N.useState({}),[l,f]=N.useState(!0);N.useEffect(()=>{async function m(){try{const g=await Wb(),v=g.filter(A=>A.status==="issued"||A.status==="active"),_={};v.forEach(A=>{const b=A.denomination||0;_[b]=(_[b]||0)+1}),a(_);const T=await Do(),k=T.filter(A=>A.isActive),C=T.reduce((A,b)=>A+(b.checkinCount||0),0),I=Is(En(qe,"exchanges"),qc("status","==","pending"),Qa("createdAt","desc")),B=(await yr(I)).docs.map(A=>({id:A.id,...A.data()})),P=B.reduce((A,b)=>A+(b.kinderbucksAmount||0),0),G=Is(En(qe,"exchanges"),Qa("createdAt","desc"),rV(5)),$=await yr(G);r($.docs.map(A=>({id:A.id,...A.data()})));const H=await yr(En(qe,"members"));e({totalCurrency:g.length,inCirculation:v.length,circulationValue:v.reduce((A,b)=>A+(b.denomination||0),0),pendingExchanges:B.length,pendingValue:P,totalMembers:H.size,activeBusinesses:k.length,totalCheckins:C}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:v,subtext:_,color:T,to:k})=>c.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),c.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:T||"var(--kb-navy)"},children:v}),_&&c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:_})]}),c.jsx("div",{style:{width:"48px",height:"48px",background:`${T||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(m,{size:24,color:T||"var(--kb-navy)"})})]}),k&&c.jsx(ue,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return l?c.jsx(Vn,{title:"Dashboard",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):c.jsxs(Vn,{title:"Dashboard",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[c.jsx(d,{icon:Vy,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),c.jsx(d,{icon:Ya,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),c.jsx(d,{icon:Si,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),c.jsx(d,{icon:Qt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),c.jsx(ue,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,v,_,T;return c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?c.jsx(Cs,{size:18,color:"var(--kb-green)"}):m.status==="pending"?c.jsx(Ya,{size:18,color:"#e67e22"}):c.jsx(Ly,{size:18,color:"var(--kb-gray-400)"}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((T=(_=(v=m.createdAt)==null?void 0:v.toDate)==null?void 0:_.call(v))==null?void 0:T.toLocaleDateString())||"Pending"})]})]}),c.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,v=Math.max(...Object.values(s),1),_=g/v*100,T={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),c.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),c.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:c.jsx("div",{style:{width:`${_}%`,height:"100%",background:T[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),c.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs(ue,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18})," Generate QR Codes"]}),c.jsxs(ue,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ah,{size:18})," Issue Currency"]}),c.jsxs(ue,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(hf,{size:18})," Process Exchanges"]})]})]})]})}function vB(){const[n,e]=N.useState({start:1,end:100}),[t,r]=N.useState(5),[s,a]=N.useState([]),[l,f]=N.useState(!1),[d,m]=N.useState(!1),g=()=>{const k=[];for(let C=n.start;C<=n.end;C++)k.push(`KB-${String(C).padStart(4,"0")}`);a(k),m(!1)},v=async()=>{f(!0);try{await oB(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}f(!1)},_="https://harmonicsystems.github.io/kinderbucks/#/scan/",T={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return c.jsxs(Vn,{title:"Generate QR Codes",children:[c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:20})," Generation Settings"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),c.jsx("input",{type:"number",value:n.start,onChange:k=>e(C=>({...C,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),c.jsx("input",{type:"number",value:n.end,onChange:k=>e(C=>({...C,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),c.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[c.jsx("option",{value:1,children:"$1"}),c.jsx("option",{value:5,children:"$5"}),c.jsx("option",{value:10,children:"$10"}),c.jsx("option",{value:20,children:"$20"})]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18})," Generate ",n.end-n.start+1," Codes"]}),c.jsxs("div",{style:{padding:"0.75rem 1rem",background:T[t].bg,borderRadius:"8px",color:T[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[c.jsx(Cs,{size:18})," Saved!"]}):c.jsxs("button",{className:"btn btn-gold",onClick:v,disabled:l,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(wM,{size:18}),l?"Saving...":"Save to Database"]}),c.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(mM,{size:18})," Print"]})]})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>c.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[c.jsx(eu,{value:`${_}${k}`,size:140,denomination:t}),c.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&c.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&c.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[c.jsx(xs,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),c.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),c.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function xB(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState([]),[l,f]=N.useState(""),[d,m]=N.useState(!1),[g,v]=N.useState(0),_=async()=>{const A=await Wb();e(A.filter(b=>b.status==="draft"||b.status==="issued")),r(!1)};N.useEffect(()=>{_()},[]);const T=A=>{a(b=>b.includes(A)?b.filter(j=>j!==A):[...b,A])},k=()=>{const A=V.map(b=>b.serial);a(A)},C=()=>{a([])},I=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await aB(A,"issued",l);v(s.length),a([]),f(""),await _(),setTimeout(()=>v(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},V=n.filter(A=>A.status==="draft"),B=n.filter(A=>A.status==="issued"),P=s.reduce((A,b)=>{const j=n.find(L=>L.serial===b);return A+((j==null?void 0:j.denomination)||0)},0),$=(A=>{const b={1:[],5:[],10:[],20:[]};return A.forEach(j=>{const L=j.denomination||5;b[L]&&b[L].push(j)}),b})(V),H={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?c.jsx(Vn,{title:"Issue Currency",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"Issue Currency",children:[g>0&&c.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[c.jsx(Cs,{size:20}),c.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ah,{size:20})," Issue to Circulation"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),c.jsx("input",{type:"text",value:l,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),c.jsxs("button",{className:"btn btn-gold",onClick:I,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[c.jsx(Ah,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&c.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",P]})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:V.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:B.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(yw,{size:20})," Available to Issue (",V.length,")"]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),c.jsx("button",{className:"btn btn-secondary",onClick:C,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),V.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(yw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No draft Kinderbucks available."}),c.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):c.jsx("div",{children:[1,5,10,20].map(A=>{const b=$[A];return b.length===0?null:c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[c.jsxs("div",{style:{width:"24px",height:"24px",background:H[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",b.length,")"]}),c.jsx("button",{onClick:()=>{const j=b.map(O=>O.serial),L=j.every(O=>s.includes(O));a(L?O=>O.filter(W=>!j.includes(W)):O=>[...new Set([...O,...j])])},style:{background:"none",border:"none",color:H[A],cursor:"pointer",fontSize:"0.85rem"},children:b.every(j=>s.includes(j.serial))?"Deselect all":"Select all"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:b.map(j=>{const L=s.includes(j.serial);return c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:L?`${H[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:L?`2px solid ${H[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[L?c.jsx(PM,{size:18,color:H[A]}):c.jsx(NM,{size:18,color:"var(--kb-gray-400)"}),c.jsx("input",{type:"checkbox",checked:L,onChange:()=>T(j.serial),style:{display:"none"}}),c.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:L?H[A]:"var(--kb-gray-600)",fontWeight:L?"600":"400"},children:j.serial})]},j.serial)})})]},A)})})]})]})}const wB=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"BROOKLYN-PIZZA",name:"The Brooklyn Pizzeria",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"HAMRAHS",name:"Hamrah's Lebanese Foods",category:"food"},{code:"OK-PANTRY",name:"OK Pantry",category:"retail"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"BOOKS",name:"Kinderhook Books",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"SEPTEMBER",name:"September Gallery",category:"arts"},{code:"OLD-DUTCH",name:"Old Dutch Inn",category:"services"},{code:"MUSE",name:"Muse Aesthetics",category:"services"},{code:"PILATES",name:"Julia Jayne Pilates",category:"services"},{code:"HISTORICAL",name:"Columbia County Historical Society",category:"arts"}],km={food:{label:"Food & Drink",Icon:GT,color:"#e74c3c"},retail:{label:"Retail",Icon:qT,color:"#9b59b6"},services:{label:"Services",Icon:FT,color:"#3498db"},arts:{label:"Arts & Culture",Icon:KT,color:"#1abc9c"}};function _B(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState({code:"",name:"",category:"food"}),[l,f]=N.useState(!1),[d,m]=N.useState(null),[g,v]=N.useState(!1),[_,T]=N.useState(null),k=async()=>{const $=await Do();e($),r(!1)};N.useEffect(()=>{k()},[]);const C=async $=>{if($.preventDefault(),!(!s.code||!s.name)){f(!0);try{await M_(s.code.toUpperCase(),s.name,s.category),a({code:"",name:"",category:"food"}),await k()}catch(H){console.error("Error creating business:",H),alert("Error creating business")}f(!1)}},I=async($,H)=>{await q6($,!H),await k()},V=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){v(!0);try{for(const $ of wB)n.find(A=>A.code===$.code)||await M_($.code,$.name,$.category);await k(),alert("Businesses seeded successfully!")}catch($){console.error("Error seeding:",$),alert("Error seeding businesses")}v(!1)}},B=$=>{navigator.clipboard.writeText($),T($),setTimeout(()=>T(null),2e3)},P="https://harmonicsystems.github.io/kinderbucks/#/checkin/",G={total:n.length,active:n.filter($=>$.isActive).length,totalCheckins:n.reduce(($,H)=>$+(H.checkinCount||0),0)};return t?c.jsx(Vn,{title:"Business Directory",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"Business Directory",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.active}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:G.totalCheckins}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(vw,{size:20})," Add Business"]}),c.jsxs("form",{onSubmit:C,children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),c.jsx("input",{type:"text",value:s.code,onChange:$=>a(H=>({...H,code:$.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),c.jsx("input",{type:"text",value:s.name,onChange:$=>a(H=>({...H,name:$.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),c.jsx("select",{value:s.category,onChange:$=>a(H=>({...H,category:$.target.value})),style:{width:"100%"},children:Object.entries(km).map(([$,H])=>c.jsx("option",{value:$,children:H.label},$))})]})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(vw,{size:18})," ",l?"Adding...":"Add Business"]}),c.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(WT,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Qt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map($=>{const H=km[$.category]||km.services,A=H.Icon,b=`${P}${$.code}`;return c.jsxs("div",{style:{background:$.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${$.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:$.isActive?1:.7},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:`${H.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(A,{size:24,color:H.color})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",color:$.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:$.name}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[c.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:$.code}),c.jsx("span",{style:{fontSize:"0.85rem",color:H.color},children:H.label})]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[c.jsx(pl,{size:16}),$.checkinCount||0]}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>m(d===$.code?null:$.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:c.jsx(xs,{size:16})}),c.jsxs("button",{onClick:()=>I($.code,$.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:$.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[$.isActive?c.jsx(FM,{size:16}):c.jsx(OM,{size:16}),$.isActive?"Deactivate":"Activate"]})]})]})]}),d===$.code&&c.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{textAlign:"center"},children:c.jsx(eu,{value:b,size:150,denomination:5,showFrame:!1})}),c.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("input",{type:"text",value:b,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),c.jsxs("button",{onClick:()=>B(b),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx($T,{size:16}),_===b?"Copied!":"Copy"]})]}),c.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},$.code)})})]})]})}const EB={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function kB(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all"),[l,f]=N.useState(null),d=async()=>{try{const k=Is(En(qe,"exchanges"),Qa("createdAt","desc")),C=await yr(k);e(C.docs.map(I=>({id:I.id,...I.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};N.useEffect(()=>{d()},[]);const m=async(k,C)=>{f(k);try{await Gr(zt(qe,"exchanges",k),{status:C,processedAt:Vt()}),await d()}catch(I){console.error("Error updating exchange:",I),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(k=>k.status===s),v={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,C)=>k+(C.kinderbucksAmount||0),0)},_=k=>{switch(k){case"completed":return c.jsx(Cs,{size:18,color:"var(--kb-green)"});case"pending":return c.jsx(Ya,{size:18,color:"#e67e22"});case"cancelled":return c.jsx(VV,{size:18,color:"#e74c3c"});default:return c.jsx(Ly,{size:18,color:"var(--kb-gray-400)"})}},T=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?c.jsx(Vn,{title:"Exchange Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):c.jsxs(Vn,{title:"Exchange Management",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:v.pending}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:v.completed}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",v.totalValue.toFixed(0)]}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${v.total})`},{value:"pending",label:`Pending (${v.pending})`},{value:"completed",label:`Completed (${v.completed})`},{value:"cancelled",label:`Cancelled (${v.cancelled})`}].map(k=>c.jsx("button",{onClick:()=>a(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),c.jsx("div",{className:"card",children:g.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(hf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):c.jsxs("div",{children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[c.jsx("div",{children:"Date"}),c.jsx("div",{children:"Amount"}),c.jsx("div",{children:"Tier & Bonus"}),c.jsx("div",{children:"Status"}),c.jsx("div",{children:"Actions"})]}),g.map(k=>{var I,V,B,P,G,$,H;const C=EB[k.tier]||Xt;return c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((B=(V=(I=k.createdAt)==null?void 0:I.toDate)==null?void 0:V.call(I))==null?void 0:B.toLocaleDateString())||"Unknown"}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(G=(P=k.createdAt)==null?void 0:P.toDate)==null?void 0:G.call(P))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),c.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(H=k.kinderbucksAmount)==null?void 0:H.toFixed(2)," KB"]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(C,{size:18,color:"var(--kb-gray-500)"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),c.jsx("div",{children:c.jsxs("span",{className:"badge",style:{...T(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[_(k.status),k.status]})}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:l===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:l===k.id?"...":"Approve"}),c.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:l===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&c.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&c.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:l===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const Tm={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},Sm={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function TB(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState("checkins"),[d,m]=N.useState("all");N.useEffect(()=>{async function k(){try{const I=(await yr(En(qe,"members"))).docs.map(B=>({id:B.id,...B.data()})),V=await Do();e(I),r(V),a(!1)}catch(C){console.error("Error loading members:",C),a(!1)}}k()},[]);const g=k=>{const C=t.find(I=>I.code===k);return C?C.name:k},v=[...n].sort((k,C)=>{var I,V,B,P,G,$;switch(l){case"checkins":return(C.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((I=C.businessesVisited)==null?void 0:I.length)||0)-(((V=k.businessesVisited)==null?void 0:V.length)||0);case"recent":const H=((P=(B=k.lastCheckin)==null?void 0:B.toDate)==null?void 0:P.call(B))||new Date(0);return((($=(G=C.lastCheckin)==null?void 0:G.toDate)==null?void 0:$.call(G))||new Date(0))-H;default:return 0}}),_=d==="all"?v:v.filter(k=>k.tier===d),T={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,C)=>k+(C.totalCheckins||0),0)};return s?c.jsx(Vn,{title:"Member Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):c.jsxs(Vn,{title:"Member Management",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:T.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Tm).map(([k,C])=>{var I;return c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(C,{size:20,color:Sm[k]}),c.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Sm[k]},children:T[k]})]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((I=Jn[k])==null?void 0:I.name)||k})]},k)})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Tm).map(([k,C])=>c.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:c.jsx(C,{size:16})},k))]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),c.jsxs("select",{value:l,onChange:k=>f(k.target.value),style:{padding:"0.5rem"},children:[c.jsx("option",{value:"checkins",children:"Most Check-ins"}),c.jsx("option",{value:"businesses",children:"Most Businesses"}),c.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),c.jsx("div",{className:"card",children:_.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No members found"})]}):c.jsxs("div",{children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[c.jsx("div",{children:"Member"}),c.jsx("div",{children:"Tier"}),c.jsx("div",{children:"Activity"}),c.jsx("div",{children:"Businesses Visited"})]}),_.map(k=>{var P,G,$,H,A;const C=Tm[k.tier]||Xt,I=Sm[k.tier]||"#888",V=Jn[k.tier]||Jn.curious,B=((P=k.businessesVisited)==null?void 0:P.length)||0;return c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[c.jsx(My,{size:12}),"Last: ",((H=($=(G=k.lastCheckin)==null?void 0:G.toDate)==null?void 0:$.call(G))==null?void 0:H.toLocaleDateString())||"Unknown"]})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:I,fontWeight:"600"},children:[c.jsx(C,{size:20}),V.name]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(V.bonus*100),"% bonus"]})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(pl,{size:16}),k.totalCheckins||0]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[c.jsx(Pc,{size:14}),c.jsx("span",{style:{fontWeight:"500"},children:B}),c.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(b=>c.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(b)},b)),k.businessesVisited.length>3&&c.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),c.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",c.jsx("strong",{children:T.totalCheckins})," check-ins across ",c.jsx("strong",{children:T.total})," members"]})]})}const bm={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Rh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Qt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:Oa,description:"Regular member"}};function SB(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState(""),[d,m]=N.useState("all"),[g,v]=N.useState(null),[_,T]=N.useState(null),[k,C]=N.useState(""),I=async()=>{const[H,A]=await Promise.all([pV(),Do()]);e(H),r(A),a(!1)};N.useEffect(()=>{I()},[]);const V=async(H,A)=>{try{await hV(H,A),C("Role updated successfully"),setTimeout(()=>C(""),3e3),await I(),v(null)}catch(b){console.error("Error updating role:",b),alert("Error updating role")}},B=async(H,A)=>{try{await fV(H,A),C("Business assigned successfully"),setTimeout(()=>C(""),3e3),await I(),T(null)}catch(b){console.error("Error assigning business:",b),alert("Error assigning business")}},P=n.filter(H=>{var j,L;const A=((j=H.email)==null?void 0:j.toLowerCase().includes(l.toLowerCase()))||((L=H.displayName)==null?void 0:L.toLowerCase().includes(l.toLowerCase())),b=d==="all"||H.role===d;return A&&b}),G={total:n.length,admins:n.filter(H=>H.role==="admin").length,businesses:n.filter(H=>H.role==="business").length,members:n.filter(H=>H.role==="member").length},$=H=>H?(H.toDate?H.toDate():new Date(H)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?c.jsx(Vn,{title:"User Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"User Management",children:[k&&c.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[c.jsx(Cs,{size:20}),c.jsx("span",{children:k})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:G.admins}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:G.businesses}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.members}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),c.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[c.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[c.jsx(EM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"text",placeholder:"Search by name or email...",value:l,onChange:H=>f(H.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),c.jsxs("select",{value:d,onChange:H=>m(H.target.value),style:{minWidth:"150px"},children:[c.jsx("option",{value:"all",children:"All Roles"}),c.jsx("option",{value:"admin",children:"Admins"}),c.jsx("option",{value:"business",children:"Businesses"}),c.jsx("option",{value:"member",children:"Members"})]})]})}),c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Si,{size:20})," All Users (",P.length,")"]}),P.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No users found"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:P.map(H=>{const A=bm[H.role]||bm.member,b=A.Icon;return c.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(b,{size:24,color:A.color})}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[H.displayName||"Unnamed User",H.role==="admin"&&c.jsx(Ln,{size:16,color:"#c9a227"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[c.jsx(HT,{size:14}),H.email]}),H.businessCode&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[c.jsx(Qt,{size:14}),H.businessCode]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[c.jsx(My,{size:14}),$(H.lastLogin)]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:()=>v(g===H.id?null:H.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:c.jsx(qV,{size:18})}),g===H.id&&c.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[c.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(bm).map(([j,L])=>c.jsxs("button",{onClick:()=>V(H.id,j),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:H.role===j?L.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[c.jsx(L.Icon,{size:16,color:L.color}),L.label,H.role===j&&c.jsx(Cs,{size:14,color:L.color,style:{marginLeft:"auto"}})]},j)),H.role==="business"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),c.jsxs("button",{onClick:()=>{v(null),T(H.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[c.jsx(Qt,{size:16}),"Assign Business"]})]})]})]})]})]})},H.id)})})]}),_&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),c.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(H=>c.jsxs("button",{onClick:()=>B(_,H.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[c.jsx(Qt,{size:18,color:"var(--kb-navy)"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:H.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:H.code})]})]},H.code))}),c.jsx("button",{onClick:()=>T(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}function bB(){return c.jsx(gV,{children:c.jsx(AC,{children:c.jsxs(sC,{children:[c.jsx(St,{path:"/",element:c.jsx(A6,{})}),c.jsx(St,{path:"/about",element:c.jsx($6,{})}),c.jsx(St,{path:"/benefits",element:c.jsx(H6,{})}),c.jsx(St,{path:"/businesses",element:c.jsx(G6,{})}),c.jsx(St,{path:"/exchange",element:c.jsx(X6,{})}),c.jsx(St,{path:"/login",element:c.jsx(eB,{})}),c.jsx(St,{path:"/account",element:c.jsx(J6,{})}),c.jsx(St,{path:"/profile",element:c.jsx(Z6,{})}),c.jsx(St,{path:"/card",element:c.jsx(rB,{})}),c.jsx(St,{path:"/scan/:serial",element:c.jsx(uB,{})}),c.jsx(St,{path:"/checkin/:businessCode",element:c.jsx(mB,{})}),c.jsx(St,{path:"/business/dashboard",element:c.jsx(as,{allowedRoles:["business","admin"],children:c.jsx(gB,{})})}),c.jsx(St,{path:"/admin/dashboard",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(yB,{})})}),c.jsx(St,{path:"/admin/exchanges",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(kB,{})})}),c.jsx(St,{path:"/admin/members",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(TB,{})})}),c.jsx(St,{path:"/admin/generate",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(vB,{})})}),c.jsx(St,{path:"/admin/issue",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(xB,{})})}),c.jsx(St,{path:"/admin/businesses",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(_B,{})})}),c.jsx(St,{path:"/admin/users",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(SB,{})})})]})})})}a2.createRoot(document.getElementById("root")).render(c.jsx(N.StrictMode,{children:c.jsx(bB,{})}));
